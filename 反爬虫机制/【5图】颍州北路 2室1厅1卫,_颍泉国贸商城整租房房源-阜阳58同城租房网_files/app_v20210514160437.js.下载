(function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s="ebvu")})({"+6pO":function(e,t,n){n("mmui");var i=n("oWnS");e.exports=i("String").trim},"+LQf":function(e,t,n){var i=n("pevS"),a=n("mIMY"),r=n("zJQS"),o=n("b42z"),s=n("39uu"),c=n("SJYm"),l=n("6dl6"),u=n("Bvq2"),d=a("Reflect","construct"),p=u((function(){function e(){}return!(d((function(){}),[],e)instanceof e)})),f=!u((function(){d((function(){}))})),m=p||f;i({target:"Reflect",stat:!0,forced:m,sham:m},{construct:function(e,t){r(e),o(t);var n=arguments.length<3?e:r(arguments[2]);if(f&&!p)return d(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var i=[null];return i.push.apply(i,t),new(l.apply(e,i))}var a=n.prototype,u=c(s(a)?a:Object.prototype),m=Function.apply.call(e,u,t);return s(m)?m:u}})},"+LWe":function(e,t){var n='<li class="im-msg im-msg-remind"> <div class=im-msg-main> <div class=im-msg-remind-body> <div class=im-msg-remind-title> <div class=im-msg-remind-avatar> <img> </div> <span class=im-msg-remind-text></span> </div> <div class=im-msg-remind-time> <span class=im-msg-remind-label>时间：</span><span class=im-msg-remind-text></span> </div> <div class=im-msg-content> <span class=im-msg-remind-label>内容：</span><span class=im-msg-remind-content></span> </div> <div class=im-msg-remind-words> <span class=im-msg-remind-label>留言：</span><span class=im-msg-remind-text></span> </div> </div> <div class=im-msg-remind-foot> <i class=im-msg-remind-foot-icon></i> 来自微聊提醒 </div> </div> </li>';e.exports=n},"+M1K":function(e,t,n){var i=n("ppGB");e.exports=function(e){var t=i(e);if(t<0)throw RangeError("The argument can't be less than 0");return t}},"+a4k":function(e,t,n){var i=n("G9WS"),a=i(n("/FZm")),r=i(n("rPUy")),o=n("5m4N"),s=n("eBtS"),c=n("gH1P"),l=n("/Pub"),u=n("sfi9"),d=(n("exIe"),function(e){(function(t){var n={template:c};s.extend(n,e),o.call(t,n)})(this),this._rendered=!1});d.prototype=(0,r.default)(o.prototype),d.prototype.renderContent=function(){var e,t,n,i=this,r=i._data.msg,o=r.content,s=(0,a.default)(e=i._element).call(e,".im-msg-main"),c=(0,a.default)(t=i._element).call(t,".im-msg-duration"),d=15+5*o.duration,p=(0,a.default)(s).call(s,".im-msg-content");(o.duration>=60?(p.addClass("im-audio-60"),d=280):o.duration>=30&&(p.addClass("im-audio-30"),d=200),d=d<=165?90:d,s.width(d),c.text(o.duration+"秒"),r.play_time+""!=="0")&&(0,a.default)(n=i._element).call(n,".im-msg-read-status").addClass("im-audio-read");s.click((function(){var e;0===(0,a.default)(e=i._element).call(e,".im-audio-playing").length?l.dispatch({type:u.MSG_AUDIO_READ,data:r}):l.dispatch({type:u.MSG_AUDIO_READ_END,data:r})})),l.register((function(e){var t,n,o,s;if(e.data&&e.type&&e.data.msg_id&&i._element)if(e.data.msg_id===r.msg_id)switch(e.type){case u.MSG_AUDIO_ACK_READ:(0,a.default)(t=i._element).call(t,".im-msg-read-status").addClass("im-audio-read");break;case u.MSG_AUDIO_READ_START:(0,a.default)(n=i._element).call(n,".im-msg-content").addClass("im-audio-playing");break;case u.MSG_AUDIO_READ_END:(0,a.default)(o=i._element).call(o,".im-msg-content").removeClass("im-audio-playing");break;default:break}else e.type===u.MSG_AUDIO_READ_START&&(0,a.default)(s=i._element).call(s,".im-msg-content").removeClass("im-audio-playing")}))},e.exports=d},"+oHS":function(e,t,n){e.exports=n("XEyi")},"+qqD":function(e,t,n){var i=n("b42z"),a=n("ijsr");e.exports=function(e,t,n,r){try{return r?t(i(n)[0],n[1]):t(n)}catch(o){throw a(e),o}}},"/5b1":function(e,t,n){var i=n("GHVm"),a=n("gfA+"),r="["+a+"]",o=RegExp("^"+r+r+"*"),s=RegExp(r+r+"*$"),c=function(e){return function(t){var n=String(i(t));return 1&e&&(n=n.replace(o,"")),2&e&&(n=n.replace(s,"")),n}};e.exports={start:c(1),end:c(2),trim:c(3)}},"/EgQ":function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},"/FZm":function(e,t,n){e.exports=n("Kxu3")},"/GqU":function(e,t,n){var i=n("RK3t"),a=n("HYAF");e.exports=function(e){return i(a(e))}},"/Gw5":function(e,t,n){var i=n("J712");e.exports=i},"/HVM":function(e,t,n){n("UUWy"),n("Pkew");var i=n("C3ug");e.exports=i},"/JNE":function(e,t,n){"use strict";var i=n("pevS"),a=n("Bvq2"),r=n("YiBS"),o=n("39uu"),s=n("T/97"),c=n("ZyXh"),l=n("bBVJ"),u=n("Q0Rw"),d=n("nJYk"),p=n("A2Ma"),f=n("SqY4"),m=p("isConcatSpreadable"),_=9007199254740991,h="Maximum allowed index exceeded",g=f>=51||!a((function(){var e=[];return e[m]=!1,e.concat()[0]!==e})),v=d("concat"),y=function(e){if(!o(e))return!1;var t=e[m];return void 0!==t?!!t:r(e)},w=!g||!v;i({target:"Array",proto:!0,forced:w},{concat:function(e){var t,n,i,a,r,o=s(this),d=u(o,0),p=0;for(t=-1,i=arguments.length;t<i;t++)if(r=-1===t?o:arguments[t],y(r)){if(a=c(r.length),p+a>_)throw TypeError(h);for(n=0;n<a;n++,p++)n in r&&l(d,p,r[n])}else{if(p>=_)throw TypeError(h);l(d,p++,r)}return d.length=p,d}})},"/Pub":function(e,t,n){var i=n("80UC"),a=new i,r="whatever";e.exports={register:function(e){a.addEventListener(r,e)},unregister:function(e){a.removeEventListener(r,e)},dispatch:function(e){a.triggerEvent(r,e)}}},"/XSb":function(e,t){var n="<div class=im-notice> <div class=im-notice-content></div> <div class=im-notice-buttons></div> <div class=im-notice-close></div> </div> ";e.exports=n},"/b8u":function(e,t,n){var i=n("STAE");e.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},"/bov":function(e,t,n){var i,a,r=n("G9WS"),o=r(n("rPUy")),s=r(n("/FZm")),c=n("eBtS"),l=n("JVDe"),u=n("/Pub"),d=n("sfi9"),p=n("ZBY9"),f=function(){u.dispatch({type:d.VIDEO_PLAY_PASUED,data:i})},m=function(){u.dispatch({type:d.VIDEO_PLAY_END,data:i})},_=function(){this.show(),a[0].play(),u.dispatch({type:d.VIDEO_PLAY_START,data:i}),u.dispatch({type:d.FULLSCREEN_OPEN})},h=function(e){this.close();var t="未知错误!";if(e&&e.code){var n=["用户已终止视频请求","您的网络异常，请检查后重试","视频解码错误","视频已过期"];t=n[e.code-1]}u.dispatch({type:d.VIDEO_PLAY_ERROR,data:{msg:i,error:{error_code:e.code,error_msg:t}}})},g=function(e){(function(t){var n,i={template:p};c.extend(i,e),l.call(t,i),a=(0,s.default)(n=t._element).call(n,".im-video-player"),a[0].onended=function(){m()},a[0].onpause=function(){f()},a[0].oncanplay=function(){_.call(t)},a[0].onerror=function(){var e=a[0].error;h.call(t,e)},a[0].onclick=function(e){(e.offsetX<485||e.offsetY<378)&&(e.stopPropagation(),e.preventDefault(),a[0].paused?a[0].play():a[0].pause())}})(this),function(e){e._element.click((function(t){t.stopPropagation(),t.preventDefault(),e.close()}))}(this)};g.prototype=(0,o.default)(l.prototype),g.prototype.play=function(e){"string"===typeof e?a.attr("src",e):(i=e,a.attr("src",e.content.url))},g.prototype.stop=function(){a[0].paused||a[0].pause()},g.prototype.close=function(){this.stop(),this.hide(),u.dispatch({type:d.FULLSCREEN_CLOSE})},g.prototype.show=function(){this._element.show()},g.prototype.hide=function(){this._element.hide()},e.exports=g},"/byt":function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},"/fP4":function(e,t){var n="<div class=im-cwheader> <div class=im-contact-info> <span class=im-contact-name></span><span class=im-contact-num></span> <span class=im-contact-type></span> </div> <div class=im-cwheader-plugins> </div> </div> ";e.exports=n},"/m/+":function(e,t){var n='<li class=im-session> <div class=im-session-container> <div class=im-session-portrait> <img alt="" class="im-avatar im-session-img" crossorigin=anonymous> <p class=im-session-online-status></p> </div> <div class=im-session-user> <span class=im-session-username></span> <span class=im-shop-icon>商家聊天</span> <span class=im-msg-time></span> <span class=im-last-msg></span> <span class=im-silent-icon></span> <span class="im-session-msg-count im-hide"></span> </div> </div> </li> ';e.exports=n},"/qmn":function(e,t,n){var i=n("2oRo");e.exports=i.Promise},"04Ix":function(e,t,n){var i=n("hdMt");function a(e,t,n){return t in e?i(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.exports=a},"04M5":function(e,t,n){"use strict";var i=n("mIMY"),a=n("QYBB"),r=n("A2Ma"),o=n("wbIY"),s=r("species");e.exports=function(e){var t=i(e),n=a.f;o&&t&&!t[s]&&n(t,s,{configurable:!0,get:function(){return this}})}},"05Kj":function(e,t,n){var i=n("G9WS"),a=i(n("/FZm")),r=i(n("rPUy")),o=n("5m4N"),s=n("eBtS"),c=n("DY++"),l=n("Bboc"),u=function(e){(function(t){var n={template:c};s.extend(n,e),o.call(t,n)})(this),this._rendered=!1};u.prototype=(0,r.default)(o.prototype),u.prototype.renderContent=function(){var e,t="javascript:void(0)",n=this._data.msg,i=n.content,r=i.card_content_array,o=this._element,c=(0,a.default)(o).call(o,".card-header"),u=(0,a.default)(o).call(o,".card-list"),d=(0,a.default)(u).call(u,"script").html(),p=s("<div>");(0,a.default)(o).call(o,".im-msg-content").on("click","[href]",(function(e){e.preventDefault();var n=s(this).attr("href");n!=t&&l.openPage(n)})),(0,a.default)(e=c.attr({href:i.card_action_pc_url||t})).call(e,"img").attr({src:i.card_picture_url}),(0,a.default)(c).call(c,".img-title").text(i.card_title);for(var f=r.length,m=0;m<f;m++){var _=m===f-1?"last-item":"",h=r[m],g=!!h.card_sub_picture_url,v=s(d).attr({href:h.card_sub_action_pc_url||t}).addClass(_),y=(0,a.default)(v).call(v,".item-img");(0,a.default)(v).call(v,".item-title").text(h.card_sub_title),g?y.attr({src:h.card_sub_picture_url}):(v.addClass("no-img"),y.remove()),p.append(v)}u.html(p.html())},e.exports=u},"06Pm":function(e,t){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e.exports=n},"07d7":function(e,t,n){var i=n("AO7/"),a=n("busE"),r=n("sEFX");i||a(Object.prototype,"toString",r,{unsafe:!0})},"0BK2":function(e,t){e.exports={}},"0Dky":function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},"0GbY":function(e,t,n){var i=n("Qo9l"),a=n("2oRo"),r=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?r(i[e])||r(a[e]):i[e]&&i[e][t]||a[e]&&a[e][t]}},"0TkE":function(e,t,n){"use strict";var i=n("67WC"),a=n("tycR").find,r=i.aTypedArray,o=i.exportTypedArrayMethod;o("find",(function(e){return a(r(this),e,arguments.length>1?arguments[1]:void 0)}))},"0X2M":function(e,t,n){var i=n("xcSo"),a=Array.prototype;e.exports=function(e){var t=e.lastIndexOf;return e===a||e instanceof Array&&t===a.lastIndexOf?i:t}},"0axM":function(e,t){},"0eef":function(e,t,n){"use strict";var i={}.propertyIsEnumerable,a=Object.getOwnPropertyDescriptor,r=a&&!i.call({1:2},1);t.f=r?function(e){var t=a(this,e);return!!t&&t.enumerable}:i},"0lTi":function(e,t,n){e.exports=n("J9Gg")},"0rvr":function(e,t,n){var i=n("glrk"),a=n("O741");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,e.call(n,[]),t=n instanceof Array}catch(r){}return function(n,r){return i(n),a(r),t?e.call(n,r):n.__proto__=r,n}}():void 0)},"0zm+":function(e,t,n){var i=n("9EaA");e.exports=i},"14Sl":function(e,t,n){"use strict";n("rB9j");var i=n("busE"),a=n("0Dky"),r=n("tiKp"),o=n("kmMV"),s=n("kRJp"),c=r("species"),l=!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),d=r("replace"),p=function(){return!!/./[d]&&""===/./[d]("a","$0")}(),f=!a((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,d){var m=r(e),_=!a((function(){var t={};return t[m]=function(){return 7},7!=""[e](t)})),h=_&&!a((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[c]=function(){return n},n.flags="",n[m]=/./[m]),n.exec=function(){return t=!0,null},n[m](""),!t}));if(!_||!h||"replace"===e&&(!l||!u||p)||"split"===e&&!f){var g=/./[m],v=n(m,""[e],(function(e,t,n,i,a){return t.exec===o?_&&!a?{done:!0,value:g.call(t,n,i)}:{done:!0,value:e.call(n,t,i)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:p}),y=v[0],w=v[1];i(String.prototype,e,y),i(RegExp.prototype,m,2==t?function(e,t){return w.call(e,this,t)}:function(e){return w.call(e,this)})}d&&s(RegExp.prototype[m],"sham",!0)}},"1E5z":function(e,t,n){var i=n("m/L8").f,a=n("UTVS"),r=n("tiKp"),o=r("toStringTag");e.exports=function(e,t,n){e&&!a(e=n?e:e.prototype,o)&&i(e,o,{configurable:!0,value:t})}},"1Fqx":function(e,t,n){var i=n("G9WS"),a=i(n("Kwsy")),r=function(e){e=e||{},e.duration=e.duration||2e3,e.onElapsed=e.onElapsed||function(){},this._timer=null,this._options=e};r.prototype.setDuration=function(e){this._options.duration=e},r.prototype.start=function(){if(!this._timer){var e=this;(function t(){e._options.onElapsed((function(){e._timer=(0,a.default)((function(){t()}),e._options.duration)}))})()}},r.prototype.stop=function(){clearTimeout(this._timer),this._timer=null},r.prototype.restart=function(){this.stop(),this.start()},e.exports=r},"1WVj":function(e,t,n){var i=n("G9WS");n("07d7"),n("rB9j"),n("JfAA"),n("UxlC");var a=i(n("RXMP")),r=i(n("rPUy")),o=i(n("MAKL")),s=i(n("lHQ6")),c=i(n("eLKs")),l=i(n("M5Mt")),u=i(n("/FZm")),d=i(n("D3kx")),p=i(n("ZbhI")),f=n("eBtS"),m=n("aMtA"),_=n("JVDe"),h=n("QqFD"),g=n("bzSO"),v=n("MRo+"),y=n("SreQ"),w=n("kolJ"),b=n("ofWN"),x=n("05Kj"),S=n("fOAc"),k=n("CPVF"),E=n("k0EP"),C=n("VZgT"),A=n("+a4k"),O=n("EkzW"),T=n("c0ig"),M=n("Flhu"),I=n("91PM"),N=n("2Fwq"),L=n("75a5"),R=n("g/fi"),P=n("N5tY"),D=n("4M3F"),j=n("d1i8"),U=n("IjCq"),W=n("sfi9"),F=n("a/VA"),B=n("/Pub"),G=n("VRhk"),z=n("8e1d").strToNumCompare,V=n("Bboc"),H=V.isShopModeUser,Y=V.isEmpty,q=V.jsonHandler,K=["standard_evaluate_card1","standard_evaluate_card2"],J=F.non_contentmenu_show_types,X=F.non_multiple_selected_show_types,Z=F.non_delete_show_types,Q=function(e){var t,n;e=G["msg-show-converter"](e),"string"===typeof e.content&&(e.content=q.parse(e.content));var i=e.show_type;switch(!G["is_support_provide_contactinfo"]&&(0,p.default)(t=["provide_contactinfo_card","default_contactinfo_card"]).call(t,i)>=0&&(i=null),!G["is_support_forward"]&&(0,p.default)(n=["msg_batch_forward_card"]).call(n,i)>=0&&(i=null),i){case"audio":case"video":var a="video"===e.show_type?"视频":"语音";document.createElement("video").canPlayType||(e.show_type="text",e.content={type:"text",msg:"浏览器版本不支持"+a+"播放，请升级浏览器"});break;case"text":case"tip":case"modify_msg":case"auth_tip":case"operation_tip":case"card":case"minicard":case"universal_card1":case"universal_card2":case"universal_card3":case"mix":case"universal_card4":case"universal_card5":case"universal_card6":case"standard_evaluate_card1":case"standard_evaluate_card2":case"private_card_ganji":case"shop_common_card":case"wuba_card":case"file":case"false_msg":case"provide_contactinfo_card":case"default_contactinfo_card":break;case"msg_batch_forward_card":if(!Y(e.content)&&e.content.forward_one_by_one){var r=e.show_type,o=e.content;e.show_type=e.forward_msg_show_type,e.content=e.forward_msg_content,e.forward_original_show_type=r,e.forward_original_content=o}case"chat_card":break;case"location":e._original_show_type=e.show_type,e._original_content=e.content,e.show_type="text",e.content={type:"text",msg:"消息格式暂不支持，请在客户端查看"};break;case"call_audio":e.show_type="text",e.content={type:"text",msg:"[收到一条语音聊天消息，请在手机上查看]"};break;case"call_video":e.show_type="text",e.content={type:"text",msg:"[收到一条视频聊天消息，请在手机上查看]"};break;case"image":e.content.image_width=(0,d.default)(e.content.image_width),e.content.image_height=(0,d.default)(e.content.image_height);break;case"wechat_notice_card":break;default:e._original_show_type=e.show_type,e._original_content=e.content,e&&e.content&&e.content.common_default_text?(e.show_type="tip",e.content={type:"tip",text:e.content.common_default_text,extra:e.content.common_default_text}):(e.show_type="text",e.content={type:"text",msg:"消息格式暂不支持，请在客户端查看"});break}var s=G["me"](),c=s.user_id+"@"+s.user_source,l=e.to_id+"@"+e.to_source,u=e.sender_info?e.sender_info.user_id+"@"+e.sender_info.user_source:e.sender_id+"@"+e.sender_source;return c==u||H({user_source:e.sender_source})&&c!=u&&c!=l?e.is_mine=!0:e.is_mine=!1,e},$=function(e){e=Q(e);var t=null;switch(e.show_type){case"text":t=h,"1335147446749151232"===e.msg_id&&(e.show_type="wechat_notice_card",t=U);break;case"image":t=g;break;case"file":t=v;break;case"video":t=y;break;case"modify_msg":case"auth_tip":case"operation_tip":case"tip":t=w;break;case"card":t=b;break;case"minicard":case"universal_card2":t=C;break;case"audio":t=A;break;case"mix":case"universal_card1":case"universal_card3":t=O;break;case"universal_card4":t=x;break;case"universal_card5":t=S;break;case"universal_card6":t=T;break;case"standard_evaluate_card1":t=I;break;case"standard_evaluate_card2":t=M;break;case"private_card_ganji":t=k;break;case"wuba_card":t=E;break;case"shop_common_card":t=N;break;case"false_msg":t=L;break;case"provide_contactinfo_card":t=R;break;case"default_contactinfo_card":t=P;break;case"msg_batch_forward_card":t=D;break;case"chat_card":t=j;break;case"wechat_notice_card":t=U;default:break}return t},ee=function(e){var t=this,n=f(e.target);n.hasClass("im-msg")||(n=n.parents(".im-msg"));var i=n.data("msg-id");if(i){var a,r=t.createKey(i),o=t._children[r]&&t._children[r]._data?t._children[r]._data.msg:null;if(Y(o))return;if(!Y(o.status)&&"SUCCESS"!==o.status&&"DOWNLOADED"!==o.status)return;if((0,p.default)(X).call(X,o.show_type)>=0)return;e.stopPropagation(),e.preventDefault(),n.hasClass("im-msg-selected")?n.removeClass("im-msg-selected"):(0,u.default)(a=this._element).call(a,".im-msg-selected").length<50?n.addClass("im-msg-selected"):B.dispatch({type:W.TOAST_SHOW,data:{content:"最多选择50条消息",interval:3e3}})}},te=function(e){var t=this,n=$(e),i=null,a={};return n===g&&(a.onImageClick=function(){for(var n=-1,i=-1,a=[],r=0,o=t._msg_ids.length;r<o;r++){var s=t._msg_ids[r],c=t.createKey(s),l=t._children[c],u=l.getMsg();"image"==u.show_type&&(i++,a.push({src:u.content.url,image_width:u.content.image_width,image_height:u.content.image_height}),0==z(e.msg_id,u.msg_id)&&(n=i))}B.dispatch({type:W.IMAGE_CLICK,data:{images:a,current:n}})}),Y(t._options.me)||(a.me=t._options.me),a.multiple_selectable=n!==w,"function"===typeof n&&(i=new n(a),i.setMsg(e)),i},ne=function(e){var t,n=this,i=0,a=n._msg_sorttime.length,r={msg_id:e.msg_id,sort_time:e.sort_time};(f.each(n._msg_sorttime,(function(t,n){if(i=t,e.msg_id&&n.msg_id&&e.msg_id>0&&n.msg_id>0&&z(e.msg_id,n.msg_id)<0)return!1;e.msg_id&&n.msg_id&&0==z(e.msg_id,n.msg_id)&&e.sort_time<n.sort_time&&i--,t===a-1&&i++})),i<a)?(0,l.default)(t=n._msg_sorttime).call(t,i,0,r):n._msg_sorttime.push(r);return i},ie=function(e){(function(t){var n={template:m,onPositionChanged:function(){}};f.extend(n,e),_.call(t,n)})(this),function(e){e._msg_ids=[],e._msg_sorttime=[],e._last_timestamp,e._multiple_select=(0,c.default)(ee).call(ee,e)}(this),function(e){function t(n){var i=f(n.target);i.hasClass("im-menu-selection")||i.hasClass("im-content-menu")||(e.triggerEvent("contentMenuClose"),document.oncontextmenu=function(){return!0},f(document).off("mousedown",t))}e._element.mousedown((function(n){var i=f(n.target);if(3==n.which&&!e._options.multiple_select){var a=i.hasClass("im-msg-content")||i.parents(".im-msg-content")||i.parents(".im-chat-msg-contents"),r=i.data("msg-id")||i.parents(".im-msg-content").data("msg-id")||i.parents(".im-chat-msg-contents").data("msg-id");r=e.createKey(r);var c=e._children[r]&&e._children[r]._data?e._children[r]._data.msg:null;if(a&&r&&c){var l=(0,s.default)(((0,o.default)()-e._children[r]._data.msg.send_time)/1e3);if((0,p.default)(J).call(J,c.show_type)>=0)return;e._children[r]._data&&e._children[r]._data.msg&&(document.oncontextmenu=function(){return e.triggerEvent("contentMenuOpen",{position:{x:n.pageX,y:n.pageY},timeout:l>120,message:e._children[r]._data.msg,e:n}),f(document).on("mousedown",t),!1})}else document.oncontextmenu=function(){return!0};n.stopPropagation()}})),e._element.click((function(t){var n,i=f(t.target);if(e._options.multiple_select);else if((0,p.default)(n=["DIV","A","SPAN"]).call(n,t.target.tagName)>=0&&i.hasClass("im-msg-click")){var a=i.data("msg-id");a=e.createKey(a);var r=e._children[a];if(i.hasClass("im-msg-ai"))r&&e._options.onClick&&e._options.onClick(r);else if(i.hasClass("im-msg-action")){if(r){var o=i.data("index"),s=r._data.msg,c=s.content.actions;if(!isNaN(o)&&!Y(r._options.actions_map[o])&&"sendMsg"===r._options.actions_map[o].action)return void e.triggerEvent("sendMessage",{text:r._options.actions_map[o].actionData||r._options.actions_map[o].text});isNaN(o)||Y(r._options.actions_map[o])||"ajax"!==r._options.actions_map[o].action||(c=[{actionData:{url:r._options.actions_map[o].actionData,method:r._options.actions_map[o].actionPostData?"post":"get"},action:r._options.actions_map[o].action,actionPostData:r._options.actions_map[o].actionPostData,message:s}]),!Y(c)&&c.length&&B.dispatch({type:W.MSG_ACTION,data:{actionData:c[0].actionData,actionPostData:c[0].actionPostData,action:c[0].action,message:s}})}}else if(i.hasClass("im-false-click")&&r){s=r._data.msg;"audio"!==s.call_type&&"video"!==s.call_type||e.triggerEvent("falseMsgCall",s.call_type)}}else if(i.hasClass("im-msg-redit-content")&&!e._options.multiple_select){var l=i.data("redit-content");l&&e.triggerEvent("reditContent",{content:l})}}))}(this)};ie.prototype=(0,r.default)(_.prototype),ie.prototype.createKey=function(e){return e?"perm-"+e:"temp-"+e},ie.prototype.add=function(e){var t,n=e.send_time&&"0"!==e.send_time.toString()?e.send_time:(new Date).getTime(),i=e.msg_id;if(e.sort_time=n,i&&i>0){var a=this.createKey(i);if(this._children[a])return!1;if(t=te.call(this,e),!t)return!1;this._children[a]=t,this.setPosition(i);var r=ne.call(this,e);if(r<1)this._element.prepend(t.getElement());else{var o=this._msg_sorttime[r-1].msg_id,s=(a=this.createKey(o),this._children[a]);Y(s)||s.after(t)}}else{e.msg_id=e.temp_msg_id;a=this.createKey(e.msg_id);if(this._children[a])return this._children[a].setMsg(e),!1;if(t=te.call(this,e),!t)return!1;this._children[a]=t;r=ne.call(this,e);if(0===r)this._element.prepend(t.getElement());else{o=this._msg_sorttime[r-1].msg_id,a=this.createKey(o),s=this._children[a];s.after(t)}}return!0},ie.prototype.hideMsg=function(e,t){if(0===e.length)return null;for(var n=0,i=0;i<e.length;i++)if(key=this.createKey(e[i].msg_id),com=this._children[key],!Y(com)&&com._show){if(!0===com._data.msg.is_false_new&&e[i].send_time!==com._data.msg.send_time&&(!e[i]._deleted_send_time||!e[i]._deleted_send_time[com._data.msg.send_time]))continue;com._data&&com._data.msg&&com._data.msg.show_type&&(0,p.default)(Z).call(Z,com._data.msg.show_type)<0&&(com._data.msg.msg_status=2,com.hide(),n+=1),!0===com._data.msg.is_false_new&&this.remove(null,null,e[i].msg_id,!0)}t&&t(n)},ie.prototype.replace=function(e,t){var n,i=this,a=i.getReplaceMsg(e),r=G["me"]();r.user_id,r.user_source;if(a&&Y(a.original_content)&&a.is_mine&&(a.original_content=f.extend(!0,{},a.content)),!a)return t();var o=e.replace,s=o.content.text;a.show_type=o.show_type,a.content.type=o.show_type,a.content.text=s,a.temp_msg_id=a.msg_id,a.replace=e.replace,-1!==(0,p.default)(K).call(K,a.show_type)&&o&&(a.content.result=o.content.result,a.content.status=o.content.status);var c,u=a.send_time&&"0"!==a.send_time.toString()?a.send_time:(new Date).getTime(),d=a.msg_id;a.sort_time=u;var m=this.createKey(a.msg_id);if(c=te.call(this,a),!c)return!1;a.msg_status+""==="2"&&c.getElement().hide();var _=this.setReplacePosition(d,a);if(0==_){var h="undefined"!=typeof this._msg_sorttime[_-1]?this._msg_sorttime[_-1].msg_id:null,g="undefined"!=typeof this._msg_sorttime[_+1]?this._msg_sorttime[_+1].msg_id:null;i.remove(h,g,d),this._element.prepend(c.getElement())}else if(_>0){var v=this._msg_sorttime[_-1].msg_id,y=this.createKey(v),w=this._children[y];h="undefined"!=typeof this._msg_sorttime[_-1]?this._msg_sorttime[_-1].msg_id:null,g="undefined"!=typeof this._msg_sorttime[_+1]?this._msg_sorttime[_+1].msg_id:null;i.remove(h,g,d),w.after(c)}return(0,l.default)(n=i._msg_ids).call(n,_,0,a.msg_id),this._children[m]=c,t(),!0},ie.prototype.remove=function(e,t,n,i){for(var a=this._msg_ids.length,r=[],o=0;o<a;o++){var s=this._msg_ids[o];if(!Y(n)&&0==z(s,n)){var c=this.createKey(s);Y(this._children[c])||this._children[c].destroy(),delete this._children[c],r.push(o)}}a=r.length;for(var u=a-1;u>=0;u--){var d;(0,l.default)(d=this._msg_ids).call(d,r[u],1)}if(i)for(var p=0;p<this._msg_sorttime.length;p++){var f,m=this._msg_sorttime[p];if(!Y(n)&&0==z(m.msg_id,n))(0,l.default)(f=this._msg_sorttime).call(f,p,1),p--}},ie.prototype.setPosition=function(e){var t,n=0,i=this._msg_ids.length;(f.each(this._msg_ids,(function(t,a){if(n=t,z(e,a)<0)return!1;t===i-1&&n++})),n<i)?(0,l.default)(t=this._msg_ids).call(t,n,0,e):this._msg_ids.push(e);return n},ie.prototype.setReplacePosition=function(e,t){var n=this,i=-1;t.msg_id,t.sort_time;return f.each(n._msg_sorttime,(function(t,n){e==n.msg_id&&(i=t)})),i},ie.prototype.empty=function(){},ie.prototype.getOldMsg=function(){if(0===this._msg_ids.length)return null;var e=this.createKey(this._msg_ids[0]);return this._children[e]&&this._children[e].getMsg()},ie.prototype.getFreshMsg=function(e){if(0===this._msg_ids.length)return null;var t=this._msg_ids.length-1,n=this._msg_ids[t],i=this.createKey(n);if(e)return this._children[i]&&this._children[i].getMsg();var a=this._children[i]&&this._children[i].getMsg(),r=this;if(a&&a.is_false_new)for(a=null;t>0;t--)if(n=r._msg_ids[t],i=r.createKey(n),a=r._children[i]&&r._children[i].getMsg(),a){if(a.is_false_new){a=null;continue}break}return a},ie.prototype.getReplaceMsg=function(e){var t=e.replace;if(0===this._msg_ids.length)return null;var n=t.msg_id,i=this.createKey(n);return this._children[i]&&this._children[i].getMsg()},ie.prototype.updateMsg=function(e){if(!Y(e.content)&&e.content.forward_one_by_one){var t=e.show_type,n=e.content;e.show_type=e.forward_msg_show_type,e.content=e.forward_msg_content,e.forward_original_show_type=t,e.forward_original_content=n}if(e&&e.msg_id&&!e.temp_msg_id){if(o=this.createKey(e.msg_id||e.temp_msg_id),i=this._children[o],!i)return;i.setMsg(e)}else if(o=this.createKey(e.temp_msg_id),i=this._children[o],i&&(i.setMsg(e),e.msg_id)){var i;if(f.each(this._msg_sorttime,(function(t,n){n.msg_id&&n.msg_id.toString()===e.temp_msg_id.toString()&&(n.msg_id=e.msg_id,n.sort_time=e.send_time)})),e&&e.msg_id&&!e.temp_msg_id){if(o=this.createKey(e.msg_id||e.temp_msg_id),i=this._children[o],!i)return;return void i.setMsg(e)}if(o=this.createKey(e.temp_msg_id),i=this._children[o],!i)return;if(i.setMsg(e),e.msg_id){var a,r;if(f.each(this._msg_sorttime,(function(t,n){n.msg_id&&n.msg_id.toString()===e.temp_msg_id.toString()&&(n.msg_id=e.msg_id,n.sort_time=e.send_time)})),f.each(this._msg_ids,(function(t,n){if(n.toString()===e.temp_msg_id.toString())return a=t,!1})),!Y(a))(0,l.default)(r=this._msg_ids).call(r,a,1);delete this._children[o],e.temp_msg_id=e.msg_id;var o=this.createKey(e.msg_id);this._children[o]=i,this.setPosition(e.msg_id)}}},ie.prototype.updateMsgOtherRead=function(){var e=this;f.each(e._msg_sorttime,(function(t,n){var i=e.createKey(n.msg_id),a=e._children[i];if(a&&a._data&&a._data.msg&&a._data.msg.is_mine){var r=a._data.msg;a.setMsg(r)}}))},ie.prototype.freshenTime=function(){for(var e,t=this,n=0;n<t._msg_sorttime.length;n++){var i=t._msg_sorttime[n].msg_id,a=this.createKey(i);if(!Y(t._children[a])){var r=t._children[a].getMsg().send_time;0!==n?r-e>12e4?(t._children[a].showTime(),e=r):t._children[a].hideTime():(t._children[a].showTime(),e=r)}}},ie.prototype.isLastMsg=function(e){var t=this;return e===t._msg_ids[t._msg_ids.length-1]},ie.prototype.multiple_select=function(e){var t=this;t._options.multiple_select=!0,t.triggerEvent("multiple_select_switch",{active:!0}),t.getElement().addClass("multiple_selectable"),t.getElement().on("click",".im-msg",t._multiple_select),Y(e)||t._multiple_select(e)},ie.prototype.multiple_cancel=function(){var e,t=this;t._options.multiple_select=!1,t.triggerEvent("multiple_select_switch",{active:!1}),t.getElement().removeClass("multiple_selectable"),(0,u.default)(e=t.getElement()).call(e,".im-msg-selected").removeClass("im-msg-selected"),t.getElement().off("click",".im-msg",t._multiple_select)},ie.prototype.multiple_check=function(){var e,t,n,i=this,r=(0,u.default)(e=i.getElement()).call(e,".im-msg.im-msg-selected"),o=[];return(0,a.default)([]).call(r,(function(e){t=f(e).data("msg-id"),n=i.createKey(t),t&&i._children[n]&&o.push(i._children[n])})),o},ie.prototype.addCollectMsg=function(e){var t,n=e.send_time&&"0"!==e.send_time.toString()?e.send_time:(new Date).getTime(),i=e.collect_id;if(e.sort_time=n,i&&i>0){var a=this.createKey(i);if(this._children[a])return!1;if(t=te.call(this,e),!t)return!1;this._children[a]=t,this._element.append(t.getElement())}this.setPosition(i)},e.exports=ie},"1Y/n":function(e,t,n){var i=n("HAuM"),a=n("ewvW"),r=n("RK3t"),o=n("UMSQ"),s=function(e){return function(t,n,s,c){i(n);var l=a(t),u=r(l),d=o(l.length),p=e?d-1:0,f=e?-1:1;if(s<2)while(1){if(p in u){c=u[p],p+=f;break}if(p+=f,e?p<0:d<=p)throw TypeError("Reduce of empty array with no initial value")}for(;e?p>=0:d>p;p+=f)p in u&&(c=n(c,u[p],p,l));return c}};e.exports={left:s(!1),right:s(!0)}},"1dYe":function(e,t,n){"use strict";var i=n("67WC"),a=n("tycR").forEach,r=i.aTypedArray,o=i.exportTypedArrayMethod;o("forEach",(function(e){a(r(this),e,arguments.length>1?arguments[1]:void 0)}))},"1j43":function(e,t,n){var i=n("G9WS"),a=i(n("rPUy")),r=i(n("ZbhI")),o=n("JVDe"),s=function(e){var t,n;o.call(this,e),function(e){e._element.addClass("im-header-plugin")}(this),this._cwheader=null,(0,r.default)(t=navigator.userAgent).call(t,"MSIE 7.0")>0||(0,r.default)(n=navigator.userAgent).call(n,"MSIE 8.0")>0?this._win=document:this._win=window};s.prototype=(0,a.default)(o.prototype),s.prototype.render=function(){this._data.opened?this._element.addClass("im-opened"):this._element.removeClass("im-opened")},s.prototype.open=function(){this._opened=!0,this.setData({opened:!0})},s.prototype.close=function(){this._opened=!1,this.setData({opened:!1})},s.prototype.setCwHeader=function(e){return this._cwheader=e},e.exports=s},"1jut":function(e,t,n){var i=n("A2Ma"),a=i("toStringTag"),r={};r[a]="z",e.exports="[object z]"===String(r)},"1lkh":function(e,t,n){var i=n("cEKj"),a=n("doUz");(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.8.1",mode:i?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},"1mbr":function(e,t,n){var i=n("AnMC");e.exports=function(e,t,n,a){a&&a.enumerable?e[t]=n:i(e,t,n)}},"2Fwq":function(e,t,n){var i=n("G9WS");n("rB9j"),n("UxlC");var a=i(n("/FZm")),r=i(n("RXMP")),o=i(n("rPUy")),s=n("5m4N"),c=n("eBtS"),l=n("jqOg"),u=(n("/Pub"),n("sfi9"),n("exIe"),n("XYJ2"),n("4X6O"),n("Bboc")),d=u.isEmpty,p=function(e){(function(t){var n={template:l,shopItemContent:'<div class="im-msg-content-elements">{{elements}}</div>',title:'<div class="im-msg-content-element"><span class="im-element-topic" >{{ text }}</span></div>',action:'<div class="im-msg-content-element"><span class="im-element-action im-msg-action im-msg-click" data-index="{{index}}" data-msg-id="{{msg-id}}">{{ text }}</span></div>',href:'<div class="im-msg-content-element"><span class="im-element-action im-msg-action im-msg-click" href="{{href}}" data-index="{{index}}" data-msg-id="{{msg-id}}">{{ text }}</span></div>',buttonsContent:'<div class="im-msg-content-element"><div class="im-msg-buttons-container">{{buttons}}</div></div>',button:'<a class="im-msg-shop-button im-msg-action im-msg-click" data-index="{{index}}" data-msg-id="{{msg-id}}" href="{{href}}">{{ child.text }}<i class="im-msg-shop-button-icon"></i></a>',actions_map:{}};c.extend(n,e),s.call(t,n)})(this),this._rendered=!1,this._isConfirmed=!1};p.prototype=(0,o.default)(s.prototype),p.prototype.renderContent=function(){var e,t,n=this._data.msg,i=n.content,o="javascript:void(0)",s="",l=this;if(!d(i)&&!d(i.element)){var p=i.element,f=0;(0,r.default)(p).call(p,(function(e){switch(e.type){case"text":e.action?l._options.action:l._options.title;"openURL"==e.action?s+=l._options.href.replace("{{ text }}",e.text).replace("{{index}}",f).replace("{{msg-id}}",n.msg_id).replace("{{href}}",e.actionData||o):s+=(e.action?l._options.action:l._options.title).replace("{{ text }}",e.text).replace("{{index}}",f).replace("{{msg-id}}",n.msg_id),e.action&&(l._options.actions_map[f]=e,f++);break;case"buttons":var t="",i=e.childs;(0,r.default)(i).call(i,(function(e){if("button"==e.type){l._options.actions_map[f]=e;var i="";"openURL"===e.action&&(i=e.actionData);var a=l._options.button.replace("{{ child.text }}",e.text).replace("{{index}}",f).replace("{{msg-id}}",n.msg_id);t+=i&&i.length?a.replace("{{href}}",i):a.replace('href="{{href}}"',""),f++}t+=""})),s+=l._options.buttonsContent.replace("{{buttons}}",t);break;default:break}}))}var m=l._options.shopItemContent.replace("{{elements}}",s),_=(0,a.default)(e=this._element).call(e,".im-msg-content");_.html(m),(0,a.default)(t=this._element).call(t,".im-msg-content").on("click","[href]",(function(e){e.preventDefault();var t=c(this).attr("href");t&&t!=o&&u.openPage(t)}))},e.exports=p},"2SXh":function(e,t,n){var i=n("pevS"),a=n("wbIY"),r=n("SJYm");i({target:"Object",stat:!0,sham:!a},{create:r})},"2Y2y":function(e,t){var n="<div class=window-contactinfo-contain> <div class=window-contactinfo-title> <div class=window-contactinfo-title-icon></div> <div class=window-contactinfo-title-text></div> <div class=window-contactinfo-title-x></div> </div> <div class=window-contactinfo-info> <div class=window-contactinfo-header> <img class=window-contactinfo-header-avatar /> <div class=window-contactinfo-header-name></div> </div> <div class=window-contactinfo-info-tel> <label>手机号</label> <input type=text placeholder=请输入您的手机号 id=contactinfo_tel /> </div> <div class=window-contactinfo-info-wechat> <label>微信号</label> <input type=text placeholder=请输入您的微信号 id=contactinfo_wechat /> </div> <div class=window--contactinfo-info-error></div> <div class=window-contactinfo-point></div> <div class=window-contactinfo-btn> <button class=submit_contactinfo></button> <button class=cancel_contactinfo></button> </div> </div> </div> <div class=window-contactinfo-bg></div> ";e.exports=n},"2aSv":function(e,t,n){var i=n("G9WS"),a=i(n("Kwsy")),r=i(n("/FZm")),o=i(n("rPUy")),s=n("eBtS"),c=n("JVDe"),l=n("AQ2t"),u=function(e){(function(t){var n={template:l};s.extend(n,e),c.call(t,n)})(this)};u.prototype=(0,o.default)(c.prototype),u.prototype.show=function(e){var t,n=this,i=e.content;if(i){if(e.type&&"new"==e.type){var o;this._element.addClass("im-toast-new");var s=(0,r.default)(o=this._element).call(o,".im-toast-icon");s.addClass("show"),s.hasClass("fail")&&s.removeClass("fail")}else{var l;this._element.removeClass("im-toast-new");s=(0,r.default)(l=this._element).call(l,".im-toast-icon");s&&s.removeClass("show")}var u;if(e.iconStatus&&"fail"==e.iconStatus)(0,r.default)(u=this._element).call(u,".im-toast-icon").addClass("fail");(0,r.default)(t=this._element).call(t,".im-toast-content").text(i),c.prototype.show.call(this);var d=e.interval?e.interval:2e3,p=(0,a.default)((function(){n.hide(),clearTimeout(p)}),d)}},u.prototype.hide=function(){c.prototype.hide.call(this)},e.exports=u},"2fOL":function(e,t,n){var i=n("b42z"),a=n("C3ug");e.exports=function(e){var t=a(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return i(t.call(e))}},"2oRo":function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||function(){return this}()||Function("return this")()}).call(this,n("yLpj"))},"2uPm":function(e,t,n){var i=n("R9qo");e.exports=i},"33Wh":function(e,t,n){var i=n("yoRg"),a=n("eDl+");e.exports=Object.keys||function(e){return i(e,a)}},"362D":function(e,t,n){var i=n("G9WS"),a=i(n("rPUy")),r=i(n("/FZm")),o=n("eBtS"),s=n("lq94"),c=n("QWnO"),l=n("sfi9"),u=n("/Pub"),d=function(e){(function(t){var n={template:s};o.extend(n,e),c.call(t,n);var i=n.files;t._element.show(),u.dispatch({type:l.FULLSCREEN_OPEN});var a=new FileReader;a.readAsDataURL(i),a.onload=function(){var e=this.result,n=new Image;n.src=e;var i=280,a=210;n.onload=function(){var o;if(t._width=n.width,t._height=n.height,t._src=e,(0,r.default)(o=t._element).call(o,".im-preview-image-pic").attr("src",e),n.width/n.height>i/a){var s,c=280*n.height/n.width;(0,r.default)(s=t._element).call(s,".im-preview-image-pic").css({height:c+"px",width:"280px"})}else{var l,u=210*n.width/n.height;(0,r.default)(l=t._element).call(l,".im-preview-image-pic").css({height:"210px",width:u+"px"})}}}})(this),function(e){var t;(0,r.default)(t=e._element).call(t,".im-preview-image-primary-button").click((function(){e._input.send({type:"image",url:e._src,image_width:e._width,image_height:e._height}),e._element.hide(),u.dispatch({type:l.FULLSCREEN_CLOSE})})),e._element.click((function(t){var n=o(t.target);(n.hasClass("im-preview-image-default-button")||n.hasClass("im-preview-image-close")||n.parent().hasClass("im-preview-image-default-button"))&&(e._element.hide(),u.dispatch({type:l.FULLSCREEN_CLOSE}))}))}(this)};d.prototype=(0,a.default)(c.prototype),e.exports=d},"39uu":function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},"3AM4":function(e,t,n){var i=n("G9WS"),a=n("LYCE");a(t,"__esModule",{value:!0}),t.arrayMethods=void 0;var r,o=i(n("UtpJ")),s=i(n("RXMP")),c=i(n("rPUy")),l=i(n("LYCE")),u=i(n("bhf8")),d=Array.prototype;function p(e,t,n,i){u.default?(0,l.default)(e,t,{value:n,emuerable:!!i,writable:!0,configurable:!0}):e&&e[t]&&(e[t]=n)}var f=(0,c.default)(d);t.arrayMethods=f,(0,s.default)(r=["push","pop","shift","unshift","splice","sort","reverse"]).call(r,(function(e){var t=d[e];p(f,e,(function(){for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];var r,s=t.apply(this,i),c=this.__ob__;switch(e){case"push":case"unshift":r=i;break;case"splice":r=(0,o.default)(i).call(i,2);break;default:break}return c&&(r&&c.observeArray(r),c.dep.notify()),s}))}))},"3SUL":function(e,t,n){var i=n("nhkr"),a=n("hO3g");function r(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?a(e):t}e.exports=r},"3bBZ":function(e,t,n){var i=n("2oRo"),a=n("/byt"),r=n("4mDm"),o=n("kRJp"),s=n("tiKp"),c=s("iterator"),l=s("toStringTag"),u=r.values;for(var d in a){var p=i[d],f=p&&p.prototype;if(f){if(f[c]!==u)try{o(f,c,u)}catch(_){f[c]=u}if(f[l]||o(f,l,d),a[d])for(var m in r)if(f[m]!==r[m])try{o(f,m,r[m])}catch(_){f[m]=r[m]}}}},"3g4U":function(e,t,n){var i=n("G9WS"),a=n("LYCE");a(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("M5Mt")),o=i(n("ZbhI")),s=i(n("UtpJ")),c=i(n("06Pm")),l=i(n("kA7L")),u=0,d=function(){function e(){(0,c.default)(this,e),this.id=u++,this.subs=[]}return(0,l.default)(e,[{key:"addSub",value:function(e){this.subs.push(e)}},{key:"removeSub",value:function(e){p(this.subs,e)}},{key:"depend",value:function(){window.target&&window.target.addDep(this)}},{key:"notify",value:function(){for(var e,t=(0,s.default)(e=this.subs).call(e),n=0,i=t.length;n<i;n++)t[n].update()}}]),e}();function p(e,t){if(e.length){var n=(0,o.default)(e).call(e,t);if(n>-1)return(0,r.default)(e).call(e,n,1)}}t.default=d},"3mr1":function(e,t,n){var i=n("pevS"),a=n("Bvq2"),r=n("T/97"),o=n("V3kF"),s=n("9fuf"),c=a((function(){o(1)}));i({target:"Object",stat:!0,forced:c,sham:!s},{getPrototypeOf:function(e){return o(r(e))}})},"3uAa":function(e,t,n){var i=n("ZBQp"),a=n("Y4yM"),r=n("T/97"),o=n("ZyXh"),s=n("Q0Rw"),c=[].push,l=function(e){var t=1==e,n=2==e,l=3==e,u=4==e,d=6==e,p=7==e,f=5==e||d;return function(m,_,h,g){for(var v,y,w=r(m),b=a(w),x=i(_,h,3),S=o(b.length),k=0,E=g||s,C=t?E(m,S):n||p?E(m,0):void 0;S>k;k++)if((f||k in b)&&(v=b[k],y=x(v,k,w),e))if(t)C[k]=y;else if(y)switch(e){case 3:return!0;case 5:return v;case 6:return k;case 2:c.call(C,v)}else switch(e){case 4:return!1;case 7:c.call(C,v)}return d?-1:l||u?u:C}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterOut:l(7)}},"42Pb":function(e,t,n){var i=n("m/sp");i("asyncIterator")},"45KF":function(e,t,n){var i=n("UQe+"),a=Array.prototype;e.exports=function(e){var t=e.map;return e===a||e instanceof Array&&t===a.map?i:t}},"4Brf":function(e,t,n){"use strict";var i=n("I+eb"),a=n("g6v/"),r=n("2oRo"),o=n("UTVS"),s=n("hh1v"),c=n("m/L8").f,l=n("6JNq"),u=r.Symbol;if(a&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var d={},p=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof p?new u(e):void 0===e?u():u(e);return""===e&&(d[t]=!0),t};l(p,u);var f=p.prototype=u.prototype;f.constructor=p;var m=f.toString,_="Symbol(test)"==String(u("test")),h=/^Symbol\((.*)\)[^)]+$/;c(f,"description",{configurable:!0,get:function(){var e=s(this)?this.valueOf():this,t=m.call(e);if(o(d,e))return"";var n=_?t.slice(7,-1):t.replace(h,"$1");return""===n?void 0:n}}),i({global:!0,forced:!0},{Symbol:p})}},"4Iq6":function(e,t){var n='<li class="im-msg im-msg-job"> <div class=im-msg-time></div> <div class=im-msg-checkbox></div> <div class=im-msg-main> <img class="im-avatar im-msg-avatar"/> <span class=im-msg-send-status></span> <span class=im-msg-showed-status></span> <span class=im-msg-user-name></span> <div class=im-msg-content> <div class=im-job-content> <div class=im-job-main-content> <div class=im-job-title></div> <div class=im-job-price></div> </div> <div class=im-job-detail></div> <div class=im-job-label></div> </div> </div> <span class=im-msg-arrow></span> </div> <div class=im-msg-collect-name></div> <div class=im-msg-collect-time></div> <div class=im-msg-feedback> <div class=im-msg-feedback-container> <span class=im-msg-feedback-icon></span> <span class=im-msg-feedback-content></span> </div> </div> </li> ';e.exports=n},"4M3F":function(e,t,n){var i=n("G9WS");n("qePV"),n("rB9j"),n("UxlC"),n("EnZy");var a=i(n("RXMP")),r=i(n("/FZm")),o=i(n("rPUy")),s=n("5m4N"),c=n("eBtS"),l=n("aqev"),u=n("/Pub"),d=n("sfi9"),p='<p class="im-msg-forward-p">${name}: ${message}</p>',f=n("Bboc"),m=f.isEmpty;function _(e){switch(e.type){case"audio":e.msg="[语音留言]";break;case"video":e.msg="[视频]";break;case"text":break;case"card":case"minicard":case"universal_card1":case"universal_card2":case"universal_card3":case"mix":case"universal_card4":case"universal_card5":case"universal_card6":case"private_card_ganji":e.msg="[卡片]";break;case"file":e.msg="[文件]";break;case"location":e.msg="消息格式暂不支持，请在客户端查看";break;case"call_audio":e.msg="[收到一条语音聊天消息，请在手机上查看]";break;case"call_video":e.msg="[收到一条视频聊天消息，请在手机上查看]";break;case"image":e.msg="[图片]";break;case"provide_contactinfo_card":case"default_contactinfo_card":e.msg="[用户名片]";break;case"msg_batch_forward_card":e.msg="[聊天记录]";break;default:e.msg="消息格式暂不支持，请在客户端查看";break}return e}var h=function(e){(function(t){var n={template:l};c.extend(n,e),s.call(t,n)})(this),this._rendered=!1};h.prototype=(0,o.default)(s.prototype),h.prototype.renderContent=function(){var e,t=this,n=this._data.msg,i=n.content,o=i.card_title||"",s="";if("msg_batch_forward_card"===i.type){var c,l,u,d;if(o)(0,r.default)(d=this._element).call(d,".im-msg-content .im-msg-forward-title .im-msg-forward-to").html(o);(0,a.default)(c=i.msgs_preview||[]).call(c,(function(t,n){if(n<=3){e=t.content?t.content:"{}";try{"string"===typeof e&&(e=JSON.parse(e))}catch(i){e={}}e=_(e),s+=p.replace("${name}",t.sender_name).replace("${message}",e.msg||"")}})),(0,r.default)(l=this._element).call(l,".im-msg-content .im-msg-forward-body").html(s);var f=(0,r.default)(u=this._element).call(u,".im-msg-content");f.click((function(e){e.stopPropagation(),t.handleMsgClick.apply(t,[n])}))}},h.prototype.handleMsgClick=function(e){if(m(e.status)||"SUCCESS"===e.status){var t=e.content,n=t.card_title||"";if(t.msgs&&t.msgs.length){var i,r,o,s=[],c={};if((0,a.default)(i=t.msgs).call(i,(function(e){s.push(e.msg_id),r=e.sender_id.split("@@"),o=e.to_id.split("@@"),r.length>=2&&o.length>=2&&(c[e.msg_id]={sender_id:r[0],sender_source:Number(r[1]),to_id:o[0],to_source:Number(o[1])})})),"collect"===e.msg_collect||"collect"===e.msg_showtype){"string"===typeof e.content&&(e.content=JSON.parse(e.content));var l=e.content.msgs,p=e.forward_msgs,f=[],_=[];return(0,a.default)(l).call(l,(function(e){f[e.msg_id]=e.msg_id})),(0,a.default)(p).call(p,(function(e){f[e.msg_id]&&_.push(e)})),(0,a.default)(_).call(_,(function(t){"string"===typeof t.content&&(t.content=JSON.parse(t.content)),"msg_batch_forward_card"==t.content.type&&(t.forward_msgs=e.forward_msgs,t.msg_collect="collect")})),void u.dispatch({type:d.COLLECTION_MESSAGE_FLOAT,data:{msgList:_,title:n,id:e.msg_id,parent_u_key:e.content._parent_u_key?e.content._parent_u_key:""}})}u.dispatch({type:d.FORWARD_MESSAGE_FLOAT,data:{msg_ids:s,id:e.msg_id,sender_id:e.sender_id,sender_source:e.sender_source,to_id:e.to_id,to_source:e.to_source,parent_u_key:t._parent_u_key,root_u_key:t._root_u_key,title:n,id_sources:c}})}}},e.exports=h},"4WOD":function(e,t,n){var i=n("UTVS"),a=n("ewvW"),r=n("93I0"),o=n("4Xet"),s=r("IE_PROTO"),c=Object.prototype;e.exports=o?Object.getPrototypeOf:function(e){return e=a(e),i(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?c:null}},"4X6O":function(e,t,n){var i=n("G9WS");n("07d7"),n("rB9j"),n("JfAA"),n("UxlC"),n("EnZy"),n("zHFu");var a,r,o=i(n("WxoT")),s=n("VRhk"),c=(n("/Pub"),n("sfi9"),n("Yr6i")),l=n("Bboc"),u=l.jsonHandler,d=function(e){if(!e||!e.extra)return!1;var t=e.extra;if("string"===typeof e.extra&&(t=u.parse(e.extra)),!t.richtext_format)return!1;var n=!0;if(e&&e.extra){var i=t.richtext_format,a=i.richtext,r=i.format;a&&r&&""!==a&&0!==r.length||(n=!1)}else n=!1;return n},p=function(e,t){return e=e.replace(/\{\d{1,}\}/g,(function(e){var n=e.toString().split("{")[1].split("}")[0];if(n>t.length-1)return e;var i,l,u,d=t[n].url?t[n].url:"",p=t[n].color?t[n].color.toString():"blue",f=t[n].bold&&"1"===t[n].bold.toString()?"bold":"normal",m=t[n].action_code?t[n].action_code.toString():"",_={action_code:null,me:{user_id:a.user_id,user_source:a.user_source},contact:{user_id:r.user_id,user_source:r.user_source},xz_source:s["xz-source"]};switch(m){case"1002":d="javascript:void(0)";break;case"1003":_.action_type="appeal",l=c(_);break;case"1004":_.action_type="complaints",l=c(_);break;case"1005":_.action_type="faceVerify",u=c(_);break;case"1001":default:break}return i=l?"<span style='cursor:pointer;color:#"+p+";font-weight:"+f+";' onclick='window.top.XXZLWL.Config("+(0,o.default)(l)+")'>"+t[n].linktext+"</span>":u?"<span style='cursor:pointer;color:#"+p+";font-weight:"+f+";' onclick='window.top.XXZLWL.faceVerify("+(0,o.default)(u)+")'>"+t[n].linktext+"</span>":"<a href='"+d+"' style='cursor:pointer;text-decoration:none;color:#"+p+";font-weight:"+f+"' target='_blank'>"+t[n].linktext+"</a>",i})),e},f=function(e,t){return e=e.replace(/\{\d{1,}\}/g,(function(e){var n=e.toString().split("{")[1].split("}")[0];return n>t.length-1?e:t[n].linktext})),e},m=function(e){a=s["me"](),r={},a.user_id+""===e.to_id+""&&a.user_source+""===e.to_source+""?(r.user_id=e.sender_id,r.user_source=e.sender_source):(r.user_id=e.to_id,r.user_source=e.to_source);var t=e.content;if(!d(t))return e;var n=u.parse(t.extra);if(!n||!n.richtext_format||!n.richtext_format.richtext)return e;var i=n.richtext_format,o=i.richtext,c=i.format;return"text"===t.type.toString()?t.msg=p(o,c):"tip"===t.type.toString()&&(t.text=p(o,c),t.origl_text=f(o,c)),e.content=t,e};e.exports={richTextFormat:m,isNeedConvert:d}},"4Xet":function(e,t,n){var i=n("0Dky");e.exports=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},"4hld":function(e,t,n){var i=n("pevS"),a=n("7gcH");i({global:!0,forced:parseFloat!=a},{parseFloat:a})},"4mDm":function(e,t,n){"use strict";var i=n("/GqU"),a=n("RNIs"),r=n("P4y1"),o=n("afO8"),s=n("fdAy"),c="Array Iterator",l=o.set,u=o.getterFor(c);e.exports=s(Array,"Array",(function(e,t){l(this,{type:c,target:i(e),index:0,kind:t})}),(function(){var e=u(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}}),"values"),r.Arguments=r.Array,a("keys"),a("values"),a("entries")},"4syw":function(e,t,n){var i=n("busE");e.exports=function(e,t,n){for(var a in t)i(e,a,t[a],n);return e}},"4zJj":function(e,t,n){var i=n("ks2j"),a=Array.prototype;e.exports=function(e){var t=e.slice;return e===a||e instanceof Array&&t===a.slice?i:t}},"526F":function(e,t,n){e.exports=n("kE3c")},"55UI":function(e,t){var n='<li class="im-msg im-msg-tip"> <div class=im-msg-time></div> <div class=im-msg-main> <div class=im-msg-tip-container> <span class=im-msg-tip-content></span> <span class=im-msg-redit-content></span> </div> </div> </li> ';e.exports=n},"58wy":function(e,t,n){var i=n("m/sp");i("matchAll")},"5GCO":function(e,t,n){var i=n("zJQS"),a=n("T/97"),r=n("Y4yM"),o=n("ZyXh"),s=function(e){return function(t,n,s,c){i(n);var l=a(t),u=r(l),d=o(l.length),p=e?d-1:0,f=e?-1:1;if(s<2)while(1){if(p in u){c=u[p],p+=f;break}if(p+=f,e?p<0:d<=p)throw TypeError("Reduce of empty array with no initial value")}for(;e?p>=0:d>p;p+=f)p in u&&(c=n(c,u[p],p,l));return c}};e.exports={left:s(!1),right:s(!0)}},"5PDf":function(e,t,n){e.exports=n("YG62")},"5PQY":function(e,t,n){var i=n("G9WS"),a=n("LYCE");a(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("BF1V")),o=i(n("06Pm")),s=i(n("kA7L")),c=i(n("TesA")),l=i(n("aTWP")),u=function(){function e(t,n,i,a){(0,o.default)(this,e),this.vm=t,this.deep=!!a&&!!a.deep,this.deps=[],this.depsIds=new r.default,this.getter="function"===typeof n?n:(0,l.default)(n),this.cb=i,this.value=this.get()}return(0,s.default)(e,[{key:"addDep",value:function(e){var t=e.id;this.depsIds.has(t)||(this.depsIds.add(t),this.deps.push(e),e.addSub(this))}},{key:"get",value:function(){window.target=this;var e=this.getter.call(this.vm,this.vm);return this.deep&&(0,c.default)(e),window.target=void 0,e}},{key:"update",value:function(){var e=this.value;this.value=this.get(),this.cb.call(this.vm,this.value,e)}},{key:"teardown",value:function(){var e=this.deps.length;while(e--)this.deps[e].removeSub(this)}}]),e}();t.default=u},"5RnW":function(e,t,n){var i=n("pevS"),a=n("YiBS");i({target:"Array",stat:!0},{isArray:a})},"5Tg+":function(e,t,n){var i=n("tiKp");t.f=i},"5Yz+":function(e,t,n){"use strict";var i=n("/GqU"),a=n("ppGB"),r=n("UMSQ"),o=n("pkCn"),s=n("rkAj"),c=Math.min,l=[].lastIndexOf,u=!!l&&1/[1].lastIndexOf(1,-0)<0,d=o("lastIndexOf"),p=s("indexOf",{ACCESSORS:!0,1:0}),f=u||!d||!p;e.exports=f?function(e){if(u)return l.apply(this,arguments)||0;var t=i(this),n=r(t.length),o=n-1;for(arguments.length>1&&(o=c(o,a(arguments[1]))),o<0&&(o=n+o);o>=0;o--)if(o in t&&t[o]===e)return o||0;return-1}:l},"5jX9":function(e,t,n){var i=n("9HS+"),a=Array.prototype;e.exports=function(e){var t=e.splice;return e===a||e instanceof Array&&t===a.splice?i:t}},"5m4N":function(e,t,n){var i=n("G9WS");n("rB9j"),n("UxlC");var a=i(n("ZbhI")),r=i(n("rPUy")),o=i(n("/FZm")),s=n("eBtS"),c=n("/Pub"),l=n("sfi9"),u=n("JVDe"),d=(n("823k"),n("exIe")),p=n("VRhk"),f=n("FdpG"),m=n("8e1d").strToNumCompare,_=n("Bboc").is_file_helper,h=n("ArO8"),g=n("Bboc"),v=g.isEmpty,y=g.isShopModeUser,w=g.getShopKey,b=g.isAnonymousSession,x=function(e){(function(t){var n={template:""};s.extend(n,e),u.call(t,n),p["msg-avatar"]?t._element.addClass("im-has-avatar"):t._element.addClass("im-no-avatar")})(this),this._rendered=!1,function(e){var t;(0,o.default)(t=e._element).call(t,".im-msg-main .im-msg-send-status").click((function(){c.dispatch({type:l.MSG_RESEND_APPLY,data:e._data.msg})}))}(this)};x.prototype=(0,r.default)(u.prototype),x.prototype.render=function(){var e,t,n,i=this._data.msg;this._data.showtime?this._element.addClass("im-msg-showtime"):this._element.removeClass("im-msg-showtime");var r,c,l,u=i.sender_info&&i.sender_info.avatar?i.sender_info.avatar:b(i.sender_info)?p["default-anonymous-avatar"]:p["default-avatar"];i.sender_info&&i.sender_info.hide_avatar?(0,o.default)(r=this._element).call(r,".im-msg-avatar").hide():((0,o.default)(c=this._element).call(c,".im-msg-avatar").attr("src",u),(0,o.default)(l=this._element).call(l,".im-msg-avatar").error((function(){var e=s(this).attr("src");e!==p["default-avatar"]&&s(this).attr("src",p["default-avatar"])})));if(i.msg_showtype&&"collect"===i.msg_showtype){var g,x,S,k;(0,o.default)(g=this._element).call(g,".im-msg-avatar").hide();var E=i.sender_info.user_name?i.sender_info.user_name:v(i.title)||-1==(0,a.default)(x=i.title).call(x,"群的聊天记录")?"未知":"群聊";(0,o.default)(S=this._element).call(S,".im-msg-collect-name").text(E);var C=f(i.send_time);(0,o.default)(k=this._element).call(k,".im-msg-collect-time").text(C)}var A=i.sender_info,O=A&&A.remark&&A.remark.remark_name?A.remark.remark_name:A&&A.nick_name?A.nick_name:A&&A.user_name?A.user_name:"未知";if((0,o.default)(e=this._element).call(e,".im-msg-user-name").text(O),i.msg_type&&i.msg_type+""==="1005")this._element.addClass("im-group");else if(!_(i.to_id,i.to_source)){var T=h.get("meInfo");if((y(i,T)||y({user_source:i.sender_source})||y({user_source:i.to_source}))&&(this._element.addClass("im-shop-mode"),i.msg_id>0&&!i.is_false_new)){var M,I=i.to_id+"@"+i.to_source,N=(T=p["me"](),w(i,T)?w(i,T):null),L=N?I+"@@"+N:I;h.get("otherRead-"+L)&&(i.other_last_showed_msg_id=h.get("otherRead-"+L));var R,P,D="未读";if(i.msg_id&&(i.msg_id<0||!i.other_last_showed_msg_id||i.other_last_showed_msg_id&&m(i.other_last_showed_msg_id+"",i.msg_id+"")<0))(0,o.default)(R=this._element).call(R,".im-msg-showed-status").addClass("unshowed");else D="已读",(0,o.default)(P=this._element).call(P,".im-msg-showed-status").removeClass("unshowed");(0,o.default)(M=this._element).call(M,".im-msg-showed-status").text(D)}}if(!this._rendered){var j;this._rendered=!0,"wechat_notice_card"!==i.show_type&&(i.is_mine&&!i.is_in_float_view?this._element.addClass("im-msg-me"):this._element.addClass("im-msg-other"));C=f(i.send_time);(0,o.default)(j=this._element).call(j,".im-msg-time").text(C),this.renderContent()}(0,o.default)(t=this._element).call(t,".im-msg-content").data("msg-id",i.msg_id),(0,o.default)(n=this._element).call(n,".im-chat-msg-contents").data("msg-id",i.collect_id),this._options.multiple_selectable&&this._element.data("msg-id",i.msg_id),this._element.removeClass("im-msg-sending im-msg-fail");var U=function(){var e;this._element.addClass("im-msg-fail"),(0,o.default)(e=this._element).call(e,".im-msg-feedback-content").html(i.feedback),i.feedback_msg_hide+""==="1"&&this._element.addClass("im-msg-fail-hide")};switch(i.status){case d.UPLOADING:this._element.addClass("im-msg-sending"),this.switchHandle&&this.switchHandle(d.UPLOADING),this.update&&this.update();break;case d.SENDING:this._element.addClass("im-msg-sending"),i.uploadingPercent&&(i.uploadingPercent+=30,this.update&&this.update());break;case d.SUCCESS:this.switchHandle&&this.switchHandle(d.SUCCESS);break;case d.DOWNLOAD_FAIL:this._element.addClass("im-msg-send-status-hide"),this.switchHandle&&this.switchHandle(d.DOWNLOAD_FAIL),U.call(this);break;case d.VIDEO_PLAY_ERROR:this._element.addClass("im-msg-send-status-hide"),U.call(this);break;case d.CANCEL_SENDING:this.switchHandle&&this.switchHandle(d.CANCEL_SENDING),U.call(this);break;case d.UPLOAD_FAIL:case d.FAIL:"file"===this._data.msg.content.type&&this.switchHandle&&this.switchHandle(d.FAIL),U.call(this);break;default:break}},x.prototype.setMsg=function(e){this.setData({msg:e})},x.prototype.getMsg=function(){return this._data.msg},x.prototype.showTime=function(){this.setData({showtime:!0})},x.prototype.hideTime=function(){this.setData({showtime:!1})},x.prototype.renderContent=function(){},e.exports=x},"5mdu":function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}},"5pn2":function(e,t,n){var i=n("m/sp");i("match")},"5s+n":function(e,t,n){"use strict";var i,a,r,o,s=n("I+eb"),c=n("xDBR"),l=n("2oRo"),u=n("0GbY"),d=n("/qmn"),p=n("busE"),f=n("4syw"),m=n("1E5z"),_=n("JiZb"),h=n("hh1v"),g=n("HAuM"),v=n("GarU"),y=n("iSVu"),w=n("ImZN"),b=n("HH4o"),x=n("SEBh"),S=n("LPSS").set,k=n("tXUg"),E=n("zfnd"),C=n("RN6c"),A=n("8GlL"),O=n("5mdu"),T=n("afO8"),M=n("lMq5"),I=n("tiKp"),N=n("YF1G"),L=n("LQDL"),R=I("species"),P="Promise",D=T.get,j=T.set,U=T.getterFor(P),W=d,F=l.TypeError,B=l.document,G=l.process,z=u("fetch"),V=A.f,H=V,Y=!!(B&&B.createEvent&&l.dispatchEvent),q="function"==typeof PromiseRejectionEvent,K="unhandledrejection",J="rejectionhandled",X=0,Z=1,Q=2,$=1,ee=2,te=M(P,(function(){var e=y(W)!==String(W);if(!e){if(66===L)return!0;if(!N&&!q)return!0}if(c&&!W.prototype["finally"])return!0;if(L>=51&&/native code/.test(W))return!1;var t=W.resolve(1),n=function(e){e((function(){}),(function(){}))},i=t.constructor={};return i[R]=n,!(t.then((function(){}))instanceof n)})),ne=te||!b((function(e){W.all(e)["catch"]((function(){}))})),ie=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},ae=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;k((function(){var i=e.value,a=e.state==Z,r=0;while(n.length>r){var o,s,c,l=n[r++],u=a?l.ok:l.fail,d=l.resolve,p=l.reject,f=l.domain;try{u?(a||(e.rejection===ee&&ce(e),e.rejection=$),!0===u?o=i:(f&&f.enter(),o=u(i),f&&(f.exit(),c=!0)),o===l.promise?p(F("Promise-chain cycle")):(s=ie(o))?s.call(o,d,p):d(o)):p(i)}catch(m){f&&!c&&f.exit(),p(m)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&oe(e)}))}},re=function(e,t,n){var i,a;Y?(i=B.createEvent("Event"),i.promise=t,i.reason=n,i.initEvent(e,!1,!0),l.dispatchEvent(i)):i={promise:t,reason:n},!q&&(a=l["on"+e])?a(i):e===K&&C("Unhandled promise rejection",n)},oe=function(e){S.call(l,(function(){var t,n=e.facade,i=e.value,a=se(e);if(a&&(t=O((function(){N?G.emit("unhandledRejection",i,n):re(K,n,i)})),e.rejection=N||se(e)?ee:$,t.error))throw t.value}))},se=function(e){return e.rejection!==$&&!e.parent},ce=function(e){S.call(l,(function(){var t=e.facade;N?G.emit("rejectionHandled",t):re(J,t,e.value)}))},le=function(e,t,n){return function(i){e(t,i,n)}},ue=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=Q,ae(e,!0))},de=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw F("Promise can't be resolved itself");var i=ie(t);i?k((function(){var n={done:!1};try{i.call(t,le(de,n,e),le(ue,n,e))}catch(a){ue(n,a,e)}})):(e.value=t,e.state=Z,ae(e,!1))}catch(a){ue({done:!1},a,e)}}};te&&(W=function(e){v(this,W,P),g(e),i.call(this);var t=D(this);try{e(le(de,t),le(ue,t))}catch(n){ue(t,n)}},i=function(e){j(this,{type:P,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:X,value:void 0})},i.prototype=f(W.prototype,{then:function(e,t){var n=U(this),i=V(x(this,W));return i.ok="function"!=typeof e||e,i.fail="function"==typeof t&&t,i.domain=N?G.domain:void 0,n.parent=!0,n.reactions.push(i),n.state!=X&&ae(n,!1),i.promise},catch:function(e){return this.then(void 0,e)}}),a=function(){var e=new i,t=D(e);this.promise=e,this.resolve=le(de,t),this.reject=le(ue,t)},A.f=V=function(e){return e===W||e===r?new a(e):H(e)},c||"function"!=typeof d||(o=d.prototype.then,p(d.prototype,"then",(function(e,t){var n=this;return new W((function(e,t){o.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof z&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return E(W,z.apply(l,arguments))}}))),s({global:!0,wrap:!0,forced:te},{Promise:W}),m(W,P,!1,!0),_(P),r=u(P),s({target:P,stat:!0,forced:te},{reject:function(e){var t=V(this);return t.reject.call(void 0,e),t.promise}}),s({target:P,stat:!0,forced:c||te},{resolve:function(e){return E(c&&this===r?W:this,e)}}),s({target:P,stat:!0,forced:ne},{all:function(e){var t=this,n=V(t),i=n.resolve,a=n.reject,r=O((function(){var n=g(t.resolve),r=[],o=0,s=1;w(e,(function(e){var c=o++,l=!1;r.push(void 0),s++,n.call(t,e).then((function(e){l||(l=!0,r[c]=e,--s||i(r))}),a)})),--s||i(r)}));return r.error&&a(r.value),n.promise},race:function(e){var t=this,n=V(t),i=n.reject,a=O((function(){var a=g(t.resolve);w(e,(function(e){a.call(t,e).then(n.resolve,i)}))}));return a.error&&i(a.value),n.promise}})},"67WC":function(e,t,n){"use strict";var i,a=n("qYE9"),r=n("g6v/"),o=n("2oRo"),s=n("hh1v"),c=n("UTVS"),l=n("9d/t"),u=n("kRJp"),d=n("busE"),p=n("m/L8").f,f=n("4WOD"),m=n("0rvr"),_=n("tiKp"),h=n("kOOl"),g=o.Int8Array,v=g&&g.prototype,y=o.Uint8ClampedArray,w=y&&y.prototype,b=g&&f(g),x=v&&f(v),S=Object.prototype,k=S.isPrototypeOf,E=_("toStringTag"),C=h("TYPED_ARRAY_TAG"),A=a&&!!m&&"Opera"!==l(o.opera),O=!1,T={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},M={BigInt64Array:8,BigUint64Array:8},I=function(e){if(!s(e))return!1;var t=l(e);return"DataView"===t||c(T,t)||c(M,t)},N=function(e){if(!s(e))return!1;var t=l(e);return c(T,t)||c(M,t)},L=function(e){if(N(e))return e;throw TypeError("Target is not a typed array")},R=function(e){if(m){if(k.call(b,e))return e}else for(var t in T)if(c(T,i)){var n=o[t];if(n&&(e===n||k.call(n,e)))return e}throw TypeError("Target is not a typed array constructor")},P=function(e,t,n){if(r){if(n)for(var i in T){var a=o[i];a&&c(a.prototype,e)&&delete a.prototype[e]}x[e]&&!n||d(x,e,n?t:A&&v[e]||t)}},D=function(e,t,n){var i,a;if(r){if(m){if(n)for(i in T)a=o[i],a&&c(a,e)&&delete a[e];if(b[e]&&!n)return;try{return d(b,e,n?t:A&&g[e]||t)}catch(s){}}for(i in T)a=o[i],!a||a[e]&&!n||d(a,e,t)}};for(i in T)o[i]||(A=!1);if((!A||"function"!=typeof b||b===Function.prototype)&&(b=function(){throw TypeError("Incorrect invocation")},A))for(i in T)o[i]&&m(o[i],b);if((!A||!x||x===S)&&(x=b.prototype,A))for(i in T)o[i]&&m(o[i].prototype,x);if(A&&f(w)!==x&&m(w,x),r&&!c(x,E))for(i in O=!0,p(x,E,{get:function(){return s(this)?this[C]:void 0}}),T)o[i]&&u(o[i],C,i);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:A,TYPED_ARRAY_TAG:O&&C,aTypedArray:L,aTypedArrayConstructor:R,exportTypedArrayMethod:P,exportTypedArrayStaticMethod:D,isView:I,isTypedArray:N,TypedArray:b,TypedArrayPrototype:x}},"6JNq":function(e,t,n){var i=n("UTVS"),a=n("Vu81"),r=n("Bs8V"),o=n("m/L8");e.exports=function(e,t){for(var n=a(t),s=o.f,c=r.f,l=0;l<n.length;l++){var u=n[l];i(e,u)||s(e,u,c(t,u))}}},"6Jnn":function(e,t,n){var i=n("doUz"),a=Function.toString;"function"!=typeof i.inspectSource&&(i.inspectSource=function(e){return a.call(e)}),e.exports=i.inspectSource},"6LWA":function(e,t,n){var i=n("xrYK");e.exports=Array.isArray||function(e){return"Array"==i(e)}},"6R/c":function(e,t,n){"use strict";var i=n("67WC"),a=n("TWQb").indexOf,r=i.aTypedArray,o=i.exportTypedArrayMethod;o("indexOf",(function(e){return a(r(this),e,arguments.length>1?arguments[1]:void 0)}))},"6Rj3":function(e,t,n){var i=n("G9WS"),a=n("yQr1"),r=i(n("06Pm")),o=i(n("kA7L")),s=i(n("X5/F")),c=i(n("3SUL")),l=i(n("eYnF")),u=i(n("PdFA"));function d(e){var t=p();return function(){var n,i=(0,l.default)(e);if(t){var r=(0,l.default)(this).constructor;n=a(i,arguments,r)}else n=i.apply(this,arguments);return(0,c.default)(this,n)}}function p(){if("undefined"===typeof Reflect||!a)return!1;if(a.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(a(Date,[],(function(){}))),!0}catch(e){return!1}}var f=n("eBtS"),m=(n("JVDe"),n("M7ui")),_=n("g5V9"),h=function(e){(0,s.default)(n,e);var t=d(n);function n(e){(0,r.default)(this,n);var i={template:m};return f.extend(i,e),t.call(this,i)}return(0,o.default)(n,[{key:"vm_template",value:function(){return _()}},{key:"open",value:function(){var e=this;e.show.call(this)}},{key:"close",value:function(){var e=this;e.hide.call(this)}}]),n}(u.default);e.exports=h},"6UaR":function(e,t,n){e.exports=n("qpuQ")},"6VoE":function(e,t,n){var i=n("tiKp"),a=n("P4y1"),r=i("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(a.Array===e||o[r]===e)}},"6dl6":function(e,t,n){"use strict";var i=n("zJQS"),a=n("39uu"),r=[].slice,o={},s=function(e,t,n){if(!(t in o)){for(var i=[],a=0;a<t;a++)i[a]="a["+a+"]";o[t]=Function("C,a","return new C("+i.join(",")+")")}return o[t](e,n)};e.exports=Function.bind||function(e){var t=i(this),n=r.call(arguments,1),o=function(){var i=n.concat(r.call(arguments));return this instanceof o?s(t,i.length,i):t.apply(e,i)};return a(t.prototype)&&(o.prototype=t.prototype),o}},"6jri":function(e,t){var n='<li class="im-msg im-msg-file"> <div class=im-msg-time></div> <div class=im-msg-checkbox></div> <div class=im-msg-main> <img class="im-avatar im-msg-avatar"/> <span class=im-msg-send-status></span> <span class=im-msg-showed-status></span> <span class=im-msg-user-name></span> <div class=im-msg-content> <span class=im-msg-file-img></span> <div class=im-msg-file-main> <h3 class=im-msg-file-title>refer数据质量评估与判断到呢个到呢个.cslx</h3> <div class=im-msg-file-size> <span><i class=im-msg-file-size-num></i></span> <span class=im-msg-file-line></span> <a href=javascript:; class="im-msg-handle-btn download"></a> </div> <div class=im-msg-speed><span class=im-msg-speed-current></span></div> </div> <span class=im-msg-arrow></span> </div> </div> <div class=im-msg-collect-name></div> <div class=im-msg-collect-time></div> <div class=im-msg-feedback> <div class=im-msg-feedback-container> <span class=im-msg-feedback-icon></span> <span class=im-msg-feedback-content></span> </div> </div> </li>';e.exports=n},"75a5":function(e,t,n){var i=n("G9WS");n("rB9j"),n("UxlC");var a=i(n("/FZm")),r=i(n("rPUy")),o=i(n("ZbhI")),s=n("5m4N"),c=n("eBtS"),l=n("X1zt"),u=n("823k"),d=n("XYJ2"),p=n("4X6O"),f=n("SaSm"),m=n("Bboc"),_=m.jsonHandler,h=m.isEmpty,g=function(e){var t=/(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&:/~\+#]*[\w\-\@?^=%&/~\+#])?[^(&nbsp;)]/gi,n=e.replace(t,(function(t){return e=e.replace(/&amp;/gi,"&"),'<a class="im-msg-action" href="'+t+'" target="_blank">'+t+"</a>"}));return n},v=function(e){return e=e.replace(/(\[[^\[\]]*\])/g,(function(e){var t,n=(0,o.default)(t=u.emotionTitles).call(t,e.replace(/[\[\]]/g,""));return-1==n?e:'<div style="margin-bottom:-3px;margin-left:5px;display:inline-block;" class="im-emotion-'+n+'"></div>'})),e},y=function(e){return e=e.replace(/(\n)/g,"<br>"),e=e.replace(/\s/g,"&nbsp;"),e=g(e),e=v(e),e=d.doFilter(e),e},w=function(e){(function(t){var n={template:l};c.extend(n,e),s.call(t,n)})(this),this._rendered=!1};w.prototype=(0,r.default)(s.prototype),w.prototype.renderContent=function(){var e,t,n=this._data.msg,i=n.content,r=h(i.extra)||"string"!=typeof i.extra?{}:_.parse(i.extra);if(p.isNeedConvert(i)){i.extra=r;var o=i.extra.richtext_format.richtext;i.extra.richtext_format.richtext=y(o),i.extra=_.stringify(i.extra),n.content=i,t=p.richTextFormat(n).content.msg}else t=y(f(i.msg));if(n.is_false_new){var s,c,l;if("audio"==n.call_type||"video"==n.call_type)(0,a.default)(s=this._element).call(s,".im-msg-content").addClass("im-false-click im-msg-click").data("msg-id",n.msg_id);if("audio"==n.call_type)(0,a.default)(c=this._element).call(c,".im-msg-main").addClass("im-false-click im-false-msg-audio");else if("video"==n.call_type){var u;(0,a.default)(u=this._element).call(u,".im-msg-main").addClass("im-false-click im-false-msg-video")}if(n.not_answered)(0,a.default)(l=this._element).call(l,".im-msg-main").addClass("not-answered")}(0,a.default)(e=this._element).call(e,".im-msg-content").html(t)},e.exports=w},"7GIe":function(e,t,n){var i=n("b42z"),a=n("L5f0");e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{e=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,e.call(n,[]),t=n instanceof Array}catch(r){}return function(n,r){return i(n),a(r),t?e.call(n,r):n.__proto__=r,n}}():void 0)},"7Gle":function(e,t,n){e.exports=n("/Gw5")},"7Muv":function(e,t,n){var i=n("G9WS");n("sMBO"),n("rB9j"),n("Rm1S"),n("UxlC");var a=i(n("guyh")),r=i(n("rPUy")),o=i(n("RKTd")),s=i(n("WxoT")),c=i(n("lHQ6")),l=i(n("UtpJ")),u=i(n("5PDf")),d=i(n("ZbhI")),p=i(n("RXMP")),f=i(n("o+MX")),m=i(n("/FZm")),_=n("a1NO"),h=n("eBtS"),g=n("JVDe"),v=n("cwyl"),y=n("Gm6T"),w=n("ZNKf"),b=n("aNUn"),x=n("G/X/"),S=n("YcVy"),k=n("ScaH"),E=n("ehgS"),C=n("tcWW"),A=n("iVne"),O=n("Nu1X"),T=n("Nu6W"),M=n("8mLy"),I=n("/Pub"),N=n("l1Yk"),L=n("exIe"),R=n("sfi9"),P=n("a/VA"),D=n("1Fqx"),j=n("VRhk"),U=n("ArO8"),W=n("sD8x"),F=W.gatherExistFalseMsgs,B=n("8e1d").strToNumCompare,G=n("HG5D"),z=n("Njvb"),V=n("Vhpp"),H=n("KcAw"),Y=n("Bboc"),q=Y.isGroupUser,K=Y.isShopModeUser,J=Y.isEmpty,X=Y.isAnonymousSession,Z=Y.is_remind_helper,Q=P.non_forward_show_types,$=P.non_delete_show_types,ee=P.non_collect_show_types,te=P.non_withdraw_show_types,ne={},ie=[],ae={};function re(e){var t=this;I.dispatch({type:e,data:{to_id:t._contact.user_id,to_source:t._contact.user_source}})}var oe=function(e){var t,n,i=this;if(i._lastVideoStatus!=e){var a=(0,m.default)(t=this.getElement()).call(t,".chat-audio"),r=(0,m.default)(n=this.getElement()).call(n,".chat-video");if(0!==a.length&&0!==r.length)e?(a.show(),r.show()):(a.hide(),r.hide());else if(0==a.length&&0==r.length&&e){var o;if(window.wbWebRTCSDK&&window.wbWebRTCSDK.isSupport)wbWebRTCSDK.isSupportVideo((function(e){var t,n;e?i._element&&(0,m.default)(t=i._element).call(t,".im-input-plugins").append('<a href="javascript:;" class="chat-audio"><i></i></a><a href="javascript:;" class="chat-video"><i></i></a>'):i._element&&(0,m.default)(n=i._element).call(n,".im-input-plugins").append('<a href="javascript:;" class="chat-audio"><i></i></a>')}),(function(e){})),(0,m.default)(o=i._element).call(o,".im-input-plugins").click((function(e){var t,n,a=h.contains((0,m.default)(t=i._element).call(t,".chat-audio")[0],e.target),r=h.contains((0,m.default)(n=i._element).call(n,".chat-video")[0],e.target);a&&re.call(i,R.CHAT_AUDIO),r&&re.call(i,R.CHAT_VIDEO)})),i._lastVideoStatus=e}}},se=function(e){this._contact=null,this._hasFetchedOldMsg=!1,this._fetchMsgTimer=null,this._fetchReplaceMsgTimer=null,this._feedback=null,this._lastVideoStatus=!1,function(t){var n={template:_,getFreshMsgRecords:function(e,t){t([])},getReplaceMsgRecords:function(e,t){t([])},getOldMsgRecords:function(e,t,n){t([])},getDeletedMsgRecords:function(e,t){t([])}};h.extend(n,e),g.call(t,n)}(this),function(e){var t,n,i,a,r,_,g,M=[];(e.feedback=new T({texts:[]}),M.push(e.feedback),e._children["cwheader"]=new A({plugins:M}),(0,m.default)(t=e._element).call(t,".im-chatwindow-header").append(e._children["cwheader"].getElement()),j.organization.enabled&&!e._options._anonymousLogined)&&((0,m.default)(_=e._element).call(_,".im-cwheader-plugins").append('<i class="im-organization-icon" style="cursor:pointer">&nbsp;</i>'),(0,m.default)(g=e._element).call(g,".im-feedback").addClass("im-support-group"));e._children["chatfloat"]=new O({}),e._children["chatfloat"].addEventListener("chat_open_organiz",(function(){e.triggerEvent("organizstructureInit")}));var N,L,P=[];(P.push(new b),P.push(new w({texts:[""]})),"undefined"!=typeof FileReader&&(P.push(new x),P.push(new S)),j["is_support_provide_contactinfo"]&&P.push(new k),e._options._anonymousLogined)?(e._children["staticInput"]=new C({}),e._children["staticInput"].addEventListener("staticOutput",(function(t){I.dispatch({type:R.STATIC_SEND_MESSAGE,data:{to_id:e._contact.user_id,to_source:e._contact.user_source,text:t||"",in_group:e._contact.in_group}})})),e._children["staticInput"].addEventListener("staticLogin",(function(){I.dispatch({type:R.STATIC_LOGIN,data:{to_id:e._contact.user_id,to_source:e._contact.user_source,in_group:e._contact.in_group}})})),(0,m.default)(N=e._element).call(N,".im-chatwindow-input").append(e._children["staticInput"].getElement())):(e._children["input"]=new v({plugins:P,editor:new E({_entrust_keycodes:[13,38,40]})}),(0,m.default)(L=e._element).call(L,".im-chatwindow-input").append(e._children["input"].getElement()));e._children["msgViewer"]=new y({me:j["me"]()}),(0,m.default)(n=e._element).call(n,".im-chatwindow-content").append(e._children["msgViewer"].getElement()),e._children["msgViewer"].addEventListener("oldMsgNeed",function(){var t=!1,n=!1;return function(i){if(!n&&!t){t=!0,e._children["msgViewer"].startLoading();var a=i?i.msg_id:null,r=10,o={user_id:e._contact.user_id,user_source:e._contact.user_source,last_msg_id:a,count:r,shop_id:e._contact.shop_id,shop_source:e._contact.shop_source};e._options.getOldMsgRecords(o,(function(i){if(!i)return t=!1,e._children["msgViewer"].scrollMsgId="";i.length<r&&(n=!0);var a=e._contact.user_id+"@"+e._contact.user_source;e._contact.shop_id&&e._contact.shop_source&&(a+="@@"+e._contact.shop_id+"@"+e._contact.shop_source);for(var o=[],s=0;s<i.length;s++)i[s].msg_id&&(o.push(i[s]),o=(0,f.default)(o).call(o,F(a,i[s].msg_id)));t=!1,e._children["msgViewer"].markScroll(),e._children["msgViewer"].stopLoading(),e._children["msgViewer"].addMsg(o),e._children["msgViewer"].gotoMark(),e._children["msgViewer"].checkfull(),e._hasFetchedOldMsg=!0;var c=e._contact.user_id+"@"+e._contact.user_source;e._contact.shop_id&&e._contact.shop_source&&(c+="@@"+e._contact.shop_id+"@"+e._contact.shop_source),ne[c]=e._children["msgViewer"].getFreshMsg();var l=!1;if(ie.length>0&&(0,p.default)(ie).call(ie,(function(t){t.userId==e._contact.user_id&&(l=!0)})),!l&&!J(i)&&i.length)for(var u=0;u<i.length;u++){var m,_="string"==typeof i[u].refer&&-1!==(0,d.default)(m=i[u].refer).call(m,"invitation")?JSON.parse(i[u].refer).invitation:"";if(!J(_)){var h,g=_.rootcateid;(0,p.default)(h=j["business-msg-shortcut"]).call(h,(function(t){t.rootcateid==g&&ie.push({userId:e._contact.user_id,quickmsgs:t.quickmsgs})}));break}}}),(function(t){if(t&&t.error_code+""=="44007")return e._children["msgViewer"].stopLoading(),e._hasFetchedOldMsg=!0,e._children["msgViewer"].scrollMsgId=""}))}}}()),e._children["msgViewer"].addEventListener("onClick",(function(t){I.dispatch({type:R.MSG_CLICK,data:{message:t,in_group:e._contact.in_group}})})),e._children["msgViewer"].addEventListener("falseMsgCall",(function(t){"audio"===t&&re.call(e,R.CHAT_AUDIO),"video"===t&&re.call(e,R.CHAT_VIDEO)})),e._children["msgViewer"].addEventListener("reditContent",(function(t){e._children["input"]&&e._children["input"]._options.editor.update(t.content)})),e._children["noticelist"]=new z({}),(0,m.default)(i=e._element).call(i,".im-noticelist-container").append(e._children["noticelist"].getElement()),e._children["noticelist"].addEventListener("aiSend",(function(t){I.dispatch({type:R.AI_SEND,data:{to_id:e._contact.user_id,to_source:e._contact.user_source,text:t.text,qalog:t.qalog,in_group:e._contact.in_group}})})),e._children["noticelist"].addEventListener("aiCopy",(function(t){e._children["input"]&&e._children["input"]._options.editor.update(t.text),I.dispatch({type:R.AI_COPY,data:{to_id:e._contact.user_id,to_source:e._contact.user_source,text:t.text,qalog:t.qalog}})})),e._children["noticelist"].addEventListener("noticeClose",(function(t){e._children["msgViewer"].fold(37*t)})),e._children["contentmenu"]=new V({}),(0,m.default)(a=e._element).call(a,".im-menu-container").append(e._children["contentmenu"].getElement()),e._children["contentmenu"].addEventListener("click",(function(t){var n,i,a,r,o,s;switch(t.action){case"forward":I.dispatch({type:R.MULTIPLE_FORWARD_WINDOW_OPEN,data:{messages:[{_data:{msg:t.message}}],forward_one_by_one:!0}}),(0,m.default)(n=e._element).call(n,".im-menu-container").hide(),e._children["contentmenu"].hide();break;case"collection":(0,m.default)(i=e._element).call(i,".im-menu-container").hide(),e._children["contentmenu"].hide();var c=[t.message];I.dispatch({type:R.ADD_COLLECTION,data:{messages:c,other_id:e._contact.user_id+"@@"+e._contact.user_source}});break;case"withdraw":I.dispatch({type:R.MSG_WITHDRAW,data:{message:t.message}}),(0,m.default)(a=e._element).call(a,".im-menu-container").hide(),e._children["contentmenu"].hide();break;case"multipleSelection":if(e._children["msgViewer"].multiple_select(t.e),(0,m.default)(r=e._element).call(r,".im-menu-container").hide(),e._children["contentmenu"].hide(),e._children["multiplemenu"]&&e._children["multiplemenu"]._options&&!e._children["multiplemenu"]._options.inited){var l;(0,m.default)(l=e._element).call(l,".im-multiplemenu-container").append(e._children["multiplemenu"].getElement());var u=[{text:"删除",action:"delete_together",icon:"delete"}];e._options._anonymousLogined||e._isAnonymousSession||u.unshift({text:"收藏",action:"collect",icon:"collect"}),!j["is_support_forward"]||e._options._anonymousLogined||e._isAnonymousSession||(u.unshift({text:"合并转发",action:"forward_together",icon:"forward"}),u.unshift({text:"逐条转发",action:"forward_one_by_one",icon:"forward"})),e._children["multiplemenu"].setData({selections:u})}(0,m.default)(o=e._element).call(o,".im-multiplemenu-container").show();break;case"delMsg":I.dispatch({type:R.DEL_MSG,data:{message:t.message}}),(0,m.default)(s=e._element).call(s,".im-menu-container").hide(),e._children["contentmenu"].hide();break;default:break}})),e._children["multiplemenu"]=new H({inited:!1}),e._children["multiplemenu"].addEventListener("click",(function(t){var n,i=e._children["msgViewer"].multiple_check();if(!t.action||"multipleMenuClose"==t.action||i&&0!=i.length)switch(t.action){case"multipleMenuClose":(0,m.default)(n=e._element).call(n,".im-multiplemenu-container").hide(),e._children["msgViewer"].multiple_cancel();break;case"forward_one_by_one":case"forward_together":i&&i.length&&I.dispatch({type:R.MULTIPLE_FORWARD_WINDOW_OPEN,data:{messages:i,forward_one_by_one:"forward_one_by_one"===t.action}});break;case"collect":var a=[];(0,p.default)(i).call(i,(function(e){a.push(e._data.msg)})),I.dispatch({type:R.ADD_COLLECTION,data:{messages:a,other_id:e._contact.user_id+"@@"+e._contact.user_source}});break;case"delete_together":a=[];(0,p.default)(i).call(i,(function(e){a.push(e._data.msg)})),I.dispatch({type:R.DELETE_TOGETHER,data:{messages:a}});break;default:break}else I.dispatch({type:R.TOAST_SHOW,data:{content:"未选择任何消息",interval:3e3,type:"new",iconStatus:"fail"}})})),e._children["msgViewer"].addEventListener("sendMessage",(function(t){I.dispatch({type:R.CARD_SEND_MESSAGE,data:{to_id:e._contact.user_id,to_source:e._contact.user_source,text:t.text,in_group:e._contact.in_group}})})),e._children["msgViewer"].addEventListener("contentMenuOpen",(function(t){var n,i,a=[];if(!(t.message.msg_id<=0||!J(t.message.status)&&"SUCCESS"!==t.message.status&&"DOWNLOADED"!==t.message.status)&&!e._options._anonymousLogined){(0,d.default)($).call($,t.message.show_type)<0&&a.push({text:"删除",action:"delMsg"}),a.push({text:"多选",action:"multipleSelection"});var r=!0;t.message&&t.message.sender_info&&1===t.message.sender_info.register&&(r=!1),!e._isAnonymousSession&&!r&&j["is_support_forward"]&&t.message&&(0,d.default)(Q).call(Q,t.message.show_type)<0&&a.unshift({text:"转发",action:"forward"}),!e._isAnonymousSession&&!r&&t.message&&(0,d.default)(ee).call(ee,t.message.show_type)<0&&a.unshift({text:"收藏",action:"collection"}),t.message.is_mine&&!t.timeout&&(0,d.default)(te).call(te,t.message.show_type)<0&&a.unshift({text:"撤销",action:"withdraw"}),a.length&&(e._children["contentmenu"].setData({selections:a,message:t.message,e:t.e}),(0,m.default)(n=e._element).call(n,".im-menu-container").show(),a.length&&(0,m.default)(i=e._element).call(i,".im-menu-container").css("left",t.position.x-e._element.offset().left).css("top",t.position.y-e._element.offset().top).show(),e._children["contentmenu"].show(),e._children["msgViewer"]._options.contentOpened=!0)}})),e._children["msgViewer"].addEventListener("contentMenuClose",(function(t){var n;(0,m.default)(n=e._element).call(n,".im-menu-container").hide(),e._children["contentmenu"].hide(),e._children["msgViewer"]._options.contentOpened=!1})),e._children["floatwindow"]=new G({}),(0,m.default)(r=e._element).call(r,".im-chatwindow-float").append(e._children["floatwindow"].getElement()),e._options._anonymousLogined||e._children["floatwindow"].addEventListener("outputMessage",(function(t){var n;e._children["input"]._options.editor.keyboardUnEntrust();var i,a,r=e._children["input"]._options.editor.get(),o=t.user_name||"",s=!1,c=r.msg;c=c.replace(/&nbsp;/gi,"&nbsp;"),c=c.replace(/<br>/gi,"\n"),c=c.replace(/&amp;/gi,"&");for(var p=0;p<c.length;p++){var f;if("@"!=c[p]||!isNaN(i)&&p-i<=1||(i=p,a=p,s=!1),!isNaN(i)&&a>=i&&!s&&(0,u.default)(t))(" "==c[p]||"@"!=c[p]&&(0,d.default)(f=(0,u.default)(t)).call(f,c[p])<0)&&(s=!0,a=p)}if(!isNaN(i)){var _,h,g=q(e._contact)&&a==i?r.msg.length+1:a+1;if(o=o.replace(/&/gi,"&amp;"),_outputWords=o.replace(/( )+$/,""),o!==_outputWords){for(var v=o.length-_outputWords.length;v>0;v--)_outputWords+="&nbsp;";o=_outputWords}e._children["input"]._options.editor.clear(),e._children["input"]._options.editor.update((0,l.default)(_=r.msg).call(_,0,i+1)+o+"  "+(0,l.default)(h=r.msg).call(h,g),{need_html_2:!0}),e._children["floatwindow"].close(),ae[e._contact.user_id+"@"+e._contact.user_source]||(ae[e._contact.user_id+"@"+e._contact.user_source]={}),ae[e._contact.user_id+"@"+e._contact.user_source][o]=t}(0,m.default)(n=e._element).call(n,".im-chatwindow-float").hide()})),e._children["floatwindow"].addEventListener("floatWindowMove",(function(t){var n,i=t.left-e._element.offset().left;isNaN(i)||(0,m.default)(n=e._element).call(n,".im-chatwindow-float").css({left:i})})),e._children["input"]&&e._children["input"].addEventListener("inputCompleted",(function(t){var n,i,a="",r=[],o={},l=ae[e._contact.user_id+"@"+e._contact.user_source];if(t.msg&&(0,d.default)(n=t.msg).call(n,"@")>=0){var u;for(var p in l)if(l.hasOwnProperty(p)&&l[p]){var f,_,h,g=l[p].name&&l[p].name.length?(0,d.default)(f=t.msg).call(f,"@"+l[p].name):void 0,v=l[p].nick_name&&l[p].nick_name.length?(0,d.default)(_=t.msg).call(_,"@"+l[p].nick_name):void 0,y=l[p].user_name&&l[p].user_name.length?(0,d.default)(h=t.msg).call(h,"@"+l[p].user_name):void 0;g>=0&&v>=0?u=g>v?v:g:(g>=0||v>=0)&&(u=g>=0?g:v),y>=0&&(u=u>=0&&y>u?u:y),isNaN(u)||(o[p]={min:u}),u=void 0}for(var w in o)!J(w)&&o[w]&&r.push({id:l[w].id,source:(0,c.default)(l[w].source),pos_start:o[w].min,pos_end:o[w].min+w.length+1});r.length&&(a=(0,s.default)({targets:r}))}delete ae[e._contact.user_id+"@"+e._contact.user_source],e.groupAtClose(),(0,m.default)(i=e._element).call(i,".im-chatwindow-float").hide(),I.dispatch({type:R.MSG_SEND_APPLY,data:{to_id:e._contact.user_id,to_source:e._contact.user_source,shop_id:e._contact.shop_id,shop_source:e._contact.shop_source,sender_id:e._contact.shop_id?e._contact.shop_id:null,sender_source:e._contact.shop_source?e._contact.shop_source:null,show_type:t.type,content:t,msg_type:e._contact.in_group&&e._contact.in_group+""==="1"?1005:2,at_info:a}})})),e._children["input"]&&e._children["input"]._options.editor.addEventListener("inputChange",(function(t){var n=e._contact.in_group?R.INPUT_CHANGE:R.PRIVATE_INPUT_CHANGE;I.dispatch({type:n,data:{to_id:e._contact.user_id,to_source:e._contact.user_source,content:t,msg_type:e._contact.in_group&&e._contact.in_group+""==="1"?1005:2}})})),e._children["input"]&&e._children["input"]._options.editor.addEventListener("keyboardOutput",(function(t){e._contact.in_group&&I.dispatch({type:R.KEYBOARD_OUTPUT,data:{event:t}})})),e._children["input"]&&e._children["input"]._options.plugins[1].addEventListener("setBussinessSession",(function(t){var n=!1;j["msg-shortcut"]=[],ie.length>0&&(0,p.default)(ie).call(ie,(function(t){t.userId==e._contact.user_id&&(j["msg-shortcut"]=t.quickmsgs,n=!0)})),n||(j["msg-shortcut"]=["你好","在吗"])})),e._children["input"]&&e._children["input"].addEventListener("askContactinfo",(function(t){var n={other_user_id:e._contact.user_id,other_user_source:e._contact.user_source};I.dispatch({type:R.ASK_CONTACTINFO,data:n})})),e._children["input"]&&e._children["input"].setMaxInputLength(1e3),e._element.on("dragover",(function(e){e.preventDefault()})),e._element.on("drop",(function(t){t.preventDefault(),t.stopPropagation();var n,i=t.originalEvent.dataTransfer||t.dataTransfer||window.dataTransfer;if(i.files.length)n=i.files[0];else{if(!i.items.length)return;for(var a=0;a<i.items.length;a++){var r=i.items[a];"file"==r.kind&&r.type.match(/^image\//i)&&(n=r.getAsFile())}}n&&e._children["input"]&&e._children["input"].imgSend(n)})),e._element.on("click",(function(t){var n,i,a=e._children["chatfloat"],r=(0,m.default)(n=e._element).call(n,".im-chatfloat-container");if(a&&a.opened)if(a.opened=!1,e._element.hasClass("im-three-part")){var o=e._contact.user_id+"@"+e._contact.user_source;r.html(U.get("detailHtmlObj["+o+"]"))}else r.hide();else if(h(t.target).hasClass("im-organization-icon")&&a&&!a.opened){if(e._isAnonymousSession||e._options._anonymousLogined)return;a.opened=!0,r.show(),r.html(a.getElement()),a.init(r),I.dispatch({type:R.GROUP_At_CONTACTS,data:{user_id:e._contact.user_id,user_source:e._contact.user_source,shop_id:e._contact.shop_id,shop_source:e._contact.shop_source}})}e.panel&&e.panel._opened&&(e.panel.close(),(0,m.default)(i=e._element).call(i,".im-panel-container").hide())})),e._children["cwheader"].addEventListener("addBlackList",(function(){I.dispatch({type:R.ADD_BLACKLIST,data:{user_id:e._contact.user_id,user_source:e._contact.user_source,shop_id:e._contact.shop_id,shop_source:e._contact.shop_source}})})),e._children["cwheader"].addEventListener("delBlackList",(function(){I.dispatch({type:R.DEL_BLACKLIST,data:{user_id:e._contact.user_id,user_source:e._contact.user_source,shop_id:e._contact.shop_id,shop_source:e._contact.shop_source}})})),e._children["cwheader"].addEventListener("isBlackedCheck",(function(){I.dispatch({type:R.IS_BLACKED_CHECK,data:{user_id:e._contact.user_id,user_source:e._contact.user_source,shop_id:e._contact.shop_id,shop_source:e._contact.shop_source}})})),e._children["cwheader"].addEventListener("complaints",(function(){I.dispatch({type:R.COMPLAINTS,data:{user_id:e._contact.user_id,user_source:e._contact.user_source,shop_id:e._contact.shop_id,shop_source:e._contact.shop_source}})})),e._children["cwheader"].addEventListener("quitGroup",(function(){I.dispatch({type:R.QUIT_GROUP,data:{target_gid:e._contact.user_id,target_gsource:e._contact.user_source}})})),e._children["cwheader"].addEventListener("getGroupQrCode",(function(){I.dispatch({type:R.GET_GROUP_QRCODE,data:{gid:e._contact.user_id,gsource:e._contact.user_source}})})),e._children["cwheader"].addEventListener("groupNotice",(function(){I.dispatch({type:R.GROUP_NOTICE,data:{target_id:e._contact.user_id,target_source:e._contact.user_source}})})),e._children["cwheader"].addEventListener("sesTop",(function(t){I.dispatch({type:R.SES_TOP,data:{target_id:e._contact.user_id,target_source:e._contact.user_source,msg_set:{ses_top:t?1:0}}})})),e._children["cwheader"].addEventListener("setSilent",(function(t){I.dispatch({type:R.SET_SILENT,data:{target_id:e._contact.user_id,target_source:e._contact.user_source,msg_set:{silent:t?1:0}}})})),e._children["cwheader"].addEventListener("setGroup",(function(){I.dispatch({type:R.SET_GROUP,data:{group_id:e._contact.user_id,group_source:e._contact.user_source,group_name:e._contact.user_name}})})),e._children["cwheader"].addEventListener("setUserRemark",(function(){var t,n,i=(0,m.default)(t=h("body")).call(t,".im-remark-contain"),a=(0,m.default)(n=h("body")).call(n,".im-remark-bg");i.show(),a.show();var r=(0,m.default)(i).call(i,"#remark_name");r[0].value=e._data.contact.remark.remark_name?e._data.contact.remark.remark_name:"",a.click((function(e){e.stopPropagation()})),i.click((function(e){e.stopPropagation()})),(0,m.default)(i).call(i,"#remark_name").keyup((function(e){var t=r[0].value.length;t>=30?(0,m.default)(i).call(i,".remark_warn").show():(0,m.default)(i).call(i,".remark_warn").hide()})),(0,m.default)(i).call(i,".submit_remark").click((function(e){if(!e.isPropagationStopped()){var t=r[0].value;t.length>0&&0==(0,o.default)(t).call(t).length||I.dispatch({type:R.SET_USER_REMARK,data:{business_source:0,remark_name:t,remark_spell:"",remark_telephone:"",remark_info:"",description:"",nick_name:""}}),i.hide(),a.hide()}e.stopPropagation()})),(0,m.default)(i).call(i,".cancel_remark").click((function(e){i.hide(),a.hide()}))}))}(this),function(t){t._chatReisterCb=function(e){var n,i;if(-1!=(0,d.default)(n=["MSG_SEND_STATUS_CHANGE","CONTACT_ONLINE_CHANGE","MSG_SYNC","MSG_HANDLER_STATUS_CHANGE","MSG_INFO_UPDATED","TOAST_SHOW"]).call(n,e.type)){var a=e.data.to_id+"@"+e.data.to_source;e.data&&e.data.shop_id&&e.data.shop_source&&(a+="@@"+e.data.shop_id+"@"+e.data.shop_source);var r=t._contact.user_id+"@"+t._contact.user_source;switch(t._contact&&t._contact.shop_id&&t._contact.shop_source&&(r+="@@"+t._contact.shop_id+"@"+t._contact.shop_source),e.type){case R.MSG_SEND_STATUS_CHANGE:if(a==r)switch(e.data.status){case L.UPLOADING:t._children["msgViewer"].addMsg(e.data),t._children["msgViewer"].scrollToBottom();break;case L.UPLOAD_FAIL:case L.FAIL:case L.DOWNLOAD_FAIL:case L.VIDEO_PLAY_ERROR:t._children["msgViewer"].updateMsg(e.data);break;case L.SENDING:-1!==(0,d.default)(i=["image","file","video"]).call(i,e.data.content.type)?t._children["msgViewer"].updateMsg(e.data):(t._children["msgViewer"].addMsg(e.data),t._children["msgViewer"].scrollToBottom());break;case L.CANCEL_SENDING:t._children["msgViewer"].updateMsg(e.data);break;case L.SUCCESS:t._children["msgViewer"].updateMsg(e.data);break;default:break}break;case R.CONTACT_ONLINE_CHANGE:a==r&&t.setOnline(e.data.is_online);break;case R.MSG_SYNC:a==r&&(null!=e.data.delete_msg_id&&t._children["msgViewer"].remove(null,e.data.delete_msg_id),t._children["msgViewer"].addMsg(e.data.msglist));break;case R.MSG_HANDLER_STATUS_CHANGE:var o,s,c=j["me"]();if(c.user_id==e.data.to_id&&c.user_source==e.data.to_source?(o="sender_id",s="sender_source"):(o="to_id",s="to_source"),t._contact.user_id==e.data[o]&&t._contact.user_source==e.data[s])switch(e.data.status){case L.DOWNLOAD_FAIL:case L.VIDEO_PLAY_ERROR:t._children["msgViewer"].updateMsg(e.data);break;default:break}break;case R.MSG_INFO_UPDATED:if(a==r)switch(e.data.status){case L.UPLOADING:t._children["msgViewer"].updateMsg(e.data);break;default:break}break;default:break}}},e&&e.contact&&e.contact.is_reload_session&&I.unregister(t._chatReisterCb),I.register(t._chatReisterCb)}(this),function(e){var t,n=(0,m.default)(t=e._element).call(t,".im-chatwindow-content");(0,m.default)(n).call(n,".im-topic-icon").click((function(e){e.preventDefault(),e.stopPropagation(),n.hasClass("im-topic-min")?n.removeClass("im-topic-min").addClass("im-topic"):n.addClass("im-topic-min").removeClass("im-topic")}))}(this),function(e){var t,n=e._options.contact,i=n.user_id+"@"+n.user_source,a=j["getContactDetailInfo"](n);(U.set("detailHtmlObj["+i+"]",a),a)&&(e._element.addClass("im-three-part"),(0,m.default)(t=e._element).call(t,".im-chatfloat-container").html(a))}(this)};se.prototype=(0,r.default)(g.prototype),se.prototype.setContact=function(e){var t=!1,n=!1,i=h.extend(!0,{},e);this._contact=i,this.setData({contact:i});var a,r=[];t=!J(i),n=t&&Y.is_remind_helper(i.user_id,i.user_source,i.shop_id,i.shop_source);var o,s,c,l=t&&X(i);(this._isAnonymousSession=l,this._children["input"]&&this._children["input"]._options&&this._children["input"]._options.plugins)&&(0,p.default)(o=this._children["input"]._options.plugins).call(o,(function(e){e instanceof k&&e.setData({is_anonymous_user:l})}));(this._options._anonymousLogined||!t||J(i.msg_set)||l||(Y.is_remind_helper(i.user_id,i.user_source,i.shop_id,i.shop_source)||r.push(J(i.msg_set.ses_top)||0!=i.msg_set.ses_top?"取消置顶":"置顶"),Y.is_file_helper(i.user_id,i.user_source)||r.push(J(i.msg_set.silent)||0!=i.msg_set.silent?"取消免打扰":"免打扰")),n)?(0,m.default)(s=this._element).call(s,".im-chatwindow-content").addClass("im-chatwindow-content-fullwindow"):(0,m.default)(c=this._element).call(c,".im-chatwindow-input").show();if(!t||n||l)n&&(a={0:1});else if(q(i)){if(i&&i.group_info){var u;i.group_info.authority;if(j.organization.enabled&&(r.push("群设置"),a={2:6}),!this.panel)this.panel=new M({is_authority:1==i.group_info.authority}),this.panel.addEventListener("updateNickName",(function(e){I.dispatch({type:R.UPDATE_NICKNAME,data:{user_id:e.id,user_source:e.source,nick_name:e.nick_name,old_nick_name:e.old_nick_name,authority:i.group_info.authority}})})),this.panel.addEventListener("groupNotice",(function(e){I.dispatch({type:R.GROUP_NOTICE,data:{gid:i.user_id,gsource:i.user_source,old_group_notice:e.old_group_notice,group_notice:e.group_notice}})})),this.panel.addEventListener("getGroupQrCode",(function(){I.dispatch({type:R.GET_GROUP_QRCODE,data:{gid:i.user_id,gsource:i.user_source}})})),this.panel.addEventListener("quitGroup",(function(){I.dispatch({type:R.QUIT_GROUP,data:{target_gid:i.user_id,target_gsource:i.user_source}})})),this.panel.addEventListener("disbandGroup",(function(){I.dispatch({type:R.DISBAND_GROUP,data:{target_gid:i.user_id,target_gsource:i.user_source}})})),this.panel.addEventListener("addMember",(function(e){I.dispatch({type:R.ADD_MEMBER_WIN,data:{contacts:e.contacts}})})),this.panel.addEventListener("deleteMember",(function(e){I.dispatch({type:R.DELETE_MEMBER_WIN,data:{contacts:e.contacts,id_sources:e.id_sources}})})),this.panel.addEventListener("updateGroupName",(function(e){I.dispatch({type:R.UPDATE_GROUPNAME,data:{old_group_name:e.old_group_name,group_name:e.group_name}})})),(0,m.default)(u=this._element).call(u,".im-panel-container").append(this.panel.getElement())}}else this._options._anonymousLogined||Y.is_file_helper(i.user_id,i.user_source)||(r=(0,f.default)(r).call(r,["屏蔽","举报"]),K(i)||r.push("备注"));this._children["cwheader"].updateFeedBackList(r,a)},se.prototype.setOnline=function(e){this.setData({is_online:e})},se.prototype.render=function(){var e=this,t=this.getElement();if(this._data&&!J(this._data.contact)&&t){var n=this._data.contact,i=n.remark&&n.remark.remark_name?n.remark.remark_name:n.user_name?n.user_name:"未知";if((J(i)||"未知"==i)&&X(n)&&(i="游客"+n.user_id),Z(n.user_id,n.user_source,n.shop_id,n.shop_source)&&(i="提醒服务",n.avatar=j["message_reminder"].avatar),X(n)||q(n)||!j["is_show_audio_video"]||Y.is_file_helper(n.user_id,n.user_source)||Y.is_remind_helper(n.user_id,n.user_source,n.shop_id,n.shop_source)||e.switchAudioVideo(!0),X(n)||Y.is_remind_helper(n.user_id,n.user_source,n.shop_id,n.shop_source)||Y.is_file_helper(n.user_id,n.user_source)?(0,m.default)(t).call(t,".im-organization-icon").hide():(0,m.default)(t).call(t,".im-organization-icon").show(),(n&&K(n)||q(n))&&(0,m.default)(t).call(t,".im-contactinfo-icon").hide(),n&&n.in_group+""==="1"){if((0,m.default)(t).call(t,".im-contact-status").hide(),n.group_info&&0!==n.group_info.current_count){var a="("+n.group_info.current_count+")";(0,m.default)(t).call(t,".im-contact-name").addClass("im-group"),(0,m.default)(t).call(t,".im-contact-num").text(a)}}else(0,m.default)(t).call(t,".im-contact-num").hide(),this._data.is_online==N.ONLINE?(0,m.default)(t).call(t,".im-contact-status").addClass("im-online"):(0,m.default)(t).call(t,".im-contact-status").removeClass("im-online");K(n)?(J(n.shop_id)||J(n.shop_source)||this._children["cwheader"].switchFeedbackIcon(!1),t.addClass("im-shop-chatwindow"),(0,m.default)(t).call(t,".im-organization-icon").hide()):e._options._anonymousLogined||X(n)||Y.is_file_helper(n.user_id,n.user_source)||(this._children["cwheader"].switchFeedbackIcon(!0),(0,m.default)(t).call(t,".im-organization-icon").show()),Y.isEmojiCharacter(i)&&(0,m.default)(t).call(t,".im-contact-name").addClass("need-space"),(0,m.default)(t).call(t,".im-contact-name").text(i),(0,m.default)(t).call(t,".im-input-richtext").on("focusout",(function(){var e;if(window.getSelection?e=window.getSelection():document.getSelection?e=document.getSelection():document.selection&&(e=document.selection.createRange()),e&&e.rangeCount>0){var t=e.getRangeAt(0);U.set("curRange",t)}}))}},se.prototype.active=function(){var e=this;this.show(),e._children["msgViewer"].checkfull(),e._children["input"]&&e._children["input"]._options.editor.focus(),this._fetchMsgTimer||(this._fetchMsgTimer=new D({onElapsed:function(t){if(!e._hasFetchedOldMsg)return t();var n=e._children["msgViewer"].getFreshMsg(),i={user_id:e._contact.user_id,user_source:e._contact.user_source,last_msg_id:n?n.msg_id:null,last_msg:n||null,count:10,shop_id:e._contact.shop_id,shop_source:e._contact.shop_source};e._options.getFreshMsgRecords(i,(function(n){var i=U.get("contact")?U.get("contact"):null;n=(0,u.default)(n).call(n,(function(e){var t,n;if(i){var a=i.user_id+"@"+i.user_source,r=a;if(i.shop_id&&i.shop_source)r+="@@"+i.shop_id+"@"+i.shop_source;else{var o=j["me"]();r+="@@"+o.user_id+"@"+o.user_source}var s=e.sender_id+"@"+e.sender_source,c=e.to_id+"@"+e.to_source;t=s+"@@"+c,n=c+"@@"+s}return e.msg_status+""!=="2"&&(r==t||r==n||q(i)&&a==c)}));var r="tmpMsg-"+e._contact.user_id+"@"+e._contact.user_source;e._contact.shop_id&&e._contact.shop_source&&(r+="@@"+e._contact.shop_id+"@"+e._contact.shop_source);var o=U.get(r);if(o instanceof Array&&(n instanceof Array?n=(0,f.default)(n).call(n,o):(o.push(n),n=o),n=(0,a.default)(n).call(n,(function(e,t){return B(e.msg_id,t.msg_id)>0?1:B(e.msg_id,t.msg_id)<0?-1:0})),U.set(r,null)),0===n.length)return t();var s=e._children["msgViewer"].addMsg(n);s&&e._children["msgViewer"].scrollToBottom(),t()}))},duration:500})),this._fetchMsgTimer.start(),this._fetchReplaceMsgTimer||(this._fetchReplaceMsgTimer=new D({onElapsed:function(t){if(!e._hasFetchedOldMsg)return t();var n=e._contact.user_id+"@"+e._contact.user_source;e._contact.shop_id&&e._contact.shop_source&&(n+="@@"+e._contact.shop_id+"@"+e._contact.shop_source);var i={user_id:e._contact.user_id,user_source:e._contact.user_source,last_msg_id:ne&&ne[n]?ne[n].msg_id:null,count:10,shop_id:e._contact.shop_id,shop_source:e._contact.shop_source};e._options.getReplaceMsgRecords(i,(function(i){e._children["msgViewer"].replaceMsg(i,(function(){if(i instanceof Array){if(0==i.length)return;ne[n]=i[i.length-1]}else{if(!i||0==i.length||"{}"==(0,s.default)(i))return;ne[n]=i}})),t()}))},duration:500})),this._fetchReplaceMsgTimer.start(),this._fetchDeletedMsgTimer||(this._fetchDeletedMsgTimer=new D({onElapsed:function(t){e._contact.user_id,e._contact.user_source;e._contact.shop_id&&e._contact.shop_source&&(e._contact.shop_id,e._contact.shop_source);var n={user_id:e._contact.user_id,user_source:e._contact.user_source,shop_id:e._contact.shop_id,shop_source:e._contact.shop_source};e._options.getDeletedMsgRecords(n,(function(n){e._children["msgViewer"].hideMsg(n,(function(){})),t()}))},duration:500})),this._fetchDeletedMsgTimer.start()},se.prototype.unactive=function(){this._fetchMsgTimer&&(this._fetchMsgTimer.stop(),this._fetchMsgTimer=null),this._fetchReplaceMsgTimer&&(this._fetchReplaceMsgTimer.stop(),this._fetchReplaceMsgTimer=null),this._fetchDeletedMsgTimer&&(this._fetchDeletedMsgTimer.stop(),this._fetchDeletedMsgTimer=null),this.hide()},se.prototype.setTopic=function(e){var t,n=(0,m.default)(t=this._element).call(t,".im-chatwindow-content"),i=(0,m.default)(n).call(n,".im-chatwindow-topic");e?(n.addClass("im-topic"),-1==(0,d.default)(e).call(e,"<img")&&n.addClass("im-topic-no-img"),(0,m.default)(i).call(i,".im-chatwindow-topic-content").html(e)):n.removeClass("im-topic"),this._children["msgViewer"].resetScroll()},se.prototype.setStaticInput=function(e){this._children["staticInput"]&&this._children["staticInput"].setData({inputs:e})},se.prototype.disableInput=function(){var e;this._element.addClass("im-disableinput"),(0,m.default)(e=this.getElement()).call(e,".im-contact-status").hide()},se.prototype.setContactIdentification=function(e){var t;(0,m.default)(t=this.getElement()).call(t,".im-contact-type").html(e)},se.prototype.scrollToBottom=function(){this._children["msgViewer"].scrollToBottom()},se.prototype.updateHandleText=function(e){this._children["cwheader"].updateHandleText(e)},se.prototype.groupAtWindowRefresh=function(e,t,n,i){var a=[];(0,p.default)(t).call(t,(function(t){J(e[t])||a.push(t)})),this._children["floatwindow"].setData({contacts:e,id_sources:a,maxCount:n,filter:i||""}),this._children["floatwindow"].reset(),this._children["floatwindow"]._options.opened?this._children["input"]._options.editor.keyboardEntrust():this._children["input"]._options.editor.keyboardUnEntrust()},se.prototype.keyboardInput=function(e){this._children["floatwindow"].keyboardInput(e)},se.prototype.updateNotices=function(e){e=e||[],this._children["noticelist"].setData({notices:e}),this._children["msgViewer"].fold(37*e.length)},se.prototype.groupAtClose=function(){this._children["floatwindow"].close(),this._children["input"]._options.editor.keyboardUnEntrust()},se.prototype.otherReadUpdate=function(){var e=this;e._children["msgViewer"].updateMsgOtherRead()},se.prototype.switchAudioVideo=function(e){oe.call(this,e)},se.prototype._destroy=se.prototype.destroy,se.prototype.destroy=function(){var e=this;I.unregister(e._chatReisterCb),e._destroy()},e.exports=se},"7Q10":function(e,t,n){var i=n("G9WS"),a=i(n("eLKs")),r=i(n("/FZm")),o=!1,s=!1;e.exports={edge_top:0,edge_left:0,data_set:!1,hash:{},document_offs:{},factory:function(e,t,n,i){var a=this;return function(i){i.target;switch(i.preventDefault(),i.type){case"mousedown":e&&(t.dragContent=e,t.clientX=i.clientX,t.clientY=i.clientY);break;case"mousemove":if(null!==t.dragContent){var r=n["margin-left"]+(i.clientX-t.clientX),o=n["margin-top"]+(i.clientY-t.clientY);r<=a.edge_left&&(r=a.edge_left),o<=a.edge_top&&(o=a.edge_top),!isNaN(a.edge_bottom)&&o>=a.edge_bottom&&(o=a.edge_bottom),!isNaN(a.edge_right)&&r>=a.edge_right&&(r=a.edge_right),t.left=r,t.top=o,this.move(e,t)}break;case"mouseup":case"mouseout":null!==t.dragContent&&null!==t.left&&null!==t.top&&(t.dragContent=null,n["margin-left"]=t.left,n["margin-top"]=t.top);break}}},move:function(e,t){s||this.transfromCheck(e),o?e.css("transform","translate("+t.left+"px,"+t.top+"px)"):e.css({"margin-top":t.top,"margin-left":t.left}),e.data("draggable-x",t.left).data("draggable-y",t.top)},transfromCheck:function(e){var t=(0,r.default)(e).call(e,".im-draggable-bar");t.css("transform","translate(0px,0px)"),o=t.css("transform"),s=!0},mount:function(e,t){var n,i=this,c=e;s||i.transfromCheck(e);var l=(0,r.default)(e).call(e,".im-draggable-bar"),u=t&&t.document_move?String(e)+(new Date).valueOf():e;this.hash[u]=(0,a.default)(n=this.factory(c,{dragContent:null,clientX:null,clientY:null,left:null,top:null},{height:null,width:null,"margin-top":c.data("draggable-y")||null,"margin-left":c.data("draggable-x")||null},t,o)).call(n,this),t&&t.document_move?l.on("mousedown",(function(e){i.hash[u](e),$(document).on("mousemove",i.hash[u]),$(document).on("mouseup",i.document_off(u))})):l.on("mousedown mousemove mouseup mouseout",this.hash[u])},document_off:function(e){var t=this;return this.document_offs[e]||(this.document_offs[e]=function(n){t.hash[e](n),$(document).off("mousemove mouseup mouseout",t.hash[e]),$(document).off("mouseup",t.document_off(e))}),this.document_offs[e]},unmount:function(e){var t=(0,r.default)(element).call(element,".im-draggable-bar");this.hash[element]&&t.off("mousedown mousemove mouseup mouseout",this.hash[element]),delete this.hash[element]},setData:function(e){e&&(isNaN(e.edge_left)||(this.edge_left=e.edge_left,this.data_set=!0),isNaN(e.edge_top)||(this.edge_top=e.edge_top,this.data_set=!0),isNaN(e.edge_bottom)||(this.edge_bottom=e.edge_bottom,this.data_set=!0),isNaN(e.edge_right)||(this.edge_right=e.edge_right,this.data_set=!0))}}},"7b0v":function(e,t,n){var i=n("mIMY");e.exports=i("document","documentElement")},"7gcH":function(e,t,n){var i=n("OsYe"),a=n("/5b1").trim,r=n("gfA+"),o=i.parseFloat,s=1/o(r+"-0")!==-1/0;e.exports=s?function(e){var t=a(String(e)),n=o(t);return 0===n&&"-"==t.charAt(0)?-0:n}:o},"7iEH":function(e,t){var n="<div class=im-modal-container> <span class=im-modal-title></span> <span class=im-modal-content></span> <span class=im-modal-handler> <span class=im-modal-cancel>取消</span> <span class=im-modal-submit>确认</span> </span> </div>";e.exports=n},"7wkN":function(e,t,n){var i=n("m/sp");i("toStringTag")},"80UC":function(e,t,n){var i=n("G9WS");n("sMBO");var a=i(n("UtpJ")),r=i(n("M5Mt")),o=function(){this._events={}};o.prototype={addEventListener:function(e,t){var n=this._events[e];if(null!=n){for(var i=!1,a=0;a<n.length;a++)if(n[a]==t){i=!0;break}0==i&&n.push(t)}else n=new Array,n.push(t);this._events[e]=n},listen:function(e,t){this.addEventListener(e,t)},removeEventListener:function(e,t){var n=this._events[e];if(null!=n)for(var i=0;i<n.length;i++)if(n[i]==t||"string"===typeof t.name&&t.name.length&&n[i].name==t.name){(0,r.default)(n).call(n,i,1);break}},remove:function(e,t){this.removeEventListener(e,t)},triggerEvent:function(e){var t=this._events[e];if(null!=t)for(var n=0;n<t.length;n++){var i=t[n];null!=i&&i.apply(null,(0,a.default)(Array.prototype).call(arguments,1))}}},e.exports=o},"81Rs":function(e,t,n){var i=n("OsYe");e.exports=i.Promise},"823k":function(e,t){var n=["微笑","撇嘴","色","发呆","得意","流泪","害羞","闭嘴","睡觉","大哭","尴尬","发怒","调皮","呲牙","惊讶","难过","酷","冷汗","抓狂","吐","偷笑","愉快","白眼","傲慢","饥饿","困","惊恐","流汗","憨笑","悠闲","奋斗","咒骂","疑问","嘘","晕","疯了","衰","骷髅","敲打","再见","擦汗","抠鼻","鼓掌","糗大了","坏笑","左哼哼","右哼哼","哈欠","鄙视","委屈","快哭了","阴险","亲亲","惊吓","可怜","菜刀","西瓜","啤酒","篮球","乒乓","咖啡","米饭","猪头","玫瑰","凋谢","示爱","爱心","心碎","蛋糕","闪电","炸弹","刀","足球","瓢虫","便便","月亮","太阳","礼品","拥抱","强","弱","握手","胜利","抱拳","勾引","拳头","差劲","爱你","不","OK","小恶魔","大恶魔","多喝水","戴口罩","医护人员","白衣天使","比心","不熬夜","祖国加油","国泰民安","勤洗手","少外出","配合检查"];e.exports={getEmotionTitles:function(e){return n[e]},emotionTitles:n}},"8GlL":function(e,t,n){"use strict";var i=n("HAuM"),a=function(e){var t,n;this.promise=new e((function(e,i){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=i})),this.resolve=i(t),this.reject=i(n)};e.exports.f=function(e){return new a(e)}},"8Kxv":function(e,t,n){var i=n("G9WS"),a=i(n("guyh")),r=i(n("rPUy")),o=n("JVDe"),s=n("Bboc"),c=s.isEmpty,l=n("7Q10"),u=function(e){(function(t){var n={active:!1,index_base:1e3,index_z:1e3,u_key:0};$.extend(n,e),o.call(t,n)})(this),function(e){e._children={},e.view_count=0,e.top_u_key=null}(this)};u.prototype=(0,r.default)(o.prototype),u.prototype.bound=function(e){e&&e.length&&(this._element=e,this._options.active=!0)},u.prototype.render=function(){},u.prototype.getView=function(e){if(this._options.active)return e&&!c(this._children[e])?this._children[e]:null},u.prototype.addView=function(e,t){if(this._options.active){var n=this;if(c(e._options._u_key)&&(e._options._u_key=n._options.u_key+1),n._options.index_z+=1,e.index_z=n._options.index_z,n._children[e._options._u_key]=e,n._children[e._options._u_key].addEventListener("click",(function(e){c(e)})),n._children[e._options._u_key].addEventListener("close",(function(e){if(!c(e)){var t=e.u_key;n._children[t]&&n.removeView(n._children[t])}})),n._children[e._options._u_key].addEventListener("setTop",(function(e){if(!c(e)){var t=e.u_key;n._children[t]&&n.setTop(t)}})),n._element.append(e.getElement()),e.getElement().css("z-index",e.index_z),c(e._options._parent_u_key)||c(n._children[e._options._parent_u_key]))c(t)||c(t.initTop)||c(t.initLeft)||(e._options.stage=1,e._options._root_u_key=e._options._u_key,l.move(e.getElement(),{top:t.initTop,left:t.initLeft}));else{n._children[e._options._parent_u_key]._children_views[e._options._u_key]=e,e._options.stage=n._children[e._options._parent_u_key]._options.stage+1,e._options._root_u_key=n._children[e._options._parent_u_key]._options._root_u_key;var i=n._children[e._options._parent_u_key].getElement();if(i.hasClass("im-draggable-content")){var a=i.data("draggable-x"),r=i.data("draggable-y");a=isNaN(a)?0:a,r=isNaN(r)?0:r,l.move(e.getElement(),{top:r+40,left:a+40})}}if(!l.data_set){var o=$(".im-app");o&&(!o[0]||isNaN(-1*o[0].offsetTop)||isNaN(-1*o[0].offsetLeft)||l.setData({edge_top:-1*o[0].offsetTop,edge_left:-1*o[0].offsetLeft,edge_bottom:-1*o[0].offsetTop+o.height(),edge_right:o.width()}))}return l.mount(e.getElement(),{document_move:!0}),n.view_count++,e}},u.prototype.setTop=function(e){if(c(this.top_u_key)||this.top_u_key!==e){var t=[],n=[],i=[];for(var r in this._children)this._children[r]&&(t.push(this._children[r]),i.push(this._children[[r]].index_z),r!=e&&n.push(this._children[r]));if((0,a.default)(n).call(n,(function(e,t){return e.index_z>t.index_z?-1:1})),(0,a.default)(i).call(i,(function(e,t){return e>t?-1:1})),t.length){this._children[e].index_z=i.shift(),this._children[e].getElement().css("z-index",this._children[e].index_z),this.top_u_key=e;for(var o=0;o<n.length;o++)n[o]&&(n[o].index_z=i[o],n[o].getElement().css("z-index",i[o]))}}},u.prototype.removeView=function(e){if(this._options.active){var t=this;for(var n in e._children_views)c(t._children[n])||t.removeView(t._children[n]);e.getElement().remove(),delete t._children[e._options._u_key],e=null,t.view_count--,0==t.view_count&&(t._options.index_z=t._options.index_base)}},u.prototype.removeAll=function(){if(this._options.active)for(var e in this._children)c(this._children[e])||this.removeView(this._children[e])},u.prototype.hide=function(){this._options.active&&this._element.hide()},u.prototype.show=function(){this._options.active&&this._element.show()},e.exports=u},"8e1d":function(e,t,n){var i=n("G9WS");n("oVuX"),n("07d7"),n("rB9j"),n("UxlC"),n("EnZy");var a=i(n("rPUy")),r=i(n("Kwsy")),o=i(n("ZbhI")),s=i(n("WxoT")),c=i(n("6UaR")),l=i(n("nhkr")),u=i(n("RXMP")),d=n("Ptoe"),p=function(){var e={},t="Boolean Number String Function Array Date RegExp Object Error Symbol".split(" ");return(0,u.default)(t).call(t,(function(t){e["[object "+t+"]"]=t.toLowerCase()})),e}(),f=function(e){return null==e?e+"":"object"===(0,l.default)(e)||"function"===typeof e?p[{}.toString.call(e)]||"object":(0,l.default)(e)},m=c.default,_=function(e){return"function"===f(e)},h=function(e){return"object"===f(e)},g=function e(){var t,n,i,a,r,o,s=arguments[0]||{},c=1,u=arguments.length,d=!1;for("boolean"===typeof s&&(d=s,s=arguments[c]||{},c++),"object"===(0,l.default)(s)||_(s)||(s={}),c===u&&(s=this,c--);c<u;c++)if(null!=(r=arguments[c]))for(a in r)t=s[a],i=r[a],s!==i&&(d&&i&&(h(i)||(n=m(i)))?(n?(n=!1,o=t&&m(t)?t:[]):o=t&&h(t)?t:{},s[a]=e(d,o,i)):void 0!==i&&(s[a]=i));return s},v=function(e,t){var n,i=0;if(m(e)){for(n=e.length;i<n;i++)if(!1===t.call(e[i],i,e[i]))break}else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},y=function(e,t){var n,i=0;if(!e&&!t)return i;if(isNaN(e)||isNaN(t))return null;if(e+="",t+="","-"==e.charAt(0)&&"-"!=t.charAt(0))return i=-1,i;if("-"!=e.charAt(0)&&"-"==t.charAt(0))return i=1,i;"-"==e.charAt(0)&&"-"==t.charAt(0)&&(e=e.substring(1),t=t.substring(1),n=!0);var a=e.length,r=t.length;if(a>r)i=1;else if(a<r)i=-1;else if(a==r)for(var o=0;o<a;o++){if(e.charAt([o])>t.charAt([o])){i=1;break}if(e.charAt([o])<t.charAt([o])){i=-1;break}e.charAt([o]),t.charAt([o])}return n&&(i=1==i?-1:-1==i?1:0),i},w=function(e){var t=[];for(var n in e){var i=e[n];i=null==i?"":i,t[t.length]=encodeURIComponent(n)+"="+encodeURIComponent(i)}var a=/%20/g;return t.join("&").replace(a,"+")},b=function(){var e;return e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),e},x=function(){var e="Callback"+(Math.random()+"").replace(/\D/g,"");return e+"_"+(new Date).getTime()},S=function(e){e.type=(e.type||"GET").toUpperCase(),e.query=w(e.query),e.data=e.data&&(0,s.default)(e.data),e.encrypt&&e.data&&(e.data=d(e.data));var t,n=b();if(n.onreadystatechange=function(){if(4==n.readyState){var t=n.status;if(t>=200&&t<300){var i="",a=n.getResponseHeader("Content-type");i=-1!==(0,o.default)(a).call(a,"xml")&&n.responseXML?n.responseXML:"application/json"===a?JSON.parse(n.responseText):n.responseText,"json"==e.dataType&&"application/json"!=a?(e.complete&&e.complete(),e.error&&e.error(n,t,{message:"not json type error"})):(e.complete&&e.complete(),e.success&&e.success(i))}else e.complete&&e.complete(),e.error&&e.error(n,t,"failed!")}},t=e.encrypt&&e.query?e.url+"?params="+d(e.query)+"&version="+d.getVersion():e.url+"?"+e.query,n.open(e.type,t,!0),"GET"==e.type)n.send(null);else{var i=e.contentType?e.contentType:"application/x-www-form-urlencoded;charset=UTF-8";n.setRequestHeader("Content-type",i),n.send(e.data)}},k=function(e){e.type=(e.type||"GET").toUpperCase(),e.query=e.query?e.query:{};var t=e.jsonp?e.jsonp:x();e.query["callback"]=t,e.query=w(e.query);var n=document.getElementsByTagName("head")[0],i=document.createElement("script");n.appendChild(i),window[t]=function(a){n.removeChild(i),clearTimeout(i.timer),window[t]=null,e.complete&&e.complete(),e.success&&e.success(a)},e.encrypt&&e.query?i.src=e.url+"?params="+d(e.query)+"&version="+d.getVersion():i.src=e.url+"?"+e.query,e.timeout&&(i.timer=(0,r.default)((function(){window[t]=null,n.removeChild(i),e.complete&&e.complete(),e.error&&e.error(null,"failed",{message:"timeout!"})}),timeout)),i.onerror=function(){e.complete&&e.complete(),e.error&&e.error(null,"failed",{message:"script onload error!"})}},E=function(e){e=e||{},e.jsonp||e.dataType&&"jsonp"==e.dataType?k(e):S(e)},C=function(e,t,n){var i;return"function"===typeof t?(i=t,t=null):i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},g(i,e,n||{}),i.__super__=e.prototype,i.prototype=(0,a.default)(e.prototype),i.prototype._super=e,t&&g(!0,i.prototype,t),i};e.exports={extend:g,each:v,param:w,ajax:E,inherits:C,strToNumCompare:y,fnEmpty:function(){}}},"8lc0":function(e,t,n){var i=n("YyYo");e.exports=i},"8mLy":function(e,t,n){var i=n("G9WS");n("rB9j"),n("UxlC");var a=i(n("rPUy")),r=i(n("RKTd")),o=i(n("Kwsy")),s=i(n("/FZm")),c=n("JVDe"),l=n("zznM"),u=n("pOXT"),d=n("Itcm"),p=function(e){(function(t){var n={template:e.is_authority?u:l,member_avatar:'<div class="panel-unit"><div class="panel-circle panel-avatar"><img src="{$avatar_src}"></div><div class="panel-label">{$name}</div></div>',member_add:'<div class="panel-unit"><div class="panel-circle panel-add"></div></div>',member_delete:'<div class="panel-unit"><div class="panel-circle panel-delete"></div></div>',more_members:'<div class="more-members"></div>',pageIndex:0,perPage:20};$.extend(n,e),c.call(t,n)})(this),function(e){var t,n,i=new d({window:(0,s.default)(t=e._element).call(t,".im-panel-members"),content:(0,s.default)(n=e._element).call(n,".panel-members")});e._element.append(i.getElement()),e._children["flat-window-scrollbar"]=i,(0,o.default)((function(){i.init()}),0),i.addEventListener("scrolled",(function(t){var n,i,a=(0,s.default)(n=e.getElement()).call(n,".im-panel-members").height(),r=(0,s.default)(i=e.getElement()).call(i,".panel-members").height();if(r<a)return!1;r-a-t<=5&&e._options.hasMore&&e.render()}))}(this),function(e){var t,n,i,a,o,c,l,u,d,p,f,m,_,h,g=!1,v=(0,s.default)(t=e._element).call(t,".js-group-nick.edit-btn"),y=(0,s.default)(n=e._element).call(n,".js-group-nick.ensure-btn"),w=(0,s.default)(i=e._element).call(i,"input.js-group-nick"),b=!1,x=(0,s.default)(a=e._element).call(a,".js-group-name.edit-btn"),S=(0,s.default)(o=e._element).call(o,".js-group-name.ensure-btn"),k=(0,s.default)(c=e._element).call(c,"input.js-group-name"),E=!1,C=(0,s.default)(l=e._element).call(l,".js-group-notice.edit-btn"),A=(0,s.default)(u=e._element).call(u,".js-group-notice.ensure-btn"),O=(0,s.default)(d=e._element).call(d,"input.js-group-notice"),T=(0,s.default)(p=e._element).call(p,".panel-button"),M=(0,s.default)(f=e._element).call(f,".panel-disband-button"),I=(0,s.default)(m=e._element).call(m,".js-group-qrcode"),N=(0,s.default)(_=e._element).call(_,".member-btn.js-add-member"),L=(0,s.default)(h=e._element).call(h,".member-btn.js-delete-member");e._options.doms={nick_edit_btn:v,nick_ensure_btn:y,nick_input:w,name_edit_btn:x,name_ensure_btn:S,name_input:k,notice_edit_btn:C,notice_ensure_btn:A,notice_input:O},e._options.nick_loading=!1,e._options.name_loading=!1,e._options.notice_loading=!1,x.click((function(t){b||e._options.name_loading||(x.removeClass("hower-show").hide(),S.addClass("showed"),k.attr("disabled",!1),b=!0)})),S.click((function(t){var n,i,a,o=k.val();if(!(o.length>40)){e._options.name_loading=!0;var c=k.val();if(!(c.length>40)){var l=(0,s.default)(n=(0,s.default)(i=(0,s.default)(a=$("body")).call(a,".im-app")).call(i,".im-chatwindow")).call(n,".im-panel-container");o.length>0&&0==(0,r.default)(o).call(o).length||0==o.length?(e.resetPanel("group_name",e._data.group_name),l.hide()):e.triggerEvent("updateGroupName",{group_name:o,old_group_name:e._data.group_name}),b=!1,e._opened=!1}}})),v.click((function(t){g||e._options.nick_loading||(v.removeClass("hower-show").hide(),y.addClass("showed"),w.attr("disabled",!1),g=!0)})),y.click((function(t){var n=w.val();g&&!e._options.nick_loading&&(e._options.nick_loading=!0,e.triggerEvent("updateNickName",{nick_name:n||"",old_nick_name:e._data.nick_name,id:e._data.user_id,source:e._data.user_source}),g=!1,e._opened=!1)})),C.click((function(t){E||e._options.notice_loading||(C.removeClass("hower-show").hide(),A.addClass("showed"),O.attr("disabled",!1),E=!0)})),A.click((function(t){var n,i,a;O.val();e._options.notice_loading=!0;var o=O.val();if(!(o.length>2e3)){var c=(0,s.default)(n=(0,s.default)(i=(0,s.default)(a=$("body")).call(a,".im-app")).call(i,".im-chatwindow")).call(n,".im-panel-container");o.length>0&&0==(0,r.default)(o).call(o).length?(e.resetPanel("group_notice",e._data.group_notice),c.hide()):e.triggerEvent("groupNotice",{group_notice:o,old_group_notice:e._options.group_notice}),E=!1,e._opened=!1}})),N.click((function(){e.triggerEvent("addMember",{contacts:e._data.contacts})})),e._options.is_authority&&L.click((function(){e.triggerEvent("deleteMember",{contacts:e._data.contacts,id_sources:e._data.id_sources})})),I.click((function(){e.triggerEvent("getGroupQrCode")})),T.click((function(){e.triggerEvent("quitGroup")})),M.click((function(){e.triggerEvent("disbandGroup")})),e._element.on("click",(function(e){e.stopPropagation()}))}(this)};p.prototype=(0,a.default)(c.prototype),p.prototype.render=function(){for(var e,t,n=this._data.contacts,i=this._data.id_sources,a="",r=0,o=this._options.pageIndex*this._options.perPage;o<i.length;o++)if(n&&n[i[o]]&&(a+=this._options.member_avatar.replace("{$avatar_src}",n[i[o]].avatar).replace("{$name}",n[i[o]].remark_name||n[i[o]].nick_name||n[i[o]].user_name),r+=1),r>=this._options.perPage)break;0==this._options.pageIndex?(0,s.default)(e=this._element).call(e,".panel-members").html(a):(0,s.default)(t=this._element).call(t,".panel-members").append(a);this._options.pageIndex*this._options.perPage+r<i.length?(this._options.pageIndex+=1,this._options.hasMore=!0):this._options.hasMore=!1},p.prototype.setValue=function(){var e;this._options.pageIndex=0;var t,n=this._data.user_id+"@"+this._data.user_source,i=this._data.contacts[n];this._options.is_authority&&(0,s.default)(t=this._element).call(t,".js-group-notice").val(this._data.group_notice);(0,s.default)(e=this._element).call(e,".js-group-name").val(this._data.group_name);var a,r=i.user_id+"@"+i.user_source,o=this._data.contacts[r];o&&o.nick_name&&(this._data.nick_name=o.nick_name,(0,s.default)(a=this._element).call(a,".js-group-nick").val(o.nick_name))},p.prototype.resetPanel=function(e,t){var n=this._options.doms;switch(e){case"nick_name":n.nick_ensure_btn.removeClass("showed"),n.nick_edit_btn.addClass("hower-show").show(),n.nick_input.val(t),n.nick_input.attr("disabled",!0),this._options.nick_loading=!1;break;case"group_name":n.name_ensure_btn.removeClass("showed"),n.name_edit_btn.addClass("hower-show").show(),n.name_input.val(t),n.name_input.attr("disabled",!0),this._options.name_loading=!1;break;case"group_notice":n.notice_ensure_btn.removeClass("showed"),n.notice_edit_btn.addClass("hower-show").show(),n.notice_input.val(t),n.notice_input.attr("disabled",!0),this._options.notice_loading=!1;break;default:break}},p.prototype.open=function(){this._opened=!0,this._element.addClass("im-opened")},p.prototype.close=function(){this._opened=!1,this._element.removeClass("im-opened")},p.prototype.toggle=function(){this._opened?this.close():this.open()},e.exports=p},"91PM":function(e,t,n){var i=n("G9WS");n("oVuX");var a=i(n("lHQ6")),r=i(n("RKTd")),o=i(n("WxoT")),s=i(n("rPUy")),c=i(n("o+MX")),l=i(n("FLGM")),u=i(n("/FZm")),d=n("5m4N"),p=n("eBtS"),f=n("Kbbi"),m=(n("VRhk"),n("sfi9")),_=n("/Pub"),h=function(e){(function(t){var n,i={template:f};p.extend(i,e),d.call(t,i);var a=(0,u.default)(n=t._element).call(n,".im-evaluate2-input");a.keydown((function(){var e=a.val().length;if(e>140){a.attr("readonly","readonly");var t="超过可输入的最大字符数，请重新输入！";_.dispatch({type:m.TOAST_SHOW,data:{content:t,interval:2e3}})}}))})(this)},g=function(e){for(var t=e.starNum,n=e.activeNum,i=p("<div></div>"),a=0;a<t;a++){var r=p("<span></span>");r.addClass("star-content-span"),r.attr("starIndex",a),a==t-1&&r.addClass("last-star"),a<n&&r.addClass("star-active"),i.append(r)}return i},v=function(e,t,n){var i=e.options[t].labels,a=i.length;return 1===a||a%3===2?n.addClass("center"):n.removeClass("center"),(0,l.default)(i).call(i,(function(e,t){var n,i;return(0,c.default)(n=(0,c.default)(i='<div class="tag-content-div'.concat(2==t?" last-tag":"",'" title=')).call(i,e,">")).call(n,e,"</div>")})).join("")};h.prototype=(0,s.default)(d.prototype),h.prototype.renderContent=function(){var e=this._data.msg;if(!e)return!1;var t,n=e.content,i=JSON.parse((0,o.default)(n)),s=this._element;if(i&&!i.options)return!1;var d=(0,u.default)(s).call(s,".star-content"),f=(0,u.default)(s).call(s,".im-evaluate2-title"),h=(0,u.default)(s).call(s,".im-evaluate2-title2"),y=(0,u.default)(s).call(s,".send-content"),w=(0,u.default)(s).call(s,".smile-content"),b=(0,u.default)(s).call(s,".tag-content"),x=(0,u.default)(s).call(s,".input-content"),S=function n(a){var c;if(a.stopPropagation(),i.options.length<5){var l,p,f=(0,u.default)(l=(0,u.default)(s).call(s,".smile-content")).call(l,".active").attr("smile-idx");c=(0,u.default)(p=i.options).call(p,(function(e){return e.idx==f}))}else{var h;c=(0,u.default)(h=i.options).call(h,(function(e){return e.idx==t}))}if(c){c.level=t+1;var g=(0,u.default)(b).call(b,".tag-active"),v=[];g.each((function(e,t){var n;v.push((0,r.default)(n=t.innerText).call(n))}));var S=(0,u.default)(x).call(x,".im-evaluate2-input").val();if(c.remark_info&&1===c.remark_info.required&&""===S){var A="写一下您的宝贵意见吧！";_.dispatch({type:m.TOAST_SHOW,data:{content:A,interval:2e3}})}else if(c.labels_required&&1===c.labels_required&&v===[]){A="至少选择一个标签";_.dispatch({type:m.TOAST_SHOW,data:{content:A,interval:2e3}})}else{var O={extra:i.extra,selected_option:{title:c.title,idx:c.idx,labels:v,level:c.level,remark:S}},T={msg_id:e.msg_id,sender_id:e.sender_id,sender_source:e.sender_source,to_id:e.to_id,to_source:e.to_source,show_type:i.type,bus_scene:i.bus_scene,result:O},M=JSON.parse((0,o.default)(e));M.content.result=O;var I={sendMsg:T,updateMsg:M};_.dispatch({type:m.SET_EVALUATE,data:I}),y.text("感谢您的评价，这将帮助我们做得更好"),y.css("color","rgba(153,153,153,1)"),y.off("click",n),d.off("click",k),w.off("click",E),b.off("click",C),(0,u.default)(s).call(s,".im-evaluate2-input").attr("disabled","disabled")}}},k=function(e){e.stopPropagation();var r=p(e.target)||p(window.event.srcElement);if(!r.hasClass("star-content-span"))return!1;var o=(0,a.default)(r.attr("starIndex")),s=r.parent().children();t=o;for(var c=s.length,l=0;l<c;l++)p(s[l]).removeClass("star-active"),l<o+1&&p(s[l]).addClass("star-active");y.css("color","rgba(33, 187, 247, 1)");var u=v(n,o,b);b.html(u),i.options[o].remark_info?x.css("display","flex"):x.css("display","none")},E=function(e){e.stopPropagation();var r=p(e.target)||p(window.event.srcElement);if("undefined"==typeof r.attr("smile-idx"))return!1;for(var o=(0,a.default)(r.attr("smile-idx")),s=r.parent().parent().children(),c=s.length,l=0;l<c;l++)p(s[l]).removeClass("active"),l==o&&p(s[l]).addClass("active");t=0,y.css("color","rgba(33, 187, 247, 1)");var u=v(n,o,b);b.html(u),i.options[o].remark_info?x.css("display","flex"):x.css("display","none")},C=function(e){e.stopPropagation();var t=p(e.target)||p(window.event.srcElement);if(!t.hasClass("tag-content-div"))return!1;t.hasClass("tag-active")?t.removeClass("tag-active"):t.addClass("tag-active")},A=i.title?i.title:"";if(f.text(A),h.text("匿名评价,请放心填写"),0===i.status){if(!i.options||0===i.options.length)return;var O,T=i.options.length;if(T<5){var M;O=2==T?["good-smile","bad-smile"]:3==T?["good-smile","ok-smile","bad-smile"]:[];var I=(0,l.default)(M=i.options).call(M,(function(e,t){var n,i,a,r;return(0,c.default)(n=(0,c.default)(i=(0,c.default)(a=(0,c.default)(r='<div class="'.concat(O[e.idx],' emojiBox" smile-idx="')).call(r,e.idx,'"><span  smile-idx="')).call(a,e.idx,'"></span><span smile-idx="')).call(i,e.idx,'">')).call(n,e.title,"</span></div>")})).join("");w.html(I)}else{var N=g({starNum:5,activeNum:0});d.append(N)}d.on("click",k),w.on("click",E),y.on("click",S),b.on("click",C)}else{if(i&&!i.result)return!1;var L=i.options&&i.options.length,R=i.result.selected_option?i.result.selected_option:{};R.title||(R.title="");var P,D=R.idx?R.idx:0,j=(0,u.default)(s).call(s,".im-evaluate2-input");if(R.remark?(x.css("display","flex"),j.remove(),x.append(p('<div class = "im-input-has-evaluate"></div>').text(R.remark))):x.hide(),L>=5){var U=g({starNum:5,activeNum:R.level});d.append(U),w.hide()}else{var W,F,B,G;if(2===L)P=["good-smile","bad-smile"];else{if(3!==L)return;P=["good-smile","ok-smile","bad-smile"]}w.addClass("result");var z=(0,c.default)(W=(0,c.default)(F=(0,c.default)(B=(0,c.default)(G=' <div class="'.concat(P[D],' emojiBox active" smile-idx="')).call(G,D,'"><span  smile-idx="')).call(B,D,'"></span><span  smile-idx="')).call(F,D,'">')).call(W,R.title,"</span></div>");w.html(z),d.hide()}var V=R.labels?R.labels:[];if(0===V.length)b.hide();else{1!==V.length&&V.length%3!==2||b.addClass("center");var H=(0,l.default)(V).call(V,(function(e){var t;return(0,c.default)(t='<div class="tag-content-div tag-active" title='.concat(e,">")).call(t,e,"</div>")})).join("");b.addClass("result"),b.html(H)}y.text("感谢您的评价，这将帮助我们做得更好"),y.css("color","rgba(153,153,153,1)")}},e.exports=h},"93I0":function(e,t,n){var i=n("VpIT"),a=n("kOOl"),r=i("keys");e.exports=function(e){return r[e]||(r[e]=a(e))}},"9E9t":function(e,t,n){"use strict";var i=n("wbIY"),a=n("Bvq2"),r=n("oBZR"),o=n("ogVW"),s=n("cEPT"),c=n("T/97"),l=n("Y4yM"),u=Object.assign,d=Object.defineProperty;e.exports=!u||a((function(){if(i&&1!==u({b:1},u(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),a="abcdefghijklmnopqrst";return e[n]=7,a.split("").forEach((function(e){t[e]=e})),7!=u({},e)[n]||r(u({},t)).join("")!=a}))?function(e,t){var n=c(e),a=arguments.length,u=1,d=o.f,p=s.f;while(a>u){var f,m=l(arguments[u++]),_=d?r(m).concat(d(m)):r(m),h=_.length,g=0;while(h>g)f=_[g++],i&&!p.call(m,f)||(n[f]=m[f])}return n}:u},"9EZz":function(e,t){var n='<li class="im-msg im-msg-evaluate1"> <div class=im-msg-time></div> <div class=im-msg-checkbox></div> <div class=im-msg-evaluate1-main> <div class="im-msg-content im-evaluate1-content"> <div class=title-content> <div class=im-evaluate1-title></div> <div class=im-evaluate1-title2></div> </div> <div class=im-evaluate1Card-content> <div class=star-content></div> <div class=tag-content></div> <div class=input-content><input type=text class=im-evaluate1-input placeholder=我还有话说 /></div> <div class=send-content>提交</div> </div> </div> </div> <div class=im-msg-collect-name></div> <div class=im-msg-collect-time></div> <div class=im-msg-feedback> <div class=im-msg-feedback-container> <span class=im-msg-feedback-icon></span> <span class=im-msg-feedback-content></span> </div> </div> </li>';e.exports=n},"9EaA":function(e,t,n){n("2SXh");var i=n("dktu"),a=i.Object;e.exports=function(e,t){return a.create(e,t)}},"9HS+":function(e,t,n){n("cRbr");var i=n("oWnS");e.exports=i("Array").splice},"9Mno":function(e,t,n){var i=n("O3vZ"),a=Array.prototype;e.exports=function(e){var t=e.indexOf;return e===a||e instanceof Array&&t===a.indexOf?i:t}},"9Ov1":function(e,t){var n='<div class="im-float-view im-draggable-content"> <div class="im-float-view-header im-draggable-bar"> <p class=im-float-view-title> <span class=im-float-records></span> </p> <div class=im-float-close></div> </div> <div class=im-float-view-body> </div> </div> ';e.exports=n},"9XUY":function(e,t,n){"use strict";var i=n("u4PT").IteratorPrototype,a=n("SJYm"),r=n("LGyv"),o=n("KHTo"),s=n("dGO/"),c=function(){return this};e.exports=function(e,t,n){var l=t+" Iterator";return e.prototype=a(i,{next:r(1,n)}),o(e,l,!1,!0),s[l]=c,e}},"9d/t":function(e,t,n){var i=n("AO7/"),a=n("xrYK"),r=n("tiKp"),o=r("toStringTag"),s="Arguments"==a(function(){return arguments}()),c=function(e,t){try{return e[t]}catch(n){}};e.exports=i?a:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=c(t=Object(e),o))?n:s?a(t):"Object"==(i=a(t))&&"function"==typeof t.callee?"Arguments":i}},"9fuf":function(e,t,n){var i=n("Bvq2");e.exports=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},A2Ma:function(e,t,n){var i=n("OsYe"),a=n("1lkh"),r=n("eOcF"),o=n("PoCt"),s=n("HmPo"),c=n("YtAO"),l=a("wks"),u=i.Symbol,d=c?u:u&&u.withoutSetter||o;e.exports=function(e){return r(l,e)||(s&&r(u,e)?l[e]=u[e]:l[e]=d("Symbol."+e)),l[e]}},A2ZE:function(e,t,n){var i=n("HAuM");e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,a){return e.call(t,n,i,a)}}return function(){return e.apply(t,arguments)}}},AFTl:function(e,t,n){var i=n("pevS"),a=n("mIMY"),r=n("Bvq2"),o=a("JSON","stringify"),s=/[\uD800-\uDFFF]/g,c=/^[\uD800-\uDBFF]$/,l=/^[\uDC00-\uDFFF]$/,u=function(e,t,n){var i=n.charAt(t-1),a=n.charAt(t+1);return c.test(e)&&!l.test(a)||l.test(e)&&!c.test(i)?"\\u"+e.charCodeAt(0).toString(16):e},d=r((function(){return'"\\udf06\\ud834"'!==o("\udf06\ud834")||'"\\udead"'!==o("\udead")}));o&&i({target:"JSON",stat:!0,forced:d},{stringify:function(e,t,n){var i=o.apply(null,arguments);return"string"==typeof i?i.replace(s,u):i}})},AIit:function(e,t){var n='<li class="im-msg im-msg-card im-provide-contactinfo-card"> <div class=im-msg-time></div> <div class=im-msg-checkbox></div> <div class=im-msg-main> <img class="im-avatar im-msg-avatar"/> <span class=im-msg-send-status></span> <span class=im-msg-showed-status></span> <span class=im-msg-user-name></span> <div class="im-msg-content im-contactinfo-card-content"> <div class=im-contactinfo-title></div> <div class=im-contactinfo-detail></div> </div> <span class=im-msg-arrow></span> </div> <div class=im-msg-collect-name></div> <div class=im-msg-collect-time></div> <div class=im-msg-feedback> <div class=im-msg-feedback-container> <span class=im-msg-feedback-icon></span> <span class=im-msg-feedback-content></span> </div> </div> </li>';e.exports=n},"AO7/":function(e,t,n){var i=n("tiKp"),a=i("toStringTag"),r={};r[a]="z",e.exports="[object z]"===String(r)},AQ2t:function(e,t){var n="<div class=im-toast-container> <span class=im-toast-icon></span> <span class=im-toast-content></span> </div>";e.exports=n},AUl2:function(e,t,n){var i=n("/EgQ"),a=n("OsYe");e.exports="process"==i(a.process)},AZU8:function(e,t,n){var i=n("G9WS"),a=n("LYCE");n("07d7"),n("JfAA"),a(t,"__esModule",{value:!0}),t.default=u;var r=i(n("LYCE")),o=i(n("3g4U")),s=i(n("yd4P")),c=i(n("bhf8")),l=n("OY+d");function u(e,t,n){var i,a=p(n);a||(i=new o.default),c.default?(0,r.default)(e,t,{enumerable:!0,configurable:!0,get:function(){return a?a.dep.depend():i&&i.depend(),n},set:function(e){n!==e&&(n=e,a?a.dep.notify():i&&i.notify())}}):(0,l.isEmpty)(e.__vm__hash)?(e.__vm__hash={},e.__vm__set=function(t,n){e[t]!==n&&(e[t]=n,e.__vm__hash[t]&&(a?a.dep.notify():i&&i.notify()))},e.__vm__get=function(t){return e.__vm__hash[t]&&(a?a.dep.depend():i&&i.depend()),e[t]},e.__vm__hash[t]=!0):e.__vm__hash[t]=!0}function d(e){return"[object Object]"===Object.prototype.toString.call(e)}function p(e){var t;if(d(e))return t=e.hasOwnProperty("__ob__")&&e.__ob__ instanceof s.default?e.__ob__:new s.default(e),t}},AnMC:function(e,t,n){var i=n("wbIY"),a=n("QYBB"),r=n("LGyv");e.exports=i?function(e,t,n){return a.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},ArO8:function(e,t){var n={};e.exports={get:function(e){return n[e]},set:function(e,t){n[e]=t}}},B9Ye:function(e,t,n){var i=n("G9WS"),a=n("LYCE"),r=n("HnXd"),o=n("qjzJ"),s=n("RXMP"),c=n("fHi0"),l=n("5PDf"),u=n("OWCx"),d=n("+oHS");n("pNMO"),n("4Brf"),n("4mDm"),n("wZ/5"),n("rOQg"),n("sMBO"),n("qePV"),n("toAj"),n("07d7"),n("5s+n"),n("rB9j"),n("JfAA"),n("PKPk"),n("Rm1S"),n("UxlC"),n("EnZy"),n("XMab"),n("moxL"),n("qXVe"),n("c162"),n("waxf"),n("0TkE"),n("Onu3"),n("1dYe"),n("gvgV"),n("6R/c"),n("YL0P"),n("X5Zq"),n("MoCz"),n("P8wP"),n("ypFw"),n("JaFt"),n("zSZm"),n("PF2M"),n("KVSy"),n("ZJ55"),n("IZzc"),n("Fwt+"),n("s5qe"),n("cvf0"),n("3bBZ");var p=i(n("M5Mt")),f=i(n("guyh")),m=i(n("o+MX")),_=i(n("rPUy")),h=i(n("526F")),g=i(n("04Ix")),v=i(n("KYsz")),y=i(n("+oHS")),w=i(n("FLGM")),b=i(n("UtpJ")),x=i(n("WxoT")),S=i(n("/FZm")),k=i(n("Kwsy")),E=i(n("RXMP")),C=i(n("5PDf")),A=i(n("ZbhI")),O=i(n("OBge"));function T(e,t){var n=d(e);if(u){var i=u(e);t&&(i=l(i).call(i,(function(t){return c(e,t).enumerable}))),n.push.apply(n,i)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)s(n=T(Object(i),!0)).call(n,(function(t){(0,g.default)(e,t,i[t])}));else if(o)r(e,o(i));else{var l;s(l=T(Object(i))).call(l,(function(t){a(e,t,c(i,t))}))}}return e}var I=n("eBtS"),N=n("oQPd"),L=n("HIWR"),R=n("Lw5C"),P=n("JVDe"),D=n("7Muv"),j=n("Ew5d"),U=n("xdfU"),W=n("azbg"),F=n("/bov"),B=n("Mde1"),G=n("if9f"),z=n("8Kxv"),V=n("O+0l"),H=n("iCai"),Y=(n("l1Yk"),n("i8Iq")),q=n("eS68"),K=n("/Pub"),J=n("vtKQ"),X=n("JY0F"),Z=n("sfi9"),Q=n("exIe"),$=n("YKFC"),ee=n("QoNM"),te=n("bXAe"),ne=n("1Fqx"),ie=n("tKrM"),ae=n("urm1"),re=n("HBAM"),oe=n("Yr6i"),se=n("zccT"),ce=n("L/Jv"),le=(n("mSDJ").Base64,n("8e1d").strToNumCompare),ue=n("Bboc"),de=ue.asynchPipe,pe=ue.isGroupUser,fe=ue.isEmpty,me=ue.jsonHandler,_e=ue.isShopModeUser,he=ue.isShopModeUserSource,ge=ue.sumBigNumber,ve=ue.isAnonymousSession,ye=ue.is_remind_helper,we=n("a/VA"),be=we.non_forward_show_types,xe=we.non_delete_show_types,Se=we.non_collect_show_types,ke="isWebimActive",Ee=n("VRhk"),Ce=n("ArO8"),Ae=n("sD8x"),Oe=n("L8zM"),Te=n("D0WW"),Me=n("wqwd"),Ie=n("HG+/"),Ne=(n("Bwsg"),n("2aSv")),Le=n("qw2F"),Re=n("R4fh").getMsgSize,Pe=n("R4fh").extendMsgValidity,De=n("nUB+"),je=(De.urlConvert,1),Ue={},We={},Fe={},Be={},Ge=function(){var e=this._children["audio-player"];return e||(e=new W,this._element.append(e.getElement()),this._children["audio-player"]=e),e},ze=function(){var e=this._children["video-player"];return e||(e=new F,this._element.append(e.getElement()),this._children["video-player"]=e),e},Ve=function(){var e=!1,t=window.top;return e=void 0!=t.outerWidth?t.outerWidth<=160&&t.outerHeight<=27:t.screenTop<-3e4&&t.screenLeft<-3e4,e},He=function(e,t){var n=this;t?(n._notify&&n._notify.close(),e.set(),n._allunreadcount>0&&n.titleNotify(n._allunreadcount)):(window.top.document.title=n._originalTitle,n._allunreadcountTimer&&n._allunreadcountTimer.stop())},Ye=function(e,t,n){this._biz.getMsgRecords(e,(function(e,n){t&&t(e,n)}),(function(e){n(e)}))},qe=function(e,t,n){var i=this._biz.me();this._biz.getReplaceMsgRecords(e,(function(n){if(0==n.length)return t(n);Ee["getUserinfo"]([{user_id:e.user_id,user_source:e.user_source,shop_id:e.shop_id,shop_source:e.shop_source},{user_id:i.user_id,user_source:i.user_source}],(function(e){I.each(n,(function(t,n){n.sender_info=e[n.sender_id+"@"+n.sender_source],n.to_info=e[n.to_id+"@"+n.to_source]})),t(n)}))}),(function(e){n(e)}))},Ke=function(e){var t=this,n=[],i={sender_id:e.sender_id+"",sender_source:e.sender_source,msg_id:e.msg_id+"",to_id:e.to_id+"",to_source:e.to_source};n.push(i),t._biz.ackMsgRead(n,(function(){K.dispatch({type:Z.MSG_AUDIO_ACK_READ,data:{msg_id:e.msg_id}})}))},Je=function(e){return e+""==="null"||e+""==="undefined"||""===e},Xe=function(e,t){var n=this,i=e.param.level,a=e.param.width,r=e.responseId,o=ISDCaptcha({element:"ISDCaptcha",width:a,type:i,showType:"win",sessionId:r,winAutoShow:!0,successCallback:function(e){var a={sessionId:r,level:i,successToken:e.successToken};n._biz.validateCaptcha(a,(function(e){t(e)}),(function(){t(null)}))},failCallback:function(){t(null)}});o.init()},Ze=function e(t,n){var i=this;return new O.default((function(a,r){var o,s=i,c=t._original_content?t._original_content:t.content;if(fe(t)||"chat_card"!=t.show_type||(c=t,c.type="chat_card"),-1==(0,A.default)(o=["video","audio","file","msg_batch_forward_card","chat_card"]).call(o,c.type))return a();var l=!fe(n)&&!fe(n.no_extendMsgValidity)&&n.no_extendMsgValidity;if("msg_batch_forward_card"===c.type){var u,d=c.msgs_preview&&(0,C.default)(u=c.msgs_preview).call(u,(function(e){return"string"==typeof e.content&&(e.content=me.parse(e.content)),"msg_batch_forward_card"==e.content.type}));if(d&&d.length>0&&c.msgs&&c.msgs.length){var p;if(fe(t.sender_id)||fe(t.to_id)){var f,m,_=[];if(fe(t.forward_msgs&&t.forward_msgs.length>0))t.content&&t.content.msgs_preview&&(0,E.default)(f=t.content.msgs_preview).call(f,(function(t){"msg_batch_forward_card"!=t.type&&_.push(e.call(s,t,n))}));else(0,E.default)(m=t.forward_msgs).call(m,(function(i){"string"==typeof i.content&&(i.content=me.parse(i.content)),i.forward_msg_id=t.forward_msg_id?t.forward_msg_id:t.msg_id,i.sender_id=t.sender_id,i.sender_source=t.sender_source,i.to_id=t.to_id,i.to_source=t.to_source,_.push(e.call(s,i,n))}));return void O.default.all(_).then((function(e){a(e)})).catch((function(e){r(e)}))}var h=[];(0,E.default)(p=c.msgs).call(p,(function(e){h.push(e.msg_id)})),s._biz.getForwardMsg({forward_msg_id:t.forward_msg_id?t.forward_msg_id:t.msg_id,forward_sender_id:t.sender_id,forward_sender_source:t.sender_source,forward_to_id:t.to_id,forward_to_source:t.to_source,msgs:h},(function(i){var o=[];(0,E.default)(i).call(i,(function(i){"string"==typeof i.content&&(i.content=me.parse(i.content)),i.forward_msg_id=t.forward_msg_id?t.forward_msg_id:t.msg_id,i.sender_id=t.sender_id,i.sender_source=t.sender_source,i.to_id=t.to_id,i.to_source=t.to_source,o.push(e.call(s,i,n))})),O.default.all(o).then((function(e){a(e)})).catch((function(e){r(e)}))}),(function(e){r(e)}))}else if(c.msgs_preview&&c.msgs_preview.length){var g;_=[];(0,E.default)(g=c.msgs_preview).call(g,(function(t){"string"==typeof t.content&&(t.content=me.parse(t.content)),_.push(e.call(s,t,n))})),O.default.all(_).then((function(e){a(e)})).catch((function(e){r(e)}))}}else if("chat_card"===c.type){var v,y=[];(0,E.default)(v=c.msgs).call(v,(function(t){"string"==typeof t.content&&(t.content=me.parse(t.content)),y.push(e.call(s,t,n))})),O.default.all(y).then((function(e){a(e)})).catch((function(e){r(e)}))}else{var w,b,x,S=s._biz.me(),k=[],T=-1!=(0,A.default)(w=c.url).call(w,$.WOS_CLIENT_APP_ID)&&$.WOS_CLIENT_URL?$.WOS_CLIENT_URL:$.WOS_CDN_URL?$.WOS_CDN_URL:"",M=decodeURIComponent(c.url).split(T),I=(k=!fe(T)&&M.length>1?M[1].split("/"):!fe(T)&&M.length>0?M[0].split("/"):[],c.wos_file_name?c.wos_file_name:-1!=(0,A.default)(b=c.url).call(b,$.WOS_CLIENT_APP_ID)?k[8]||k[5]:k[3]),N=k.length,L=-1!=(0,A.default)(x=c.url).call(x,$.WOS_CLIENT_APP_ID)?$.WOS_CLIENT_APP_ID:k[1];fe(L)&&N>3&&(L=k[N-3]);var R={wos_appid:L,wos_file_name:I,send_type:c.type,sender_id:S.user_id,sender_source:S.user_source,to_id:S.user_id===t.to_id?t.sender_id:t.to_id,to_source:t.to_source};if(fe(L))return void r(new Error("参数错误"));s._biz.getWosToken(R,(function(e){if(e&&e.wos_file_expire&&(e.wos_file_expire=Math.floor(+e.wos_file_expire/3600)),e._wos_file_expire=e.wos_file_expire,e.no_extendMsgValidity=l,l){if(!e)return void r(err);e.no_extendMsgValidity=!0}else fe(n)||l||fe(n.wos_file_expire)||(e.extend_wos_file_expire=n.wos_file_expire);Pe($,e,t).then((function(e){a(e)})).catch((function(e){r(e)}))}),(function(e){r(e)}))}}))},Qe=function e(t){var n=this;return new O.default((function(i,a){var r=n,o=t._original_content?t._original_content:t.content;if("msg_batch_forward_card"==o.type){var s,c=o.msgs_preview&&(0,C.default)(s=o.msgs_preview).call(s,(function(e){return"string"==typeof e.content&&(e.content=me.parse(e.content)),"msg_batch_forward_card"==e.content.type}));if(c&&c.length>0&&o.msgs&&o.msgs.length){var l,u=[];(0,E.default)(l=o.msgs).call(l,(function(e){u.push(e.msg_id)})),r._biz.getForwardMsg({forward_msg_id:t.forward_msg_id?t.forward_msg_id:t.msg_id,forward_sender_id:t.sender_id,forward_sender_source:t.sender_source,forward_to_id:t.to_id,forward_to_source:t.to_source,msgs:u},(function(n){var o=[],s=0;(0,E.default)(n).call(n,(function(n){"string"==typeof n.content&&(n.content=me.parse(n.content)),n.forward_msg_id=t.forward_msg_id?t.forward_msg_id:t.msg_id,n.sender_id=t.sender_id,n.sender_source=t.sender_source,n.to_id=t.to_id,n.to_source=t.to_source,o.push(e.call(r,n))})),O.default.all(o).then((function(e){(0,E.default)(e).call(e,(function(e){s+=Number(e)})),i(s)})).catch((function(e){a(e)}))}),(function(e){a(e)}))}else if(o.msgs_preview&&o.msgs_preview.length){var d,p=[],f=0;(0,E.default)(d=o.msgs_preview).call(d,(function(t){"string"==typeof t.content&&(t.content=me.parse(t.content)),p.push(e.call(r,t))})),O.default.all(p).then((function(e){(0,E.default)(e).call(e,(function(e){f+=Number(e)})),i(f)})).catch((function(e){a(e)}))}}else Re(t).then((function(e){i(e)})).catch((function(e){a(e)}))}))},$e=function(e){this._status=Y.MIN,this._position,this._currentcontact=null,this._biz=null,this._originalTitle,function(t){var n={template:R,config:{},biz:null};I.extend(n,e),P.call(t,n),I("body").append(I(Me)),Ee["me"]=function(){return t._biz?t._biz.me():null},Ee["getUserinfo"]=function(){t._biz.getContact.apply(t._biz,arguments)},I.extend(!0,Ee,e.config),t._init(n.biz,n.shop_biz);var i=t._biz.options.envs?t._biz.options.envs:"online";$=$[i]}(this),function(e){var t;e._children["contact-window"]=new j({me:e._biz.me(),getMoreSession:function(t){if(e._biz.isLogined())e._biz.getSessions({count:50},(function(e,n){t(e,n)}),(function(){t([],!0)}));else{var n=this;(0,k.default)((function(){n.getMoreSession(t)}),100)}}}),e._element.append(e._children["contact-window"].getElement()),e._children["contact-window"].addEventListener("imMinimize",(function(){switch(e._status){case Y.MIN:e.normalize();break;case Y.NORMAL:e.minimize();break;default:break}})),e._children["contact-info-window"]=new B({}),e._element.append(e._children["contact-info-window"].getElement()),e._children["float-controller"]=new z({}),e._children["float-controller"].bound((0,S.default)(t=e._element).call(t,".im-float-container"))}(this),function(e){var t=0,n={},i=e._biz.me(),a=function(e){return e&&"string"===typeof e&&(e=me.parse(e).data),e&&e.access_url?e.access_url:e.url?e.url:""},r=function(t,i,a){e._position,q.CENTER;if(t.content&&"text"==t.content.type&&"BEINPUTTING"==t.content.msg){var r={target_id:t.to_id,target_source:t.to_source,offline:"1",event_type:"BEINPUTTING",event_info:"测试"};e._biz.updateEvent(r,(function(){}))}e._biz.sendMsg({msg:t,onSendMsgBegin:function(){t.status=Q.SENDING,K.dispatch({type:Z.MSG_SEND_STATUS_CHANGE,data:t})},onSendMsgSuccess:function(e){delete n[t.temp_msg_id],t.msg_id=e.msg_id,t.status=Q.SUCCESS,K.dispatch({type:Z.MSG_SEND_STATUS_CHANGE,data:t}),i&&i()},onSendMsgFail:function(n){if(t.status=Q.FAIL,t.feedback_msg_hide=n.msg_hide,t.feedback=n.error_msg?n.error_msg:"",""===n)t.feedback="您的网络未连接，请检查后重试。";else{if(42009==n.error_code){var i="bindcellphone_"+je++;return window[i]=function(){Ee["bind-cellphone"]((function(){p(t)}),(function(){var e=Ee["get-bindcellphone-url"]();e||(e="javascript:void(0)"),t.feedback_msg_hide="",t.feedback='发送失败，请<a href="'+e+'" target="_blank" style="color:#528cd8;text-decoration:none;" onclick="'+i+'()">绑定</a>手机号后重试。',K.dispatch({type:Z.MSG_SEND_STATUS_CHANGE,data:t})}))},window[i]()}if(40021==n.error_code){window.WMDA_REPORT&&window.WMDA_REPORT("custom",{event_id:"1"});var r=function n(){var i,a=310;e._biz.getCaptcha({normal_get:1,captcha_ver:"v3",captcha_width:a},(function(a){Je(a.param)||Je(a.param.level)||Je(a.param.width)||(i=function(e){Je(e)||e+""!=="0"?n():p(t)}),Xe.call(e,a,i)}),(function(){n()}))};r()}}K.dispatch({type:Z.MSG_SEND_STATUS_CHANGE,data:t}),a&&a()}})},o=function(t,n,i){e._biz.notifyHunter(t,n,i)},s=function(t,n,i){var a=t.content,r=a.url,o={wos_file_name:a.wos_file_name,to_source:t.to_source,url:r};e._biz.checkFile(o,n,i)},c=function(t){var n=t.file,s=t.message,c=s.content.type,l=n.name||"",u=(l.match(/(\.[\w]+$)/)||{})[1]||"",d=function(t,n){var a={wos_appid:$.WOS_APP_ID,wos_file_name:"",suffix:t&&t.suffix?t.suffix:u,send_type:t&&t.send_type?t.send_type:s.content.type,sender_id:s.shop_id?s.shop_id:s.sender_id?s.sender_id:i.user_id,sender_source:s.shop_source?s.shop_source:s.sender_source?s.sender_source:i.user_source,to_id:s.to_id,to_source:s.to_source};e._biz.getWosToken(a,(function(e){e&&e.wos_file_expire&&(e.wos_file_expire=Math.floor(+e.wos_file_expire/3600)),n(e)}),(function(e){n(null)}))},p=function(e,t){ce.createThumbnail(e,(function(e){I.extend(!0,s.content,{thumbnail_url:e.data,thumbnail_width:e.width,thumbnail_height:e.height,duration:e.duration});var n=function(e){for(var t=window.atob(e.split(",")[1]),n=new ArrayBuffer(t.length),i=new Uint8Array(n),a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return new Blob([n],{type:"image/jpg"})};d({send_type:"file",suffix:".jpg"},(function(i){i.file=n(e.data),ce.upload(i,(function(e){I.extend(!0,s.content,{thumbnail_url:a(e)}),s.status=Q.UPLOADING,K.dispatch({type:Z.MSG_INFO_UPDATED,data:s}),t()}),(function(){t()}),null)}))}))},f=function(e){var l=e.wos_file_name?e.wos_file_name:"",u=function(e){var u=a(e),d={url:u,wos_file_name:l,size:n.size,format:n.type,extra:""};"file"===c&&I.extend(!0,d,{original_file_name:n.name}),I.extend(!0,s.content,d);var p={wos_file_name:l,url:u,type:s.content.type,file_format:n.type,file_size:n.size,sender_id:s.shop_id?s.shop_id:s.sender_id?s.sender_id:i.user_id,sender_source:s.shop_source?s.shop_source:s.sender_source?s.sender_source:i.user_source,to_id:s.to_id,to_source:s.to_source};s.content.file_sender_id=p.sender_id,s.content.file_sender_source=p.sender_source,o(p,(function(){s.status!=Q.CANCEL_SENDING&&r(s)}),(function(e){t.onHunterCheckFail({error:e,wos_file_name:l})})),t.onUploadSuccess(s)},d=function(e){t.onUploadFail(e)},f=function(e){s.status=Q.UPLOADING,s.uploadingPercent=(100*e).toFixed(2),K.dispatch({type:Z.MSG_INFO_UPDATED,data:s})};ce.init($),e.file=n,"video"===c?p(n,(function(){ce.upload(e,u,d,f)})):"file"===c&&ce.upload(e,u,d,f)};d(null,(function(e){e?f(e):t.onUploadFail(e)}))},l=function(e){var t=function(t){e.status=Q.DOWNLOAD_FAIL,e.feedback=""===t?"您的网络未连接，请检查后重试。":t.error_msg,K.dispatch({type:Z.MSG_HANDLER_STATUS_CHANGE,data:e})};s(e,(function(){var n=e.content,i=n.url;i?(e.status=Q.DOWNLOADING,e.feedback="检查文件中...",K.dispatch({type:Z.MSG_HANDLER_STATUS_CHANGE,data:e}),I.ajax({type:"GET",cache:!1,url:i,data:"",success:function(){e.status=Q.DOWNLOADED,e.feedback="",K.dispatch({type:Z.MSG_HANDLER_STATUS_CHANGE,data:e}),ce.downloadFromURL(i,n.original_file_name)},error:function(){t({error_msg:"文件失效！"})}})):t({error_msg:"文件地址非法！"})}),(function(e){t(e)}))},u=function(e){var t=e.content.wos_file_name;ce.cancelUpload(t),delete We[t],e.status=Q.CANCEL_SENDING,e.feedback="文件已取消发送!",K.dispatch({type:Z.MSG_SEND_STATUS_CHANGE,data:e})},d=function(t){var n=function(e){K.dispatch({type:Z.VIDEO_PLAY_ERROR,data:{msg:t,error:e}})};s(t,(function(){var n=ze.call(e);n.play(t)}),(function(e){n(e)}))},p=function(e,t,n){var i,a=function(){e.status=Q.UPLOADING,K.dispatch({type:Z.MSG_SEND_STATUS_CHANGE,data:e})},o=function(e){Ee["msg-send-converter"](e)},s=function(t){if(e.status=Q.UPLOAD_FAIL,""===t)e.feedback="您的网络未连接，请检查后重试。";else{var n="";switch(e.content.type){case"image":n="图片上传失败，请重试。";break;case"file":n="文件上传失败，请重试。";break;case"video":n="视频上传失败，请重试。";break;default:break}e.feedback=n,K.dispatch({type:Z.TOAST_SHOW,data:{content:"您的网络未连接，请检查后重试。",interval:3e3}})}K.dispatch({type:Z.MSG_SEND_STATUS_CHANGE,data:e})},l=function(i){var a=i.error,o=i.wos_file_name;We[o]={ret:a.error_code,isSent:!1,msg:e};var s=function(){We[o].msg.status!=Q.CANCEL_SENDING&&(We[o].isSent=!0,r(We[o].msg,t,n),delete We[o])};if(a.error_code+""==="43002")var c=5e3,l=(0,k.default)((function(){var e=We[o];e&&!e.isSent&&s(),clearTimeout(l)}),c);else s()},u=e.content.type,d=e.content.url?e.content.url:null,p=e.is_forward_msg;if(delete e.is_forward_msg,"image"===u&&d&&-1===(0,A.default)(d).call(d,"http")&&!p)a(),se.init(),se.upload(d,(function(i){e.content.url=i,o(e),r(e,t,n)}),(function(e){s(e)}));else if(-1===(0,A.default)(i=["video","file"]).call(i,u)||!d||"string"===typeof d&&-1!==(0,A.default)(d).call(d,"http")||p)r(e,t,n);else{a();var f={message:e,file:e.content.url,onUploadSuccess:o,onUploadFail:s,onHunterCheckFail:l};c(f)}};K.register((function(i){var a,o,s;switch(i.type){case Z.MSG_SEND_APPLY:var c=i.data,f=e._biz.me();c.temp_msg_id=--t,c.send_time=(new Date).getTime(),c=Ee["msg-send-converter"](c);var m=c.sender_id?c.sender_id:f.user_id,_=c.sender_id?c.sender_source:f.user_source;Ee["getUserinfo"]([{user_id:c.to_id,user_source:c.to_source,shop_id:c.shop_id,shop_source:c.shop_source},{user_id:m,user_source:_}],(function(e){c.sender_info=e[m+"@"+_],c.to_info=e[c.to_id+"@"+c.to_source],n[c.temp_msg_id]=c,p(c,(function(){"msg_batch_forward_card"!==c.show_type||fe(c.leaveMsg)||K.dispatch({type:Z.MSG_SEND_APPLY,data:c.leaveMsg})}))}));break;case Z.MSG_BATCH_SEND_APPLY:var g=i.data.messages,T=i.data.leaveMsg,N=(f=e._biz.me(),[]),L={};(0,E.default)(g).call(g,(function(e){e.temp_msg_id=--t,e.send_time=(new Date).getTime(),e=Ee["msg-send-converter"](e),m=e.sender_id?e.sender_id:f.user_id,_=e.sender_id?e.sender_source:f.user_source,N.push({user_id:e.to_id,user_source:e.to_source,shop_id:e.shop_id,shop_source:e.shop_source}),L[m+"@"+_]||(L[m+"@"+_]=!0,N.push({user_id:m,user_source:_}))}));var R=[],P=0;Ee["getUserinfo"](N,(function(e){(0,E.default)(g).call(g,(function(t){m=t.sender_id?t.sender_id:f.user_id,_=t.sender_id?t.sender_source:f.user_source,t.sender_info=e[m+"@"+_],t.to_info=e[t.to_id+"@"+t.to_source],n[t.temp_msg_id]=t,R.push(new O.default((function(e,n){p(t,(function(){P+=1,e()}),(function(){e()}))})))})),O.default.all(R).then((function(e){P===g.length&&(fe(T)||K.dispatch({type:Z.MSG_SEND_APPLY,data:T}),K.dispatch({type:Z.TOAST_SHOW,data:{content:"已转发",interval:3e3,type:"new",iconStatus:"success"}}))}))}));break;case Z.MSG_RESEND_APPLY:var D=n[i.data.temp_msg_id];D&&(D.forward_original_content&&D.forward_original_show_type&&(D.content=D.forward_original_content,D.show_type=D.forward_original_show_type,delete D.forward_original_content,delete D.forward_original_show_type),p(D));break;case Z.MSG_SEND_STATUS_CHANGE:var j={user_id:i.data.to_id,user_source:i.data.to_source},W=!1;fe(i.data.shop_id)||fe(i.data.shop_source)||(j.shop_id=i.data.shop_id,j.shop_source=i.data.shop_source,W=!0),Ee["getUserinfo"]([j],(function(e){var t=W?j.user_id+"@"+j.user_source+"@@"+j.shop_id+"@"+j.shop_source:j.user_id+"@"+j.user_source,n=e[t];W&&(n.shop_id=j.shop_id,n.shop_source=j.shop_source),n&&te.changeLastMsg(n.user_id,n.user_source,I.extend(!0,{},i.data))}));break;case Z.IMAGE_CLICK:var F=fe(e._currentcontact)?null:e._currentcontact.user_id+"@"+e._currentcontact.user_source;if(F&&!fe(e._children[F])&&!fe(e._children[F]._children["msgViewer"])&&e._children[F]._children["msgViewer"]._options.multiple_selectable)break;var B=(0,k.default)((function(){e._children["image-viewer"]||(e._children["image-viewer"]=new U,e._element.append(e._children["image-viewer"].getElement())),e._children["image-viewer"].open(i.data),clearTimeout(B)}),300);break;case Z.MSG_ACTION:var z=i.data.actionPostData;if("string"==typeof z)try{z=me.parse(z)}catch(Wt){z={}}z=I.extend(!0,{},z);f=e._biz.me();var Y=f.user_id+"@"+f.user_source,X=i.data.message;if(fe(i.data.message))return;X=i.data.message.sender_id+"@"+i.data.message.sender_source;var $=i.data.message.to_id+"@"+i.data.message.to_source;if(X!=Y&&$!=Y&&$==e._currentcontact.user_id+"@"+e._currentcontact.user_source)return;var ee=_e(e._currentcontact);e._shop_biz.cardAjax(i.data.actionData,{shop_id:ee?he(i.data.message.sender_source)?i.data.message.sender_id:i.data.message.to_id:null,shop_source:ee?he(i.data.message.sender_source)?i.data.message.sender_source:i.data.message.to_source:null},z,(function(e,t){var n=t;fe(i.data.actionData)||"/worker/bind/recover"!==i.data.actionData.url||(n="成功恢复绑定关系"),fe(n)||K.dispatch({type:Z.TOAST_SHOW,data:{content:n,interval:3e3}})}),(function(e,t){fe(e)||fe(e.msg)?fe(t)||"error"!=t||K.dispatch({type:Z.TOAST_SHOW,data:{content:"网络已断开，请稍后再试",interval:3e3}}):K.dispatch({type:Z.TOAST_SHOW,data:{content:e.msg,interval:3e3}})}));break;case Z.REDIT_MSG:break;case Z.FULLSCREEN_OPEN:e.triggerEvent("fullscreenChanged",!0);break;case Z.FULLSCREEN_CLOSE:e.triggerEvent("fullscreenChanged",!1);break;case Z.MSG_AUDIO_READ:var ne=Ge.call(e);ne.play(i.data),i.data.play_time+""==="0"&&Ke.call(e,i.data);break;case Z.MSG_AUDIO_READ_END:ne=Ge.call(e);ne.stop();break;case Z.SESSION_CLICK:if(i.data&&i.data.contact&&(e._gotoContact(i.data.contact),!fe(i.data)&&!fe(i.data.msg))){var ae=i.data.msg,re={sender_id:ae.sender_id,sender_source:ae.sender_source,msg_ids:[ae.msg_id],to_id:ae.to_id,to_source:ae.to_source};e._biz.ackMsgShow(re,null,(function(t){if(_e(ae,e._biz.me())&&t&&42034==t.error_code){var n={sender_id:ae.sender_id,sender_source:ae.sender_source,msg_id:ae.msg_id,to_id:ae.to_id,to_source:ae.to_source};e._shop_biz&&e._shop_biz.ackShown(n)}}))}break;case Z.PERSON_CHECK:e.chatTo(i.data.user_id,i.data.user_source,null,i.data.shop_id,i.data.shop_source);break;case Z.CREATE_GROUP_CHECK:var se={members:i.data};e._biz.createGroup(se,(function(t){(0,k.default)((function(){e.chatTo(t.user_id,t.user_source)}),1e3)}));break;case Z.JOIN_GROUP_CHECK:se={target_ggid:i.data.target_ggid,target_gsource:i.data.target_gsource,target_users:i.data.target_users};e._biz.inviteJoinGroup(se,(function(e){}),(function(e){e&&"44014"==e.error_code&&K.dispatch({type:Z.TOAST_SHOW,data:{content:e.error_msg,interval:3e3}})}));break;case Z.QUIT_GROUP:se={target_gid:i.data.target_gid,target_gsource:i.data.target_gsource};var ce,le,pe=e._biz.getAllSessions(),ge=se.target_gid+"@"+se.target_gsource,we=pe.length;I.each(pe,(function(e,t){var n=t.user.user_id+"@"+t.user.user_source;if(n===ge)return ce=e==we-1?e-1:e+1,!1})),!Je(ce)&&ce>-1&&!Je(pe[ce])&&!Je(pe[ce].user)&&(le={user_id:pe[ce].user.user_id,user_source:pe[ce].user.user_source}),ie.stop(),e._biz.quitGroup(se,(function(t){var n,i=e._currentcontact.user_id+"@"+e._currentcontact.user_source;(0,S.default)(n=e._children[i].getElement()).call(n,".im-panel-container").hide(),e._children[i].unactive(),e._children[i].destroy(),delete e._children[i],fe(le)?e._currentcontact=null:(te.setChecked(le.user_id,le.user_source,le),ie.setSession(le)),ie.start()}));break;case Z.DISBAND_GROUP:se={target_gid:i.data.target_gid,target_gsource:i.data.target_gsource};e._biz.disbandGroup(se,(function(t){var n,i=e._currentcontact.user_id+"@"+e._currentcontact.user_source;(0,S.default)(n=e._children[i].getElement()).call(n,".im-panel-container").hide();var a=localStorage.getItem("delSessionKey")?localStorage.getItem("delSessionKey")+","+i:i;localStorage.setItem("delSessionKey",(0,x.default)(a))}));break;case Z.GET_GROUP_QRCODE:se={gid:i.data.gid,gsource:i.data.gsource};e._biz.getQrcodeId(se,(function(e){var t=window.CryptoJS,n=t.enc.Utf8.parse("w&ub#@a9%0#*&8#a"),a=t.enc.Utf8.parse("w@ch*a89*$@09a#*"),r=function(e){var i=t.enc.Utf8.parse(e),r=t.AES.encrypt(i,n,{iv:a,mode:t.mode.CBC,padding:t.pad.Pkcs7}),o=r.toString();return o},o={type:"group",data:{id:i.data.gid,source:i.data.gsource,qrId:e.id}},s=r(me.stringify(o));I(".im-qrcode-continer").show(),I(".im-qrcode").qrcode({width:200,height:200,correctLevel:2,typeNumber:-1,background:"#ffffff",foreground:"#000000",text:s})}));break;case Z.GROUP_NOTICE:F=e._currentcontact.user_id+"@"+e._currentcontact.user_source,f=e._biz.me(),se={target_id:i.data.gid,target_source:i.data.gsource,notice:{user_id:f.user_id,user_source:f.user_source,create_time:(new Date).getTime(),content:i.data.group_notice}};e._biz.updateGroup(se,(function(t){var n;e._children[F].panel.resetPanel("group_notice",i.data.group_notice),(0,S.default)(n=e._children[F].getElement()).call(n,".im-panel-container").hide()}),(function(){e._children[F].panel.resetPanel("group_notice",i.data.old_group_notice)}));break;case Z.CONFIRM_INVITE:e._biz.confirmInvite(i.data,(function(e){var t="群聊邀请确认成功";K.dispatch({type:Z.TOAST_SHOW,data:{content:t,interval:2e3}})}),(function(){var e="群聊邀请确认失败";K.dispatch({type:Z.TOAST_SHOW,data:{content:e,interval:2e3}})}));break;case Z.SES_TOP:e._biz.msgSet(i.data,(function(t){var n=i.data.target_id+"@"+i.data.target_source,a=1==i.data.msg_set.ses_top?"取消置顶":"置顶";e._children[n].updateHandleText(a);var r=e._children[n];fe(e._currentcontact)||fe(e._currentcontact.msg_set)||fe(e._currentcontact.msg_set.ses_top)||(e._currentcontact.msg_set.ses_top=i.data.msg_set.ses_top),r&&r.setContact(e._currentcontact)}),(function(e){e&&"41114"==e.error_code&&K.dispatch({type:Z.TOAST_SHOW,data:{content:e.error_msg,interval:3e3}})}));break;case Z.SET_SILENT:e._biz.msgSet(i.data,(function(t){var n=i.data.target_id+"@"+i.data.target_source,a=1==i.data.msg_set.silent?"取消免打扰":"免打扰";e._children[n].updateHandleText(a);var r=e._children[n];fe(e._currentcontact)||fe(e._currentcontact.msg_set)||fe(e._currentcontact.msg_set.silent)||(e._currentcontact.msg_set.silent=i.data.msg_set.silent),r&&r.setContact(e._currentcontact)}));break;case Z.SET_GROUP:var ke,Ce=e._biz.me(),Oe=i.data.group_id,Me=i.data.group_source;F=e._currentcontact.user_id+"@"+e._currentcontact.user_source;if(e._children[F].panel.toggle(),e._children[F].panel._opened)e._biz.getGroupInfo({ids:[{user_id:Oe,user_source:Me}],forceUpdate:!1},(function(t){var n=t[Oe+"@"+Me].group_info,a=n?n.notice:"{}";a=me.parse(a).content,e._biz.groupAtContacts(e._currentcontact.user_id,e._currentcontact.user_source,(function(t,n,r){var o;e._children[F].panel.setData({contacts:t,id_sources:n,count:r,pageIndex:0,group_name:i.data.group_name,group_notice:a,user_id:Ce.user_id,user_source:Ce.user_source}),e._children[F].panel.setValue(),(0,S.default)(o=e._children[F].getElement()).call(o,".im-panel-container").show()}),!0)}));else(0,S.default)(ke=e._children[F].getElement()).call(ke,".im-panel-container").hide();break;case Z.UPDATE_GROUPNAME:F=e._currentcontact.user_id+"@"+e._currentcontact.user_source;e._biz.updateGroup({target_id:e._currentcontact.user_id,target_source:e._currentcontact.user_source,user_name:i.data.group_name},(function(){var t;e._children[F].panel.resetPanel("group_name",i.data.group_name),(0,S.default)(t=e._children[F].getElement()).call(t,".im-panel-container").hide()}),(function(){e._children[F].panel.resetPanel("group_name",i.data.old_group_name)}));break;case Z.UPDATE_NICKNAME:F=e._currentcontact.user_id+"@"+e._currentcontact.user_source;e._biz.manageGroupMember({target_gid:e._currentcontact.user_id,target_gsource:e._currentcontact.user_source,members:[{user_id:i.data.user_id,user_source:i.data.user_source,nick_name:i.data.nick_name,authority:i.data.authority}]},(function(){var t;e._children[F].panel.resetPanel("nick_name",i.data.nick_name),(0,S.default)(t=e._children[F].getElement()).call(t,".im-panel-container").hide()}),(function(){e._children[F].panel.resetPanel("nick_name",i.data.old_nick_name)}));break;case Z.ADD_MEMBER_WIN:I(".im-app").append(I(Te));var Re=new Ie({ele:I(".im-organization-list.add-group"),isAddGroup:!0,contact:e._currentcontact,unavailableGroup:i.data.contacts});Re.showTp(I(".im-contactwindow-organization.add-group")),Re.addEventListener("structureUnmount",(function(t){if("join"==t){var n,i=e._currentcontact.user_id+"@"+e._currentcontact.user_source;(0,S.default)(n=e._children[i].getElement()).call(n,".im-panel-container").hide()}Re=null}));break;case Z.DELETE_MEMBER_WIN:I(".im-app").append(I(Te));var Pe,De=[];if(i.data.id_sources&&i.data.contacts)for(var je=0;je<i.data.id_sources.length;je++)Pe=i.data.contacts[i.data.id_sources[je]],Pe&&De.push({avatar:Pe.avatar,group_id:e._currentcontact.user_id,id:Pe.user_id,name:Pe.nick_name||Pe.user_name,name_spell:Pe.name_spell,open_id:-1,source:Pe.user_source,type:2,user_name:Pe.user_name,user_type:1});Re=new Ie({ele:I(".im-organization-list.add-group"),isDeleteGroup:!0,contact:e._currentcontact,groupMembers:De,master:{user_id:e._biz.me().user_id,user_source:e._biz.me().user_source}});Re.showTp(I(".im-contactwindow-organization.add-group")),Re.addEventListener("structureUnmount",(function(e){Re=null}));break;case Z.DELETE_MEMBER:e._biz.manageGroupMember({target_gid:e._currentcontact.user_id,target_gsource:e._currentcontact.user_source,members:i.data.members},(function(){var t,n=e._currentcontact.user_id+"@"+e._currentcontact.user_source;e._biz.deleteAtContactsMember(n,i.data.members),(0,S.default)(t=e._children[n].getElement()).call(t,".im-panel-container").hide()}),(function(){}));break;case Z.ADD_BLACKLIST:e._biz.addBlackList(i.data.user_id,i.data.user_source);break;case Z.DEL_BLACKLIST:e._biz.delBlackList(i.data.user_id,i.data.user_source);break;case Z.IS_BLACKED_CHECK:e._biz.isBlacked(i.data.user_id,i.data.user_source,(function(t){var n,a=i.data.user_id+"@"+i.data.user_source;fe(i.data.shop_id)||fe(i.data.shop_source)||(a+="@@"+i.data.shop_id+"@"+i.data.shop_source),t.is_blacked+""==="1"?n="取消屏蔽":t.is_blacked+""==="0"&&(n="屏蔽"),e._children[a].updateHandleText(n)}));break;case Z.COMPLAINTS:var Ue={action_type:"complaints",me:{user_id:e._biz.me().user_id,user_source:e._biz.me().user_source},contact:{user_id:i.data.user_id,user_source:i.data.user_source},xz_source:Ee["xz_source"]||Ee["xz-source"]};oe(Ue,!0);break;case Z.UPLOAD_AUDIT_CHANGE:var Fe=i.data,ze=Fe.wos_file_name,Ve=We[ze];Ve&&!Ve.isSentt&&(We[ze].isSent=!0,r(We[ze].msg),delete We[ze]);break;case Z.FILE_DOWNLOAD:F=fe(e._currentcontact)?null:e._currentcontact.user_id+"@"+e._currentcontact.user_source;if(F&&!fe(e._children[F])&&!fe(e._children[F]._children["msgViewer"])&&e._children[F]._children["msgViewer"]._options.multiple_selectable)break;l(i.data);break;case Z.FILE_SENDE_CANCEL:u(i.data);break;case Z.VIDEO_PLAY:F=fe(e._currentcontact)?null:e._currentcontact.user_id+"@"+e._currentcontact.user_source;if(F&&!fe(e._children[F])&&!fe(e._children[F]._children["msgViewer"])&&e._children[F]._children["msgViewer"]._options.multiple_selectable)break;d(i.data);break;case Z.VIDEO_PLAY_ERROR:c=i.data.msg;var He=i.data.error;if(c.status=Q.VIDEO_PLAY_ERROR,c.feedback=He&&""!==He?He.error_msg:"您的网络异常，请检查后重试",c.is_in_float_view&&c.u_key&&!fe(e._children["float-controller"])){var Ye=e._children["float-controller"].getView(c.u_key);!fe(Ye)&&Ye._children&&Ye._children.msgViewer&&Ye._children.msgViewer.updateMsg(c)}else K.dispatch({type:Z.MSG_HANDLER_STATUS_CHANGE,data:c});break;case Z.CHAT_AUDIO:e._currentcontact.remark={};var qe=e._currentcontact.user_id;e._biz.exchangeXid([qe],(function(t){var n=I.extend(!0,{},e._currentcontact);n.user_id=t[qe]?t[qe]:n.user_id,window.WebRTC&&window.WebRTC.callerLoadWebRTC({contact:n,callType:1})}),(function(){window.WebRTC&&window.WebRTC.callerLoadWebRTC({contact:e._currentcontact,callType:1})}));break;case Z.CHAT_VIDEO:qe=e._currentcontact.user_id;e._biz.exchangeXid([qe],(function(t){var n=I.extend(!0,{},e._currentcontact);n.user_id=t[qe]?t[qe]:n.user_id,window.WebRTC&&window.WebRTC.callerLoadWebRTC({contact:n,callType:2})}),(function(){window.WebRTC&&window.WebRTC.callerLoadWebRTC({contact:e._currentcontact,callType:2})}));break;case Z.INPUT_CHANGE:var Xe=i.data.content,$e=(Oe=i.data.to_id,Me=i.data.to_source,f=e._biz.me(),F=e._currentcontact.user_id+"@"+e._currentcontact.user_source,function(){var t;e._children[F].groupAtClose(),(0,S.default)(t=e._children[F]._element).call(t,".im-chatwindow-float").hide()});clearTimeout(B),B=(0,k.default)((function(){var t,n,a,r,o;if(Xe=Xe.replace(/&nbsp;/gi," "),Xe=Xe.replace(/<br>/gi,"\n"),Xe=Xe.replace(/&amp;/gi,"&"),1!=(0,A.default)(Xe).call(Xe," ")){for(var s=ue.getCursortPosition((0,S.default)(t=e._children[F]._element).call(t,".im-input-richtext")[0]),c=0;c<Xe.length;c++)"@"!=Xe[c]||!isNaN(a)&&c-a<=1||(a=c,r=a,o=!1),!isNaN(a)&&r>=a&&!o&&" "==Xe[c]&&(o=!0,r=c);if(a>=s)$e();else{r=r==a?i.data.content.length+1:r;var l=r>s?s:r;if(isNaN(a)){var u;e._children[F].groupAtClose(),(0,S.default)(u=e._children[F]._element).call(u,".im-chatwindow-float").hide()}else{if(n=(0,b.default)(Xe).call(Xe,a+1,l),content_extra=(0,b.default)(Xe).call(Xe,a+1,s).replace(n,""),content_extra.length&&" "!=content_extra&&"  "!=content_extra)return void $e();e._biz.groupAtContacts(Oe,Me,(function(t,i,a){if(!fe(t)&&t[f.user_id+"@"+f.user_source]&&(delete t[f.user_id+"@"+f.user_source],a--),n)e._biz.groupAtFilter(t,n,(function(t){var i,a;t.count?(e._children[F].groupAtWindowRefresh(t.data,t.list,t.count,n),(0,S.default)(i=e._children[F]._element).call(i,".im-chatwindow-float").show()):(e._children[F].groupAtClose(),(0,S.default)(a=e._children[F]._element).call(a,".im-chatwindow-float").hide())}));else if(a>0){var r;e._children[F].groupAtWindowRefresh(t,i,a),(0,S.default)(r=e._children[F]._element).call(r,".im-chatwindow-float").show()}}))}}}else $e()}),200);break;case Z.PRIVATE_INPUT_CHANGE:if(_e(e._currentcontact)||ve(e._currentcontact))return;Xe=i.data.content,F=e._currentcontact.user_id+"@"+e._currentcontact.user_source;var et=function(){var t;e._children[F].groupAtClose(),(0,S.default)(t=e._children[F]._element).call(t,".im-chatwindow-float").hide()};clearTimeout(B),B=(0,k.default)((function(){var t;if(Xe=Xe.replace(/&nbsp;/gi," "),Xe=Xe.replace(/<br>/gi,"\n"),Xe=Xe.replace(/&amp;/gi,"&"),1!=(0,A.default)(Xe).call(Xe," ")){for(var n,i=ue.getCursortPosition((0,S.default)(t=e._children[F]._element).call(t,".im-input-richtext")[0]),a=0;a<Xe.length;a++)"@"==Xe[a]&&a===i-1&&(n=a);if(n>=i||"undefined"===n)et();else if(isNaN(n)){var r;e._children[F].groupAtClose(),(0,S.default)(r=e._children[F]._element).call(r,".im-chatwindow-float").hide()}else{var o,s={},c=[];s[F]=e._currentcontact,c.push(F),e._children[F].groupAtWindowRefresh(s,c,1),(0,S.default)(o=e._children[F]._element).call(o,".im-chatwindow-float").show()}}else et()}),200);break;case Z.KEYBOARD_OUTPUT:F=e._currentcontact.user_id+"@"+e._currentcontact.user_source;e._children[F].keyboardInput(i.data.event);break;case Z.CARD_SEND_MESSAGE:K.dispatch({type:Z.MSG_SEND_APPLY,data:{to_id:i.data.to_id,to_source:i.data.to_source,shop_id:e._currentcontact.shop_id,shop_source:e._currentcontact.shop_source,sender_id:e._currentcontact.shop_id?e._currentcontact.shop_id:null,sender_source:e._currentcontact.shop_source?e._currentcontact.shop_source:null,show_type:"text",content:{msg:i.data.text,type:"text"},msg_type:i.data.in_group&&i.data.in_group+""==="1"?1005:2,at_info:""}});break;case Z.AI_SEND:K.dispatch({type:Z.MSG_SEND_APPLY,data:{to_id:i.data.to_id,to_source:i.data.to_source,shop_id:e._currentcontact.shop_id,shop_source:e._currentcontact.shop_source,sender_id:e._currentcontact.shop_id?e._currentcontact.shop_id:null,sender_source:e._currentcontact.shop_source?e._currentcontact.shop_source:null,show_type:"text",content:{msg:i.data.text,type:"text"},msg_type:i.data.in_group&&i.data.in_group+""==="1"?1005:2,at_info:""}}),e._shop_biz.reportUserAction({shop_id:e._currentcontact.shop_id,shop_source:e._currentcontact.shop_source},{shopId:e._currentcontact.shop_id,userId:i.data.to_id,action:"assistantSend",actionData:"",qaLog:i.data.qalog},(function(){}),(function(){}));break;case Z.AI_COPY:e._shop_biz.reportUserAction({shop_id:e._currentcontact.shop_id,shop_source:e._currentcontact.shop_source},{shopId:e._currentcontact.shop_id,userId:i.data.to_id,action:"assistantCopy",actionData:"",qaLog:i.data.qalog},(function(){}),(function(){}));break;case Z.MSG_WITHDRAW:e._biz.withdrawMessage({sender_id:i.data.message.sender_info?i.data.message.sender_info.user_id:i.data.message.sender_id,sender_source:Number(i.data.message.sender_info?i.data.message.sender_info.user_source:i.data.message.sender_source),msg_id:i.data.message.msg_id,to_id:i.data.message.to_id,to_source:i.data.message.to_source},(function(e){}),(function(e){e&&e.error_msg&&K.dispatch({type:Z.TOAST_SHOW,data:{content:e.error_msg,interval:3e3}})}));break;case Z.MSG_CLICK:if(fe(e._currentcontact.shop_id)||fe(e._currentcontact.shop_source))return;F=e._currentcontact.user_id+"@"+e._currentcontact.user_source+"@@"+e._currentcontact.shop_id+"@"+e._currentcontact.shop_source;e._shop_biz.getAIPrompt({shop_id:e._currentcontact.shop_id,shop_source:e._currentcontact.shop_source},{sender_id:i.data.message.sender_id,sender_source:i.data.message.sender_source,to_id:i.data.message.to_id,to_source:i.data.message.to_source,msg_id:i.data.message.msg_id,text:i.data.message.content.msg},(function(t){e._children[F].updateNotices(t),fe(t)||t.length||K.dispatch({type:Z.TOAST_SHOW,data:{content:"未获取到智能回复！",interval:3e3}})}),(function(){e._children[F].updateNotices([]),K.dispatch({type:Z.TOAST_SHOW,data:{content:"未获取到智能回复！",interval:3e3}})}));break;case Z.SET_EVALUATE:e.setEvaluation(i.data.sendMsg,(function(){var e="卡片发送成功";K.dispatch({type:Z.TOAST_SHOW,data:{content:e,interval:2e3}})}),(function(e){var t=e.error_msg;K.dispatch({type:Z.TOAST_SHOW,data:{content:t,interval:2e3}})}));break;case Z.CLEAR_ALL_UNREAD_MSGS:var tt=e._biz.getAllUnreadAmount(),nt=(0,w.default)(a=(0,y.default)(tt)).call(a,(function(e){return tt[e]})),it=(0,v.default)(nt).call(nt,(function(e,t){return isNaN(t)?e:e+t}),0);e._biz.getSessionUnreadMsgCount(i.data,(function(t){0!==t.count||0!==it?(K.dispatch({type:Z.TOAST_SHOW,data:{content:"正在清除",interval:5e3}}),e.clearAllUnreadMsgs(i.data,(function(t){var n=(0,k.default)((function(){e._children["toast"].hide(),clearTimeout(n)}),500)}),(function(e){var t=e.error_msg?e.error_msg:"您的网络未连接，请检查后重试。";K.dispatch({type:Z.TOAST_SHOW,data:{content:t,interval:3e3}})}))):K.dispatch({type:Z.TOAST_SHOW,data:{content:"没有可清除的消息",interval:3e3}})}),(function(e){var t=e.error_msg?e.error_msg:"您的网络未连接，请检查后重试。";K.dispatch({type:Z.TOAST_SHOW,data:{content:t,interval:3e3}})}));break;case Z.GROUP_At_CONTACTS:var at=e._currentcontact,rt=(F=at.user_id+"@"+at.user_source,e._children[F]);e._biz.groupAtContacts(at.user_id,at.user_source,(function(e,t,n){rt._children["chatfloat"].renderContacts(e,t)}),!0);break;case Z.TOAST_SHOW:if(e._children["toast"])e._children["toast"].hide();else{var ot=new Ne;e.getElement().append(ot.getElement()),e._children["toast"]=ot}e._children["toast"].show(i.data);break;case Z.MODAL_WIN_SHOW:if(e._children["modalwin"])e._children["modalwin"].hide();else{var st=new Le;e.getElement().append(st.getElement()),e._children["modalwin"]=st}e._children["modalwin"].show(i.data);break;case Z.REPORT_MESSAGES:var ct=fe(i.data.client_msgs)?[]:i.data.client_msgs,lt=fe(i.data.show_failed)?[]:i.data.show_failed;e._biz.reportMessages({client_msgs:ct,show_failed:lt});break;case Z.SET_USER_REMARK:e._biz.setUserRemark({target_id:e._currentcontact.user_id,target_source:e._currentcontact.user_source,remark:{business_source:i.data.business_source,remark_name:i.data.remark_name,remark_spell:i.data.remark_spell,remark_telephone:i.data.remark_telephone,remark_info:i.data.remark_info,description:i.data.description,nick_name:i.data.nick_name}},(function(t){var n=e._currentcontact.user_id+"@"+e._currentcontact.user_source;for(var i in Be)Be[i][n]&&(e._children[i]=null);void 0==t&&K.dispatch({type:Z.TOAST_SHOW,data:{content:"网络异常，请稍后重试！",interval:2e3}})}),(function(e){var t=e.error_msg?e.error_msg:"设置用户备注失败，请稍后重试！";i.data.remark_name.length>0&&K.dispatch({type:Z.TOAST_SHOW,data:{content:t,interval:2e3}})}));break;case Z.PROVIDE_CONTACTINFO:var ut=i.data?i.data:"";f=e._biz.me();new de((function(t,n){e._biz.getContact(f.user_id,f.user_source,(function(n){var i;i=n.remark?n.remark.remark_name||n.user_name||"未知":n.user_name||"未知",t({text:ut,avatarInfo:n.avatar?n.avatar:ve(n)?Ee["default-anonymous-avatar"]:Ee["default-avatar"],nameInfo:i,currentcontact:e._currentcontact})}))})).then((function(t){var n=this;e._biz.getSelfContactinfo(null,(function(i){var a=i.tel?i.tel:"",r=i.wechat?i.wechat:"";t.selfContactinfoTel=a,t.selfContactinfoWechat=r,e._children["contact-info-window"].setData(t),n.resolve()}),(function(e){var t;""===e&&(t="您的网络未连接，请检查后重试。"),K.dispatch({type:Z.TOAST_SHOW,data:{content:t,interval:3e3}})}))})).then((function(){e._children["contact-info-window"].show()}));break;case Z.SEND_CONTACTINFO:var dt=i.data;if(fe(dt))return;e._biz.provideContactinfo(dt,(function(e){K.dispatch({type:Z.TOAST_SHOW,data:{content:"您的联系方式已成功发给对方。",interval:3e3}})}),(function(e){var t;e&&41119===e.error_code?t=e&&e.error_msg||"已向对方提出申请,无法重复发送":e&&41113===e.error_code||e&&41103===e.error_code?t=e.error_msg?e.error_msg:"":""===e&&(t="您的网络未连接，请检查后重试。"),t&&K.dispatch({type:Z.TOAST_SHOW,data:{content:t,interval:3e3}})}));break;case Z.ASK_CONTACTINFO:e._biz.askContactinfo({other_user_id:i.data.other_user_id||"",other_user_source:i.data.other_user_source||""},(function(e){}),(function(e){var t;e&&41119===e.error_code?t=e&&e.error_msg||"已向对方提出申请,无法重复发送":e&&41113===e.error_code||e&&41103===e.error_code?t=e.error_msg?e.error_msg:"":""===e&&(t="您的网络未连接，请检查后重试。"),t&&K.dispatch({type:Z.TOAST_SHOW,data:{content:t,interval:3e3}})}));break;case Z.GLANCE_CONTACTINFO:if(i.data.msg_showtype&&"collect"===i.data.msg_showtype||i.data.msg_collect&&"collect"===i.data.msg_collect){var pt=i.data.msgs?i.data.msgs[0]:i.data,ft={tel:pt.tel,wechat:pt.wechat,is_uptodate:pt.is_uptodate,msg_showtype:"collect"};return i.data.contactinfoData=ft,void J.dispatch(J.createKey(i.data.msg_id),{type:Z.GLANCE_CONTACTINFO_RETURN,data:i.data})}var mt=i.data.glanceData;e._biz.glanceContactinfo(mt,(function(t){i.data.contactinfoData=t,J.dispatch(J.createKey(i.data.msg_id),{type:Z.GLANCE_CONTACTINFO_RETURN,data:i.data});var n=e._currentcontact.user_id+"@"+e._currentcontact.user_source;if(e._children[n]&&e._children[n]._children&&e._children[n]._children.msgViewer){var a=e._children[n]._children.msgViewer._children.msglist,r=e._children[n]._children.msgViewer;a.isLastMsg(i.data.msg_id)&&r.scrollToBottom()}}),(function(e){var t;e&&41119===e.error_code?t=e&&e.error_msg||"已向对方提出申请,无法重复发送":e&&41113===e.error_code||e&&41103===e.error_code?t=e.error_msg?e.error_msg:"":""===e&&(t="您的网络未连接，请检查后重试。"),t&&K.dispatch({type:Z.TOAST_SHOW,data:{content:t,interval:3e3}})}));break;case Z.CLOSE_ALL_FLOAT_VIEWS:fe(e._children["float-controller"])||e._children["float-controller"].removeAll();break;case Z.GET_MY_COLLECTION:K.dispatch({type:Z.CLOSE_ALL_FLOAT_VIEWS}),e._children["collect-info-window"]||(e._children["collect-info-window"]=new H({getMoreCollectMsg:function(t,n){if(e._biz.isLogined())e._biz.getCollection(t,(function(e,t){n(e.collections,t)}),(function(e){n([])}));else{var i=this;(0,k.default)((function(){i.getCollection(t,n)}),100)}}}),e._element.append(e._children["collect-info-window"].getElement()));se={last_collect_id:i.data.last_collect_id?i.data.last_collect_id:"",count:i.data.count?i.data.count:50,type:i.data.type?i.data.type:""};e._biz.getCollection(se,(function(t,n){e._children["collect-info-window"].setData({collections:t.collections,total:t.total,remained_size:t.remained_size,have_more:n}),e._children["collect-info-window"].show()}),(function(e){}));break;case Z.ADD_COLLECTION:g=[];var _t=0,ht=[],gt=!1,vt=i.data.messages||[];(0,E.default)(vt).call(vt,(function(t){t&&t.msg_id&&"FAIL"!==t.status&&(0,A.default)(Se).call(Se,t.show_type)<0?(g.push(t.msg_id),ht.push(Ze.call(e,t))):gt=!0})),gt&&1===vt.length?K.dispatch({type:Z.MODAL_WIN_SHOW,data:{title:"",content:"你选择的消息是特殊消息，无法收藏",showCancel:!1,confirmText:"好的"}}):gt?K.dispatch({type:Z.MODAL_WIN_SHOW,data:{title:"",content:"你选择的消息中存在特殊消息，无法收藏",showCancel:!1,confirmText:"好的"}}):O.default.all(ht).then((function(t){var n=[];(0,E.default)(vt).call(vt,(function(t){t.msg_id&&n.push(Qe.call(e,t))})),O.default.all(n).then((function(t){(0,E.default)(t).call(t,(function(e){_t+=Number(e)}));var n={size:0!==Number(_t)?Number(_t):10,msgs:g,other_id:i.data.other_id};e._biz.collection(n,(function(e){K.dispatch({type:Z.MULTIPLE_MENU_CLOSE}),K.dispatch({type:Z.TOAST_SHOW,data:{content:"已收藏",interval:3e3,type:"new",iconStatus:"success"}})}),(function(e){var t=e.error_msg?e.error_msg:"您的网络未连接，请检查后重试。";t&&K.dispatch({type:Z.TOAST_SHOW,data:{content:t,interval:3e3,type:"new",iconStatus:"fail"}})}))})).catch((function(e){var t;t=e&&e.error_msg?e.error_msg:"size大小获取未知错误",t&&K.dispatch({type:Z.TOAST_SHOW,data:{content:t,interval:3e3,type:"new",iconStatus:"fail"}})}))})).catch((function(e){var t;e&&e.error_code&&"404"==e.error_code?(t="只能收藏未过期的文本、图片、视频留言、文件、卡片、引用、聊天记录消息。",K.dispatch({type:Z.MODAL_WIN_SHOW,data:{title:"收藏失败",content:t,showCancel:!1,confirmText:"好的"}}),t=null):t=""===e?"您的网络未连接，请检查后重试。":e&&e.error_msg?e.error_msg:"有效期设置未知错误",t&&K.dispatch({type:Z.TOAST_SHOW,data:{content:t,interval:3e3,type:"new",iconStatus:"fail"}})}));break;case Z.DEL_COLLECTION:K.dispatch({type:Z.MODAL_WIN_SHOW,data:{title:"消息提醒",content:"是否删除选中消息?",showCancel:!0,cancelText:"取消",confirmText:"确定",success:function(t){if(t.confirm){var n=i.data.message,a=[n.collect_id],r={collect_ids:a};e._biz.delCollection(r,(function(t){K.dispatch({type:Z.TOAST_SHOW,data:{content:"删除收藏成功",interval:3e3,type:"new",iconStatus:"success"}}),e._children["collect-info-window"].updateRemainedSize(t.total,t.remained_size),e._children["collect-info-window"].delCollections(a),Ze.call(e,n,{no_extendMsgValidity:!1,wos_file_expire:168})}),(function(e){var t=e.error_msg?e.error_msg:"您的网络未连接，请检查后重试。";t&&K.dispatch({type:Z.TOAST_SHOW,data:{content:t,interval:3e3,type:"new",iconStatus:"fail"}})}))}else t.cancel},fail:function(){}}});break;case Z.MULTIPLE_FORWARD_WINDOW_CLOSE:fe(e._children["multipleForwardWindow"])||(e._children["multipleForwardWindow"].hide(),e._children["multipleForwardWindow"].reset());break;case Z.MULTIPLE_FORWARD_WINDOW_OPEN:if(!Ee["is_support_forward"])return;var yt,wt=[],bt=!1,xt=!1,St=(0,C.default)(o=i.data.messages||[]).call(o,(function(t){return!xt&&t&&t._data&&t._data.msg&&t._data.msg.sender_info&&(xt=!he(t._data.msg.sender_info.user_source)&&1!==t._data.msg.sender_info.register),t&&t._data&&t._data.msg&&t._data.msg.msg_id&&(fe(t._data.msg.status)||"SUCCESS"===t._data.msg.status)&&(0,A.default)(be).call(be,t._data.msg.show_type)<0?(yt=t._data.msg,yt.forward_msg_id=yt.msg_id,wt.push(Ze.call(e,yt,{no_extendMsgValidity:!0})),!0):(bt=!0,!1)})),kt=function(){O.default.all(wt).then((function(t){if(fe(e._children["multipleForwardWindow"])){var n=new G({single_select:!0,getMoreSessions:function(t,n){e._biz.isLogined()?e._biz.getSessionsFromApi(t,(function(e,t){var i=[];I.each(e,(function(e,t){var n=t.user.user_id+"@"+t.user.user_source;n!=r&&i.push(t.user)})),Ee["getUserinfo"](i,(function(i){n(e,i,t)}))}),(function(){n([],{},!0)})):n([],!0)}});e._children["multipleForwardWindow"]=n,e._element.append(n.getElement())}var a=e._biz.me(),r=a.user_id+"@"+a.user_source,o=e._biz.getAllSessions(),s=[];I.each(o,(function(e,t){var n=t.user.user_id+"@"+t.user.user_source;n==r||ye(t.user.user_id,t.user.user_source,t.user.shop_id,t.user.shop_source)||s.push(t.user)})),Ee["getUserinfo"](s,(function(t){e._children["multipleForwardWindow"].reset(),e._children["multipleForwardWindow"].setData({sessions:o,contacts:t,messages:St,forward_one_by_one:i.data.forward_one_by_one}),e._children["multipleForwardWindow"].show()}))})).catch((function(e){var t;e&&e.error_code&&"404"==e.error_code?(t="只能转发未过期的文本、图片、视频留言、文件、卡片、引用、聊天记录消息。",K.dispatch({type:Z.MODAL_WIN_SHOW,data:{title:"转发失败",content:t,showCancel:!1,confirmText:"好的"}}),t=null):t=""===e?"您的网络未连接，请检查后重试。":e&&e.error_msg?e.error_msg:"有效期检查失败",t&&K.dispatch({type:Z.TOAST_SHOW,data:{content:t,interval:3e3,type:"new",iconStatus:"fail"}})}))};xt?K.dispatch({type:Z.MODAL_WIN_SHOW,data:{title:"",content:"匿名用户消息不支持转发",showCancel:!1,confirmText:"好的"}}):bt&&0===St.length?K.dispatch({type:Z.MODAL_WIN_SHOW,data:{title:"",content:"特殊消息不支持转发",showCancel:!1,confirmText:"好的"}}):bt?K.dispatch({type:Z.MODAL_WIN_SHOW,data:{title:"",content:"你选择的消息中，特殊消息不支持转发， 是否继续?",showCancel:!0,cancelText:"取消",confirmText:"发送",success:function(e){e.confirm&&kt()},fail:function(){}}}):kt();break;case Z.MULTIPLE_FORWARD_WINDOW_SUBMIT:if(!Ee["is_support_forward"])return;if(!fe(e._children["multipleForwardWindow"])){var Et;e._children["multipleForwardWindow"].hide(),e._children["multipleForwardWindow"].reset();g=(0,C.default)(Et=i.data.messages||[]).call(Et,(function(e){return!!(e&&e._data&&e._data.msg&&e._data.msg.msg_id>0&&(fe(e._data.msg.status)||"SUCCESS"===e._data.msg.status)&&(0,A.default)(be).call(be,e._data.msg.show_type)<0)}));var Ct=i.data.toUsers||[],At=i.data.forward_one_by_one,Ot=!fe(e._currentcontact.shop_id)&&!fe(e._currentcontact.shop_source),Tt=!fe(i.data.leaveMsg);if(!fe(g)&&g.length){f=e._biz.me();At?(0,E.default)(Ct).call(Ct,(function(e){var t={to_id:e.user.user_id,to_source:e.user.user_source,shop_id:e.user.shop_id,shop_source:e.user.shop_source,sender_id:e.user.shop_id?e.user.shop_id:f.user_id,sender_source:e.user.shop_source?e.user.shop_source:f.user_source,msg_type:e.user.is_group?1005:2,at_info:""},n=[];(0,E.default)(g).call(g,(function(e){if(e&&e._data&&e._data.msg&&e._data.msg.content){var i=!0;if(e._data.msg.sender_info&&1===e._data.msg.sender_info.register&&(i=!1),he(e._data.msg.sender_info.user_source)&&1!==e._data.msg.sender_info.register&&(i=!1),i)return;var a=e._data.msg.sender_info?e._data.msg.sender_info.user_id:e._data.msg.sender_id,r=Number(e._data.msg.sender_info?e._data.msg.sender_info.user_source:e._data.msg.sender_source),o=[{msg_id:e._data.msg.msg_id,sender_id:a+"@@"+r,to_id:e._data.msg.to_id+"@@"+e._data.msg.to_source}];n.push(M(M({},t),{show_type:"msg_batch_forward_card",content:{type:"msg_batch_forward_card",forward_one_by_one:!0,msgs:o},forward_msg_show_type:e._data.msg.show_type,forward_msg_content:e._data.msg.content,is_forward_msg:!0}))}}));var a={messages:n};Tt&&(a.leaveMsg=M(M({},t),{show_type:"text",content:{msg:i.data.leaveMsg,type:"text"}})),K.dispatch({type:Z.MSG_BATCH_SEND_APPLY,data:a})})):At||new de((function(t,n){Ot?e._shop_biz.getWorkerShops({specialShops:[e._currentcontact.shop_id+"@@"+e._currentcontact.shop_source]},(function(e){t(e[0])}),(function(){n()})):Ee["getUserinfo"]([{user_id:f.user_id,user_source:f.user_source}],(function(e){!fe(e)&&e[f.user_id+"@"+f.user_source]?t(e[f.user_id+"@"+f.user_source]):n()}))})).then((function(t){var n=[],a=[],r=Ot&&t?t.shopName:"未知";Ot?card_title=e._currentcontact.user_name+"和"+r+"的聊天记录":e._currentcontact.in_group?card_title="群聊的聊天记录":card_title=e._currentcontact.user_name+"和"+t.user_name+"的聊天记录",(0,E.default)(g).call(g,(function(e){if(e&&e._data&&e._data.msg&&e._data.msg.content){var t=!0;if(e._data.msg.sender_info&&1===e._data.msg.sender_info.register&&(t=!1),he(e._data.msg.sender_info.user_source)&&1!==e._data.msg.sender_info.register&&(t=!1),t)return;var i=e._data.msg.sender_info?e._data.msg.sender_info.user_id:e._data.msg.sender_id,o=Number(e._data.msg.sender_info?e._data.msg.sender_info.user_source:e._data.msg.sender_source);n.push({msg_id:e._data.msg.msg_id,sender_id:i+"@@"+o,to_id:e._data.msg.to_id+"@@"+e._data.msg.to_source}),a.push({sender_name:e._data.msg.sender_info?e._data.msg.sender_info.user_name:Ot?r:"未知",content:(0,x.default)(e._data.msg._original_content||e._data.msg.content)})}})),n.length&&a.length&&((0,E.default)(Ct).call(Ct,(function(e){if(!fe(e.user)){var t={to_id:e.user.user_id,to_source:e.user.user_source,shop_id:e.user.shop_id,shop_source:e.user.shop_source,sender_id:e.user.shop_id?e.user.shop_id:f.user_id,sender_source:e.user.shop_source?e.user.shop_source:f.user_source,msg_type:e.user.is_group?1005:2,at_info:""},r=M(M({},t),{show_type:"msg_batch_forward_card",content:{type:"msg_batch_forward_card",forward_one_by_one:!1,msgs:n,msgs_preview:a,card_title:card_title}});Tt&&(r.leaveMsg=M(M({},t),{show_type:"text",content:{msg:i.data.leaveMsg,type:"text"}})),K.dispatch({type:Z.MSG_SEND_APPLY,data:r})}})),K.dispatch({type:Z.TOAST_SHOW,data:{content:"已转发",interval:3e3,type:"new",iconStatus:"success"}}))}))}K.dispatch({type:Z.MULTIPLE_MENU_CLOSE})}break;case Z.MULTIPLE_MENU_CLOSE:var Mt;F=fe(e._currentcontact)?null:e._currentcontact.user_id+"@"+e._currentcontact.user_source;if(fe(e._currentcontact.shop_id)||fe(e._currentcontact.shop_source)||(F+="@@"+e._currentcontact.shop_id+"@"+e._currentcontact.shop_source),F&&!fe(e._children[F])&&!fe(e._children[F]._children["msgViewer"]))(0,S.default)(Mt=e._children[F]._element).call(Mt,".im-multiplemenu-container").hide(),e._children[F]._children["msgViewer"].multiple_cancel();break;case Z.FORWARD_MESSAGE_FLOAT:if(!Ee["is_support_forward"])return;if(fe(e._children["float-controller"]))return;if(!fe(i.data.parent_u_key)&&e._children["float-controller"]._children&&!fe(e._children["float-controller"]._children[i.data.parent_u_key])&&2===e._children["float-controller"]._children[i.data.parent_u_key]._options.stage)return void K.dispatch({type:Z.TOAST_SHOW,data:{content:"多层嵌套的消息只能展开两层",interval:3e3,type:"new",iconStatus:"fail"}});F=fe(e._currentcontact)?null:e._currentcontact.user_id+"@"+e._currentcontact.user_source;if(F&&!fe(e._children[F])&&!fe(e._children[F]._children["msgViewer"])&&e._children[F]._children["msgViewer"]._options.multiple_selectable)break;if(i.data.id&&e._children["float-controller"]._children[i.data.id])e._children["float-controller"].setTop(i.data.id);else{var It={forward_msg_id:i.data.id,forward_sender_id:i.data.sender_id,forward_sender_source:i.data.sender_source,forward_to_id:i.data.to_id,forward_to_source:i.data.to_source,msgs:i.data.msg_ids};if(i.data.root_u_key){Ye=e._children["float-controller"].getView(i.data.root_u_key);!fe(Ye)&&Ye._options&&Ye._options._forward_data&&(It.forward_msg_id=Ye._options._forward_data.forward_msg_id,It.forward_sender_id=Ye._options._forward_data.forward_sender_id,It.forward_sender_source=Ye._options._forward_data.forward_sender_source,It.forward_to_id=Ye._options._forward_data.forward_to_id,It.forward_to_source=Ye._options._forward_data.forward_to_source)}e._biz.getForwardMsg(It,(function(t){var n,a,r=new V({_u_key:i.data.id,_parent_u_key:i.data.parent_u_key,_forward_data:i.data.parent_u_key?{}:It}),o=i.data.id_sources||{};e._children["float-controller"].addView(r,{initTop:e._position==q.CENTER?105:60,initLeft:e._position==q.CENTER?299.5:170}),(0,E.default)(n=t||[]).call(n,(function(e){e=(0,h.default)(e,o[e.msg_id]||{}),a===e.sender_id+"@"+e.sender_source&&(e.isSameUserWithPrevious=!0),a=e.sender_id+"@"+e.sender_source})),r.setData({msgList:t,title:i.data.title})}),(function(e){var t;e&&e.error_msg?t=e.error_msg:""===e&&(t="您的网络未连接，请检查后重试。"),t&&K.dispatch({type:Z.TOAST_SHOW,data:{content:t,interval:3e3}})}))}break;case Z.COLLECTION_MESSAGE_FLOAT:if(i.data.id&&e._children["float-controller"]._children[i.data.id])return void e._children["float-controller"].setTop(i.data.id);if(!fe(i.data.parent_u_key)&&e._children["float-controller"]._children&&!fe(e._children["float-controller"]._children[i.data.parent_u_key])&&2===e._children["float-controller"]._children[i.data.parent_u_key]._options.stage)return void K.dispatch({type:Z.TOAST_SHOW,data:{content:"多层嵌套的消息只能展开两层",interval:3e3,type:"new",iconStatus:"fail"}});var Nt,Lt=new V({_u_key:i.data.id,_parent_u_key:i.data.parent_u_key});e._children["float-controller"].addView(Lt,{initTop:e._position==q.CENTER?105:60,initLeft:e._position==q.CENTER?299.5:170}),(0,E.default)(s=i.data.msgList||[]).call(s,(function(e){Nt===e.sender_name+"@"+e.to_source&&(e.isSameUserWithPrevious=!0),Nt=e.sender_name+"@"+e.to_source})),Lt.setData({msgList:i.data.msgList,title:i.data.title});break;case Z.DEL_FALSE_MSGS:f=Ee["me"]();var Rt=f.user_id+"@"+f.user_source;if(!fe(i.data.messages)&&i.data.messages.length){var Pt;Ae.deleteExistFalseMsgs(i.data.messages);var Dt=Ae.gatherFalseLastMsgs(Rt),jt=[],Ut={};(0,E.default)(Pt=i.data.messages).call(Pt,(function(e){e.tmpKey&&!Ut[e.tmpKey]&&(jt.push(e.tmpKey),Ut[e.tmpKey]=!0)})),e._biz._delFalseMsg({msgs:i.data.messages}),(0,E.default)(jt).call(jt,(function(e){if(!fe(Dt)){var t=e.split("@@");if(t.length){var n=t[0].split("@");if(2===n.length)if(2===t.length){var i=t[1].split("@");2===i.length&&te.changeLastFalseMsg(n[0],Number(n[1]),i[0],i[1],Dt[e])}else te.changeLastFalseMsg(n[0],Number(n[1]),Dt[e])}}}))}break;case Z.DEL_MSG:K.dispatch({type:Z.MODAL_WIN_SHOW,data:{title:"消息提醒",content:"是否删除选中消息?",showCancel:!0,cancelText:"取消",confirmText:"确定",success:function(t){if(t.confirm){var n=i.data.message;if(!(n.msg_id&&(fe(n.status)||"SUCCESS"===n.status)&&(0,A.default)(xe).call(xe,n.show_type)<0))return;var a=n.sender_info,r=!fe(a)&&fe(n.sender_id)?a.user_id:n.sender_id,o=!fe(a)&&fe(n.sender_source)?a.user_source:n.sender_source;if("false_msg"===n.show_type)return void K.dispatch({type:Z.DEL_FALSE_MSGS,data:{messages:[n]}});e._biz.delMsg({sender_id:r,sender_source:o,msg_id:n.msg_id,to_id:n.to_id,shop_id:n.shop_id,shop_source:n.shop_source,to_source:n.to_source},(function(){K.dispatch({type:Z.TOAST_SHOW,data:{content:"删除成功",interval:3e3}})}),(function(e){var t;t=e&&e.error_msg?e.error_msg:""===e?"您的网络未连接，请检查后重试。":"删除失败，请重试",t&&K.dispatch({type:Z.TOAST_SHOW,data:{content:t,interval:3e3}})}))}else t.cancel},fail:function(){}}});break;case Z.DELETE_TOGETHER:K.dispatch({type:Z.MODAL_WIN_SHOW,data:{title:"消息提醒",content:"是否删除选中消息?",showCancel:!0,cancelText:"取消",confirmText:"确定",success:function(t){if(t.confirm){var n;K.dispatch({type:Z.MULTIPLE_MENU_CLOSE});var a=i.data.messages,r=[],o=[];if((0,E.default)(n=a||[]).call(n,(function(e){if(e&&("SUCCESS"===e.status||fe(e.status))&&(0,A.default)(xe).call(xe,e.show_type)<0){var t=e.sender_info,n=!fe(t)&&fe(e.sender_id)?t.user_id:e.sender_id,i=!fe(t)&&fe(e.sender_source)?t.user_source:e.sender_source;"false_msg"!==e.show_type?r.push({sender_id:n,sender_source:i,msg_id:e.msg_id,to_id:e.to_id,to_source:e.to_source}):o.push(e)}})),o.length&&K.dispatch({type:Z.DEL_FALSE_MSGS,data:{messages:o}}),!r.length)return;e._biz.multipleDelMsgs({messages:r},(function(){K.dispatch({type:Z.TOAST_SHOW,data:{content:"删除成功",interval:3e3}})}),(function(e){var t;t=e&&e.error_msg?e.error_msg:""===e?"您的网络未连接，请检查后重试。":"删除失败，请重试",t&&K.dispatch({type:Z.TOAST_SHOW,data:{content:t,interval:3e3}})})),K.dispatch({type:Z.MULTIPLE_MENU_CLOSE})}else t.cancel},fail:function(){}}});break;case Z.STATIC_SEND_MESSAGE:!fe(i.data)&&i.data.text&&i.data.text.length&&K.dispatch({type:Z.MSG_SEND_APPLY,data:{to_id:i.data.to_id,to_source:i.data.to_source,shop_id:e._currentcontact.shop_id,shop_source:e._currentcontact.shop_source,sender_id:e._currentcontact.shop_id?e._currentcontact.shop_id:null,sender_source:e._currentcontact.shop_source?e._currentcontact.shop_source:null,show_type:"text",content:{msg:i.data.text,type:"text"},msg_type:i.data.in_group&&i.data.in_group+""==="1"?1005:2,at_info:""}});break;case Z.STATIC_LOGIN:Ee["anonymous-login"]&&"function"===typeof Ee["anonymous-login"]&&Ee["anonymous-login"]();break;default:break}}))}(this),function(e){var t;I("body").append(e.getElement()),(0,A.default)(t=navigator.userAgent).call(t,"MSIE 6.0")>0&&(I(".im-app-default").hide(),I(".im-app-ie-default").show())}(this),function(e){ie.addEventListener("appStatusChange",(function(t){switch(t){case Y.MIN:e.minimize();break;case Y.NORMAL:e.normalize();break;default:break}})),ie.addEventListener("sessionCheckChange",(function(t){if(!t)return I.each(e._children,(function(e,t){t instanceof D&&t.unactive()})),!1;var n,i=t;if(-1!==(0,A.default)(i).call(i,"@@")){var a=i.split("@@");i=a[0],n=a[1]}var r=i.split("@"),o=r[0],s=r[1],c=[],l={user_id:o,user_source:s},u=!1;if(fe(n)||(c=n.split("@"),l.shop_id=c[0],l.shop_source=c[1],u=!0),Ee["getUserinfo"]([l],(function(t){var n=u?l.user_id+"@"+l.user_source+"@@"+l.shop_id+"@"+l.shop_source:l.user_id+"@"+l.user_source,i=t[n],a=I.extend(!0,{},i);if(u&&(a.is_shop_mode=!0,a.shop_id=l.shop_id,a.shop_source=l.shop_source),!a||ve(a)||0!=a.is_contact||""!=a.user_name||""!=a.avatar){if(te.addContactSession({user:a,msg:null,currentContact:e._currentcontact}),e._status!=Y.MIN||e._position==q.CENTER){if(!ve(e._currentcontact)&&ve(a)){e._currentcontact&&(e._currentcontact.user_id,e._currentcontact.user_source);fe(e._currentcontact)||fe(e._currentcontact.shop_id)||fe(e._currentcontact.shop_source)||"@@"+e._currentcontact.shop_id+"@"+e._currentcontact.shop_source;a.user_id,a.user_source;fe(a.shop_id)||fe(a.shop_source)||"@@"+a.shop_id+"@"+a.shop_source;var r=Ee["anonymous_group"],o=te.getSession(r.id);e._children["contact-window"].gotoGroupDetail(o)}else ve(e._currentcontact)&&!ve(a)&&e._children["contact-window"].groupReturn();e._switchChatWindow(a)}}else ie.clearStatus("sessionKey")})),e._currentcontact){var d=e._currentcontact.user_id+"@"+e._currentcontact.user_source;if(fe(e._currentcontact.shop_id)||fe(e._currentcontact.shop_source)||(d+="@@"+e._currentcontact.shop_id+"@"+e._currentcontact.shop_source),t==d)return!1}e._status==Y.MIN&&e._position!==q.CENTER&&e._setUnreadToZero(o,s,e._currentcontact)}))}(this),function(e){var t=e.getElement();t.focus(),t.keydown((function(t){var n=t.which;switch(n){case 38:case 40:te.tabSession(n,e._currentcontact);break;default:break}}))}(this),function(e){I("body").on("click",(function(e){I(".im-qrcode-continer").hide(),I(".im-qrcode").html("")}))}()};$e.prototype=(0,_.default)(P.prototype),$e.prototype._init=function(e,t){var n=this;n._biz=e,n._shop_biz=t,n._allunreadcount=0,n._originalTitle=window.top.document.title;var i=!1,a=!0,r=new re(ke,(function(e){a=e,a||He.call(n,r,a)}));He.call(n,r,!0);var o=new ae((function(e){e?(a=!0,i=!1,He.call(n,r,a)):i=!0}));window.top.onblur=function(){(0,k.default)((function(){a||(n._allunreadcountTimer&&n._allunreadcountTimer.stop(),window.top.document.title=n._originalTitle)}),100),i=!0},window.top.onfocus=function(){i=!1},Ce.set("sysUser","60687145693708@2"),"integrate"===this._biz.options.envs&&Ce.set("sysUser","59911917385233@2");var s=n._biz.me();Ce.set("meInfo",s),Ae.setUser(s.user_id,s.user_source),this._biz.addEventListener("contactOnlineStatusChanged",(function(e){K.dispatch({type:Z.CONTACT_ONLINE_CHANGE,data:e})})),this._biz.addEventListener("serviceTransfered",(function(e){var t={amount:1};K.dispatch({type:Z.UNREAD_CHANGE,data:t});var r=e.session;if(a){var o=Ge.call(n);o.play(Ee["msg-sound"]),n.titleNotify(t.amount),i&&n._desktopNotify("IM消息提醒","您有"+t.amount+"条新消息！",r)}n._status==Y.MIN&&n._children["contact-window"].blinkMinBar()})),this._biz.addEventListener("msgReceived",(function(e){var t=n._biz.me(),r=[];I.each(e,(function(s,c){pe({user_source:c.to_source})?(p=c.to_id,f=c.to_source):(p=c.sender_id,f=c.sender_source);var l=n._currentcontact;if(c.msg_list&&c.msg_list.length>0&&!fe(ee)&&I.each(c.msg_list,(function(e,t){var n=t.show_type?t.show_type:t.content&&t.content.type?t.content.type:null;!fe(n)&&fe(ee[n])&&r.push(t)})),l&&l.user_id==p&&l.user_source==f&&c.msg_list&&c.msg_list.length>0){var u=c.msg_list[0],d={sender_id:u.sender_id,sender_source:u.sender_source,msg_ids:[u.msg_id],to_id:u.to_id,to_source:u.to_source};n._biz.ackMsgShow(d,null,(function(e){if(_e(u,n._biz.me())&&e&&42034==e.error_code){var t={sender_id:u.sender_id,sender_source:u.sender_source,msg_id:u.msg_id,to_id:u.to_id,to_source:u.to_source};n._shop_biz&&n._shop_biz.ackShown(t)}}))}if(t.user_id!=c.sender_id||t.user_source!=c.sender_source){var p=c.sender_id,f=c.sender_source;l=n._currentcontact;if(!l||l.user_id!=p||l.user_source!=f||n._status==Y.MIN&&n._position!==q.CENTER);else{if((i||Ve()||!o.visible())&&a&&e.length>0){n._desktopNotify("IM消息提醒","您有"+e.length+"条新消息！",l);var m=Ge.call(n);m.play(Ee["msg-sound"])}n._setUnreadToZero(p,f,l)}}})),r.length&&n._biz.reportMessages({show_failed:r})})),this._biz.addEventListener("otherReadUpdate",(function(e){})),this._biz.addEventListener("contactInfoChanged",(function(e){if(n._currentcontact&&e&&0!=e.length)for(var t=0;t<e.length;t++){var i=e[t];if(n._currentcontact.user_id+"@"+n._currentcontact.user_source==i.user_id+"@"+i.user_source){n._currentcontact=i;var a=n._currentcontact.user_id+"@"+n._currentcontact.user_source;if(fe(n._currentcontact.shop_id)||fe(n._currentcontact.shop_source)||(a+="@@"+n._currentcontact.shop_id+"@"+n._currentcontact.shop_source),fe(n._currentcontact.group_info)||(Fe[a]=n._currentcontact.group_info.current_count),!pe(i))return;var r=n._children[a];r&&r.setContact(n._currentcontact)}}})),this._biz.addEventListener("cometReceived",(function(e){if(e&&e.data)for(var t=e.data,n=0;n<t.length;n++){var i=t[n],a=i.valueType,r=i.value;if(fe(r))return;for(var o=0;o<r.length;o++){var s=i.value[o].content;switch("string"==typeof s&&(s=me.parse(s)),a){case"commandmsg":if("UPDATEEVENT"==s.name&&"BEINPUTTING"==s.event_type)K.dispatch({type:Z.TOAST_SHOW,data:{content:"用户"+s.from_id+"@"+s.from_source+"正在输入中....",interval:3e3}});else if("OUTGROUPNOTICE"==s.name){var c=s.data&&s.data.g_id+"@"+s.data.g_source,l=localStorage.getItem("delSessionKey")?localStorage.getItem("delSessionKey")+","+c:c;localStorage.setItem("delSessionKey",(0,x.default)(l))}break;default:break}}}}));var c=function(){var e=n._biz.getAllSessions();if(0==e.length)return te.addContactSessions([]),te.removeChecked(),ie.clearStatus("sessionKey"),I.each(n._children,(function(e,t){t instanceof D&&t.unactive()})),void n._children["contact-window"].addVoidBackground(!0);var t=n._biz.getAllUnreadAmount(),i=n._biz.me(),a=[{user_id:i.user_id,user_source:i.user_source}],r=i.user_id+"@"+i.user_source,o=n._currentcontact;Ee["sessions-converter"](e,(function(e){I.each(e,(function(e,t){var n=t.user.user_id+"@"+t.user.user_source;n!=r&&a.push(t.user)})),Ee["getUserinfo"](a,(function(i){var a=[],s=[];if(I.each(e,(function(e,c){var l,u=c.user.user_id,d=c.user.user_source,p=u+"@"+d,f=p;c.user&&c.user.shop_id&&c.user.shop_source&&(l=c.user.shop_id+"@"+c.user.shop_source,f+="@@"+l,p+="@@"+l,c.user.shop_user_info=i[l]);var m=I.extend(!0,{},i[p],c.contact,c.user);if(fe(l)&&!fe(m.msg_set)||(m.msg_set={ses_top:0,silent:0}),!fe(c.user.update_time)){m.msg_set.ses_top=fe(c.user.ses_top)?fe(m.msg_set.ses_top)?null:m.msg_set.ses_top:c.user.ses_top,m.msg_set.silent=fe(c.user.silent)?fe(m.msg_set.silent)?null:m.msg_set.silent:c.user.silent,m.update_time=c.user.update_time;var _=1==m.msg_set.ses_top?"取消置顶":"置顶",h=1==m.msg_set.silent?"取消免打扰":"免打扰";n._children[f]&&(n._children[f].updateHandleText(_),n._children[f].updateHandleText(h))}var g=c.msg?I.extend({},c.msg):null;c.unread_show_type=m.msg_set&&1==m.msg_set.silent?"rash":"";var v=t[f]||0,y=o?o.user_id+"@"+o.user_source:null;if(y&&o.shop_id&&o.shop_source&&(y+="@@"+o.shop_id+"@"+o.shop_source),y==f&&(n._position!==q.CENTER&&n._status==Y.MIN||(v=0,n._setUnreadToZero(u,d,o))),m){fe(g)||r==g.sender_id+"@"+g.sender_source||fe(m.remark)||fe(m.remark.remark_name)||(fe(g.content.operator)||fe(g.replace)||fe(g.replace.content)||fe(g.replace.content._replaceMsg)||fe(g.content.operator.pos_start)||fe(g.content.operator.pos_end)?fe(g.content.operator)||fe(g.content._replaceMsg)||fe(g.content.operator)||fe(g.content.operator.pos_start)||fe(g.content.operator.pos_end)||(g.content.msg=g.content._replaceMsg.substring(0,g.content.operator.pos_start)+m.remark.remark_name+g.content._replaceMsg.substring(g.content.operator.pos_end)):g.content.text=g.content.msg=g.replace.content._replaceMsg.substring(0,g.content.operator.pos_start)+m.remark.remark_name+g.replace.content._replaceMsg.substring(g.content.operator.pos_end));var w={user:m,unread:v,msg:g,sort_time:c.sort_time,unread_show_type:c.unread_show_type,is_top_group:!!c.is_top_group,is_anonymous_user:ve(m)};w.is_anonymous_user?s.push(w):a.push(w)}})),s.length>0){var c=Ee["anonymous_group"];n.addSessionGroup(c),te.addContactGroupSessions(s,c.id)}else{c=Ee["anonymous_group"];te.addContactGroupSessions([],c.id)}te.addContactSessions(a)}))}))};this._biz.addEventListener("uploadauditChange",(function(e){e&&e.ret+""==="0"&&e.wos_file_name&&K.dispatch({type:Z.UPLOAD_AUDIT_CHANGE,data:e})})),this._biz.addEventListener("sessionChanged",(function(e){c()})),this._biz.addEventListener("sessionPortChanged",(function(e){})),this._biz.addEventListener("unreadChanged",(function(e){c()})),this._biz.addEventListener("syncAppData",(function(e){K.dispatch({type:Z.MSG_SYNC,data:e})})),this._biz.addEventListener("login",(function(){var e=JSON.parse(localStorage.getItem("delSessionKey")),t=JSON.parse(localStorage.getItem("sessionKey"));fe(e)||-1==(0,A.default)(e).call(e,t)||ie.clearStatus("sessionKey"),ie.start()})),this._biz.addEventListener("logout",(function(){})),this._biz.addEventListener("loginUserChanged",(function(){ie.clearStatus("sessionKey")})),this._biz.addEventListener("mainPageChanged",(function(){n._allunreadcount&&a&&n.titleNotify(n._allunreadcount)})),this._biz.addEventListener("falseNews",(function(e){var t=[];for(var i in e)if(e[i]&&e[i].length){var a,r,o,s=[],c=i.split("@"),l=i.split("@@");2===l.length&&(l=l[1],l&&(l=l.split("@"),r=l[0],o=l[1])),I.each(e[i],(function(e,t){var n,l="tmpMsg-"+i;if(!fe(t)&&t.is_false_new&&(n=r&&o?te.getSession(c[0],Number(c[1]),{shop_id:r,shop_source:o}):te.getSession(c[0],Number(c[1])),!fe(n)&&n.msg)){var u=ge(n.msg.msg_id,"1"),d=n.msg.msg_id,p=Ae.gatherExistFalseMsgs(i,n.msg.msg_id);p&&p.length&&p[p.length-1].msg_id&&le(p[p.length-1].msg_id,n.msg.msg_id)>0&&(u=ge(p[p.length-1].msg_id,"1"),d=p[p.length-1].msg_id),a=I.extend({msg_id:u},t),a.tmpKey=i,a.follow_msg_id=d,a.is_saved=!0,Ae.saveExistFalseMsgs(a,i),s.push(a),t=a}if(Ce.get(l)instanceof Array){var f=Ce.get(l);f.push(t),Ce.set(l,f)}else Ce.set(l,[t])})),Ae.set(s),fe(a)||(Ce.set("tmpMsg-session-"+i,a),r&&o?te.changeLastFalseMsg(c[0],Number(c[1]),r,o,a):te.changeLastFalseMsg(c[0],Number(c[1]),a)),t=(0,m.default)(t).call(t,e[i])}n._biz.reportMessages({client_msgs:t})})),this._biz.addEventListener("anonymousContactLogined",(function(e){var t;if(e&&e.contact&&e.newContact){t=e.newContact,contact=e.contact;var i=n._currentcontact?n._currentcontact.user_id+"@"+n._currentcontact.user_source:null;fe(n._currentcontact)||fe(n._currentcontact.shop_id)||fe(n._currentcontact.shop_source)||(i+="@@"+n._currentcontact.shop_id+"@"+n._currentcontact.shop_source);var a=contact.user_id+"@"+contact.user_source;fe(contact.shop_id)||fe(contact.shop_source)||(a+="@@"+contact.shop_id+"@"+contact.shop_source);var r=t.user_id+"@"+t.user_source;fe(t.shop_id)||fe(t.shop_source)||(r+="@@"+t.shop_id+"@"+t.shop_source);var o=n._biz.me(),s=o.user_id+"@"+o.user_source;r===s?(ie.stop(),n.removeChatwindow(contact),n._biz.delAnonymousSessions([M({},e.contact)]),n._currentcontact=null,te.removeChecked(),ie.clearStatus("sessionKey"),ie.start(),n._biz.reloadSessions({},(function(){n._biz.resetLoadedMsg(),n._biz.resetLoadedUser(),n._biz.resetLoadedGroupInfo()}))):fe(n._currentcontact)?(n.removeChatwindow(t),n._biz.delAnonymousSessions([M({},e.contact)]),ie._sessionkey&&ie._sessionkey==a&&(ie.stop(),ie.clearStatus("sessionKey"),ie.start())):r===i?(ie.stop(),n.removeChatwindow(t),n._gotoContact(t),n._biz.delAnonymousSessions([M({},e.contact)]),ie.start()):a===i?K.dispatch({type:Z.MODAL_WIN_SHOW,data:{title:"",content:"该游客已经成功登录，点击与登录后的用户继续聊",showCancel:!1,confirmText:"点击跳转",success:function(i){i.confirm?fe(t)||(ie.stop(),n.removeChatwindow(t),n._biz.delAnonymousSessions([M({},e.contact)]),te.setChecked(t.user_id,t.user_source,t),ie.setSession(t),ie.start()):i.cancel},fail:function(){}}}):(n.removeChatwindow(t),n._biz.delAnonymousSessions([M({},e.contact)]))}})),this._biz.start(),te.addEventListener("selfchanged",(function(e){var t;if(e.group||e.contact){K.dispatch({type:Z.SESSION_SELF_CHANGE,data:e});var i=e.contact||e.group;if(!pe(i)){if(_e(i))return;if(!fe(i.remark)){var a=i.user_id+"@"+i.user_source,r=n._children[a];return void(!r||fe(r._contact)||fe(r._contact.remark)||r._contact.remark.remark_name===i.remark.remark_name||r&&r.setContact(i))}}a=e.group?"group-"+i.id:i.user_id+"@"+i.user_source;Fe&&Fe[a]&&Fe[a]>i.group_info.current_count&&(i.group_info.current_count=Fe[a]);var o=e.msg&&e.msg.content;switch(o&&o.op_type){case"change_group_name":var s="更改群名称为：";i.user_name=o.default_text&&-1!==(0,A.default)(t=o.default_text).call(t,s)?o.default_text.split(s)[1]:i.user_name;break;default:break}r=n._children[a];r&&r.setContact(i)}})),te.addEventListener("childrenchanged",(function(e){K.dispatch({type:Z.SESSION_CHILDREN_CHANGE,data:e})})),te.addEventListener("totalUnreadChanged",(function(e){var t=n._allunreadcount<e.amount;if(n._allunreadcount=e.amount,K.dispatch({type:Z.UNREAD_CHANGE,data:e}),e.amount<=0)return n._children["contact-window"].resetblinkMinBar(),window.top.document.title=n._originalTitle,void(n._allunreadcountTimer&&n._allunreadcountTimer.stop());var r=e.lastsession;if(a){if(t){var o=Ge.call(n);o.play(Ee["msg-sound"])}n.titleNotify(e.amount),i&&n._desktopNotify("IM消息提醒","您有"+e.amount+"条新消息！",r)}n._status==Y.MIN&&n._children["contact-window"].blinkMinBar()})),te.addEventListener("tabSession",(function(e){n._gotoContact(e)})),Ee["stat"].appid&&Ee["stat"].appkey&&X.init(Ee["stat"]);var l=this._biz.options.user_id,u="61e2e9e0d3e683bdfb96b66f60a07f31",d=N.getInstance({projectID:"IM_PC",userId:l?L(L(l)+u):""});d.errorReport(),d.performanceReport(),n.bindRTCEmitter&&n.bindRTCEmitter()},$e.prototype.chatTo=function(e,t,n,i,a){var r=this._biz.me();if(this.normalize(),r&&(r.user_id!=e||r.user_source!=t)){var o=this,s={user_id:e,user_source:t},c=!1;fe(i)||fe(a)||(s.shop_id=i,s.shop_source=a,c=!0),Ee["getUserinfo"]([s],(function(i){var a=c?s.user_id+"@"+s.user_source+"@@"+s.shop_id+"@"+s.shop_source:s.user_id+"@"+s.user_source,r=i[a];c&&(r.shop_id=s.shop_id,r.shop_source=s.shop_source),r&&(o._biz.getSession(e,t)||(o._biz.addSession({user:{user_id:r.user_id,user_source:r.user_source},msg:null}),te.addContact(r)),o._switchChatWindow(r),n&&n())}))}},$e.prototype.addSessionGroup=function(e){te.addGroup(e)},$e.prototype.setContactToGroup=function(e,t,n,i,a){var r={user_id:e,user_source:t},o=!1;fe(i)||fe(a)||(r.shop_id=i,r.shop_source=a,o=!0),Ee["getUserinfo"]([r],(function(e){var t=o?r.user_id+"@"+r.user_source+"@@"+r.shop_id+"@"+r.shop_source:r.user_id+"@"+r.user_source,i=e[t];o&&(i.shop_id=r.shop_id,i.shop_source=r.shop_source),i&&(te.addContact(i),te.setContactToGroup(i.user_id,i.user_source,n))}))},$e.prototype.normalize=function(){this._children["contact-window"].resetblinkMinBar(),this._status!==Y.NORMAL&&this._position!==q.CENTER&&(this._status=Y.NORMAL,ie.setAppStatus(this._status),this.setData({status:Y.NORMAL}),K.dispatch({type:Z.APP_STATUS_CHANGE,data:Y.NORMAL}),this.triggerEvent("appstatusChanged",Y.NORMAL),this.triggerEvent("iframePosChanged","NORMAL",Ee["normal-iframe-position"]),this._currentcontact&&this._gotoContact(this._currentcontact),this._biz.startOnlineTimer(),window.WMDA_REPORT&&window.WMDA_REPORT("custom",{event_id:"14"}))},$e.prototype.minimize=function(){if(this._status!==Y.MIN&&this._position!==q.CENTER){var e=this;this._status=Y.MIN,ie.setAppStatus(this._status),this.setData({status:Y.MIN}),K.dispatch({type:Z.APP_STATUS_CHANGE,data:Y.MIN}),e.triggerEvent("iframePosChanged","MIN",{bottom:0,right:0}),(0,k.default)((function(){e._status===Y.MIN&&e.triggerEvent("appstatusChanged",Y.MIN)}),250),window.WMDA_REPORT&&window.WMDA_REPORT("custom",{event_id:"9"}),this._biz.stopOnlineTimer(),this._allunreadcount>0&&this._children["contact-window"].blinkMinBar()}},$e.prototype.position=function(e){e=e.toUpperCase(),this._position!==e&&(this._position=e,this.setData({position:e}),this._position===q.CENTER&&this._biz.startOnlineTimer(),Ce.set("position",this._position))},$e.prototype.render=function(){switch(this._data.status===Y.NORMAL?this._element.removeClass("im-min"):this._element.addClass("im-min"),this._element.removeClass("im-center im-rightbottom"),this._data.position){case q.CENTER:this._element.addClass("im-center"),I("<div>").addClass("im-center-bg").appendTo(I("body"));break;case q.RIGHT_BOTTOM:this._element.addClass("im-rightbottom");break;default:I(".im-center-bg").remove();break}},$e.prototype.titleNotify=function(e,t){var n=this,i=window.top;n._allunreadcountTimer&&n._allunreadcountTimer.stop(),e&&e>0?(function(){var t=0;n._allunreadcountTimer=new ne({onElapsed:function(n){t++,t%2==1&&(i.document.title="【"+e+"条新消息】"),t%2==0&&(i.document.title="【　　　 　        】"),n()},duration:1e3})}(),n._allunreadcountTimer.start()):t?(function(){var e=0;n._titleTimer=new ne({onElapsed:function(n){e++,e%2==1&&(i.document.title=t),e%2==0&&(i.document.title="【　　　 　        　　　 　        】"),n()},duration:1e3})}(),n._titleTimer.start()):(i.document.title=n._originalTitle,n._allunreadcountTimer&&n._allunreadcountTimer.stop(),n._titleTimer&&n._titleTimer.stop())},$e.prototype._desktopNotify=function(e,t,n){var i=this,a=window.top;e||t||(e="IM提醒",t="您有新消息啦！");var r="//pic3.58cdn.com.cn/webim/big/n_v1bkujjdzjwyvfqyxyq4ja.png?h=200&w=200&crop=1",o=a.Notification||a.mozNotification||a.webkitNotification;o&&o.requestPermission((function(s){if("granted"==s){var c=new o(e,{tag:"IM",icon:r,body:t});i._notify=c,c.onclick=function(){a.focus(),i.triggerEvent("windowFocus"),c.close(),i.normalize(),i._gotoContact(n),window.WMDA_REPORT&&window.WMDA_REPORT("custom",{event_id:"6"})},c.onerror=function(){},c.onshow=function(){(0,k.default)((function(){c.close()}),5e3)},c.onclose=function(){}}}))},$e.prototype._findChatWindow=function(e){if(!e)return null;var t=this,n=e.user_id+"@"+e.user_source;!_e(e)||fe(e.shop_id)||fe(e.shop_source)||(n+="@@"+e.shop_id+"@"+e.shop_source);var i=t._children[n];return i},$e.prototype._getChatWindow=function(e){if(!e)return null;var t=this,n={user_id:e.user_id,user_source:e.user_source},i=e.user_id+"@"+e.user_source,a=!1;!_e(e)||fe(e.shop_id)||fe(e.shop_source)||(a=!0,i+="@@"+e.shop_id+"@"+e.shop_source,n.shop_id=e.shop_id,n.shop_source=e.shop_source,n.is_shop_mode=!0);var r=t._children[i];if(!r){var o=t._biz.me();r=new D({_anonymousLogined:o.is_anonymous_login,getFreshMsgRecords:function(e,n){var i=function(){var e=[],t=0;return function(i){e=(0,m.default)(e).call(e,i),2===++t&&((0,f.default)(e).call(e,(function(e,t){return le(e.msg_id,t.msg_id)<0?-1:1})),n(e))}}();Ye.call(t,{user_id:e.user_id,user_source:e.user_source,msg_id:e.last_msg_id,count:e.count,shop_id:e.shop_id,shop_source:e.shop_source,option:1},(function(n,a){if(i(n),!fe(a)){var r=e.user_id+"@"+e.user_source;if(fe(e.shop_id)||fe(e.shop_source)||(r+="@@"+e.shop_id+"@"+e.shop_source),Ce.get("otherRead-"+r)!==a){Ce.set("otherRead-"+r,a);var o=t._currentcontact.user_id+"@"+t._currentcontact.user_source;fe(t._currentcontact.shop_id)||fe(t._currentcontact.shop_source)||(o+="@@"+t._currentcontact.shop_id+"@"+t._currentcontact.shop_source);var s=t._children[o];s&&s.otherReadUpdate()}}if(0!=n.length){var c={user_id:e.user_id,user_source:e.user_source},l=!1;fe(e.shop_id)||fe(e.shop_source)||(c.shop_id=e.shop_id,c.shop_source=e.shop_source,l=!0),Ee["getUserinfo"]([c],(function(e){var n=l?c.user_id+"@"+c.user_source+"@@"+c.shop_id+"@"+c.shop_source:c.user_id+"@"+c.user_source,i=e[n];if(l&&(i.shop_id=c.shop_id,i.shop_source=c.shop_source,i.is_shop_mode=!0),i){t._currentcontact=i;var a=t._currentcontact.user_id+"@"+t._currentcontact.user_source;fe(t._currentcontact.shop_id)||fe(t._currentcontact.shop_source)||(a+="@@"+t._currentcontact.shop_id+"@"+t._currentcontact.shop_source),fe(t._currentcontact.group_info)||(Fe[a]=t._currentcontact.group_info.current_count);var r=t._children[a];r&&r.setContact(t._currentcontact)}}))}}),(function(e){i([])})),Ye.call(t,{user_id:e.user_id,user_source:e.user_source,msg_id:e.last_msg_id,shop_id:e.shop_id,shop_source:e.shop_source,count:3,option:-1,localonly:!0},(function(t){if(t.length>0)if((0,f.default)(t).call(t,(function(e,t){return le(e.msg_id,t.msg_id)<0?1:-1})),fe(e.last_msg)||fe(e.last_msg.link_msg_id)||fe(t[0].msg_id)||0==le(e.last_msg.link_msg_id,t[0].msg_id))for(var n=0;n<t.length;n++)fe(t[n].link_msg_id)||fe(t[n+1])||fe(t[n+1].msg_id)||0==le(t[n].link_msg_id,t[n+1].msg_id)||(0,p.default)(t).call(t,n+1);else t=[];i(t),t.length}),(function(e){i([])}))},getOldMsgRecords:function(e,n,i){Ye.call(t,{user_id:e.user_id,user_source:e.user_source,msg_id:e.last_msg_id,count:e.count,shop_id:e.shop_id,shop_source:e.shop_source,option:-1,is_get_from_api:!0},(function(i){var a;if(pe({user_source:e.user_source})&&(a=e.user_id+"@"+e.user_source,Be[a]=fe(Be[a])?{}:Be[a]),!fe(i)&&i.length){var r=[];I.each(i,(function(e,t){var n=t.show_type?t.show_type:t.content&&t.content.type?t.content.type:null;if(!fe(n)&&fe(ee[n])&&r.push(t),a){var i=t.sender_id+"@"+t.sender_source;Be[a][i]=fe(Be[a][i])?[]:Be[a][i],Be[a][i].push(t)}})),r.length&&t._biz.reportMessages({show_failed:r})}n(i)}),(function(e){n(null),i&&i(e)}))},getReplaceMsgRecords:function(e,n){var i=e.user_id,a=e.user_source,r=e.last_msg_id,o=e.count,s=function(){var r=[];return function(o){if(r=(0,m.default)(r).call(r,o),0==r.length)return n(r);var s={user_id:i,user_source:a},c=!1;fe(e.shop_id)||fe(e.shop_source)||(s.shop_id=e.shop_id,s.shop_source=e.shop_source,c=!0),Ee["getUserinfo"]([s],(function(e){var n=c?s.user_id+"@"+s.user_source+"@@"+s.shop_id+"@"+s.shop_source:s.user_id+"@"+s.user_source,i=e[n];if(c&&(i.shop_id=s.shop_id,i.shop_source=s.shop_source,i.is_shop_mode=!0),i&&pe(i)){t._currentcontact=i;var a=t._currentcontact.user_id+"@"+t._currentcontact.user_source;fe(t._currentcontact.shop_id)||fe(t._currentcontact.shop_source)||(a+="@@"+t._currentcontact.shop_id+"@"+t._currentcontact.shop_source),fe(t._currentcontact.group_info)||(Fe[a]=t._currentcontact.group_info.current_count);var r=t._children[a];r&&r.setContact(t._currentcontact)}})),(0,f.default)(r).call(r,(function(e,t){return le(e.msg_id,t.msg_id)<0?-1:1})),n(r)}}();qe.call(t,{user_id:i,user_source:a,shop_id:e.shop_id,shop_source:e.shop_source,msg_id:r,count:o,option:1},(function(e){s(e)}),(function(e){s([])}))},getDeletedMsgRecords:function(e,n){t._biz.getDeletedMsgRecords({user_id:e.user_id,user_source:e.user_source,shop_id:e.shop_id,shop_source:e.shop_source},(function(e){n&&n(e)}),(function(){}))},contact:e,position:t._position,component_type:"ChatWindow"}),pe(e)&&Fe&&Fe[i]&&Fe[i]>e.group_info.current_count&&(e.group_info.current_count=Fe[i]),r.setContact(e),r.addEventListener("organizstructureInit",(function(){I(".im-app").append(I(Te));var e=new Ie({ele:I(".im-organization-list.add-group"),isAddGroup:!0,isCreateGroup:!0,contact:t._currentcontact});e.showTp(I(".im-contactwindow-organization.add-group"))})),t._children[i]=r;var s=Ue[i]?Ue[i].content:null;s&&(a?t.setTopic(e.user_id,e.user_source,s,e.shop_id,e.shop_source):t.setTopic(e.user_id,e.user_source,s)),t._element.append(r.getElement()),o.is_anonymous_login&&(fe(t._biz.options)||fe(t._biz.options.appid)||"function"!==typeof Ee["get-template-msg"]||Ee["get-template-msg"]({appId:t._biz.options.appid},(function(e){!fe(e)&&e.length&&r.setStaticInput(e)}),(function(){r.setStaticInput([])})))}return this._biz.getOnlineStatus([n],(function(t){var n=t[e.user_id+"@"+e.user_source];fe(n)||r.setOnline(n)})),t.triggerEvent("chatwindowCreated",e.user_id,e.user_source),r},$e.prototype._switchChatWindow=function(e){var t;if(e){var n,i,a=this,r=e.user_id+"@"+e.user_source;if(fe(e.shop_id)||fe(e.shop_source)||(r+="@@"+e.shop_id+"@"+e.shop_source),Ce.get("sysUser")&&-1!==(0,A.default)(t=Ce.get("sysUser")).call(t,r))window.WMDA_REPORT&&window.WMDA_REPORT("custom",{event_id:"17"}),(0,S.default)(n=a._element).call(n,".im-cwheader-plugins").addClass("hide"),Ee["msg-avatar"]=!1;else(0,S.default)(i=a._element).call(i,".im-cwheader-plugins").removeClass("hide"),Ee["msg-avatar"]=!0;if(a._findChatWindow(e)&&this._currentcontact){var o=this._currentcontact.user_id+"@"+this._currentcontact.user_source;if(fe(this._currentcontact.shop_id)||fe(this._currentcontact.shop_source)||(o+="@@"+this._currentcontact.shop_id+"@"+this._currentcontact.shop_source),r===o)return}a=this;var s={user_id:e.user_id,user_source:e.user_source},c=!1;fe(e.shop_id)||fe(e.shop_source)||(s.shop_id=e.shop_id,s.shop_source=e.shop_source,c=!0),Ee["getUserinfo"]([s],(function(e){var t=c?s.user_id+"@"+s.user_source+"@@"+s.shop_id+"@"+s.shop_source:s.user_id+"@"+s.user_source,n=e[t];c&&(n.shop_id=s.shop_id,n.shop_source=s.shop_source,n.is_shop_mode=!0),n&&(a._currentcontact=n)}));var l=a._getChatWindow(a._currentcontact);I.each(a._children,(function(t,n){n instanceof D&&(n!==l?n.unactive():(Ce.set("contact",a._currentcontact),n.active(),a._currentcontact=fe(a._currentcontact)?e:a._currentcontact,a._setUnreadToZero(a._currentcontact.user_id,a._currentcontact.user_source,a._currentcontact)))})),a._currentcontact&&(te.setChecked(a._currentcontact.user_id,a._currentcontact.user_source,a._currentcontact),ie.setSession(a._currentcontact))}},$e.prototype._setUnreadToZero=function(e,t,n){this._biz.read(e,t,null,n)},$e.prototype._gotoContact=function(e){var t=this,n=Ee["on-session-item-click"](e);if(n){if(e==t._currentcontact){var i=t._getChatWindow(e);i&&i.scrollToBottom()}else this._switchChatWindow(e);this._setUnreadToZero(e.user_id,e.user_source,e)}else window.WMDA_REPORT&&window.WMDA_REPORT("custom",{event_id:"16"})},$e.prototype.setTopic=function(e,t,n,i,a){var r=e+"@"+t;fe(i)||fe(a)||(r+="@@"+i+"@"+a),Ue[r]&&Ue[r].hide&&(null===Ue[r].content||null!==Ue[r].content&&Ue[r].content==n)?this._children[r]&&this._children[r].setTopic():(Ue[r]={hide:!1,content:n},this._children[r]&&(n?this._children[r].setTopic(n):this._children[r].setTopic()))},$e.prototype.hideTopic=function(e,t){var n=e+"@"+t;Ue[n]={hide:!0,content:null},this.setTopic(e,t)},$e.prototype.disableInput=function(e,t,n){if(!n)return!1;var i=e+"@"+t;this._children[i].disableInput()},$e.prototype.setContactIdentification=function(e,t,n){var i=e+"@"+t,a=this._children[i];a&&a.setContactIdentification(n)},$e.prototype.setEvaluation=function(e,t,n){this._biz.setEvaluation(e,t,n)},$e.prototype.switchAudioVideo=function(e){if(Ee["is_show_audio_video"]=e,this._biz.switchAudioVideo(e),!Je(this._currentcontact)){var t=this._getChatWindow(this._currentcontact);t&&t.switchAudioVideo(e)}},$e.prototype.showToast=function(e){K.dispatch({type:Z.TOAST_SHOW,data:{content:e.text?e.text:"操作失败",interval:e.interval?e.interval:3e3}})},$e.prototype.clearAllUnreadMsgs=function(e,t,n){this._biz.clearAllUnreadMsgs(e,t,n)},$e.prototype.removeChatwindow=function(e){if(e){var t=this,n=t._getChatWindow(e);fe(n)||(n.unactive(),I.each(t._children,(function(i,a){if(a instanceof D&&a===n){a.destroy(),a=null;i=e.user_id+"@"+e.user_source;!_e(e)||fe(e.shop_id)||fe(e.shop_source)||(i+="@@"+e.shop_id+"@"+e.shop_source),delete t._children[i],Ce.set("contact",null)}})))}},Oe($e),e.exports=$e},BEUE:function(e,t,n){var i=n("G9WS"),a=n("LYCE");a(t,"__esModule",{value:!0}),t.observe=s;var r=i(n("yd4P")),o=n("OY+d");function s(e,t){var n;if((0,o.isObject)(e))return n=e.hasOwnProperty("__ob__")&&e.__ob__ instanceof r.default?e.__ob__:new r.default(e),n}},BF1V:function(e,t,n){e.exports=n("BJ5t")},BJ5t:function(e,t,n){var i=n("JBne");e.exports=i},"BP/7":function(e,t,n){var i=n("FRmQ"),a=Array.prototype;e.exports=function(e){var t=e.find;return e===a||e instanceof Array&&t===a.find?i:t}},"BX/b":function(e,t,n){var i=n("/GqU"),a=n("JBy8").f,r={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return a(e)}catch(t){return o.slice()}};e.exports.f=function(e){return o&&"[object Window]"==r.call(e)?s(e):a(i(e))}},Bboc:function(e,t,n){var i=n("G9WS");n("qePV"),n("07d7"),n("TWNs"),n("rB9j"),n("JfAA"),n("Rm1S"),n("UxlC"),n("EnZy");var a=i(n("D3kx")),r=i(n("ZbhI")),o=i(n("nhkr")),s=i(n("7Gle")),c=i(n("eLKs")),l=i(n("o+MX")),u=i(n("M5Mt")),d=i(n("UtpJ")),p=i(n("WxoT")),f=n("eAFf"),m=(f.transfer_group_owner,null),_=function(e){return e+""==="null"||e+""==="undefined"||""===e},h=function(e){return e&&e.user_source&&Number(e.user_source)>1e4},g=function(e){return!_(e)&&9999==Number(e)},v=function(e,t){var n=!1;if(_(e))n=!1;else if(!_(e.is_shop_mode)&&e.is_shop_mode)n=!0;else if(_(e.sender_source)||_(e.to_source))_(e.user_source)||(n=g(e.user_source));else{var i=g(e.sender_source)||g(e.to_source),a=e.sender_id+"@"+e.sender_source,r=e.to_id+"@"+e.to_source,o=t?t.user_id+"@"+t.user_source:null;n=i&&o&&a!=o&&r!=o}return n},y=function(e,t){if(_(e)||!v(e,t))return null;var n=e.sender_id+"@"+e.sender_source,i=e.to_id+"@"+e.to_source;return g(e.sender_source)?n:g(e.to_source)?i:null},w={parse:function(e){try{e=JSON.parse(e)}catch(t){e={}}return e},stringify:function(e){try{e=(0,p.default)(e)}catch(t){e=""}return e}},b=function(e,t){var n,i=0;if(!e&&!t)return i;if(isNaN(e)||isNaN(t))return null;if(e+="",t+="","-"==e.charAt(0)&&"-"!=t.charAt(0))return i=-1,i;if("-"!=e.charAt(0)&&"-"==t.charAt(0))return i=1,i;"-"==e.charAt(0)&&"-"==t.charAt(0)&&(e=e.substring(1),t=t.substring(1),n=!0);var a=e.length,r=t.length;if(a>r)i=1;else if(a<r)i=-1;else if(a==r)for(var o=0;o<a;o++){if(e[o]>t[o]){i=1;break}if(e[o]<t[o]){i=-1;break}e[o],t[o]}return n&&(i=1==i?-1:-1==i?1:0),i},x=function(e){var t=0;isNaN(e)||(t=Number(e));var n=[];return{store:function(e){e instanceof Array&&(n=e)},add:function(e){t&&(n.length+1>t&&n.shift(),n.push(e))},cut:function(e){if(n.length>t){var i=(0,d.default)(n).call(n,0,n.length-t);n=(0,d.default)(n).call(n,n.length-t||0,n.length),e&&e(i,n)}},remove:function(e,t){!isNaN(e)&&e>=0&&e<=n.length-1&&(0,u.default)(n).call(n,e,1),t&&t(n)},len:function(){return n.length},update:function(e,t){!isNaN(e)&&e>=0&&e<=n.length-1&&"function"===typeof t&&(n[e]=t(n[e]))},push:function(e,t){e instanceof Array&&(n=(0,l.default)(n).call(n,e),this.cut(t))},pull:function(){return n}}},S=function(e,t){var n=0;e=e.split("");if(t=t.split(""),e.length>t.length)return 1;if(e.length<t.length)return-1;while(e.length||t.length){var i=~~e.pop()-~~t.pop();if(0!==i){if(i>0){n=1;break}if(i<0){n=-1;break}}}return n},k=function(){var e=function(e){var t,n;this.row=[],this.options={status:0,index:0};var i=(0,c.default)(t=this.resolve).call(t,this),a=(0,c.default)(n=this.reject).call(n,this);e&&e(i,a)};return e.prototype.of=function(){var t=new e;return t.row=this.row,t.options={status:0,index:0},t},e.prototype.resolve=function(){if(3!=this.options.status){var e=(0,d.default)(Array.prototype).apply(arguments);if(this.options.status=1,this.resolve_val=e,!(this.options.index>=this.row.length)){this.options.status=3;var t=this.row[this.options.index];t&&t.success.apply(t,e)}}},e.prototype.reject=function(e){if(3!=this.options.status){var t=(0,d.default)(Array.prototype).apply(arguments);if(this.options.status=2,this.reject_val=t,!(this.options.index>=this.row.length)){this.options.status=3;var n=this.row[this.options.index];n&&n.fail.apply(n,t)}}},e.prototype.then=function(e,t){var n=this.of(e,t);return n.options.index=this.options.index+1,n.success=e,n.fail=t,this.row.push(n),1==this.options.status?n.success.apply(n,this.resolve_val):2==this.options.status&&n.fail.apply(n,this.reject_val),n},e}(),E=function(e){return e&&0==e.register&&!h(e)&&!v(e)},C=function(e){try{var t=new Date(e),n=t.getFullYear(),i=t.getMonth()+1,a=t.getDate(),r=t.getHours(),o=t.getDay(),s=t.getMinutes(),c={1:"周一",2:"周二",3:"周三",4:"周四",5:"周五",6:"周六",0:"周日"};return 0===s&&(s="00"),n+"年"+i+"月"+a+"日"+c[o]+" "+r+":"+s}catch(l){return""}},A=function e(t,n){try{var i=(0,s.default)(t),a=(0,s.default)(n);if(i.length!=a.length)return!1;for(var r=0;r<i.length;r++){var c=i[r],l=t[c],u=n[c];if(!n.hasOwnProperty(c))return!1;if("object"!==(0,o.default)(l)||_(l)){if(l!==u)return!1}else if(!e(l,u))return!1}return!0}catch(d){return!0}};e.exports={openPage:function(e,t,n){t=t||"_blank",m||(m=$("<a>").css({display:"hidden"}).appendTo($("body"))),m.attr({href:e,target:t,class:"card-click"})[0].click()},convertImgParams:function(e){var t=e.width,n=e.height;e.unit=e.unit?e.unit:"px";var i=e.width/e.height;return e.baseWidth&&(t=e.baseWidth,n=t/i),e.baseHeight&&(n=e.baseHeight,t=n*i),{width:t+e.unit,height:n+e.unit}},insertHtmlAtCaret:function(e){var t,n;if(window.getSelection){if(t=window.getSelection(),t.getRangeAt&&t.rangeCount){n=t.getRangeAt(0),n.deleteContents();var i=document.createElement("div");i.innerHTML=e;var a,r,o=document.createDocumentFragment();while(a=i.firstChild)r=o.appendChild(a);n.insertNode(o),r&&(n=n.cloneRange(),n.setStartAfter(r),n.collapse(!0),t.removeAllRanges(),t.addRange(n))}}else document.selection&&"Control"!==document.selection.type&&document.selection.createRange().pasteHTML(e)},getCursortPosition:function(e){var t,n=0;if("undefined"!=typeof window.getSelection){if(t=window.getSelection(),t.rangeCount>0){var i=window.getSelection().getRangeAt(0),a=i.cloneRange();a.selectNodeContents(e),a.setEnd(i.endContainer,i.endOffset),n=a.toString().length}}else if((t=document.selection)&&"Control"!=t.type){var r=t.createRange(),o=document.body.createTextRange();o.moveToElementText(e),o.setEndPoint("EndToEnd",r),n=o.text.length}return n},setEndOfContenteditable:function(e){var t,n;document.createRange?(t=document.createRange(),t.selectNodeContents(e),t.collapse(!1),n=window.getSelection(),n.removeAllRanges(),n.addRange(t)):document.selection&&(t=document.body.createTextRange(),t.moveToElementText(e),t.collapse(!1),t.select())},getInsertEmojiCursor:function(e,t){var n,i;if(window.getSelection&&window.getSelection().getRangeAt){n=t,n.collapse(!1),i=n.createContextualFragment(e);var a=i.lastChild;n.insertNode(i),a&&(n.setEndAfter(a),n.setStartAfter(a));var r=window.getSelection();r.removeAllRanges(),r.addRange(n)}else document.selection&&document.selection.createRange&&document.selection.createRange().pasteHTML(e)},getClipboardData:function(e){var t,n,i=e.originalEvent.clipboardData||e.clipboardData||window.clipboardData;if(!i)return null;if(i.items&&i.items.length)for(var a=0;a<i.items.length;a++){var r=i.items[a];"file"==r.kind&&r.type.match(/^image\//i)?t=r.getAsFile():"string"==r.kind&&"text/plain"==r.type&&(n=i.getData("text/plain"))}else if(i.types&&i.types.length)for(var o=0;o<i.types.length;o++)"text/plain"==i.types[o]&&(n=i.getData("text/plain"));else i&&i.getData?n=window.clipboardData.getData("Text"):i.files&&i.files.length&&(t=i.files[0]);return n?{type:"text",content:n}:t?{type:"file",content:t}:null},getImgParams:function(e){var t,n,i,a,o,s=e.minsize,c=e.maxsize;if(!e.image_width||!e.image_height)return a={url:e.url,background_size:"cover",width:250,height:150,repeat:"no-repeat"},a;if(e.image_width>e.image_height){var l=e.image_width/e.image_height;l>c/s?(i=s,n=c):e.image_width>c?(n=c,i=n/l):(n=e.image_width,i=e.image_height)}else{l=e.image_height/e.image_width;l>c/s?(n=s,i=c):e.image_height>c?(i=c,n=i/l):(n=e.image_width,i=e.image_height)}o=e.url&&-1===(0,r.default)(t=e.url).call(t,"data:")?e.url+"?crop=1&cpos=northwest&h="+i+"&w="+n:e.url;var u="";return u=i==s&&n==c?"auto 100%":i==c&&n==s?"100% auto":"100% 100%",{url:o,background_size:u,width:n,height:i}},isEmpty:_,jsonHandler:w,isGroupUser:h,isShopModeUser:v,isShopModeUserSource:g,isAnonymousSession:E,getShopKey:y,is_file_helper:function(e,t){return"wjzs10000"===e&&108===t},is_remind_helper:function(e,t,n,i){return"75969072527136"===e&&1999===t&&_(n)&&_(i)},IEVersion:function(){var e=navigator.userAgent,t=(0,r.default)(e).call(e,"compatible")>-1&&(0,r.default)(e).call(e,"MSIE")>-1,n=(0,r.default)(e).call(e,"Edge")>-1&&!t,i=(0,r.default)(e).call(e,"Trident")>-1&&(0,r.default)(e).call(e,"rv:11.0")>-1;if(t){var o=new RegExp("MSIE (\\d+\\.\\d+);");o.test(e);var s=(0,a.default)(RegExp["$1"]);return 7==s?7:8==s?8:9==s?9:10==s?10:6}return n?"edge":i?11:-1},compareBigNumber:S,sumBigNumber:function(e,t){var n="",i=0;e=e.split(""),t=t.split("");while(e.length||t.length||i)i+=~~e.pop()+~~t.pop(),n=i%10+n,i=i>9;return n.replace(/^0+/,"")},subBigNumber:function(e,t){var n,i,a=S(e,t);if(0===a)return 0;1===a?(n=e,i=t):-1===a&&(n=t,i=e);var r="",o=0,s=!1;n=n.split(""),i=i.split("");while(n.length||i.length)o=~~n.pop()-(~~i.pop()+(s?1:0)),n.length>=1&&o<0?(o+=10,s=!0):s=!1,r=o+r;return a*r.replace(/^0+/,"")},strToNumCompare:b,queque:x,isPhone:function(e){return!e||/^1[3456789]\d{9}$/.test(e)},isWechat:function(e){return!e||/^[a-zA-Z]([-_a-zA-Z0-9]{5,19})$/.test(e)},asynchPipe:k,isEmojiCharacter:function(e){var t=/(\ud83c[\udf00-\udfff])|(\ud83d[\udc00-\ude4f\ude80-\udeff])|[\u2600-\u2B55]/g;return t.test(e)},ymdhFormat:C,isObjectValueEqual:A}},BfIq:function(e,t,n){e.exports=n("k2Gq")},Bs8V:function(e,t,n){var i=n("g6v/"),a=n("0eef"),r=n("XGwC"),o=n("/GqU"),s=n("wE6v"),c=n("UTVS"),l=n("DPsx"),u=Object.getOwnPropertyDescriptor;t.f=i?u:function(e,t){if(e=o(e),t=s(t,!0),l)try{return u(e,t)}catch(n){}if(c(e,t))return r(!a.f.call(e,t),e[t])}},Bvq2:function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},Bwsg:function(e,t,n){(function(e,i){var a,r=n("G9WS");n("pNMO"),n("4Brf"),n("oVuX"),n("sMBO"),n("toAj"),n("07d7"),n("TWNs"),n("rB9j"),n("JfAA"),n("UxlC"),n("EnZy");var o=r(n("lHQ6")),s=r(n("D3kx")),c=r(n("ZbhI")),l=r(n("UtpJ")),u=r(n("nhkr"));a=function(){var n={function:!0,object:!0},a=n["undefined"===typeof window?"undefined":(0,u.default)(window)]&&window||this,r=a,d=n[(0,u.default)(t)]&&t,p=n[(0,u.default)(e)]&&e&&!e.nodeType&&e,f=d&&p&&"object"==("undefined"===typeof i?"undefined":(0,u.default)(i))&&i;!f||f.global!==f&&f.window!==f&&f.self!==f||(a=f);var m=Math.pow(2,53)-1,_=/\bOpera/,h=this,g=Object.prototype,v=g.hasOwnProperty,y=g.toString;function w(e){return e=String(e),e.charAt(0).toUpperCase()+(0,l.default)(e).call(e,1)}function b(e,t,n){var i={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"7 / Server 2008 R2","6.0":"Vista / Server 2008",5.2:"XP 64-bit / Server 2003",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&n&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(i=i[/[\d.]+$/.exec(e)])&&(e="Windows "+i),e=String(e),t&&n&&(e=e.replace(RegExp(t,"i"),n)),e=S(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0]),e}function x(e,t){var n=-1,i=e?e.length:0;if("number"==typeof i&&i>-1&&i<=m)while(++n<i)t(e[n],n,e);else k(e,t)}function S(e){return e=T(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:w(e)}function k(e,t){for(var n in e)v.call(e,n)&&t(e[n],n,e)}function E(e){var t;return null==e?w(e):(0,l.default)(t=y.call(e)).call(t,8,-1)}function C(e,t){var n=null!=e?(0,u.default)(e[t]):"number";return!/^(?:boolean|number|string|undefined)$/.test(n)&&("object"!=n||!!e[t])}function A(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function O(e,t){var n=null;return x(e,(function(i,a){n=t(n,i,a,e)})),n}function T(e){return String(e).replace(/^ +| +$/g,"")}function M(e){var t=a,n=e&&"object"==(0,u.default)(e)&&"String"!=E(e);n&&(t=e,e=null);var i=t.navigator||{},d=i.userAgent||"";e||(e=d);var p,f,m=n||h==r,g=n?!!i.likeChrome:/\bChrome\b/.test(e)&&!/internal|\n/i.test(y.toString()),v="Object",w=n?v:"ScriptBridgingProxyObject",x=n?v:"Environment",I=n&&t.java?"JavaPackage":E(t.java),N=n?v:"RuntimeObject",L=/\bJava/.test(I)&&t.java,R=L&&E(t.environment)==x,P=L?"a":"α",D=L?"b":"β",j=t.document||{},U=t.operamini||t.opera,W=_.test(W=n&&U?U["[[Class]]"]:E(U))?W:U=null,F=e,B=[],G=null,z=e==d,V=z&&U&&"function"==typeof U.version&&U.version(),H=X([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"]),Y=Q(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"Edge"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt","SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","WebPositive","Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chrome",{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox Mobile",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),q=ee([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation 3","PlayStation 4","PlayStation Vita","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),K=Z({Apple:{iPad:1,iPhone:1,iPod:1},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{"PlayStation 4":1,"PlayStation 3":1,"PlayStation Vita":1}}),J=$(["Windows Phone ","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian","Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function X(t){return O(t,(function(t,n){return t||RegExp("\\b"+(n.pattern||A(n))+"\\b","i").exec(e)&&(n.label||n)}))}function Z(t){return O(t,(function(t,n,i){return t||(n[q]||n[/^[a-z]+(?: +[a-z]+\b)*/i.exec(q)]||RegExp("\\b"+A(i)+"(?:\\b|\\w*\\d)","i").exec(e))&&i}))}function Q(t){return O(t,(function(t,n){return t||RegExp("\\b"+(n.pattern||A(n))+"\\b","i").exec(e)&&(n.label||n)}))}function $(t){return O(t,(function(t,n){var i=n.pattern||A(n);return!t&&(t=RegExp("\\b"+i+"(?:/[\\d.]+|[ \\w.]*)","i").exec(e))&&(t=b(t,i,n.label||n)),t}))}function ee(t){return O(t,(function(t,n){var i=n.pattern||A(n);return!t&&(t=RegExp("\\b"+i+" *\\d+[.\\w_]*","i").exec(e)||RegExp("\\b"+i+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(e))&&((t=String(n.label&&!RegExp(i,"i").test(n.label)?n.label:t).split("/"))[1]&&!/[\d.]+/.test(t[0])&&(t[0]+=" "+t[1]),n=n.label||n,t=S(t[0].replace(RegExp(i,"i"),n).replace(RegExp("; *(?:"+n+"[_-])?","i")," ").replace(RegExp("("+n+")[-_.]?(\\w)","i"),"$1 $2"))),t}))}function te(t){return O(t,(function(t,n){return t||(RegExp(n+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(e)||0)[1]||null}))}function ne(){return this.description||""}if(H&&(H=[H]),K&&!q&&(q=ee([K])),(p=/\bGoogle TV\b/.exec(q))&&(q=p[0]),/\bSimulator\b/i.test(e)&&(q=(q?q+" ":"")+"Simulator"),"Opera Mini"==Y&&/\bOPiOS\b/.test(e)&&B.push("running in Turbo/Uncompressed mode"),/^iP/.test(q)?(Y||(Y="Safari"),J="iOS"+((p=/ OS ([\d_]+)/i.exec(e))?" "+p[1].replace(/_/g,"."):"")):"Konqueror"!=Y||/buntu/i.test(J)?K&&"Google"!=K&&(/Chrome/.test(Y)&&!/\bMobile Safari\b/i.test(e)||/\bVita\b/.test(q))?(Y="Android Browser",J=/\bAndroid\b/.test(J)?J:"Android"):"Silk"==Y?(/\bMobi/i.test(e)||(J="Android",B.unshift("desktop mode")),/Accelerated *= *true/i.test(e)&&B.unshift("accelerated")):"PaleMoon"==Y&&(p=/\bFirefox\/([\d.]+)\b/.exec(e))?B.push("identifying as Firefox "+p[1]):"Firefox"==Y&&(p=/\b(Mobile|Tablet|TV)\b/i.exec(e))?(J||(J="Firefox OS"),q||(q=p[1])):Y&&!(p=!/\bMinefield\b/i.test(e)&&/\b(?:Firefox|Safari)\b/.exec(Y))||(Y&&!q&&/[\/,]|^[^(]+?\)/.test((0,l.default)(e).call(e,(0,c.default)(e).call(e,p+"/")+8))&&(Y=null),(p=q||K||J)&&(q||K||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(J))&&(Y=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(J)?J:p)+" Browser")):J="Kubuntu",V||(V=te(["(?:Cloud9|CriOS|CrMo|Edge|FxiOS|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|Silk(?!/[\\d.]+$))","Version",A(Y),"(?:Firefox|Minefield|NetFront)"])),(p=("iCab"==H&&(0,s.default)(V)>3?"WebKit":/\bOpera\b/.test(Y)&&(/\bOPR\b/.test(e)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(e)&&!/^(?:Trident|EdgeHTML)$/.test(H)&&"WebKit"||!H&&/\bMSIE\b/i.test(e)&&("Mac OS"==J?"Tasman":"Trident")||"WebKit"==H&&/\bPlayStation\b(?! Vita\b)/i.test(Y)&&"NetFront")&&(H=[p]),"IE"==Y&&(p=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(e)||0)[1])?(Y+=" Mobile",J="Windows Phone "+(/\+$/.test(p)?p:p+".x"),B.unshift("desktop mode")):/\bWPDesktop\b/i.test(e)?(Y="IE Mobile",J="Windows Phone 8.x",B.unshift("desktop mode"),V||(V=(/\brv:([\d.]+)/.exec(e)||0)[1])):"IE"!=Y&&"Trident"==H&&(p=/\brv:([\d.]+)/.exec(e))&&(Y&&B.push("identifying as "+Y+(V?" "+V:"")),Y="IE",V=p[1]),z){if(C(t,"global"))if(L&&(p=L.lang.System,F=p.getProperty("os.arch"),J=J||p.getProperty("os.name")+" "+p.getProperty("os.version")),m&&C(t,"system")&&(p=[t.system])[0]){J||(J=p[0].os||null);try{p[1]=t.require("ringo/engine").version,V=p[1].join("."),Y="RingoJS"}catch(oe){p[0].global.system==t.system&&(Y="Narwhal")}}else"object"==(0,u.default)(t.process)&&(p=t.process)?(Y="Node.js",F=p.arch,J=p.platform,V=/[\d.]+/.exec(p.version)[0]):R&&(Y="Rhino");else E(p=t.runtime)==w?(Y="Adobe AIR",J=p.flash.system.Capabilities.os):E(p=t.phantom)==N?(Y="PhantomJS",V=(p=p.version||null)&&p.major+"."+p.minor+"."+p.patch):"number"==typeof j.documentMode&&(p=/\bTrident\/(\d+)/i.exec(e))&&(V=[V,j.documentMode],(p=+p[1]+4)!=V[1]&&(B.push("IE "+V[1]+" mode"),H&&(H[1]=""),V[1]=p),V="IE"==Y?String(V[1].toFixed(1)):V[0]);J=J&&S(J)}if(V&&(p=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(V)||/(?:alpha|beta)(?: ?\d)?/i.exec(e+";"+(z&&i.appMinorVersion))||/\bMinefield\b/i.test(e)&&"a")&&(G=/b/i.test(p)?"beta":"alpha",V=V.replace(RegExp(p+"\\+?$"),"")+("beta"==G?D:P)+(/\d+\+?/.exec(p)||"")),"Fennec"==Y||"Firefox"==Y&&/\b(?:Android|Firefox OS)\b/.test(J)?Y="Firefox Mobile":"Maxthon"==Y&&V?V=V.replace(/\.[\d.]+/,".x"):/\bXbox\b/i.test(q)?(J=null,"Xbox 360"==q&&/\bIEMobile\b/.test(e)&&B.unshift("mobile mode")):!/^(?:Chrome|IE|Opera)$/.test(Y)&&(!Y||q||/Browser|Mobi/.test(Y))||"Windows CE"!=J&&!/Mobi/i.test(e)?"IE"==Y&&z&&null===t.external?B.unshift("platform preview"):(/\bBlackBerry\b/.test(q)||/\bBB10\b/.test(e))&&(p=(RegExp(q.replace(/ +/g," *")+"/([.\\d]+)","i").exec(e)||0)[1]||V)?(p=[p,/BB10/.test(e)],J=(p[1]?(q=null,K="BlackBerry"):"Device Software")+" "+p[0],V=null):this!=k&&"Wii"!=q&&(z&&U||/Opera/.test(Y)&&/\b(?:MSIE|Firefox)\b/i.test(e)||"Firefox"==Y&&/\bOS X (?:\d+\.){2,}/.test(J)||"IE"==Y&&(J&&!/^Win/.test(J)&&V>5.5||/\bWindows XP\b/.test(J)&&V>8||8==V&&!/\bTrident\b/.test(e)))&&!_.test(p=M.call(k,e.replace(_,"")+";"))&&p.name&&(p="ing as "+p.name+((p=p.version)?" "+p:""),_.test(Y)?(/\bIE\b/.test(p)&&"Mac OS"==J&&(J=null),p="identify"+p):(p="mask"+p,Y=W?S(W.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(p)&&(J=null),z||(V=null)),H=["Presto"],B.push(p)):Y+=" Mobile",p=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(e)||0)[1]){var ie,ae;if(p=[(0,s.default)(p.replace(/\.(\d)$/,".0$1")),p],"Safari"==Y&&"+"==(0,l.default)(ie=p[1]).call(ie,-1))Y="WebKit Nightly",G="alpha",V=(0,l.default)(ae=p[1]).call(ae,0,-1);else V!=p[1]&&V!=(p[2]=(/\bSafari\/([\d.]+\+?)/i.exec(e)||0)[1])||(V=null);p[1]=(/\bChrome\/([\d.]+)/i.exec(e)||0)[1],537.36==p[0]&&537.36==p[2]&&(0,s.default)(p[1])>=28&&"WebKit"==H&&(H=["Blink"]),z&&(g||p[1])?(H&&(H[1]="like Chrome"),p=p[1]||(p=p[0],p<530?1:p<532?2:p<532.05?3:p<533?4:p<534.03?5:p<534.07?6:p<534.1?7:p<534.13?8:p<534.16?9:p<534.24?10:p<534.3?11:p<535.01?12:p<535.02?"13+":p<535.07?15:p<535.11?16:p<535.19?17:p<536.05?18:p<536.1?19:p<537.01?20:p<537.11?"21+":p<537.13?23:p<537.18?24:p<537.24?25:p<537.36?26:"Blink"!=H?"27":"28")):(H&&(H[1]="like Safari"),p=p[0],p=p<400?1:p<500?2:p<526?3:p<533?4:p<534?"4+":p<535?5:p<537?6:p<538?7:p<601?8:"8"),H&&(H[1]+=" "+(p+="number"==typeof p?".x":/[.+]/.test(p)?"":"+")),"Safari"==Y&&(!V||(0,o.default)(V)>45)&&(V=p)}"Opera"==Y&&(p=/\bzbov|zvav$/.exec(J))?(Y+=" ",B.unshift("desktop mode"),"zvav"==p?(Y+="Mini",V=null):Y+="Mobile",J=J.replace(RegExp(" *"+p+"$"),"")):"Safari"==Y&&/\bChrome\b/.exec(H&&H[1])&&(B.unshift("desktop mode"),Y="Chrome Mobile",V=null,/\bOS X\b/.test(J)?(K="Apple",J="iOS 4.3+"):J=null),V&&0==(0,c.default)(V).call(V,p=/[\d.]+$/.exec(J))&&(0,c.default)(e).call(e,"/"+p+"-")>-1&&(J=T(J.replace(p,""))),H&&!/\b(?:Avant|Nook)\b/.test(Y)&&(/Browser|Lunascape|Maxthon/.test(Y)||"Safari"!=Y&&/^iOS/.test(J)&&/\bSafari\b/.test(H[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Sleipnir|Web)/.test(Y)&&H[1])&&(p=H[H.length-1])&&B.push(p),B.length&&(B=["("+B.join("; ")+")"]),K&&q&&(0,c.default)(q).call(q,K)<0&&B.push("on "+K),q&&B.push((/^on /.test(B[B.length-1])?"":"on ")+q),J&&(p=/ ([\d.+]+)$/.exec(J)||(f=/^[a-z]+ ([\d.+]+) \//i.exec(J)),J={architecture:32,family:p&&!f?J.replace(p[0],""):J,version:p?p[1]:null,toString:function(){var e=this.version;return this.family+(e&&!f?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(p=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(F))&&!/\bi686\b/i.test(F)&&(J&&(J.architecture=64,J.family=J.family.replace(RegExp(" *"+p),"")),Y&&(/\bWOW64\b/i.test(e)||z&&/\w(?:86|32)$/.test(i.cpuClass||i.platform)&&!/\bWin64; x64\b/i.test(e))&&B.unshift("32-bit")),e||(e=null);var re={};return re.description=e,re.layout=H&&H[0],re.manufacturer=K,re.name=Y,re.prerelease=G,re.product=q,re.ua=e,re.version=Y&&V,re.os=J||{architecture:null,family:null,version:null,toString:function(){return"null"}},re.parse=M,re.toString=ne,re.version&&B.unshift(V),re.name&&B.unshift(Y),J&&Y&&(J!=String(J).split(" ")[0]||J!=Y.split(" ")[0]&&!q)&&B.push(q?"("+J+")":"on "+J),B.length&&(re.description=B.join(" ")),re}return M()}.call(t,n,t,e),void 0===a||(e.exports=a)}).call(this,n("YuTi")(e),n("yLpj"))},C1n8:function(e,t,n){var i=n("G9WS"),a=n("LYCE");a(t,"__esModule",{value:!0}),t.default=o;var r=i(n("M5Mt"));function o(e,t){"function"===typeof t&&s(e,t)}function s(e,t){var n=t(e);if(e.children)for(var i=0;i<e.children.length;i++){var a,o=e.children[i],c=s(o,t);if(!1===c)(0,r.default)(a=e.children).call(a,i,1),i--}return n}},C3ug:function(e,t,n){var i=n("j5XY"),a=n("dGO/"),r=n("A2Ma"),o=r("iterator");e.exports=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||a[i(e)]}},CPVF:function(e,t,n){var i=n("G9WS"),a=i(n("/FZm")),r=i(n("UtpJ")),o=i(n("rPUy")),s=n("5m4N"),c=n("eBtS"),l=n("SAPz"),u=n("Bboc"),d=function(e){(function(t){var n={template:l};c.extend(n,e),s.call(t,n)})(this),this._rendered=!1};d.prototype=(0,o.default)(s.prototype),d.prototype.renderContent=function(){var e,t,n="javascript:void(0)",i=this._data.msg,o=i.content,s=o.card_header,l=s.title,d=(0,r.default)(e=s.sub_titles).call(e,0,2),p=(0,r.default)(t=o.card_content_array).call(t,0,2),f=this._element,m=(0,a.default)(f).call(f,".card-header"),_=(0,a.default)(m).call(m,".card-title"),h=(0,a.default)(m).call(m,".card-sub-titles"),g=(0,a.default)(f).call(f,".card-list"),v=(0,a.default)(f).call(f,".card-more"),y=(0,a.default)(g).call(g,"script").html(),w=c("<div>");(0,a.default)(f).call(f,".im-msg-content").on("click","[href]",(function(e){e.preventDefault();var t=c(this).attr("href");t!=n&&u.openPage(t)})),_.text(l);for(var b=0;b<d.length;b++)h.append(c('<div class="one-line card-sub-title">').text(d[b]));o.card_list_url?v.attr({href:o.card_list_url||n}):v.hide();var x=p.length;for(b=0;b<x;b++){var S=b===x-1?"last-item":"",k=p[b],E=k.card_sub_labels,C=E&&E.length>0,A=!!k.card_sub_picture_url,O=c(y).attr({href:k.card_sub_action_pc_url||n}).addClass(S),T=(0,a.default)(O).call(O,".item-label").html(""),M=(0,a.default)(O).call(O,".item-img"),I=(0,a.default)(O).call(O,".item-price");if(C)for(var N=0;N<E.length;N++)T.append(c('<span class="label">').text(E[N]));else T.remove();k.card_sub_content?I.text(k.card_sub_content):I.remove(),(0,a.default)(O).call(O,".item-title").attr({title:k.card_sub_title}).text(k.card_sub_title),A?M.attr({src:k.card_sub_picture_url}):(O.addClass("no-img"),M.remove()),w.append(O)}g.html(w.html())},e.exports=d},CThG:function(e,t,n){var i=n("G9WS"),a=n("LYCE"),r=n("HnXd"),o=n("qjzJ"),s=n("RXMP"),c=n("fHi0"),l=n("5PDf"),u=n("OWCx"),d=n("+oHS"),p=n("iYz8"),f=n("6UaR"),m=n("Dcj1"),_=n("O0yt"),h=n("0lTi"),g=n("UtpJ");a(t,"__esModule",{value:!0}),t.default=M;var v=i(n("04Ix")),y=i(n("M5Mt")),w=i(n("C1n8")),b=i(n("aTWP")),x=i(n("uuPJ")),S=n("OY+d"),k=i(n("iSI8"));function E(e,t){var n=d(e);if(u){var i=u(e);t&&(i=l(i).call(i,(function(t){return c(e,t).enumerable}))),n.push.apply(n,i)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)s(n=E(Object(i),!0)).call(n,(function(t){(0,v.default)(e,t,i[t])}));else if(o)r(e,o(i));else{var l;s(l=E(Object(i))).call(l,(function(t){a(e,t,c(i,t))}))}}return e}function A(e,t){var n;if("undefined"===typeof _||null==m(e)){if(f(e)||(n=O(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,s=!1;return{s:function(){n=p(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,r=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw r}}}}function O(e,t){var n;if(e){if("string"===typeof e)return T(e,t);var i=g(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?h(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function M(e,t){var n=this,i="function"===typeof this.vm_template&&this.vm_template()||{},a="function"===typeof this.components&&this.components()||{},r=this._vm_methods||{},o=[],s=!1;return(0,w.default)(i,(function(i){switch(i.tagName){case"text":if(i.is_static)break;i.text&&(0,S.isArray)(i.text)&&(0,k.default)(i,e,r,"text",o,t);break;case"div":break;case"ul":break;case"li":break;case"p":break;case"span":break;case"a":break;case"img":if(i.is_static)break;if(i.attribs&&i.attribs["im-src"]&&(0,S.isArray)(i.attribs["im-src"])){var c={im_src:i.attribs["im-src"]};(0,k.default)(c,e,r,"im_src",o,t),c.im_src&&(i.src=c.im_src)}if(i.attribs&&i.attribs["im-error"]){var l=i.attribs["im-error"];l&&"function"===typeof r[l]&&(i.error=r[l])}break;default:a&&a[i.tagName]?i.is_component=!0:s=!0;break}if(s)return!1;i.className&&!i.is_static&&i.className&&(0,S.isArray)(i.className)&&(0,k.default)(i,e,r,"className",o,t),t&&(i.is_component?x.default.call(n,i,a):(0,x.default)(i,a));var u=i;if(i.children&&i.children.length){var d,p=[],f={},m=A(i.children);try{for(m.s();!(d=m.n()).done;){var _=d.value;if(!_.is_static&&_.attribs&&_.attribs["im-for"]){var h=_.attribs["im-for"].for_group_name,g=_.attribs["im-for"].for_item_name,v=(0,b.default)(h)(e);if((0,S.isArray)(v)){var w,E=A(v);try{for(E.s();!(w=E.n()).done;){var O=w.value,T=C({},e);if(T[g]=O,_.attribs["im-item"]?(_.v_item={},_.v_item[_.attribs["im-item"]]=O):_.v_item=O,_.attribs["im-key"]&&(0,S.isArray)(_.attribs["im-key"])){var M={im_key:_.attribs["im-key"]};(0,k.default)(M,T,r,"im_key"),(0,S.isEmpty)(M.im_key)||(_.key=M.im_key)}var I=(0,S.extend)(!0,{},_);I.attribs["im-for"]=null,delete I.attribs["im-for"],!(0,S.isEmpty)(I.key)&&f[I.key]||(f[I.key]=!0,p.push(I))}}catch(err){E.e(err)}finally{E.f()}t&&o.push(h)}}else if(!_.is_static&&_.attribs&&_.attribs["im-key"]&&(0,S.isArray)(_.attribs["im-key"])){var N={im_key:_.attribs["im-key"]},L=C({},e);(0,k.default)(N,L,r,"im_key",o,t),(0,S.isEmpty)(N.im_key)||(_.key=N.im_key),!(0,S.isEmpty)(_.key)&&f[_.key]||(f[_.key]=!0,p.push(_))}else p.push(_)}}catch(err){m.e(err)}finally{m.f()}i.children=p;for(var R=0;R<i.children.length;R++){var P=i.children[R];if(P.parentVnode=u,!P.is_static&&P.attribs&&P.attribs["im-if"]){var D;if(P.is_if=(0,b.default)(P.attribs["im-if"])(e),!P.is_if)(0,y.default)(D=i.children).call(D,R,1),R--;t&&o.push(P.attribs["im-if"])}!P.is_static&&P.attribs&&P.attribs["im-show"]&&(P.is_show=!!(0,b.default)(P.attribs["im-show"])(e),t&&o.push(P.attribs["im-show"])),!P.is_static&&P.attribs&&P.attribs["im-html"]&&(P.inner_html=(0,b.default)(P.attribs["im-html"])(e)||"",t&&o.push(P.attribs["im-html"])),!P.is_static&&P.attribs&&P.attribs["im-key"]&&(0,S.isArray)(P.attribs["im-key"])}}return!0})),{template:i,watched:o}}},CeEi:function(e,t,n){e.exports=n("0zm+")},Cgyp:function(e,t){var n='<li class="im-msg im-msg-mix im-msg-card5"> <div class=im-msg-time></div> <div class=im-msg-checkbox></div> <div class=im-msg-main> <img class="im-avatar im-msg-avatar"/> <span class=im-msg-send-status></span> <span class=im-msg-showed-status></span> <span class=im-msg-user-name></span> <div class=im-msg-content> <a class=im-card-thumbnail target=_blank></a> <div class=im-card-content> <ul class=card-list> <script type=text/html> <li class="list-item">\n              <div class ="innerContent">\n                <div class="inner">\n                  <div class="item-title"></div>\n                  <div class="one-line item-minor"></div>\n                  <div class="one-line item-price"></div>\n                </div>\n                <img class="item-img" src="" alt="">\n              </div>\n              <div class="item-label"></div>\n            </li> <\/script> </ul> </div> <a class="im-mix-content card-more"> <div class=im-mix-more> 查看更多 <span class=im-mix-more-icon></span> </div> </a> </div> <span class=im-msg-arrow></span> </div> <div class=im-msg-collect-name></div> <div class=im-msg-collect-time></div> <div class=im-msg-feedback> <div class=im-msg-feedback-container> <span class=im-msg-feedback-icon></span> <span class=im-msg-feedback-content></span> </div> </div> </li>';e.exports=n},CqEA:function(e,t,n){var i=n("pevS"),a=n("T/97"),r=n("oBZR"),o=n("Bvq2"),s=o((function(){r(1)}));i({target:"Object",stat:!0,forced:s},{keys:function(e){return r(a(e))}})},Cupc:function(e,t,n){var i=n("1mbr");e.exports=function(e,t,n){for(var a in t)n&&n.unsafe&&e[a]?e[a]=t[a]:i(e,a,t[a],n);return e}},CxHw:function(e,t,n){e.exports=n("L3Tz")},CyXQ:function(e,t,n){var i=n("ppGB"),a=n("UMSQ");e.exports=function(e){if(void 0===e)return 0;var t=i(e),n=a(t);if(t!==n)throw RangeError("Wrong length or index");return n}},D0WW:function(e,t){var n='<div class="im-contactwindow-organization add-group"> <div class=im-search-input> <input type=text id=im-search-inp> <div class="im-search-submit js-search-submit"></div> </div> <div class="im-organization-structure add-group"> <ul class="im-organization-list add-group"></ul> </div> <div class="im-organization-selected-list add-group"> <div class=im-organization-selected-num>已选择的联系人</div> <ul class="im-organization-selected-lists add-group"></ul> <div class=im-organization-handle> <span class="im-organization-handle-btn cancel" data-type=cancel>取消</span> <span class="im-organization-handle-btn create" data-type=create>创建</span> <span class="im-organization-handle-btn join" data-type=join>添加</span> <span class="im-organization-handle-btn delete" data-type=delete>删除</span> </div> </div> </div> ';e.exports=n},D1mM:function(e,t,n){var i=n("lxfd");e.exports=/(iphone|ipod|ipad).*applewebkit/i.test(i)},D3kx:function(e,t,n){e.exports=n("PJ+M")},DIJN:function(e,t,n){var i=n("m/sp");i("asyncDispose")},DK5n:function(e,t,n){"use strict";var i=n("pevS"),a=n("OsYe"),r=n("ZZQp"),o=n("Bvq2"),s=n("AnMC"),c=n("W1ep"),l=n("X32N"),u=n("39uu"),d=n("KHTo"),p=n("QYBB").f,f=n("3uAa").forEach,m=n("wbIY"),_=n("L1rz"),h=_.set,g=_.getterFor;e.exports=function(e,t,n){var _,v=-1!==e.indexOf("Map"),y=-1!==e.indexOf("Weak"),w=v?"set":"add",b=a[e],x=b&&b.prototype,S={};if(m&&"function"==typeof b&&(y||x.forEach&&!o((function(){(new b).entries().next()})))){_=t((function(t,n){h(l(t,_,e),{type:e,collection:new b}),void 0!=n&&c(n,t[w],{that:t,AS_ENTRIES:v})}));var k=g(e);f(["add","clear","delete","forEach","get","has","set","keys","values","entries"],(function(e){var t="add"==e||"set"==e;!(e in x)||y&&"clear"==e||s(_.prototype,e,(function(n,i){var a=k(this).collection;if(!t&&y&&!u(n))return"get"==e&&void 0;var r=a[e](0===n?0:n,i);return t?this:r}))})),y||p(_.prototype,"size",{configurable:!0,get:function(){return k(this).collection.size}})}else _=n.getConstructor(t,e,v,w),r.REQUIRED=!0;return d(_,e,!1,!0),S[e]=_,i({global:!0,forced:!0},S),y||n.setStrong(_,e,v),_}},DKI4:function(e,t,n){n("4hld");var i=n("dktu");e.exports=i.parseFloat},DPDV:function(e,t,n){var i=n("syO3"),a=n("nleh"),r=a.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},DPsx:function(e,t,n){var i=n("g6v/"),a=n("0Dky"),r=n("zBJ4");e.exports=!i&&!a((function(){return 7!=Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a}))},DQm3:function(e,t){var n='<div class="im-feedback im-closed"> <div class=im-feedback-icon></div> <div class=im-feedback-content> <ul class=im-feedback-texts> </ul> </div> </div>';e.exports=n},DSbf:function(e,t,n){var i=n("qQKe");e.exports=i},DTth:function(e,t,n){var i=n("0Dky"),a=n("tiKp"),r=n("xDBR"),o=a("iterator");e.exports=!i((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n="";return e.pathname="c%20d",t.forEach((function(e,i){t["delete"]("b"),n+=i+e})),r&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[o]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host}))},"DY++":function(e,t){var n='<li class="im-msg im-msg-card im-msg-card4"> <div class=im-msg-time></div> <div class=im-msg-checkbox></div> <div class=im-msg-main> <img class="im-avatar im-msg-avatar"/> <span class=im-msg-send-status></span> <span class=im-msg-showed-status></span> <span class=im-msg-user-name></span> <div class=im-msg-content> <a class=im-card-thumbnail target=_blank></a> <div class=im-card-content> <div class=card-header> <img alt=""> <p class=img-title></p> </div> <ul class=card-list> <script type=text/html> <li class="list-item">\n              <div class="vertical-middle">\n                <div class="cell">\n                  <span class="inner item-title"></span>\n                </div>\n              </div>\n              <img class="item-img"  alt="">\n            </li> <\/script> </ul> </div> </div> <span class=im-msg-arrow></span> </div> <div class=im-msg-collect-name></div> <div class=im-msg-collect-time></div> <div class=im-msg-feedback> <div class=im-msg-feedback-container> <span class=im-msg-feedback-icon></span> <span class=im-msg-feedback-content></span> </div> </div> </li> ';e.exports=n},Dcj1:function(e,t,n){e.exports=n("/HVM")},DkPT:function(e,t,n){var i=n("o4zr");e.exports=i},Dmep:function(e,t,n){var i=n("m/sp");i("iterator")},E7Zm:function(e,t,n){var i=n("Ijsr");e.exports=i},EUja:function(e,t,n){"use strict";var i=n("ppGB"),a=n("HYAF");e.exports="".repeat||function(e){var t=String(a(this)),n="",r=i(e);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n}},EhHj:function(e,t){var n='<li class="im-msg im-msg-card"> <div class=im-msg-time></div> <div class=im-msg-checkbox></div> <div class=im-msg-main> <img class="im-avatar im-msg-avatar"/> <span class=im-msg-send-status></span> <span class=im-msg-showed-status></span> <span class=im-msg-user-name></span> <div class=im-msg-content> <a class=im-card-thumbnail target=_blank></a> <div class=im-card-content> <a class=im-card-title target=_blank></a> <p class=im-card-describe> <span class=im-card-word></span> <span class=im-card-price></span> </p> </div> </div> <span class=im-msg-arrow></span> </div> <div class=im-msg-collect-name></div> <div class=im-msg-collect-time></div> <div class=im-msg-feedback> <div class=im-msg-feedback-container> <span class=im-msg-feedback-icon></span> <span class=im-msg-feedback-content></span> </div> </div> </li>';e.exports=n},EkzW:function(e,t,n){var i=n("G9WS"),a=i(n("/FZm")),r=i(n("rPUy")),o=n("5m4N"),s=n("eBtS"),c=n("ODYn"),l=(n("VRhk"),n("Bboc").convertImgParams,n("sfi9")),u=n("/Pub"),d=function(e){(function(t){var n={template:c};s.extend(n,e),o.call(t,n)})(this)};d.prototype=(0,r.default)(o.prototype),d.prototype.renderContent=function(){var e=this._data.msg;if(!e)return!1;var t=e.content,n=this._element,i=(0,a.default)(n).call(n,".im-mix-title"),r=(0,a.default)(n).call(n,".im-mix-detail"),o=(0,a.default)(n).call(n,".im-mix-img"),s=(0,a.default)(n).call(n,".im-mix-content"),c=(0,a.default)(n).call(n,".im-mix-more");t.card_action_pc_url&&""!==t.card_action_pc_url?s.attr("href",t.card_action_pc_url):s[0].addEventListener("click",(function(){if(t.card_action_url&&""!==t.card_action_url){s.attr("href","javascript:;");var e="请在手机端58APP中查看详情";u.dispatch({type:l.TOAST_SHOW,data:{content:e,interval:2e3}})}})),t.card_title&&""!==t.card_title?i.text(t.card_title):i.css("display","none"),t.card_content&&""!==t.card_content?r.text(t.card_content):r.css("display","none"),t.card_action_url&&""!==t.card_action_url||c.css("display","none"),t.card_picture_url&&""!==t.card_picture_url?o.attr("src",t.card_picture_url):o.css("display","none")},e.exports=d},EnZy:function(e,t,n){"use strict";var i=n("14Sl"),a=n("ROdP"),r=n("glrk"),o=n("HYAF"),s=n("SEBh"),c=n("iqWW"),l=n("UMSQ"),u=n("FMNM"),d=n("kmMV"),p=n("0Dky"),f=[].push,m=Math.min,_=4294967295,h=!p((function(){return!RegExp(_,"y")}));i("split",2,(function(e,t,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,n){var i=String(o(this)),r=void 0===n?_:n>>>0;if(0===r)return[];if(void 0===e)return[i];if(!a(e))return t.call(i,e,r);var s,c,l,u=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),m=0,h=new RegExp(e.source,p+"g");while(s=d.call(h,i)){if(c=h.lastIndex,c>m&&(u.push(i.slice(m,s.index)),s.length>1&&s.index<i.length&&f.apply(u,s.slice(1)),l=s[0].length,m=c,u.length>=r))break;h.lastIndex===s.index&&h.lastIndex++}return m===i.length?!l&&h.test("")||u.push(""):u.push(i.slice(m)),u.length>r?u.slice(0,r):u}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t,[function(t,n){var a=o(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,a,n):i.call(String(a),t,n)},function(e,a){var o=n(i,e,this,a,i!==t);if(o.done)return o.value;var d=r(e),p=String(this),f=s(d,RegExp),g=d.unicode,v=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(h?"y":"g"),y=new f(h?d:"^(?:"+d.source+")",v),w=void 0===a?_:a>>>0;if(0===w)return[];if(0===p.length)return null===u(y,p)?[p]:[];var b=0,x=0,S=[];while(x<p.length){y.lastIndex=h?x:0;var k,E=u(y,h?p:p.slice(x));if(null===E||(k=m(l(y.lastIndex+(h?0:x)),p.length))===b)x=c(p,x,g);else{if(S.push(p.slice(b,x)),S.length===w)return S;for(var C=1;C<=E.length-1;C++)if(S.push(E[C]),S.length===w)return S;x=b=k}}return S.push(p.slice(b)),S}]}),!h)},Ep9I:function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},Ew5d:function(e,t,n){var i=n("G9WS");n("qePV"),n("rB9j"),n("hByQ");var a=i(n("eLKs")),r=i(n("rPUy")),o=i(n("RKTd")),s=i(n("Kwsy")),c=i(n("/FZm")),l=n("JVDe"),u=n("eBtS"),d=n("pBd9"),p=n("K/py"),f=n("Oiu0"),m=n("HG+/"),_=n("M+B/"),h=n("eS68"),g=n("/Pub"),v=n("sfi9"),y=n("i8Iq"),w=n("1Fqx"),b=n("Itcm"),x=n("ArO8"),S=n("VRhk"),k=n("sD8x"),E=n("Bboc"),C=E.isEmpty,A=k.gatherFalseLastMsgs,O=function(e){this._type="sessionlist",this._state="session",function(t){var n={template:d,getMoreSession:function(e){e([],!1)}};if(u.extend(n,e),l.call(t,n),S["default-contactwindow"]){var i=t.getElement();S["default-contactwindow"].img&&(0,c.default)(i).call(i,".im-contactwindow-defaultImg").css({backgroundImage:"url("+S["default-contactwindow"].img+")",backgroundSize:"contain",backgroundPosition:"0 0"}),S["default-contactwindow"].tip&&(0,c.default)(i).call(i,".im-des-line1").text(S["default-contactwindow"].tip)}}(this),function(e){e._element.click((function(t){t.preventDefault();var n,i,a=u(t.target);if((a.hasClass("im-switchsize-btn")||a.hasClass("im-contactwindow-switch-icon")||!a.hasClass("im-contactwindow-fullscreen")&&!a.hasClass("im-contactwindow-fullscreen-icon")&&u(".im-switchsize-btn").hasClass("im-contactwindow-normalize"))&&e.triggerEvent("imMinimize"),a.hasClass("im-contactwindow-fullscreen")||a.hasClass("im-contactwindow-fullscreen-icon"))n=S["maxUrl"],window.open(n),window.WMDA_REPORT&&window.WMDA_REPORT("custom",{event_id:"5"});else if(a.hasClass("im-contactwindow-sessionlist")||a.hasClass("im-contactwindow-sessionlist-icon")){if(i=a.hasClass("im-contactwindow-sessionlist-icon")?a:a.children(),"organization"==e._type)return i.addClass("im-active").parent().siblings().children().removeClass("im-active"),e.switchToSession(),!1;e._children["sessionlist-scrollbar"].scrollToTop()}else if(a.hasClass("im-contactwindow-organiz")||a.hasClass("im-contactwindow-organization-icon")){if(i=a.hasClass("im-contactwindow-organization-icon")?a:a.children(),"sessionlist"==e._type)return i.addClass("im-active").parent().siblings().children().removeClass("im-active"),e.switchToOrganization(),!1;e._children["organization-scrollbar"].scrollToTop()}else a.hasClass("im-contact-img")&&e._children["sessionlist-scrollbar"].scrollToTop()})),e._element.on("dragover",(function(e){e.preventDefault()})),e._element.on("drop",(function(e){e.preventDefault()}))}(this),function(e){var t=e.getElement(),n=(0,c.default)(t).call(t,".im-clearmsg-btn");n.on("click",(function(e){e=e||window.event,e.stopPropagation(),g.dispatch({type:v.CLEAR_ALL_UNREAD_MSGS,data:""})}))}(this),function(e){if(!C(e._options.me)){var t=e.getElement(),n=(0,c.default)(t).call(t,".im-my-collect-btn");e._options.me.is_anonymous_login?n.hide():n.addClass("im-my-collect-btn-show").on("click",(function(e){e=e||window.event,e.stopPropagation(),g.dispatch({type:v.GET_MY_COLLECTION,data:""})}))}}(this),function(){var e=S["me"](),t=e.user_id+"@"+e.user_source,n=A(t);for(var i in n)i&&x.set("tmpMsg-session-"+i,n[i])}(),function(e){var t,n,i,a,r=new f({is_vm:!0,getMoreSession:e._options.getMoreSession});(0,c.default)(t=e._element).call(t,".im-session-list-wrap").append(r.getElement()),r.addEventListener("listEmpty",(function(){var t;(0,c.default)(t=e.getElement()).call(t,".im-contactwindow-default").show()})),r.addEventListener("setScrollTop",(function(t){t&&e._children["sessionlist-scrollbar"].scroll(t)})),r.addEventListener("voidlist",(function(){e.addVoidBackground(!0)})),e._children["sessionList"]=r;var o=new b({window:(0,c.default)(n=e._element).call(n,".im-session-list-wrap"),content:(0,c.default)(i=e._element).call(i,".im-session-list")});(0,c.default)(a=e._element).call(a,".im-session-list-wrap").append(o.getElement()),e._children["sessionlist-scrollbar"]=o,(0,s.default)((function(){o.init()}),0),o.addEventListener("scrolled",(function(t){var n,i,a=(0,c.default)(n=e.getElement()).call(n,".im-session-list-wrap").height(),r=(0,c.default)(i=e.getElement()).call(i,".im-session-list").height();if(r<a)return!1;r-a-t<=5&&e._children["sessionList"].addLoading()}))}(this),function(e){var t,n,i,a,r,o,l,u,d,p,f;if(!S.organization.enabled)return(0,c.default)(o=e.getElement()).call(o,".im-contactwindow-organization").hide(),(0,c.default)(l=e.getElement()).call(l,".im-session-list-wrap").addClass("im-contactwindow-noOrgan"),(0,c.default)(u=e.getElement()).call(u,".im-contactwindow-body").addClass("im-contactwindow-noOrgan"),(0,c.default)(d=e.getElement()).call(d,".im-contact-group-detail").addClass("im-contactwindow-noOrgan"),(0,c.default)(p=e.getElement()).call(p,".im-contactwindow-header .im-clearmsg-btn").addClass("im-contactwindow-noOrgan"),(0,c.default)(f=e.getElement()).call(f,".im-contactwindow-header .im-my-collect-btn").addClass("im-contactwindow-noOrgan"),!1;(0,c.default)(t=e.getElement()).call(t,".im-contactwindow-body").addClass("im-contactwindow-nohearder");var _=new m;(0,c.default)(n=e._element).call(n,".im-contactwindow-body").append(_.getElement()),e._children["organization"]=_;var h=new b({window:(0,c.default)(i=e._element).call(i,".im-organization-structure"),content:(0,c.default)(a=e._element).call(a,".im-organization-list")});(0,c.default)(r=e._element).call(r,".im-organization-structure").append(h.getElement()),e._children["organization"].addEventListener("contentHeightChange",(function(){h.calHeight()})),e._children["organization-scrollbar"]=h,(0,s.default)((function(){h.init()}),0)}(this),function(e){g.register((function(t){var n,i,a=t.data;switch(t.type){case v.UNREAD_CHANGE:var r,o=x.get("position");r=a.amount&&!(0,c.default)(n=e.getElement()).call(n,".im-contactwindow-header").hasClass("im-normal")&&o!=h.CENTER?"有新消息":"微聊",e.setData({unreadMsg:a.amount,tipsInfo:r});break;case v.APP_STATUS_CHANGE:var s,l,u,d=(0,c.default)(i=e.getElement()).call(i,".im-switchsize-btn");if(a==y.NORMAL)d.removeClass("im-contactwindow-normalize"),(0,c.default)(s=e.getElement()).call(s,".im-contactwindow-header .im-my-collect-btn").removeClass("im-contactwindow-noOrgan"),(0,c.default)(l=e.getElement()).call(l,".im-contactwindow-header").addClass("im-normal"),(0,c.default)(u=e.getElement()).call(u,".im-contactwindow-info").text("微聊");else if(a==y.MIN){var p,f,m,_=e._data.unreadMsg+"",g=!1;_.length&&!isNaN(_)&&Number(_)>0&&/^[0-9]+(\+)*$/.test(_)&&(g=!0),d.addClass("im-contactwindow-normalize"),(0,c.default)(p=e.getElement()).call(p,".im-contactwindow-header").removeClass("im-normal"),(0,c.default)(f=e.getElement()).call(f,".im-contactwindow-header .im-my-collect-btn").addClass("im-contactwindow-noOrgan"),(0,c.default)(m=e.getElement()).call(m,".im-contactwindow-info").text(g?"有新消息":"微聊")}break;case v.SESSION_CHILDREN_CHANGE:var w=t.data;if(w.group||w.contact){if(w.group){if("session"===e._state)return!1;"group"===e._state&&e.gotoGroupDetail(w)}}else e.addVoidBackground(!1),e._children["sessionList"].setSessions(w.children,(function(){e._children["sessionlist-scrollbar"].calHeight()}));break;case v.SESSION_CLICK:var b=t.data;b&&b.group&&e.gotoGroupDetail(b);break;default:break}}))}(this),function(e){if(!S.organization.enabled)return!1;var t=e.getElement(),n=new _({search:S.organization.search}),i=(0,c.default)(t).call(t,".im-contactWindow-header-searchinput-input");(0,c.default)(t).call(t,".im-contactWindow-search").append(n.getElement()),i.keyup((function(e){e.stopPropagation();var t=e.which,i=u(this),a=(0,o.default)(u).call(u,i.val());n.keyOperation(t,a)})),n.addEventListener("personCheck",(function(){i.val("")})),u(window).click((function(e){n._open&&!u.contains(n.getElement()[0],e.target)&&(u(e.target).is(i)||n.close())})),e._children["personsearch"]=n}(this)};O.prototype=(0,r.default)(l.prototype),O.prototype.render=function(){var e=this.getElement(),t=this._data,n=S.organization.enabled;(0,c.default)(e).call(e,".im-contactwindow-info").text(t.tipsInfo),t.unreadMsg?(t.unreadMsg=t.unreadMsg>99?"99+":t.unreadMsg,n?(0,c.default)(e).call(e,".im-max-newmsg-count").text(t.unreadMsg).removeClass("im-hide"):(0,c.default)(e).call(e,".im-mini-newmsg-count").text(t.unreadMsg).removeClass("im-hide")):n?(0,c.default)(e).call(e,".im-max-newmsg-count").addClass("im-hide"):(0,c.default)(e).call(e,".im-mini-newmsg-count").addClass("im-hide")},O.prototype.gotoGroupDetail=function(e){var t,n,i=this;this._state="group";var r,o=this._children["group-session-detail"];o||(o=new p,(0,c.default)(r=this._element).call(r,".im-contactwindow-body").append(o.getElement()),this._children["group-session-detail"]=o);(0,c.default)(t=i.getElement()).call(t,".im-session-list-wrap").addClass("im-contactwindow-switch-group"),(0,s.default)((function(){var e;"group"===i._state&&(0,c.default)(e=i.getElement()).call(e,".im-contact-group-detail").addClass("im-contactwindow-switch-group")}),0),o.setSession(e),o.addEventListener("return",(0,a.default)(n=i.groupReturn).call(n,i))},O.prototype.groupReturn=function(){var e,t,n=this;(0,c.default)(e=n._element).call(e,".im-contact-group-detail").removeClass("im-contactwindow-switch-group"),(0,c.default)(t=n._element).call(t,".im-session-list-wrap").removeClass("im-contactwindow-switch-group"),n._state="session"},O.prototype.switchToSession=function(){var e;this._type="sessionlist",this._children["organization"].hide(),(0,c.default)(e=this.getElement()).call(e,".im-session-list-wrap").show(),this._children["sessionlist-scrollbar"].calHeight()},O.prototype.switchToOrganization=function(){var e;if(this._children["organization"])return this._type="organization",(0,c.default)(e=this.getElement()).call(e,".im-session-list-wrap").hide(),this._children["organization"].show(),this._children["organization-scrollbar"].init(),this._children["organization-scrollbar"].calHeight(),!1},O.prototype.addVoidBackground=function(e){var t,n;e?(0,c.default)(t=this.getElement()).call(t,".im-contactwindow-default").show():(0,c.default)(n=this.getElement()).call(n,".im-contactwindow-default").hide()},O.prototype.blinkMinBar=function(){var e=this;e.resetblinkMinBar(),function(){var t=0;e._blinkMinBarTimer=new w({onElapsed:function(n){t++,t<=5&&(t%2==1&&(u(".im-contactwindow-header").addClass("im-blink"),5==t&&e._blinkMinBarTimer.stop()),t%2==0&&u(".im-contactwindow-header").removeClass("im-blink")),5!=t&&n()},duration:1e3})}(),e._blinkMinBarTimer.start()},O.prototype.resetblinkMinBar=function(){u(".im-contactwindow-header").removeClass("im-blink"),this._blinkMinBarTimer&&this._blinkMinBarTimer.stop()},e.exports=O},FF6l:function(e,t,n){"use strict";var i=n("ewvW"),a=n("I8vh"),r=n("UMSQ"),o=Math.min;e.exports=[].copyWithin||function(e,t){var n=i(this),s=r(n.length),c=a(e,s),l=a(t,s),u=arguments.length>2?arguments[2]:void 0,d=o((void 0===u?s:a(u,s))-l,s-c),p=1;l<c&&c<l+d&&(p=-1,l+=d-1,c+=d-1);while(d-- >0)l in n?n[c]=n[l]:delete n[c],c+=p,l+=p;return n}},FHuo:function(e,t,n){"use strict";var i=n("pevS"),a=n("3uAa").filter,r=n("nJYk"),o=n("MCtm"),s=r("filter"),c=o("filter");i({target:"Array",proto:!0,forced:!s||!c},{filter:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},FLGM:function(e,t,n){e.exports=n("XGjS")},FMNM:function(e,t,n){var i=n("xrYK"),a=n("kmMV");e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var r=n.call(e,t);if("object"!==typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==i(e))throw TypeError("RegExp#exec called on incompatible receiver");return a.call(e,t)}},"FN+V":function(e,t,n){var i=n("mIMY"),a=n("DPDV"),r=n("ogVW"),o=n("b42z");e.exports=i("Reflect","ownKeys")||function(e){var t=a.f(o(e)),n=r.f;return n?t.concat(n(e)):t}},FRmQ:function(e,t,n){n("vfRR");var i=n("oWnS");e.exports=i("Array").find},FWHo:function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},FZ3N:function(e,t,n){var i=n("G9WS"),a=n("yQr1");n("sMBO"),n("qePV"),n("rB9j"),n("UxlC");var r=i(n("/FZm")),o=i(n("04Ix")),s=i(n("06Pm")),c=i(n("kA7L")),l=i(n("hO3g")),u=i(n("X5/F")),d=i(n("3SUL")),p=i(n("eYnF")),f=i(n("RXMP")),m=i(n("lHQ6")),_=i(n("ZbhI")),h=i(n("PdFA"));function g(e){var t=v();return function(){var n,i=(0,p.default)(e);if(t){var r=(0,p.default)(this).constructor;n=a(i,arguments,r)}else n=i.apply(this,arguments);return(0,d.default)(this,n)}}function v(){if("undefined"===typeof Reflect||!a)return!1;if(a.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(a(Date,[],(function(){}))),!0}catch(e){return!1}}var y=n("aUXC"),w=n("eBtS"),b=n("/m/+"),x=n("/Pub"),S=n("sfi9"),k=n("l1Yk"),E=n("VRhk"),C=n("Bboc").isEmpty,A=n("SaSm"),O=n("XYJ2"),T=n("FdpG"),M=n("4X6O"),I=n("ArO8"),N=n("sD8x"),L=n("Bboc"),R=n("zRxj"),P=L.isGroupUser,D=L.jsonHandler,j=L.IEVersion(),U=(C=L.isEmpty,L.strToNumCompare),W=L.isAnonymousSession,F=L.is_remind_helper,B=L.isShopModeUserSource,G=function(e){var t=e.replace(/&nbsp;/g," ").replace(/<br>/g," ").replace(/\s/g," "),n=/(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&:/~\+#]*[\w\-\@?^=%&/~\+#])?/gi;return t.replace(n,(function(e){return"[链接]"}))},z=function(e,t){var n,i,a,r,o,s=e.content;if(!s)return"";var c=e.show_type?e.show_type:s.type?s.type:null,l=e.status,u="",d='<i class="im-last-msg-sending"></i>',p='<i class="im-last-msg-failed"></i>';switch(l){case"UPLOADING":case"SENDING":u+=d;break;case"UPLOAD_FAIL":case"FAIL":u+=p;break;case"SUCCESS":break;default:break}var h,g=E["session-msg-converter"](e);if(g)return u+=G(g),u;var v,y=t.contact||t.group,b=I.get("meInfo"),x=b.user_id+"@"+b.user_source;if(!C(e.sender_info)&&P({user_source:y.user_source})){var S=e.sender_info,k=S.user_id+"@"+S.user_source;C(y)||C(y.remark_user_obj)||!y.remark_user_obj[k]||(S.remark=y.remark_user_obj[k]),h=C(S.remark)||C(S.remark.remark_name)?C(S.nick_name)?S.user_name?S.user_name:"未知":S.nick_name:S.remark.remark_name}C(h)||-1!==(0,_.default)(n=["modify_msg","tip","operation_tip","auth_tip"]).call(n,s.type)||S.user_id+"@"+S.user_source!=x&&(u=h+": "+u);var O=t.contact&&1===t.contact.in_group,T="";if(!C(e.at_info)){var N=e.at_info;"string"===typeof e.at_info&&(N=D.parse(e.at_info));var L=N.targets;!C(L)&&L.length>0&&w.each(L,(function(n,i){var a=i.id+"@"+i.source,r=P({user_source:i.source});if((r||a==x)&&(v=!0,t.groupAt_index=e.at_index),!O&&v&&s.msg){var o=s.msg.length,c=E["me"]();!e.extendAt&&!isNaN(i.pos_start)&&c.userInfo&&c.userInfo.user_name&&c.userInfo.user_name&&i.pos_end>i.pos_start&&(T=s.msg.substring(0,i.pos_start)+"@"+c.userInfo.user_name+s.msg.substring(i.pos_end,o))}}));var j=Number(e.showed_count)-Number(e.at_index);v&&j<0&&t.unread&&(0,m.default)(t.unread)>0&&(u='<span style="color:red;">[有人@我]</span>'+u)}var U=s.extra?D.parse(s.extra):{};if(!C(U)&&!C(U.better_msg)&&"shop_common_card"==U.better_msg.type){var F=U.better_msg.element||[];(0,f.default)(F).call(F,(function(e){"text"==e.type&&!C(e.text)&&C(s.msg)&&(s.msg=e.text)}))}t&&t.unread&&t.unread>0&&y&&y.group_info&&y.msg_set&&1==y.msg_set.silent&&(u="["+t.unread+"条]"+u);var B=y&&y.remark&&y.remark.remark_name?y.remark.remark_name:y?y.user_name:"";if(C(B)&&W(y)&&(B="游客"+y.user_id),!E["is_support_provide_contactinfo"]&&(0,_.default)(i=["provide_contactinfo_card","default_contactinfo_card"]).call(i,c)>=0&&(c=null),(0,_.default)(a=["msg_batch_forward_card"]).call(a,c)>=0&&(E["is_support_forward"]?!C(s)&&s.forward_one_by_one&&(c=e.forward_msg_show_type,s=e.forward_msg_content):c=null),(0,_.default)(r=["wechat_notice_card"]).call(r,c)>=0)if(s.msgs_preview&&s.msgs_preview[0]){s=s.msgs_preview[0].content||"{}";try{s=JSON.parse(s)}catch(Y){s={}}c=s.type}else c=null;switch(c){case"text":u+=G(A(!O&&v&&T?T:s.msg));break;case"modify_msg":case"tip":var z=s.origl_text?s.origl_text:s.msg?s.msg:s.text;z||(z=M.richTextFormat(e).content.origl_text),u+=z;break;case"operation_tip":case"auth_tip":u+=s.default_text;break;case"image":u+="[图片]";break;case"file":u+="[文件]";break;case"video":u+="[视频]";break;case"audio":u+="[语音]";break;case"call_audio":u+="[语音聊天]";break;case"call_video":u+="[视频聊天]";break;case"standard_evaluate_card1":case"standard_evaluate_card2":u+="[评价邀请]";break;case"universal_card1":case"universal_card2":case"universal_card3":case"universal_card4":case"universal_card5":case"universal_card6":case"private_card_ganji":y=y;var V=y.user_id+"@"+y.user_source;s.card_content&&I.get("sysUser")&&-1!==(0,_.default)(o=I.get("sysUser")).call(o,V)?u+=s.card_content:(u+="private_card_ganji"===c?"[卡片]":"[链接]","private_card_ganji"!==c&&!C(s.card_title)&&s.card_title.length&&(u+=s.card_title));break;case"shop_common_card":if(C(s.msg))if(!C(s.element)&&s.element.length){for(var H=0;H<s.element.length;H++)if(!C(s.element[H])&&"text"==s.element[H].type&&!C(s.element[H].text)){u+=s.element[H].text;break}}else u+="[卡片]";else u+=s.msg;break;case"provide_contactinfo_card":u+="[名片]"+B+"邀请您提供联系方式";break;case"default_contactinfo_card":u+="[名片]"+(B?B+"的":"")+"联系方式";break;case"msg_batch_forward_card":u+="[聊天记录]";break;case"wechat_notice_card":u+="[提醒]";break;default:e&&e.content&&e.content.common_default_text?(e.show_type="tip",e.content={type:"tip",text:e.content.common_default_text,extra:e.content.common_default_text},u+=e.content.text):C(R)||C(R[e.show_type])?u+="消息格式暂不支持，请在客户端查看":u+="您收到了一条消息";break}return e.msg_status+""==="2"&&(u=""),u},V=function(e){(0,u.default)(n,e);var t=g(n);function n(e){var i;(0,s.default)(this,n);var a={template:b};return w.extend(a,e),i=t.call(this,a),function(e){e._element.click((function(){x.dispatch({type:S.SESSION_CLICK,data:e._data.session})}))}((0,l.default)(i)),i}return(0,c.default)(n,[{key:"vm_template",value:function(){return y()}},{key:"vm_methods",value:function(){return{handleImgFailLoad:function(e){var t=w(e.target).attr("src");t!==E["default-avatar"]&&w(e.target).attr("src",E["default-avatar"])}}}},{key:"vm_data",value:function(){var e;return e={name:"",content:"",time:"",show_time:!0,avatar:"",checked:!1,count:"",im_hide:!0,rash:"",not_answered:!1,need_space:!1,is_shop_business:!1,im_session_no_online_status:!1,im_session_blacked:!0,im_session_ics:!1,im_session_offline:!1,im_session_group:!1,shop_icon_text:"",im_session_shop:!1,im_session_silent:!1,im_session_ses_top:!1},(0,o.default)(e,"im_session_ics",!1),(0,o.default)(e,"unread_show_type",""),e}},{key:"mutation",value:function(e){var t={},n=e.session,i=n.contact||n.group,a="";is_online=C(e.is_online)?n?n.is_online:n.is_top_group||i.in_group?1:0:e.is_online,a=i.remark?i.remark.remark_name||i.user_name||i.name||"未知":i.user_name||i.name||"未知",W(i)&&"未知"==a&&(a="游客"+i.user_id),L.isEmojiCharacter(a)&&(t.need_space=!0);var r=i&&i.avatar?i.avatar:W(i)?E["default-anonymous-avatar"]:E["default-avatar"];if(F(i.user_id,i.user_source,i.shop_id,i.shop_source)&&(a="提醒服务",E["message_reminder"]&&(r=E["message_reminder"].avatar),t.im_session_no_online_status=!0),t.avatar=r,t.name=a,this._data.session){if(n.unread&&(0,m.default)(n.unread)>0){var o=n.unread>99?"99+":n.unread;t.count=o,t.im_hide=!1,n.unread_show_type&&""!==n.unread_show_type?(t.count="",t.unread_show_type=n.unread_show_type):t.rash=""}else t.im_hide=!0;if(P({user_source:i.user_source})||n.is_top_group||i.is_anonymous_group?t.im_session_group=!0:is_online==k.ONLINE?t.im_session_offline=!1:is_online==k.OFFLINE&&(t.im_session_offline=!0),i&&i.msg_set&&1==i.msg_set.ses_top&&!i.shop_id?t.im_session_ses_top=!0:t.im_session_ses_top=!1,i&&i.msg_set&&1==i.msg_set.silent?t.im_session_silent=!0:t.im_session_silent=!1,i&&i.is_ics_user&&(t.im_session_ics=!0),i&&1==i.is_blacked?t.im_session_blacked=!0:t.im_session_blacked=!1,t.shop_icon_text="",i&&i.shop_id&&i.shop_source){t.im_session_shop=!0;o=I.get("position")&&"RIGHT_BOTTOM"==I.get("position")?"商":null;o&&(t.shop_icon_text=o)}else t.im_session_shop=!1;var s,c;if(!t.im_session_shop&&i&&B(i.user_source)&&(t.is_shop_business=!0),this._data.session.msg){var l=this._data.session.msg;s=T(l.send_time),c=z.call(this,l,this._data.session)}else s="",c="";if(t.checked=!!n.checked,t.not_answered=!1,i&&i.user_id&&i.user_source){var u=i.user_id+"@"+i.user_source+(i.shop_id&&i.shop_source?"@@"+i.shop_id+"@"+i.shop_source:""),d=!C(this._data.session.falseMsg)&&this._data.session.falseMsg.msg_id?this._data.session.falseMsg:I.get("tmpMsg-session-"+u);!C(d)&&this._data.session.msg&&this._data.session.msg.msg_id&&N.getExistFalseMsg(u,this._data.session.msg.msg_id)&&(C(this._data.session.msg)||(U(d.msg_id,this._data.session.msg.msg_id)>0?("audio"===d.call_type?(c="[语音通话]",d.not_answered&&(t.not_answered=!0)):"video"===d.call_type?(c="[视频通话]",d.not_answered&&(t.not_answered=!0)):c=d.content&&d.content.msg||"",s=T(d.send_time)):I.set("tmpMsg-session-"+u,null)))}return this._data.session.is_top_group?t.show_time=!1:(t.show_time=!0,t.time=s),c=O.doFilter(c),t.content=c,t}}},{key:"setSession",value:function(e){this.setData({session:e})}},{key:"render",value:function(){var e,t,n=this.getElement(),i=this._data,a=i.session,o=a.contact||a.group,s="",c=C(i.is_online)?a?a.is_online:a.is_top_group||o.in_group?1:0:i.is_online;if(a.unread&&(0,m.default)(a.unread)>0){var l=a.unread>99?"99+":a.unread;(0,r.default)(n).call(n,".im-session-msg-count").text(l).removeClass("im-hide"),a.unread_show_type&&""!==a.unread_show_type?(0,r.default)(n).call(n,".im-session-msg-count").text("").addClass(a.unread_show_type):(0,r.default)(n).call(n,".im-session-msg-count").removeClass("rash")}else(0,r.default)(n).call(n,".im-session-msg-count").addClass("im-hide");P({user_source:o.user_source})||a.is_top_group||o.is_anonymous_group?(0,r.default)(n).call(n,".im-session-online-status").addClass("im-session-group"):c==k.ONLINE?(0,r.default)(n).call(n,".im-session-online-status").removeClass("im-session-offline"):c==k.OFFLINE&&(0,r.default)(n).call(n,".im-session-online-status").addClass("im-session-offline"),s=o.remark?o.remark.remark_name||o.user_name||o.name||"未知":o.user_name||o.name||"未知",W(o)&&"未知"==s&&(s="游客"+o.user_id);var u=o&&o.avatar?o.avatar:W(o)?E["default-anonymous-avatar"]:E["default-avatar"];if(F(o.user_id,o.user_source,o.shop_id,o.shop_source)&&(s="提醒服务",E["message_reminder"]&&(u=E["message_reminder"].avatar),(0,r.default)(n).call(n,".im-session-online-status").addClass("im-session-no-online-status")),(0,r.default)(n).call(n,".im-session-img").attr("src",u),L.isEmojiCharacter(s)&&(0,r.default)(n).call(n,".im-session-username").addClass("need-space"),(0,r.default)(n).call(n,".im-session-username").text(s),-1!==j&&(0,r.default)(n).call(n,".im-msg-time").css("margin-top","-14px"),o&&o.msg_set&&1==o.msg_set.ses_top&&!o.shop_id?this._element.addClass("im-session-ses-top"):this._element.removeClass("im-session-ses-top"),o&&o.msg_set&&1==o.msg_set.silent?this._element.addClass("im-session-silent"):this._element.removeClass("im-session-silent"),o&&o.is_ics_user&&this._element.addClass("im-session-ics"),o&&1==o.is_blacked?this._element.addClass("im-session-blacked"):this._element.removeClass("im-session-blacked"),o&&o.shop_id&&o.shop_source){this._element.addClass("im-session-shop");var d;l=I.get("position")&&"RIGHT_BOTTOM"==I.get("position")?"商":null;if(l)(0,r.default)(d=this._element).call(d,".im-shop-icon").text(l)}else this._element.removeClass("im-session-shop");if((0,r.default)(n).call(n,".im-session-img").error((function(){var e=w(this).attr("src");e!==E["default-avatar"]&&w(this).attr("src",E["default-avatar"])})),a.checked?this._element.addClass("im-session-active"):this._element.removeClass("im-session-active"),this._data.session){var p,f,_,h;if(this._data.session.msg){var g=this._data.session.msg;p=T(g.send_time),f=z.call(this,g,this._data.session)}else p="",f="";if((0,r.default)(e=this._element).call(e,".im-last-msg").removeClass("im-false-not-answered"),o&&o.user_id&&o.user_source){var v=o.user_id+"@"+o.user_source+(o.shop_id&&o.shop_source?"@@"+o.shop_id+"@"+o.shop_source:""),y=!C(this._data.session.falseMsg)&&this._data.session.falseMsg.msg_id?this._data.session.falseMsg:I.get("tmpMsg-session-"+v);if(!C(y)&&this._data.session.msg&&this._data.session.msg.msg_id&&N.getExistFalseMsg(v,this._data.session.msg.msg_id)&&!C(this._data.session.msg))if(U(y.msg_id,this._data.session.msg.msg_id)>0){var b;if("audio"===y.call_type){if(f="[语音通话]",y.not_answered)(0,r.default)(b=this._element).call(b,".im-last-msg").addClass("im-false-not-answered")}else if("video"===y.call_type){var x;if(f="[视频通话]",y.not_answered)(0,r.default)(x=this._element).call(x,".im-last-msg").addClass("im-false-not-answered")}else f=y.content&&y.content.msg||"";p=T(y.send_time)}else I.set("tmpMsg-session-"+v,null)}if(this._data.session.is_top_group)(0,r.default)(_=this._element).call(_,".im-msg-time").hide();else(0,r.default)(h=this._element).call(h,".im-msg-time").text(p);f=O.doFilter(f),(0,r.default)(t=this._element).call(t,".im-last-msg").html(f)}}}]),n}(h.default);e.exports=V},FdpG:function(e,t,n){n("oVuX"),n("07d7"),n("JfAA"),e.exports=function(e){var t=window.parseInt(e);t=t>1e12?t:1e3*t;var n=" ",i=864e5,a=new Date(t),r=a.getFullYear(),o=a.getHours(),s=a.getMinutes(),c=a.getDay(),l=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"][c]+n,u=a.getDate(),d=a.getMonth()+1;d=(d>9?"":"0")+d,u=(u>9?"":"0")+u;var p=new Date;p.setHours(0),p.setMinutes(0),p.setSeconds(0);var f,m=p.getTime(),_=p.getDay(),h=m-i,g=new Date(p.getFullYear().toString()+"/01/01 00:00:00").getTime(),v=[(o<10?"0":"")+o,(s<10?"0":"")+s].join(":"),y="";return f=0!==_?m-(_-1)*i:m-6*i,y=t>=m?v:t>=h?"昨天 "+v:t>=f?l+v:t>=g?d+"-"+u+n+v:[r,d,u].join("-"),y}},Ff6i:function(e,t,n){var i=n("G9WS"),a=n("iYz8"),r=n("6UaR"),o=n("Dcj1"),s=n("O0yt"),c=n("0lTi"),l=n("UtpJ"),u=n("LYCE"),d=n("HnXd"),p=n("qjzJ"),f=n("RXMP"),m=n("fHi0"),_=n("5PDf"),h=n("OWCx"),g=n("+oHS");u(t,"__esModule",{value:!0}),t.default=H;var v,y=i(n("eLKs")),w=i(n("04Ix")),b=i(n("ZbhI")),x=n("OY+d"),S=i(n("uuPJ")),k=i(n("C1n8"));function E(e,t){var n;if("undefined"===typeof s||null==o(e)){if(r(e)||(n=C(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,c=function(){};return{s:c,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,u=!0,d=!1;return{s:function(){n=a(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){d=!0,l=e},f:function(){try{u||null==n.return||n.return()}finally{if(d)throw l}}}}function C(e,t){var n;if(e){if("string"===typeof e)return A(e,t);var i=l(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?c(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?A(e,t):void 0}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function O(e,t){var n=g(e);if(h){var i=h(e);t&&(i=_(i).call(i,(function(t){return m(e,t).enumerable}))),n.push.apply(n,i)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)f(n=O(Object(i),!0)).call(n,(function(t){(0,w.default)(e,t,i[t])}));else if(p)d(e,p(i));else{var a;f(a=O(Object(i))).call(a,(function(t){u(e,t,m(i,t))}))}}return e}function M(e,t){if("input"!==e.tag)return!0;var n,i=["text","number","password","search","email","tel","url"],a=(n=e.data)&&(n=n.attrs)&&n.type,r=(n=t.data)&&(n=n.attrs)&&n.type;return a===r||(0,b.default)(i).call(i,a)>-1&&(0,b.default)(i).call(i,r)>-1}function I(e,t){return(0,x.isObject)(e)&&(0,x.isObject)(t)&&e.key===t.key&&e.tagName===t.tagName&&(0,x.isSameObject)(e.data,t.data)&&M(e,t)}function N(e,t){var n=!1;if(e.className!==t.className)return!0;if(e.is_show!==t.is_show)return!0;if(e.inner_html!==t.inner_html)return!0;switch(e.tagName){case"text":e.text!==t.text&&(n=!0);break;case"img":if(e.src!==t.src)return!0;break;default:if(e.is_component){var i=e.v_item,a=t.v_item;e.component&&e.component._vm_data&&(i=T(T({},e.v_item),e.component._vm_data)),t.component&&t.component._vm_data&&(a=T(T({},t.v_item),t.component._vm_data)),n=!(0,x.isSameObject)(i,a)}break}return n}function L(e,t){if(e.el)switch(e.className!==t.className&&e.el.setAttribute("class",t.className),e.is_show!==t.is_show&&e.el.style&&(e.el.style.display=!1===t.is_show?"none":""),e.inner_html!==t.inner_html&&(e.el.innerHTML=t.inner_html),e.tagName){case"text":e.el.textContent=t.text||"";break;case"img":e.el.setAttribute("src",t.src);break;default:e.is_component&&(e.v_item=t.v_item,(0,x.isObject)(e.v_item)&&e.component&&(e.component&&e.component._vm_data?(a_data=T(T({},e.v_item),e.component._vm_data),e.component.setData(a_data,!0)):e.component.setData(e.v_item,!0)));break}}function R(e,t,n){var i=this;if(n){var a=e.el;t.el=a,N(e,t)&&L(e,t);var r=e.children||[],o=t.children||[];if(r.length&&o.length)V.call(i,e,t,n);else if(r.length||o.length){if(!r.length){var s,c=E(o);try{for(c.s();!(s=c.n()).done;){var l=s.value;v(l),l&&l.el&&t.el.appendChild(l.el)}}catch(err){c.e(err)}finally{c.f()}}if(!o.length){var u,d=E(r);try{for(d.s();!(u=d.n()).done;){var p=u.value;p&&p.el&&$(p.el).remove(),p&&p.key&&i._children&&(i._children[p.key]=void 0,delete i._children[p.key])}}catch(err){d.e(err)}finally{d.f()}}}}}function P(e,t,n){e&&t&&e.insertBefore(t,n)}function D(e){if(e)return e.nextSibling}function j(e,t,n,i,a,r,o){if(n&&i&&(v(e),e.el)){n.insertBefore(e.el,i);var s,c=e.children||[],l=E(c);try{for(l.s();!(s=l.n()).done;){var u=s.value;(0,k.default)(u,(function(e){return v(e),e.el&&e.parentVnode&&e.parentVnode.el&&e.parentVnode.el.appendChild(e.el),!0}))}}catch(err){l.e(err)}finally{l.f()}}}function U(e){return void 0!==e&&null!==e}function W(e){return void 0===e}function F(e,t,n,i){if(!W(e.key)){for(var a,r=n;r<=i;r++)if(t[r]&&U(t[r].key)&&e.key===t[r].key){a=r;break}return a}}function B(e,t,n){for(var i={},a=t;a<=n;a++)e[a]&&U(e[a].key)&&(i[e[a].key]=a);return i}function G(e,t,n,i,a,r){if(e&&i<=a)for(var o=i;o<=a;o++)if(n[o]){n[o].el||v(n[o]),n[o].el&&e.insertBefore(n[o].el,t);var s,c=n[o].children||[],l=E(c);try{for(l.s();!(s=l.n()).done;){var u=s.value;(0,k.default)(u,(function(e){return v(e),e.el&&e.parentVnode&&e.parentVnode.el&&e.parentVnode.el.appendChild(e.el),!0}))}}catch(err){l.e(err)}finally{l.f()}}}function z(e,t,n){var i=this;if(t<=n)for(var a=t;a<=n;a++)e[a]&&e[a].el&&$(e[a]&&e[a].el).remove(),e[a]&&e[a].key&&i._children&&(i._children[e[a].key]=void 0,delete i._children[e[a].key])}function V(e,t,n){var i,a=this,r=e.children||[],o=t.children||[],s=0,c=0,l=E(r);try{for(l.s();!(i=l.n()).done;){var u=i.value;u.index=s,s++}}catch(err){l.e(err)}finally{l.f()}var d,p=E(o);try{for(p.s();!(d=p.n()).done;){var f=d.value;f.index=c,c++}}catch(err){p.e(err)}finally{p.f()}var m=0,_=0,h=r.length-1,g=r[0],v=r[h],y=o.length-1,w=o[0],b=o[y],S=!0,k=t.el;while(m<=h&&_<=y)if((0,x.isEmpty)(g))g=r[++m];else if((0,x.isEmpty)(v))v=r[--h];else if((0,x.isEmpty)(w))w=o[++_];else if((0,x.isEmpty)(b))b=o[--y];else if(I(g,w))R.call(a,g,w,n,o,_),g=r[++m],w=o[++_];else if(I(v,b))R.call(a,v,b,n,o,y),v=r[--h],b=o[--y];else if(I(g,b))R.call(a,g,b,n,o,y),S&&P(k,g.el,D(v.el)),g=r[++m],b=o[--y];else if(I(v,w))R.call(a,v,w,n,o,_),S&&P(k,v.el,g.el),v=r[--h],w=o[++_];else{var C=r.oldKeyToIdx;W(C)&&(C=B(r,m,h));var A=U(w.key)?C[w.key]:F(w,r,m,h);if(W(A))j(w,n,k,g.el,!1,o,_);else{var O=r[A];if(I(O,w)){R.call(a,O,w,n,o,_);var T=O.el;r[A]=void 0,S&&P(k,T,g.el)}else j(w,n,k,g.el,!1,o,_)}w=o[++_]}if(m>h){var M=W(o[y+1])?null:o[y+1].el;G(k,M,o,_,y,n)}else _>y&&z.call(a,r,m,h)}function H(e,t,n){var i=this;v=(0,y.default)(S.default).call(S.default,{components:n||{},_children:i._children||{}});var a={replaceFullTree:!1,insertsQueue:[],removeQueue:[],updateQueue:[]};return I(e,t)?R.call(i,e,t,a):a.replaceFullTree=!0,a}},Flhu:function(e,t,n){var i=n("G9WS"),a=i(n("lHQ6")),r=i(n("WxoT")),o=i(n("rPUy")),s=i(n("/FZm")),c=n("5m4N"),l=n("eBtS"),u=n("9EZz"),d=(n("VRhk"),n("sfi9")),p=n("/Pub"),f=!1,m=function(e){(function(t){var n,i={template:u};l.extend(i,e),c.call(t,i);var a=(0,s.default)(n=t._element).call(n,".im-evaluate1-input");a.keydown((function(){var e=a.val().length;if(e>140){a.attr("readonly","readonly");var t="超过可输入的最大字符数，请重新输入！";p.dispatch({type:d.TOAST_SHOW,data:{content:t,interval:2e3}})}}))})(this)},_=function(e){var t=e.title,n=e.starNum,i=e.activeNum,a=e.idx,r=l("<div></div>"),o=l("<div></div>");o.addClass("im-evaluate1-star-item"),o.attr("idx",a);var s=l("<div></div>");s.addClass("im-evaluate1-star-name"),s.text(t);var c=l("<div></div>");c.addClass("im-evaluate1-star-starWrap");for(var u=0;u<n;u++){var d=l("<span></span>");d.addClass("im-evaluate1-content-star");var p=u+5*a;d.attr("starIndex",p),d.attr("idx",a),u==n-1&&d.addClass("last-evaluate1-star"),u<i&&d.addClass("star-active"),r.append(d)}return c.append(r),o.append(s),o.append(c),o};m.prototype=(0,o.default)(c.prototype),m.prototype.renderContent=function(){var e=this._data.msg;if(!e)return!1;var t=[],n=e.content,i=JSON.parse((0,r.default)(n)),o=this._element;if(i&&!i.dimensions)return!1;var c=(0,s.default)(o).call(o,".star-content"),u=(0,s.default)(o).call(o,".im-evaluate1-title"),m=(0,s.default)(o).call(o,".im-evaluate1-title2"),h=(0,s.default)(o).call(o,".send-content"),g=((0,s.default)(o).call(o,".smile-content"),(0,s.default)(o).call(o,".tag-content"),(0,s.default)(o).call(o,".input-content")),v=function n(a){if(a.stopPropagation(),f){var l=(0,s.default)(g).call(g,".im-evaluate1-input").val();if(i.remark_info&&1===i.remark_info.required&&""===l){var u="写一下您的宝贵意见吧！";p.dispatch({type:d.TOAST_SHOW,data:{content:u,interval:2e3}})}else{var m={extra:i.extra,dimensions:t,remark:l},_={msg_id:e.msg_id,sender_id:e.sender_id,sender_source:e.sender_source,to_id:e.to_id,to_source:e.to_source,show_type:i.type,bus_scene:i.bus_scene,result:m},v=JSON.parse((0,r.default)(e));v.content.result=m;var w={sendMsg:_,updateMsg:v};p.dispatch({type:d.SET_EVALUATE,data:w}),h.text("感谢您的评价，这将帮助我们做得更好"),h.off("click",n),c.off("click",y),h.css("color","rgba(153,153,153,1)"),(0,s.default)(o).call(o,".im-evaluate1-input").attr("disabled","disabled")}}},y=function(e){e.stopPropagation();var n=l(e.target)||l(window.event.srcElement);if(!n.hasClass("im-evaluate1-content-star"))return!1;var r=(0,a.default)(n.attr("starIndex")),o=(0,a.default)(n.attr("idx")),s=i.dimensions[o].title,c=n.parent().children(),u=r-5*o+1,d={idx:o,title:s,score:u};t[o]=d;for(var p=0;p<5;p++)l(c[p]).removeClass("star-active"),p<u&&l(c[p]).addClass("star-active");h.css("color","rgba(33, 187, 247, 1)"),f=!0},w=i.title?i.title:"";if(u.text(w),m.text("匿名评价,请放心填写"),0===i.status){if(i.dimensions&&""!==i.dimensions)for(var b=i.dimensions?i.dimensions.length:"",x=0;x<b;x++){var S=i.dimensions[x].title,k=i.dimensions[x].idx;t[x]={idx:k,title:S,score:0};var E=_({title:S,starNum:5,activeNum:0,idx:k});c.append(E)}i.remark_info&&""===i.remark_info&&g.css("display","none"),c.on("click",y),h.on("click",v)}else{if(i&&!i.result)return!1;for(var C=i.result.dimensions?i.result.dimensions:"",A=C.length,O=0;O<A;O++){var T=C[O].title||"",M=_({title:T,starNum:5,activeNum:C[O].score,idx:C[O].idx});c.append(M)}var I=(0,s.default)(o).call(o,".im-evaluate1-input");i.result&&i.result.remark?(g.css("display","flex"),I.remove(),g.append(l('<div class = "im-input-has-evaluate"></div>').text(i.result.remark))):g.hide(),h.text("感谢您的评价，这将帮助我们做得更好"),h.css("color","rgba(153,153,153,1)"),c.off("click",y)}},e.exports=m},FvEI:function(e,t,n){n("UUWy"),n("Pkew");var i=n("2fOL");e.exports=i},"Fwt+":function(e,t,n){"use strict";var i=n("67WC"),a=n("UMSQ"),r=n("I8vh"),o=n("SEBh"),s=i.aTypedArray,c=i.exportTypedArrayMethod;c("subarray",(function(e,t){var n=s(this),i=n.length,c=r(e,i);return new(o(n,n.constructor))(n.buffer,n.byteOffset+c*n.BYTES_PER_ELEMENT,a((void 0===t?i:r(t,i))-c))}))},"G+Rx":function(e,t,n){var i=n("0GbY");e.exports=i("document","documentElement")},"G/X/":function(e,t,n){var i=n("G9WS"),a=i(n("rPUy")),r=i(n("/FZm")),o=n("eBtS"),s=n("ia+l"),c=n("QWnO"),l=function(e){(function(t){var n,i={template:s};o.extend(i,e),c.call(t,i),(0,r.default)(n=t._element).call(n,".im-image-icon").click((function(){var e;(0,r.default)(e=t._element).call(e,".im-image-choose").trigger("click"),window.WMDA_REPORT&&window.WMDA_REPORT("custom",{event_id:"7"})})),t._element.on("change",".im-image-choose",(function(){0!==this.files.length&&(t._input.imgSend(this.files[0]),this.outerHTML=this.outerHTML,window.WMDA_REPORT&&window.WMDA_REPORT("custom",{event_id:"8"}))}))})(this)};l.prototype=(0,a.default)(c.prototype),e.exports=l},G7fP:function(e,t,n){var i=n("pevS"),a=n("Bvq2"),r=n("39uu"),o=Object.isFrozen,s=a((function(){o(1)}));i({target:"Object",stat:!0,forced:s},{isFrozen:function(e){return!r(e)||!!o&&o(e)}})},G9WS:function(e,t){function n(e){return e&&e.__esModule?e:{default:e}}e.exports=n},GC2F:function(e,t,n){var i=n("+M1K");e.exports=function(e,t){var n=i(e);if(n%t)throw RangeError("Wrong offset");return n}},GHVm:function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on "+e);return e}},GWfs:function(e,t,n){var i=n("OsYe"),a=n("/5b1").trim,r=n("gfA+"),o=i.parseInt,s=/^[+-]?0[Xx]/,c=8!==o(r+"08")||22!==o(r+"0x16");e.exports=c?function(e,t){var n=a(String(e));return o(n,t>>>0||(s.test(n)?16:10))}:o},GarU:function(e,t){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},Gm6T:function(e,t,n){var i=n("G9WS");n("rB9j"),n("UxlC");var a=i(n("/FZm")),r=i(n("rPUy")),o=n("JVDe"),s=n("eBtS"),c=n("iF40"),l=n("1WVj"),u=n("Itcm"),d=n("6Rj3"),p=function(e){(function(t){var n={template:c};s.extend(n,e),o.call(t,n),t._height_for_mark=null,t.scrollMsgId="",t.scroll_bottom_distance=0})(this),function(e){var t=new l({me:e._options.me,onPositionChanged:function(e){},onClick:function(t){e.triggerEvent("onClick",t._data.msg)}});e._children["msglist"]=t,e._element.append(t.getElement()),t.addEventListener("contentMenuOpen",(function(t){e.triggerEvent("contentMenuOpen",t)})),t.addEventListener("sendMessage",(function(t){e.triggerEvent("sendMessage",t)})),t.addEventListener("contentMenuClose",(function(){e.triggerEvent("contentMenuClose")})),t.addEventListener("reditContent",(function(t){e.triggerEvent("reditContent",t)})),t.addEventListener("falseMsgCall",(function(t){e.triggerEvent("falseMsgCall",t)})),t.addEventListener("multiple_select_switch",(function(t){e._options.multiple_selectable=!!t.active}))}(this)};p.prototype=(0,r.default)(o.prototype),p.prototype.addScrollbar=function(){if(!this._children["scrollbar"]){var e=this,t=new u({window:this._element,content:this._children["msglist"].getElement()});this._children["scrollbar"]=t,this._element.append(t.getElement()),t.addEventListener("scrolled",(function(t){var n;if(e._options.contentOpened&&e.triggerEvent("contentMenuClose"),0===t){var i=e._children["msglist"].getOldMsg();i&&e.scrollMsgId==i.msg_id||(e.scrollMsgId=i?i.msg_id:"",e.triggerEvent("oldMsgNeed",i))}var r=e.getElement().height(),o=(0,a.default)(n=e.getElement()).call(n,".im-msg-list").height();if(o<r)return!1;e.scroll_bottom_distance=o-r-t,e.scroll_bottom_distance<=5&&e.triggerEvent("addMoreCollectMsg")})),t.init()}},p.prototype.addMsg=function(e){this.addScrollbar();var t=this,n=!1;return e instanceof Array?s.each(e,(function(e,i){n=t._children["msglist"].add(i)||n})):n=t._children["msglist"].add(e),n&&(this._children["msglist"].freshenTime(),this._children["scrollbar"].calHeight()),n},p.prototype.replaceMsg=function(e,t){var n=this,i=!1;return e instanceof Array?s.each(e,(function(e,a){i=n._children["msglist"].replace(a,t)||i})):i=n._children["msglist"].replace(e,t),i},p.prototype.hideMsg=function(e,t){var n=this;e instanceof Array&&n._children["msglist"].hideMsg(e,(function(e){e&&n._children["scrollbar"].scroll(0),t&&t.apply(n,arguments)}))},p.prototype.markScroll=function(){this._height_for_mark=this._children["msglist"].height()},p.prototype.gotoMark=function(){var e=this._children["msglist"].height(),t=e-this._height_for_mark;this._children["scrollbar"].scroll(t)},p.prototype.checkfull=function(){var e=this._children["msglist"].height(),t=this.height();if(e<t){var n=this._children["msglist"].getOldMsg();this.triggerEvent("oldMsgNeed",n)}},p.prototype.empty=function(){this._children["msglist"].empty()},p.prototype.remove=function(e,t,n){this._children["msglist"].remove(e,t,n)},p.prototype.scrollToBottom=function(){this._children["scrollbar"]&&this._children["scrollbar"].scrollToBottom()},p.prototype.getOldMsg=function(){return this._children["msglist"].getOldMsg()},p.prototype.getFreshMsg=function(e){return this._children["msglist"].getFreshMsg(e)},p.prototype.updateMsg=function(e){this._children["msglist"].updateMsg(e),e.temp_msg_id&&this.scrollToBottom()},p.prototype.updateMsgOtherRead=function(){this._children["msglist"].updateMsgOtherRead()},p.prototype.startLoading=function(){if(!this._children["loading"]){var e=new d;this._children["msglist"].before(e),this._children["loading"]=e}this._children["loading"].open()},p.prototype.stopLoading=function(){this._children["loading"]&&this._children["loading"].close()},p.prototype.resetScroll=function(){this._children["scrollbar"]&&(this._children["scrollbar"].resetWindowHeight(),this.scrollToBottom())},p.prototype.multiple_select=function(e){this._options.multiple_locked||this._children["msglist"].multiple_select(e)},p.prototype.multiple_cancel=function(){this._options.multiple_locked||this._children["msglist"].multiple_cancel()},p.prototype.multiple_check=function(){return this._children["msglist"].multiple_check()},p.prototype.fold=function(e){},p.prototype.addCollectMsg=function(e){this.addScrollbar();var t=this;e instanceof Array?s.each(e,(function(e,n){t._children["msglist"].addCollectMsg(n)})):t._children["msglist"].addCollectMsg(e)},e.exports=p},HAoi:function(e,t,n){"use strict";var i=n("1jut"),a=n("j5XY");e.exports=i?{}.toString:function(){return"[object "+a(this)+"]"}},HAuM:function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},HBAM:function(e,t,n){var i=n("G9WS"),a=i(n("ZbhI")),r=n("1Fqx"),o=n("sNBN"),s=function(e,t){var n,i=this;if(i.webimActiveKey=e,i._isMainPage=!1,(0,a.default)(n=navigator.userAgent).call(n,"Chrome")>-1){var s=null,c=new r({onElapsed:function(e){var n=o.getItem(i.webimActiveKey);n!=s&&(n==i._webimActiveValue?i._isMainPage=!0:i._isMainPage=!1,t&&t(i._isMainPage),s=n),e()},duration:200});c.start()}else{var l=function(e){e.key==i.webimActiveKey&&(i._isMainPage=!1,t&&t(i._isMainPage))};window.addEventListener?window.addEventListener("storage",l,!1):window.attachEvent&&window.attachEvent("onstorage",l)}};s.prototype.set=function(){this._webimActiveValue=(new Date).getTime()+"",o.setItem(this.webimActiveKey,this._webimActiveValue)},s.prototype.get=function(){return this._isMainPage},e.exports=s},HCkw:function(e,t,n){n("/JNE"),n("b4mI"),n("i3tW"),n("42Pb"),n("ZNvi"),n("IqmU"),n("kIAf"),n("Dmep"),n("5pn2"),n("58wy"),n("LoXx"),n("mA47"),n("msS4"),n("J04u"),n("jQUo"),n("7wkN"),n("qhvP"),n("Ui3k"),n("gXaK"),n("0axM");var i=n("dktu");e.exports=i.Symbol},"HG+/":function(e,t,n){var i=n("G9WS");n("sMBO"),n("rB9j"),n("hByQ"),n("EnZy");var a=i(n("lHQ6")),r=i(n("Kwsy")),o=i(n("/FZm")),s=i(n("rPUy")),c=i(n("RXMP")),l=n("JVDe"),u=n("eBtS"),d=n("WhRN"),p=n("/Pub"),f=(n("l1Yk"),n("sfi9")),m=n("VRhk"),_=n("Bboc"),h=_.isGroupUser,g=!1,v=!1,y=!1,w={},b={},x=0,S={},k=50,E=40,C=function(e){(function(t){var n={template:d};u.extend(n,e),l.call(t,n)})(this);var t=e&&e.ele?e.ele:null;this.contact=e&&e.contact?e.contact:{},g=!(!e||!e.isAddGroup)&&e.isAddGroup,v=!(!e||!e.isDeleteGroup)&&e.isDeleteGroup,y=!(!e||!e.isCreateGroup)&&e.isCreateGroup,this.init(t),function(t){u("#im-search-inp").on("keydown",(function(n){if(13===n.keyCode){var i=e&&e.ele?e.ele:null;t.search(i)}}));var n=e&&e.ele?e.ele:t.getElement();if(n.on("click",".im-organization-item",(function(e){var n=u(this);"group"==n.attr("data-type")?t.organizationOpen(n):t.checkItem(n)})),g||v){if(h(t.contact))g?(t.showTp(u(".im-organization-handle-btn.join")),t.hideTp(u(".im-organization-handle-btn.create")),t.hideTp(u(".im-organization-handle-btn.delete"))):v&&(t.hideTp(u(".im-organization-handle-btn.join")),t.showTp(u(".im-organization-handle-btn.delete")),t.hideTp(u(".im-organization-handle-btn.create")));else{t.hideTp(u(".im-organization-handle-btn.join")),t.hideTp(u(".im-organization-handle-btn.delete")),t.showTp(u(".im-organization-handle-btn.create"));var i=t.contact.user_id+"@"+t.contact.user_source,a='<li class="im-organization-person" data-id="';a+=t.contact.user_id,a+='" data-source ="',a+=t.contact.user_source,a+='"><div class="im-organization-item" data-type="person" data-level="0',a+='"><div class="im-organization-item-wrap">',a+='<img src="'+t.contact.avatar+'" alt="" class="im-organization-avatar"><span class="im-organization">',a+=t.contact.user_name+"</span></div></div></li>",a=a.split("</li>")[0]+'<span class="im-organization-selected-del" data-type="del"></span></li>',b[i]=a,S[i]=t.contact,x++,u(".im-organization-selected-lists.add-group").append(a)}n.on("click",".im-organization-person",(function(e){var n=u(this),i=n.parent(".im-organization-person"),a=i.context.getAttribute("data-id")+"@"+i.context.getAttribute("data-source");if(e.target&&e.target.checked){var r=w[a];r=r.split("</li>")[0]+'<span class="im-organization-selected-del" data-type="del"></span></li>',b[a]=r,S[a]=t.contact,x++,u(".im-organization-selected-lists.add-group").append(r)}else if(e.target&&!e.target.checked){var o="",s=0;delete b[a],delete S[a],u.each(b,(function(e,t){s++,o+=t})),x=s,u(".im-organization-selected-lists.add-group").html(o)}u(".im-organization-selected-num").text("已选择的联系人("+x+")"),e.stopPropagation()})),u(".im-contactwindow-organization.add-group").on("click",".im-organization-selected-del",(function(e){var t=u(this);if(e.target&&"del"===e.target.getAttribute("data-type")){var n=t.parent(".im-organization-person"),i=n[0].getAttribute("data-id")+"@"+n[0].getAttribute("data-source");delete b[i],delete S[i],x--,n.remove(),u(".im-organization-selected-num").text("已选择的联系人("+x+")");var a=u(".im-origanization-member");u.each(a,(function(e,t){u(this)[0].getAttribute("data-key")===i&&u(this).attr("checked",!1)}))}})),u(".im-contactwindow-organization.add-group").on("click",".im-organization-handle",(function(e){var n=e.target&&e.target.getAttribute("data-type"),i=t._options.unavailableGroup||{},a=[];if(u.each(b,(function(e,t){var n=e.split("@");i[e]||a.push({user_id:n[0],user_source:n[1]})})),a.length>0){var r=t.contact&&t.contact.group_info&&t.contact.group_info.max_count;switch(n){case"create":if(a.length<2||a.length>r){var o=a.length<2?"群聊人数至少超过2人!":"群成员不能超过"+r+"人!";return void p.dispatch({type:f.TOAST_SHOW,data:{content:o,interval:3e3}})}p.dispatch({type:f.CREATE_GROUP_CHECK,data:a});break;case"join":if(!t.contact||!t.contact.user_id||!t.contact.user_source)return;if(a.length>k)return void p.dispatch({type:f.TOAST_SHOW,data:{content:"每次邀请人数不能超过"+k+"人!",interval:3e3}});var s=t.contact&&t.contact.group_info,l=s&&s.current_count,d=s&&s.invite_cnt,m=s&&s.authority,_=s&&1==s.auth_type;if(_&&1!=m){o='群主已启用"群聊邀请确认",群成员需群主确认才能邀请朋友进群';p.dispatch({type:f.TOAST_SHOW,data:{content:o,interval:2e3}})}0!==d&&l>d&&!_&&p.dispatch({type:f.TOAST_SHOW,data:{content:"当前群聊人数较多，为减少打扰，对方同意邀请后才会进入群聊!",interval:3e3}}),p.dispatch({type:f.JOIN_GROUP_CHECK,data:{contact:t.contact,target_ggid:t.contact.user_id,target_gsource:t.contact.user_source,target_users:a}});break;case"delete":if(!t.contact||!t.contact.user_id||!t.contact.user_source)return;s=t.contact&&t.contact.group_info;var h=s&&1==s.authority;if(!h)return;if(a.length>E)return void p.dispatch({type:f.TOAST_SHOW,data:{content:"每次删除人数不能超过"+E+"人!",interval:3e3}});var g=[];(0,c.default)(a).call(a,(function(e){g.push({user_id:e.user_id,user_source:e.user_source,authority:4})})),p.dispatch({type:f.DELETE_MEMBER,data:{members:g}});break;default:break}}u(".im-organization-selected-lists.add-group").html(""),u(".im-organization-selected-num").text("已选择的联系人(0)"),u(".im-origanization-member").attr("checked",!1),b={},S={},x=0,t.contact=null,u(".im-contactwindow-organization.add-group").remove(),t.triggerEvent("structureUnmount",n)}))}}(this)};C.prototype=(0,s.default)(l.prototype),C.prototype.init=function(e){var t,n=e||(0,o.default)(t=this.getElement()).call(t,".im-organization-list"),i=u(".im-contactwindow-organization.add-group .im-search-input input#im-search-inp"),a=this;v?a._options&&a._options.groupMembers&&a._options.groupMembers.length&&a.insertOrganization(a._options.groupMembers,n,0):m.organization.getDetailByGroup("",(function(e){a.insertOrganization(e,n,0)})),u(".im-contactwindow-organization.add-group").on("click",".im-search-submit.js-search-submit",function(){var e=null,t=!1,o=function(){var e=i.val();t=!0,!_.isEmpty(e)&&e.length?(n.html(""),m.organization.search(e,(function(e){!_.isEmpty(e)&&e.length?a.insertOrganization(e,n,0):n.html('<div class="im-empty-list"><span class="im-empty-label">无搜索结果</span></div>'),t=!1}))):(n.html(""),m.organization.getDetailByGroup("",(function(e){a.insertOrganization(e,n,0),t=!1})))};return function(){t||(e&&(clearTimeout(e),e=null),e=(0,r.default)((function(){o()}),100))}}())},C.prototype.search=function(e){var t,n=e||(0,o.default)(t=this.getElement()).call(t,".im-organization-list"),i=u(".im-contactwindow-organization.add-group .im-search-input input#im-search-inp"),a=this,r=i.val();!_.isEmpty(r)&&r.length?(n.html(""),m.organization.search(r,(function(e){!_.isEmpty(e)&&e.length?a.insertOrganization(e,n,0):n.html('<div class="im-empty-list"><span class="im-empty-label">无搜索结果</span></div>')}))):(n.html(""),m.organization.getDetailByGroup("",(function(e){a.insertOrganization(e,n,0)})))},C.prototype.organizationOpen=function(e){var t=e.parent().attr("data-groupid"),n=e.siblings(".im-organization-list"),i=this,r=(0,a.default)(e.attr("data-level"))+1,s=(0,o.default)(e).call(e,".im-organization-item-close");s.hasClass("im-organization-item-open")?(s.removeClass("im-organization-item-open"),n.children().length?n.slideDown("fast",(function(){u(this).stop(!0,!0),i.triggerEvent("contentHeightChange")})):m.organization.getDetailByGroup(t,(function(e){e&&e.length?(i.insertOrganization(e,n,r),n.slideDown("fast",(function(){u(this).stop(!0,!0),i.triggerEvent("contentHeightChange")}))):i.triggerEvent("contentHeightChange")}))):(s.addClass("im-organization-item-open"),n.slideUp("fast",(function(){u(this).stop(!0,!0),i.triggerEvent("contentHeightChange")})))},C.prototype.insertOrganization=function(e,t,n){var i,a,r,s,c=m["me"]().user_id+"@"+m["me"]().user_source,l=this._options.unavailableGroup||{};for(a in l[c]||(l[c]=m["me"](),u.extend(!0,l,S)),e)if(e.hasOwnProperty(a))if(e[a].source){if(r='<li class="im-organization-person" data-id="',r+=e[a].id,r+='" data-source ="',r+=e[a].source,r+='"><div class="im-organization-item" data-type="person" data-level="',r+=n,r+='"><div class="im-organization-item-wrap">',r+='<img src="'+e[a].avatar+'" alt="" class="im-organization-avatar"><span class="im-organization">',r+=e[a].name,g)s=e[a].id+"@"+e[a].source,w[s]=r+"</span></div></div></li>",r+='</span></div></div><input data-type="checkbox" data-key='+s+' class="im-origanization-member" type="checkbox" value=""',r+=s!==c&&y?l[s]?" checked/></li>":"/></li>":l[s]?" disabled checked/></li>":"/></li>";else if(v){if(this._options.master&&this._options.master.user_id==e[a].id&&this._options.master.user_source==e[a].source)continue;s=e[a].id+"@"+e[a].source,w[s]=r+"</span></div></div></li>",r+='</span></div></div><input data-type="checkbox" data-key='+s+' class="im-origanization-member" type="checkbox" value=""/></li>'}else r+="</span></div></div></li>";t.append(r)}else i='<li class="im-organization-group" data-groupid=',i+=e[a].id,i+='><div class="im-organization-item" data-type="group" data-level="',i+=n,i+='"><div class="im-organization-item-wrap"><i class="im-organization-item-close im-organization-item-open">&nbsp;</i><i class="im-organization-item-logo">&nbsp;</i><span class="im-organization">',i+=e[a].name,i+='</span></div></div><ul class="im-organization-list im-hide"></ul></li>',t.append(i);(0,o.default)(t).call(t,".im-organization-item").each((function(){u(this).css({paddingLeft:19*n+"px"})}))},C.prototype.checkItem=function(e){var t,n=e.parent(".im-organization-person"),i=n.attr("data-id"),a=(0,o.default)(t=this.getElement()).call(t,".im-organization-checked");i&&!g&&(a&&a.removeClass("im-organization-checked"),e.addClass("im-organization-checked"),p.dispatch({type:f.PERSON_CHECK,data:{user_id:i,user_source:n.attr("data-source")}}))},C.prototype.showTp=function(e){e&&e.show()},C.prototype.hideTp=function(e){e&&e.hide()},e.exports=C},HG5D:function(e,t,n){var i=n("G9WS");n("rB9j"),n("UxlC");var a=i(n("lHQ6")),r=i(n("rPUy")),o=i(n("5PDf")),s=i(n("Kwsy")),c=i(n("/FZm")),l=n("JVDe"),u=n("Itcm"),d=n("WCfw"),p=n("Bboc"),f=n("Bboc"),m=f.isEmpty,_=p.isAnonymousSession,h=function(e){(function(t){var n={template:d,tag:'<span class="im-float-tag {$float-tag-selected}" data-id-source="{$id@source}">{$username}</span>',perPage:20,pageIndex:0,selectedIndex:0,locked:!1,width:80};$.extend(n,e),l.call(t,n)})(this),function(e){var t,n=new u({window:e._element,content:(0,c.default)(t=e._element).call(t,".im-float-content")});e._element.append(n.getElement()),e._children["flat-window-scrollbar"]=n,(0,s.default)((function(){n.init()}),0),n.addEventListener("scrolled",(function(t){var n;if(!e.scrollLocked&&!e.fullfilled){var i,a=e.getElement().height(),r=(0,c.default)(n=e.getElement()).call(n,".im-float-content").height();if(r<a)return!1;if(r-a-t<=5)e._data.maxCount-e._options.perPage*(e._options.pageIndex+1)>0?(e._options.pageIndex++,e.render(e._options.pageIndex*e._options.perPage,(e._options.pageIndex+1)*e._options.perPage),e.scrollToTarget(e._options.selectedIndex)):(0,c.default)(i=e._element).call(i,".im-float-content").children().length<e._data.maxCount&&(e._options.pageIndex++,e.render(e._options.pageIndex*e._options.perPage,e._data.maxCount),e.scrollToTarget(e._options.selectedIndex))}})),e._element.click((function(t){var n=$(t.target);if("SPAN"==t.target.tagName&&n.hasClass("im-float-tag")){var i=n.data("id-source"),a=e._data.contacts,r=a[i];if(r){var s=r.remark_name||r.remark&&r.remark.remark_name||r.nick_name||r.user_name||"未知";(m(s)||"未知"===s)&&_(r)&&(s="游客"+r.user_id),e.outputMessage({id:r.user_id,source:r.user_source,user_name:s,filter:(0,o.default)(e._data)})}}}))}(this)};h.prototype=(0,r.default)(l.prototype),h.prototype.open=function(){l.prototype.show.call(this),this._options.opened=!0},h.prototype.close=function(){this._options.opened=!1},h.prototype.render=function(e,t){var n=this.getElement(),i=this._data.contacts,a=this._data.id_sources,r="",o=e||0,s=t||o+this._options.perPage;for(0==o&&(this._options.pageIndex=0);o<a.length&&o<s;o++)if(i[a[o]]){var l=i[a[o]],u=l.remark_name||l.remark&&l.remark.remark_name||l.nick_name||l.user_name||"未知";(m(u)||"未知"===u)&&_(l)&&(u="游客"+l.user_id),r+=this._options.tag.replace("{$username}",u.replace(/&/gi,"&amp;")).replace("{$id@source}",a[o]).replace("{$float-tag-selected}",0==o?"float-tag-selected":"")}r.length?(this._options.pageIndex>0?(0,c.default)(n).call(n,".im-float-content").append(r):(0,c.default)(n).call(n,".im-float-content").html(r),this._children["flat-window-scrollbar"].scrollToTop(),this.open()):this.close()},h.prototype.keyboardInput=function(e){var t=this;if(13==e.keyCode){var n=this._data.contacts,i=this._data.id_sources;i[this._options.selectedIndex]&&n[i[this._options.selectedIndex]]&&this.outputMessage({id:n[i[this._options.selectedIndex]].user_id,source:n[i[this._options.selectedIndex]].user_source,user_name:n[i[this._options.selectedIndex]].remark_name||n[i[this._options.selectedIndex]].nick_name||n[i[this._options.selectedIndex]].user_name,filter:(0,o.default)(t._data)})}else if(38==e.keyCode||40==e.keyCode){var r;this.scrollLocked=!0;i=(0,c.default)(r=this.getElement()).call(r,".im-float-content").children();var l=this._options.selectedIndex;if(l+=38==e.keyCode?-1:1,l>this._data.maxCount-1)$(i).removeClass("float-tag-selected"),this._options.selectedIndex=0,$(i[0]).addClass("float-tag-selected"),(0,s.default)((function(){t._children["flat-window-scrollbar"].scrollToTop(),t.scrollLocked=!1}),0);else if(l<0){var u;if(this.scrollLocked=!0,0==this._options.selectedIndex&&i.length<this._data.maxCount)this.render(0,this._data.maxCount),this.fullfilled=!0,this._options.pageIndex=(0,a.default)(this._data.maxCount/this._options.perPage)+(this._data.maxCount%this._options.perPage>0?1:0),i=(0,c.default)(u=this.getElement()).call(u,".im-float-content").children();$(i).removeClass("float-tag-selected"),this._options.selectedIndex=i.length-1,$(i[this._options.selectedIndex]).addClass("float-tag-selected"),(0,s.default)((function(){t._children["flat-window-scrollbar"].scrollToBottom(),t.scrollLocked=!0}),0)}else $(i).removeClass("float-tag-selected"),this._options.selectedIndex=l,$(i[this._options.selectedIndex]).addClass("float-tag-selected"),(0,s.default)((function(){t.scrollToTarget(l)}),0)}},h.prototype.scrollToTarget=function(e){var t,n,i=(0,c.default)(t=this.getElement()).call(t,".im-float-content").children();if(!(e>i.length-1)){var a=$(i[e]).position().top,r=this.getElement().height();n=!(a>=0&&a<=r-$(i[e]).outerHeight())&&(a<0?a:$(i[e]).outerHeight()-(r-a)),n&&this._children["flat-window-scrollbar"].scroll(n)}},h.prototype.outputMessage=function(e){this.triggerEvent("outputMessage",e)},h.prototype.move=function(e,t){if(window.getSelection){var n,i,a=window.getSelection();if(a.rangeCount){var r=a.getRangeAt(0).cloneRange();if(r.getClientRects){r.collapse(!0);var o=r.getClientRects();o.length>0&&(i=o[0]),i&&(n=i.left,i.top)}}var s={};isNaN(n-this._options.width/2)||(s.left=n-this._options.width/2+51),this.triggerEvent("floatWindowMove",s)}},h.prototype.hide=function(){this._element.hide()},h.prototype.reset=function(){var e,t=this,n=(0,c.default)(e=t.getElement()).call(e,".im-float-content").children();$(n).removeClass("float-tag-selected"),t._options.selectedIndex=0,t.fullfilled=!1,$(n[0]).addClass("float-tag-selected"),t.move(),(0,s.default)((function(){t._children["flat-window-scrollbar"].scrollToTop()}),0)},e.exports=h},HH4o:function(e,t,n){var i=n("tiKp"),a=i("iterator"),r=!1;try{var o=0,s={next:function(){return{done:!!o++}},return:function(){r=!0}};s[a]=function(){return this},Array.from(s,(function(){throw 2}))}catch(c){}e.exports=function(e,t){if(!t&&!r)return!1;var n=!1;try{var i={};i[a]=function(){return{next:function(){return{done:n=!0}}}},e(i)}catch(c){}return n}},HIWR:function(e,t,n){var i,a=n("G9WS");a(n("o+MX"));i=function(e,t){var n=0;function i(e){return r(a(o(e)))}function a(e){return c(l(s(e),8*e.length))}function r(e){for(var t,i=n?"0123456789ABCDEF":"0123456789abcdef",a="",r=0;r<e.length;r++)t=e.charCodeAt(r),a+=i.charAt(t>>>4&15)+i.charAt(15&t);return a}function o(e){var t,n,i="",a=-1;while(++a<e.length)t=e.charCodeAt(a),n=a+1<e.length?e.charCodeAt(a+1):0,55296<=t&&t<=56319&&56320<=n&&n<=57343&&(t=65536+((1023&t)<<10)+(1023&n),a++),t<=127?i+=String.fromCharCode(t):t<=2047?i+=String.fromCharCode(192|t>>>6&31,128|63&t):t<=65535?i+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):t<=2097151&&(i+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return i}function s(e){for(var t=Array(e.length>>2),n=0;n<t.length;n++)t[n]=0;for(n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<n%32;return t}function c(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>n%32&255);return t}function l(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n=1732584193,i=-271733879,a=-1732584194,r=271733878,o=0;o<e.length;o+=16){var s=n,c=i,l=a,u=r;n=d(n,i,a,r,e[o+0],7,-680876936),r=d(r,n,i,a,e[o+1],12,-389564586),a=d(a,r,n,i,e[o+2],17,606105819),i=d(i,a,r,n,e[o+3],22,-1044525330),n=d(n,i,a,r,e[o+4],7,-176418897),r=d(r,n,i,a,e[o+5],12,1200080426),a=d(a,r,n,i,e[o+6],17,-1473231341),i=d(i,a,r,n,e[o+7],22,-45705983),n=d(n,i,a,r,e[o+8],7,1770035416),r=d(r,n,i,a,e[o+9],12,-1958414417),a=d(a,r,n,i,e[o+10],17,-42063),i=d(i,a,r,n,e[o+11],22,-1990404162),n=d(n,i,a,r,e[o+12],7,1804603682),r=d(r,n,i,a,e[o+13],12,-40341101),a=d(a,r,n,i,e[o+14],17,-1502002290),i=d(i,a,r,n,e[o+15],22,1236535329),n=p(n,i,a,r,e[o+1],5,-165796510),r=p(r,n,i,a,e[o+6],9,-1069501632),a=p(a,r,n,i,e[o+11],14,643717713),i=p(i,a,r,n,e[o+0],20,-373897302),n=p(n,i,a,r,e[o+5],5,-701558691),r=p(r,n,i,a,e[o+10],9,38016083),a=p(a,r,n,i,e[o+15],14,-660478335),i=p(i,a,r,n,e[o+4],20,-405537848),n=p(n,i,a,r,e[o+9],5,568446438),r=p(r,n,i,a,e[o+14],9,-1019803690),a=p(a,r,n,i,e[o+3],14,-187363961),i=p(i,a,r,n,e[o+8],20,1163531501),n=p(n,i,a,r,e[o+13],5,-1444681467),r=p(r,n,i,a,e[o+2],9,-51403784),a=p(a,r,n,i,e[o+7],14,1735328473),i=p(i,a,r,n,e[o+12],20,-1926607734),n=f(n,i,a,r,e[o+5],4,-378558),r=f(r,n,i,a,e[o+8],11,-2022574463),a=f(a,r,n,i,e[o+11],16,1839030562),i=f(i,a,r,n,e[o+14],23,-35309556),n=f(n,i,a,r,e[o+1],4,-1530992060),r=f(r,n,i,a,e[o+4],11,1272893353),a=f(a,r,n,i,e[o+7],16,-155497632),i=f(i,a,r,n,e[o+10],23,-1094730640),n=f(n,i,a,r,e[o+13],4,681279174),r=f(r,n,i,a,e[o+0],11,-358537222),a=f(a,r,n,i,e[o+3],16,-722521979),i=f(i,a,r,n,e[o+6],23,76029189),n=f(n,i,a,r,e[o+9],4,-640364487),r=f(r,n,i,a,e[o+12],11,-421815835),a=f(a,r,n,i,e[o+15],16,530742520),i=f(i,a,r,n,e[o+2],23,-995338651),n=m(n,i,a,r,e[o+0],6,-198630844),r=m(r,n,i,a,e[o+7],10,1126891415),a=m(a,r,n,i,e[o+14],15,-1416354905),i=m(i,a,r,n,e[o+5],21,-57434055),n=m(n,i,a,r,e[o+12],6,1700485571),r=m(r,n,i,a,e[o+3],10,-1894986606),a=m(a,r,n,i,e[o+10],15,-1051523),i=m(i,a,r,n,e[o+1],21,-2054922799),n=m(n,i,a,r,e[o+8],6,1873313359),r=m(r,n,i,a,e[o+15],10,-30611744),a=m(a,r,n,i,e[o+6],15,-1560198380),i=m(i,a,r,n,e[o+13],21,1309151649),n=m(n,i,a,r,e[o+4],6,-145523070),r=m(r,n,i,a,e[o+11],10,-1120210379),a=m(a,r,n,i,e[o+2],15,718787259),i=m(i,a,r,n,e[o+9],21,-343485551),n=_(n,s),i=_(i,c),a=_(a,l),r=_(r,u)}return Array(n,i,a,r)}function u(e,t,n,i,a,r){return _(h(_(_(t,e),_(i,r)),a),n)}function d(e,t,n,i,a,r,o){return u(t&n|~t&i,e,t,a,r,o)}function p(e,t,n,i,a,r,o){return u(t&i|n&~i,e,t,a,r,o)}function f(e,t,n,i,a,r,o){return u(t^n^i,e,t,a,r,o)}function m(e,t,n,i,a,r,o){return u(n^(t|~i),e,t,a,r,o)}function _(e,t){var n=(65535&e)+(65535&t),i=(e>>16)+(t>>16)+(n>>16);return i<<16|65535&n}function h(e,t){return e<<t|e>>>32-t}return i}.call(t,n,t,e),void 0===i||(e.exports=i)},HNyW:function(e,t,n){var i=n("NC/Y");e.exports=/(iphone|ipod|ipad).*applewebkit/i.test(i)},HTq5:function(e,t,n){"use strict";var i=n("pevS"),a=n("39uu"),r=n("YiBS"),o=n("RQhY"),s=n("ZyXh"),c=n("pCEo"),l=n("bBVJ"),u=n("A2Ma"),d=n("nJYk"),p=n("MCtm"),f=d("slice"),m=p("slice",{ACCESSORS:!0,0:0,1:2}),_=u("species"),h=[].slice,g=Math.max;i({target:"Array",proto:!0,forced:!f||!m},{slice:function(e,t){var n,i,u,d=c(this),p=s(d.length),f=o(e,p),m=o(void 0===t?p:t,p);if(r(d)&&(n=d.constructor,"function"!=typeof n||n!==Array&&!r(n.prototype)?a(n)&&(n=n[_],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return h.call(d,f,m);for(i=new(void 0===n?Array:n)(g(m-f,0)),u=0;f<m;f++,u++)f in d&&l(i,u,d[f]);return i.length=u,i}})},HYAF:function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on "+e);return e}},HmPo:function(e,t,n){var i=n("Bvq2");e.exports=!!Object.getOwnPropertySymbols&&!i((function(){return!String(Symbol())}))},HnXd:function(e,t,n){e.exports=n("LT9b")},"I+eb":function(e,t,n){var i=n("2oRo"),a=n("Bs8V").f,r=n("kRJp"),o=n("busE"),s=n("zk60"),c=n("6JNq"),l=n("lMq5");e.exports=function(e,t){var n,u,d,p,f,m,_=e.target,h=e.global,g=e.stat;if(u=h?i:g?i[_]||s(_,{}):(i[_]||{}).prototype,u)for(d in t){if(f=t[d],e.noTargetGet?(m=a(u,d),p=m&&m.value):p=u[d],n=l(h?d:_+(g?".":"#")+d,e.forced),!n&&void 0!==p){if(typeof f===typeof p)continue;c(f,p)}(e.sham||p&&p.sham)&&r(f,"sham",!0),o(u,d,f,e)}}},I2R1:function(e,t,n){n("Dmep"),n("Pkew"),n("UUWy");var i=n("vuoM");e.exports=i.f("iterator")},I8vh:function(e,t,n){var i=n("ppGB"),a=Math.max,r=Math.min;e.exports=function(e,t){var n=i(e);return n<0?a(n+t,0):r(n,t)}},IBac:function(e,t,n){var i=n("G9WS");n("rB9j"),n("Rm1S"),n("UxlC");var a=i(n("rPUy")),r=i(n("Kwsy")),o=i(n("ZbhI")),s=n("JVDe"),c=(n("eBtS"),n("Bboc")),l=n("SaSm"),u=n("eS68"),d=n("ArO8"),p=c.IEVersion(),f=function(e){s.call(this,e),function(e){e._element.keydown((function(t){var n;if(e._options._entrusted&&e._options._entrust_keycodes&&e._options._entrust_keycodes.length&&(0,o.default)(n=e._options._entrust_keycodes).call(n,t.keyCode)>=0)return e.keyboard_output(t),t.stopPropagation(),void t.preventDefault();if(13===t.keyCode)if(t.ctrlKey){var i=e.get().msg.length;if(i>3&&"<br>"==e.get().msg.substring(i-4))e.update("<br>",{need_html_2:!0});else{var a=navigator.userAgent,s=/Safari/.test(navigator.userAgent)&&!/Chrome/.test(a);(0,o.default)(a).call(a,"Firefox")>-1||-1!==p||s?e.update("<br>",{need_html_2:!0}):e.update("<br><br>",{need_html_2:!0})}e.focus()}else{if(t.stopPropagation(),t.preventDefault(),0!=e.get().msg.length){var c=d.get("position"),l=c==u.CENTER?13:12;window.WMDA_REPORT&&window.WMDA_REPORT("custom",{event_id:l})}e._input.send()}else if(38==t.keyCode||40==t.keyCode)0!=e.get().msg.length&&t.stopPropagation();else if(8==t.keyCode){if(!window.getSelection)return;var f=window.getSelection();if(!f.isCollapsed||!f.rangeCount)return;var m=f.getRangeAt(f.rangeCount-1);if((0,r.default)((function(){e.inputChange(e.get().msg)}),0),3==m.commonAncestorContainer.nodeType&&m.startOffset>=0)return;var _=document.createRange();if(f.anchorNode!=this)_.selectNodeContents(this),_.setEndBefore(f.anchorNode);else{if(!(f.anchorOffset>0))return;_.setEnd(this,f.anchorOffset)}_.setStart(this,_.endOffset-1);var h=_.cloneContents().lastChild;h&&"false"==h.contentEditable&&(_.deleteContents(),t.preventDefault())}else(0,r.default)((function(){e.inputChange(e.get().msg)}),0)})),e._element.keyup((function(t){"<br>"===e.get().msg&&e.clear();var n=e.emotionToText(e.get().msg),i=n.length;0===i?e._input.hideSend():e._input.showSend();var a=e._input.getMaxInputLength();if(i>a){var r=i-a,s=Math.ceil(i/a),c="已超出"+r+"个字，将分为"+s+"条发出";e._input.showNotice(c)}else{var l;-1===(0,o.default)(l=[13,17]).call(l,t.keyCode)&&e._input.hideNotice()}})),e._element.click((function(){e._element[0].focus()})),e._element.on("paste",(function(t){t.preventDefault(),t.stopPropagation();var n=c.getClipboardData(t);n?("text"===n.type&&(c.insertHtmlAtCaret(l(n.content)),(0,r.default)((function(){e.inputChange(e.get().msg)}),0)),"file"===n.type&&e._input.previewImage(n.content)):e._input.showNotice("当前浏览器暂不支持粘贴!")}))}(this)};f.prototype=(0,a.default)(s.prototype),f.prototype.clear=function(){},f.prototype.get=function(){},f.prototype.update=function(e){},f.prototype.focus=function(){var e=this;c.setEndOfContenteditable(e._element[0]),e._element[0].focus()},f.prototype.setInput=function(e){return this._input=e},f.prototype.emotionToText=function(e){var t=[],n=/<img[^<]*(data=[\'\"]?([^\'\"]*)[\'\"]?).*?[^<]*>/gi,i=e.match(n);if(i){for(var a=0;a<i.length;a++)i[a].match(n)&&(t[a]=i[a].match(/data=[\'\"]?([^\'\"]*)[\'\"]?/i)[1]);var r=-1;e=e.replace(n,(function(e){return r++,e.replace(n,t[r])}))}return e},f.prototype.inputChange=function(e){},f.prototype.keyboardEntrust=function(){},f.prototype.keyboardEntrust=function(){this._options._entrusted=!0},f.prototype.keyboardUnEntrust=function(){this._options._entrusted=!1},f.prototype.keyboard_output=function(e){},e.exports=f},IZzc:function(e,t,n){"use strict";var i=n("67WC"),a=i.aTypedArray,r=i.exportTypedArrayMethod,o=[].sort;r("sort",(function(e){return o.call(a(this),e)}))},Ibh0:function(e,t,n){var i=n("pevS"),a=n("6dl6");i({target:"Function",proto:!0},{bind:a})},IjCq:function(e,t,n){var i=n("G9WS");n("sMBO"),n("rB9j"),n("UxlC");var a=i(n("/FZm")),r=i(n("rPUy")),o=i(n("ZbhI")),s=n("5m4N"),c=n("eBtS"),l=n("+LWe"),u=n("/Pub"),d=n("sfi9"),p=n("Bwsg"),f=n("QqFD"),m=n("MRo+"),_=n("+a4k"),h=n("ofWN"),g=n("05Kj"),v=n("fOAc"),y=n("CPVF"),w=n("k0EP"),b=n("VZgT"),x=n("EkzW"),S=n("c0ig"),k=n("4M3F"),E=n("VRhk"),C=n("Bboc"),A=n("Bboc"),O=A.isEmpty,T=A.ymdhFormat,M=A.jsonHandler,I=(n("l1Yk"),function(e,t){var n,i,a,r=e,s=-1!==(0,o.default)(n=p.name).call(n,"Safari"),c={minsize:100,maxsize:100,image_width:r.thumbnail_width,image_height:r.thumbnail_height,url:r.thumbnail_url&&-1===(0,o.default)(i=r.thumbnail_url).call(i,"data:")&&-1!==!(0,o.default)(a=r.thumbnail_url).call(a,"//")?r.thumbnail_url:E["default-card-img"]};if(s){var l,u=function(e){var t;e&&e.length>1&&-1==(0,o.default)(t=r.thumbnail_url).call(t,".mp4")?c.url=r.thumbnail_url:c.url=E["default-card-img"]},d=r.thumbnail_url;r.thumbnail_url&&(0,o.default)(l=r.thumbnail_url).call(l,"data:")>-1&&(d=r.thumbnail_url.replace("data:","")),u(d)}return c}),N=function(e,t){var n={minsize:100,maxsize:100,image_width:e.image_width,image_height:e.image_height,url:e.url},i=C.getImgParams(n);t.css({height:i.height+"px",width:i.width+"px","background-size":i.background_size,"background-image":"url("+i.url+")","background-repeat":"no-repeat"})},L=function(e){(function(t){var n={template:l,onImageClick:function(e){u.dispatch({type:d.IMAGE_CLICK,data:{images:e,current:0}})}};c.extend(n,e),s.call(t,n)})(this)};L.prototype=(0,r.default)(s.prototype),L.prototype.renderContent=function(){var e,t,n,i,r,s,l,p,C,A=this,L="",R="",P={},D={},j={};if(A._data.msg&&A._data.msg.content&&(D=A._data.msg.content),D&&D.msgs_preview&&D.msgs_preview.length&&(P=D.msgs_preview[0]&&D.msgs_preview[0].content?D.msgs_preview[0].content:{},C=D.msgs_preview[0]&&D.msgs_preview[0].avatar?D.msgs_preview[0].avatar:"","string"===typeof P))try{P=JSON.parse(P)}catch(ee){P={}}D&&D.msgs&&D.msgs.length&&(j=D.msgs[0]),D&&D.msgs_preview&&D.msgs_preview.length&&(p=D.msgs_preview[0]);var U,W,F,B,G,z,V=P.type;switch(!E["is_support_forward"]&&(0,o.default)(e=["msg_batch_forward_card"]).call(e,V)>=0&&(V=null),V){case"text":l=new f({}),R="im-msg-text";break;case"audio":L=c('<div class="im-msg-audio"><div class="im-msg-main"><span class="im-msg-content"></span><span class="im-msg-duration"></span><span class="im-msg-read-status im-audio-read"></span></div></div>');var H=(0,a.default)(L).call(L,".im-msg-main"),Y=(0,a.default)(L).call(L,".im-msg-duration"),q=15+5*P.duration,K=(0,a.default)(H).call(H,".im-msg-content");P.duration>=60?(K.addClass("im-audio-60"),q=280):P.duration>=30&&(K.addClass("im-audio-30"),q=200),q=q<=165?90:q,H.width(q),Y.text(P.duration+"秒");var J={msg_id:j.msg_id,content:P,status:"SUCCESS"},X=J.content.url;J.content.url=E["audio-converter"](X),J.content.oldUrl=X,H.click((function(){0===(0,a.default)(H).call(H,".im-audio-playing").length?u.dispatch({type:d.MSG_AUDIO_READ,data:J}):u.dispatch({type:d.MSG_AUDIO_READ_END,data:J})})),u.register((function(e){if(e.data&&e.type&&e.data.msg_id&&H)if(e.data.msg_id===J.msg_id)switch(e.type){case d.MSG_AUDIO_ACK_READ:(0,a.default)(H).call(H,".im-msg-read-status").addClass("im-audio-read");break;case d.MSG_AUDIO_READ_START:(0,a.default)(H).call(H,".im-msg-content").addClass("im-audio-playing");break;case d.MSG_AUDIO_READ_END:(0,a.default)(H).call(H,".im-msg-content").removeClass("im-audio-playing");break;default:break}else e.type===d.MSG_AUDIO_READ_START&&(0,a.default)(H).call(H,".im-msg-content").removeClass("im-audio-playing")}));break;case"image":L=c('<div class="im-msg-remind-image"></div>'),N.call(A,P,L),L.click((function(){A._options.onImageClick([{src:P.url,image_width:P.image_width,image_height:P.image_height}])}));break;case"video":var Z="video"===V?"视频":"语音";if(document.createElement("video").canPlayType){L=c('<div class="im-msg-remind-video"><img class="im-msg-remind-video-cover"><a href="javascript:;" class="im-msg-remind-video-btn"></a></div>');var Q=I.call(A,P,L);(0,a.default)(L).call(L,".im-msg-remind-video-cover").attr("src",Q.url),L.css("max-width",100*Q.image_width/Q.image_height);var $=(0,a.default)(L).call(L,".im-msg-remind-video-btn");$.click((function(){O(p.to_source)||u.dispatch({type:d.VIDEO_PLAY,data:{content:P,to_source:p.to_source}})}))}else L="浏览器版本不支持"+Z+"播放，请升级浏览器";break;case"file":l=new m({}),R="im-msg-file";break;case"audio":l=new _({}),R="im-msg-audio";break;case"card":l=new h({}),R="im-msg-card";break;case"minicard":case"universal_card2":l=new b({}),R="im-msg-minicard";break;case"mix":case"universal_card1":case"universal_card3":l=new x({}),R="im-msg-mix";break;case"universal_card4":l=new g({}),R="im-msg-card im-msg-card4";break;case"universal_card5":l=new v({}),R="im-msg-mix im-msg-card5";break;case"universal_card6":l=new S({}),R="im-msg-mutual";break;case"private_card_ganji":l=new y({}),R="im-msg-mix im-msg-card5 im-msg-ganji";break;case"wuba_card":l=new w({}),R="im-msg-job";break;case"msg_batch_forward_card":l=new k({}),R="im-msg-batch-card";break;default:L="消息格式暂不支持，请在客户端查看";break}if(!O(l))switch(l.setMsg({msg_id:j.msg_id,sender_id:j.sender_id,sender_source:j.sender_source,to_id:j.to_id,to_source:p.to_source,content:P,status:"SUCCESS"}),L=c('<div class="im-msg-remind-card ${msg-class}"><div class="im-msg-main"></div></div>'.replace("${msg-class}",R)),V){case"audio":(0,a.default)(L).call(L,".im-msg-main").html((0,a.default)(t=l.getElement()).call(t,".im-msg-main"));break;case"msg_batch_forward_card":(0,a.default)(n=l.getElement()).call(n,".im-msg-content").unbind("click"),(0,a.default)(i=l.getElement()).call(i,".im-msg-content").click((function(e){e.stopPropagation();var t=A._data.msg;webimbiz.getForwardMsg({forward_msg_id:t.msg_id,forward_sender_id:t.sender_id,forward_sender_source:t.sender_source,forward_to_id:t.to_id,forward_to_source:t.to_source,msgs:[D.msgs[0].msg_id]},(function(n){var i=n&&n.length?n[0]:null;if(i){try{i.content=M.parse(i.content)}catch(e){}i.msg_id=t.forward_msg_id?t.forward_msg_id:t.msg_id,i.sender_id=t.sender_id,i.sender_source=t.sender_source,i.to_id=t.to_id,i.to_source=t.to_source,l.handleMsgClick.apply(A,[i])}}),(function(){}))})),(0,a.default)(L).call(L,".im-msg-main").html((0,a.default)(r=l.getElement()).call(r,".im-msg-content"));break;default:(0,a.default)(L).call(L,".im-msg-main").html((0,a.default)(s=l.getElement()).call(s,".im-msg-content"));break}O(L)||(0,a.default)(U=this._element).call(U,".im-msg-content .im-msg-remind-content").html(L);D&&((0,a.default)(W=this._element).call(W,".im-msg-remind-title .im-msg-remind-text").html(D.card_title).show(),C&&(0,a.default)(F=this._element).call(F,".im-msg-remind-avatar img").attr("src",C).show(),(0,a.default)(B=this._element).call(B,".im-msg-remind-time .im-msg-remind-text").html(T(1e3*D.runtime+(isNaN(D.tasktime)?0:1e3*D.tasktime))),(0,a.default)(G=this._element).call(G,".im-msg-remind-words .im-msg-remind-text").html(D.comment),(0,a.default)(z=this._element).call(z,".im-msg-remind-avatar").css("background"))},e.exports=L},Ijsr:function(e,t,n){var i=n("YqT+"),a=Array.prototype;e.exports=function(e){var t=e.sort;return e===a||e instanceof Array&&t===a.sort?i:t}},ImZN:function(e,t,n){var i=n("glrk"),a=n("6VoE"),r=n("UMSQ"),o=n("A2ZE"),s=n("NaFW"),c=n("KmKo"),l=function(e,t){this.stopped=e,this.result=t};e.exports=function(e,t,n){var u,d,p,f,m,_,h,g=n&&n.that,v=!(!n||!n.AS_ENTRIES),y=!(!n||!n.IS_ITERATOR),w=!(!n||!n.INTERRUPTED),b=o(t,g,1+v+w),x=function(e){return u&&c(u),new l(!0,e)},S=function(e){return v?(i(e),w?b(e[0],e[1],x):b(e[0],e[1])):w?b(e,x):b(e)};if(y)u=e;else{if(d=s(e),"function"!=typeof d)throw TypeError("Target is not iterable");if(a(d)){for(p=0,f=r(e.length);f>p;p++)if(m=S(e[p]),m&&m instanceof l)return m;return new l(!1)}u=d.call(e)}_=u.next;while(!(h=_.call(u)).done){try{m=S(h.value)}catch(k){throw c(u),k}if("object"==typeof m&&m&&m instanceof l)return m}return new l(!1)}},IqmU:function(e,t,n){var i=n("m/sp");i("hasInstance")},Itcm:function(e,t,n){var i=n("G9WS"),a=i(n("D3kx")),r=i(n("rPUy")),o=i(n("eLKs")),s=i(n("/FZm"));n("S0Ae");var c=n("JVDe"),l=n("eBtS"),u=n("qOEq"),d=38,p=function(){return this._windowheight>0||(this._windowheight=this._window.outerHeight()),this._windowheight},f=function(e,t,n){var i=this._content.outerHeight(),a=p.call(this),r=i-a;e=e<=r?e:r,e=e>=0?e:0,t?this._content.stop().animate({marginTop:-e+"px"},d):this._content.stop().css({"margin-top":-e+"px"});var o=e/(i-a),s=(1-this._wheelheight)*o;n?this._wheel.stop().animate({top:100*s+"%"},d):this._wheel.stop().css({top:100*s+"%"}),this.triggerEvent("scrolled",e)},m=function(e){(function(t){var n,i,a={template:u,window:null,content:null};l.extend(a,e),c.call(t,a),t._windowheight=0,t._minwheelheight=0,t._wheelheight,t._window=t._options.window,t._content=t._options.content,t._rail=(0,s.default)(n=t._element).call(n,".im-scrollbar-rail"),t._wheel=(0,s.default)(i=t._element).call(i,".im-scrollbar-wheel")})(this),function(e){e._window.mouseenter((function(){e._element.addClass("im-hover")})),e._window.mouseleave((function(){e._element.removeClass("im-hover")}))}(this),function(e){var t,n=function(n){if(null!==t){var i=n.pageY-t,a=e._rail.height(),r=e._content.outerHeight(),o=r*i/a;e.scroll(o,!1,!1),t=n.pageY,n.preventDefault()}else t=n.pageY};e._wheel.mousedown((function(){var i;t=null;e._rail.outerHeight(),e._content.outerHeight();(0,o.default)(i=l(window)).call(i,"mousemove",n),e._window.addClass("im-scrolling"),e._element.addClass("im-draging")})),l(window).mouseup((function(){l(window).unbind("mousemove",n),e._window.removeClass("im-scrolling"),e._element&&e._element.removeClass("im-draging")}))}(this),function(e){e._window.mousewheel((function(t){window.requestAnimationFrame((function(){e.scroll(-t.deltaFactor*t.deltaY,!1,!1)})),t.preventDefault()}))}(this)};m.prototype=(0,r.default)(c.prototype),m.prototype.init=function(){this._minwheelheight=.5,this._element&&this._element.addClass("im-inited")},m.prototype.calHeight=function(){var e=this._content.outerHeight(),t=p.call(this);if(!(e<=t)){var n=t/e;n=n>=this._minwheelheight?n:this._minwheelheight,this._wheel.css({height:100*n+"%"}),this._wheelheight=n}},m.prototype.scroll=function(e,t,n){var i=this._content.css("margin-top"),r=-(0,a.default)(i);f.call(this,r+e,t,n)},m.prototype.scrollToTop=function(e,t){f.call(this,0,e,t)},m.prototype.scrollToBottom=function(e,t){var n=this._content.outerHeight(),i=p.call(this);n>i&&f.call(this,n-i,e,t)},m.prototype.resetWindowHeight=function(){this._windowheight=this._window.outerHeight()},e.exports=m},J04u:function(e,t,n){var i=n("m/sp");i("split")},J6x8:function(e,t,n){var i=n("9Mno");e.exports=i},J712:function(e,t,n){n("pVHv");var i=n("dktu"),a=i.Object;e.exports=function(e){return a.getOwnPropertyNames(e)}},J9Gg:function(e,t,n){var i=n("vFlH");e.exports=i},JBne:function(e,t,n){n("jFqN"),n("b4mI"),n("Pkew"),n("UUWy");var i=n("dktu");e.exports=i.Set},JBy8:function(e,t,n){var i=n("yoRg"),a=n("eDl+"),r=a.concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},JLQQ:function(e,t,n){n("UUWy");var i=n("vA1p"),a=n("j5XY"),r=Array.prototype,o={DOMTokenList:!0,NodeList:!0};e.exports=function(e){var t=e.forEach;return e===r||e instanceof Array&&t===r.forEach||o.hasOwnProperty(a(e))?i:t}},JVDe:function(e,t,n){var i=n("G9WS"),a=i(n("rPUy")),r=n("eBtS"),o=n("80UC"),s=function(e){o.call(this),this._element=null,this._data={},this._children={},this._options=e,this._show=!0,function(e){e._options.template&&(e._element=r(e._options.template))}(this)};s.prototype=(0,a.default)(o.prototype),s.prototype.show=function(){this._show=!0,this._element.show()},s.prototype.hide=function(){this._show=!1,this._element.hide()},s.prototype.getElement=function(){return this._element},s.prototype.setData=function(e){r.extend(this._data,e),this.render()},s.prototype.render=function(){},s.prototype.destroy=function(){r.each(this._children,(function(e,t){t&&t.destroy()})),this._children={},this._element.remove(),this._element=null,this._data=null,this._options=null},s.prototype.before=function(e){e instanceof s!==!1&&this._element.before(e.getElement())},s.prototype.after=function(e){e instanceof s!==!1&&this._element.after(e.getElement())},s.prototype.width=function(){return this._element.outerWidth()},s.prototype.height=function(){return this._element.outerHeight()},e.exports=s},JY0F:function(e,t,n){var i,a,r=n("G9WS"),o=r(n("lHQ6")),s=r(n("M5Mt")),c=r(n("Kwsy")),l=r(n("WxoT")),u=r(n("ZbhI")),d=n("eBtS"),p=1,f="",m="",_="",h="",g="wmda",v="",y="//reportwmda.58.com/get_deviceid",w="//reportwmda.58.com/appreport",b=[],x=function(e){var t,n;if(0===document.cookie.length)return null;var i=(0,u.default)(t=document.cookie).call(t,e+"=");if(-1===i)return null;i=i+e.length+1;var a=(0,u.default)(n=document.cookie).call(n,";",i);return-1===a&&(a=document.cookie.length),document.cookie.substring(i,a)},S=function(e,t){var n=365,i=new Date;i.setDate(i.getDate()+n),document.cookie=e+"="+t+";expires="+i.toGMTString()},k=function(e){d.ajax({url:y,type:"GET",dataType:"jsonp",data:{device:(0,l.default)({appid:m,info:{appver:f,brand:"browser",devtmodel:"",imei:"",ip:"",location:{},mac:"",osver:"",pn:v},version:p}),Authorization:_},success:function(t){0==t.msgcode&&e(t.devid)},error:function(e,t,n){},complete:function(e,t){}})},E=function(e){var t=g,n=x(t);if(n&&n.length>0)return e(n);k((function(n){S(t,n),e(n)}))},C=function(e,t,n){d.ajax({url:w,type:"GET",dataType:"jsonp",data:{report:(0,l.default)({appid:m,devid:h,events:e,version:p}),Authorization:_},success:function(){t&&t()},error:function(){n&&n()},complete:function(e,t){}})},A=function(){var e=function(){var t=0;return function(){(0,c.default)((function(){b&&b.length>=a?C(b,(function(){(0,s.default)(b).call(b,0,b.length),e()}),(function(){e()})):(t++,t>=i&&b&&b.length>0?C(b,(function(){(0,s.default)(b).call(b,0,b.length),e(),t=0}),(function(){e()})):e())}),1e3)}}();e()},O={init:function(e){f=e.appversion,m=e.appid,_=e.appkey,g=e.cookiename,v=e.pn,i=e.reportIntervalTime,a=e.reportIntervalCount,E((function(e){h=e})),A(),window.onbeforeunload=function(){h&&h.length>0&&b.length>0&&C(b,(function(){(0,s.default)(b).call(b,0,b.length)}),(function(){(0,s.default)(b).call(b,0,b.length)}))}},report:function(e){h&&0!=h.length?b.push({id:e,time:(0,o.default)((new Date).getTime()/1e3)+""}):E((function(t){h=t,b.push({id:e,time:(0,o.default)((new Date).getTime()/1e3)+""})}))}};e.exports=O},JaFt:function(e,t,n){"use strict";var i=n("67WC"),a=n("1Y/n").right,r=i.aTypedArray,o=i.exportTypedArrayMethod;o("reduceRight",(function(e){return a(r(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},JfAA:function(e,t,n){"use strict";var i=n("busE"),a=n("glrk"),r=n("0Dky"),o=n("rW0t"),s="toString",c=RegExp.prototype,l=c[s],u=r((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),d=l.name!=s;(u||d)&&i(RegExp.prototype,s,(function(){var e=a(this),t=String(e.source),n=e.flags,i=String(void 0===n&&e instanceof RegExp&&!("flags"in c)?o.call(e):n);return"/"+t+"/"+i}),{unsafe:!0})},JhaV:function(e,t,n){var i=n("A2Ma"),a=n("dGO/"),r=i("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(a.Array===e||o[r]===e)}},JiZb:function(e,t,n){"use strict";var i=n("0GbY"),a=n("m/L8"),r=n("tiKp"),o=n("g6v/"),s=r("species");e.exports=function(e){var t=i(e),n=a.f;o&&t&&!t[s]&&n(t,s,{configurable:!0,get:function(){return this}})}},Jm8n:function(e,t,n){var i=n("m/sp");i("patternMatch")},Jqo0:function(e,t,n){n("/JNE");var i=n("oWnS");e.exports=i("Array").concat},"K/py":function(e,t,n){var i=n("G9WS");n("sMBO");var a=i(n("rPUy")),r=i(n("Kwsy")),o=i(n("/FZm")),s=n("JVDe"),c=n("eBtS"),l=n("hfGx"),u=n("Oiu0"),d=n("Itcm"),p=n("FdpG"),f=function(e){(function(t){var n={template:l};c.extend(n,e),s.call(t,n)})(this),function(e){var t,n,i,a,s=new u({is_group:!0});(0,o.default)(t=e._element).call(t,".im-contact-group-detail-body").append(s.getElement()),e._children["session-list"]=s;var c=new d({window:(0,o.default)(n=e._element).call(n,".im-contact-group-detail-body"),content:(0,o.default)(i=e._element).call(i,".im-session-list")});(0,o.default)(a=e._element).call(a,".im-contact-group-detail-body").append(c.getElement()),e._children["scrollbar"]=c,c.addEventListener("scrolled",(function(t){var n,i,a=(0,o.default)(n=e.getElement()).call(n,".im-contact-group-detail-body").height(),r=(0,o.default)(i=e.getElement()).call(i,".im-session-list").height();if(r<a)return!1;r-a-t<=5&&e._children["session-list"].addLoading()})),(0,r.default)((function(){c.init(),c.calHeight()}),0)}(this),function(e){var t;(0,o.default)(t=e._element).call(t,".im-backto-contactlist").click((function(){e.triggerEvent("return",e._data)}))}(this)};f.prototype=(0,a.default)(s.prototype),f.prototype.render=function(){var e,t,n=this;if(this._data.session){var i=this._data.session;if(i.group){var a=this._data.session.group;(0,o.default)(e=this._element).call(e,".im-contact-group-msg").text(a.name);var r=this._data.session.msg,s=r?p(r.send_time):"";(0,o.default)(t=this._element).call(t,".im-contact-group-time").text(s),this._children["session-list"].empty(),this._children["session-list"].setSessions(i.children,(function(){n._children["scrollbar"]&&n._children["scrollbar"].calHeight()}))}}},f.prototype.setSession=function(e){this.setData({session:e})},e.exports=f},KHTo:function(e,t,n){var i=n("1jut"),a=n("QYBB").f,r=n("AnMC"),o=n("eOcF"),s=n("HAoi"),c=n("A2Ma"),l=c("toStringTag");e.exports=function(e,t,n,c){if(e){var u=n?e:e.prototype;o(u,l)||a(u,l,{configurable:!0,value:t}),c&&!i&&r(u,"toString",s)}}},KO0j:function(e,t,n){var i=n("ZWPS");e.exports=i},KVSy:function(e,t,n){"use strict";var i=n("67WC"),a=n("SEBh"),r=n("0Dky"),o=i.aTypedArray,s=i.aTypedArrayConstructor,c=i.exportTypedArrayMethod,l=[].slice,u=r((function(){new Int8Array(1).slice()}));c("slice",(function(e,t){var n=l.call(o(this),e,t),i=a(this,this.constructor),r=0,c=n.length,u=new(s(i))(c);while(c>r)u[r]=n[r++];return u}),u)},KYsz:function(e,t,n){e.exports=n("fHRf")},Kbbi:function(e,t){var n='<li class="im-msg im-msg-evaluate2"> <div class=im-msg-time></div> <div class=im-msg-checkbox></div> <div class=im-msg-evaluate2-main> <div class="im-msg-content im-evaluate2-content"> <div class=title-content> <div class=im-evaluate2-title></div> <div class=im-evaluate2-title2></div> </div> <div class=im-evaluate2Card-content> <div class=smile-content></div> <div class=star-content></div> <div class=tag-content></div> <div class=input-content style=display:none><input type=text class=im-evaluate2-input placeholder=我还有话说 /></div> <div class=send-content>提交</div> </div> </div> </div> <div class=im-msg-collect-name></div> <div class=im-msg-collect-time></div> <div class=im-msg-feedback> <div class=im-msg-feedback-container> <span class=im-msg-feedback-icon></span> <span class=im-msg-feedback-content></span> </div> </div> </li>';e.exports=n},KcAw:function(e,t,n){var i=n("G9WS");n("rB9j"),n("UxlC");var a=i(n("/FZm")),r=i(n("RXMP")),o=i(n("rPUy")),s=n("eBtS"),c=n("JVDe"),l=n("qPNw"),u=n("Bboc"),d=u.isEmpty,p=function(e){(function(t){var n={template:l,selection:'<div class="im-multiple-selection" data-index=${index}><div class="multiple-selection-icon"><i class="multiple-selection-icon-${icon}"/></div><div class="multiple-selection-text">${text}</div></div>'};s.extend(n,e),c.call(t,n)})(this),function(e){e._element.click((function(t){var n,i=s(t.target);"DIV"!=t.target.tagName&&"I"!=t.target.tagName||(i.parent().hasClass("multiple-selection-icon")&&(i=i.parent()),i.parent().hasClass("im-multiple-selection")&&(i=i.parent()),i.hasClass("im-multiple-selection")?(n=i.data("index"),!d(n)&&e._data.selections&&e._data.selections[n]&&e.triggerEvent("click",{action:e._data.selections[n].action})):i.hasClass("im-multiple-close")&&e.triggerEvent("click",{action:"multipleMenuClose"}))}))}(this)};p.prototype=(0,o.default)(c.prototype),p.prototype.render=function(){var e,t=this._data.selections||[],n="",i=this;(0,r.default)(t).call(t,(function(e,t){e&&(n+=i._options.selection.replace("${text}",e.text).replace("${icon}",e.icon).replace("${index}",t))})),(0,a.default)(e=this._element).call(e,".im-multiple-selections").html(n)},p.prototype.show=function(e){c.prototype.show.call(this)},p.prototype.hide=function(){c.prototype.hide.call(this)},e.exports=p},KmKo:function(e,t,n){var i=n("glrk");e.exports=function(e){var t=e["return"];if(void 0!==t)return i(t.call(e)).value}},Kwsy:function(e,t,n){e.exports=n("br0Y")},Kxu3:function(e,t,n){var i=n("BP/7");e.exports=i},Kz25:function(e,t,n){"use strict";n("PKPk");var i,a=n("I+eb"),r=n("g6v/"),o=n("DTth"),s=n("2oRo"),c=n("N+g0"),l=n("busE"),u=n("GarU"),d=n("UTVS"),p=n("YNrV"),f=n("TfTi"),m=n("ZUd8").codeAt,_=n("X7LM"),h=n("1E5z"),g=n("mGGf"),v=n("afO8"),y=s.URL,w=g.URLSearchParams,b=g.getState,x=v.set,S=v.getterFor("URL"),k=Math.floor,E=Math.pow,C="Invalid authority",A="Invalid scheme",O="Invalid host",T="Invalid port",M=/[A-Za-z]/,I=/[\d+-.A-Za-z]/,N=/\d/,L=/^(0x|0X)/,R=/^[0-7]+$/,P=/^\d+$/,D=/^[\dA-Fa-f]+$/,j=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/,U=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/,W=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g,F=/[\u0009\u000A\u000D]/g,B=function(e,t){var n,i,a;if("["==t.charAt(0)){if("]"!=t.charAt(t.length-1))return O;if(n=z(t.slice(1,-1)),!n)return O;e.host=n}else if(Q(e)){if(t=_(t),j.test(t))return O;if(n=G(t),null===n)return O;e.host=n}else{if(U.test(t))return O;for(n="",i=f(t),a=0;a<i.length;a++)n+=X(i[a],Y);e.host=n}},G=function(e){var t,n,i,a,r,o,s,c=e.split(".");if(c.length&&""==c[c.length-1]&&c.pop(),t=c.length,t>4)return e;for(n=[],i=0;i<t;i++){if(a=c[i],""==a)return e;if(r=10,a.length>1&&"0"==a.charAt(0)&&(r=L.test(a)?16:8,a=a.slice(8==r?1:2)),""===a)o=0;else{if(!(10==r?P:8==r?R:D).test(a))return e;o=parseInt(a,r)}n.push(o)}for(i=0;i<t;i++)if(o=n[i],i==t-1){if(o>=E(256,5-t))return null}else if(o>255)return null;for(s=n.pop(),i=0;i<n.length;i++)s+=n[i]*E(256,3-i);return s},z=function(e){var t,n,i,a,r,o,s,c=[0,0,0,0,0,0,0,0],l=0,u=null,d=0,p=function(){return e.charAt(d)};if(":"==p()){if(":"!=e.charAt(1))return;d+=2,l++,u=l}while(p()){if(8==l)return;if(":"!=p()){t=n=0;while(n<4&&D.test(p()))t=16*t+parseInt(p(),16),d++,n++;if("."==p()){if(0==n)return;if(d-=n,l>6)return;i=0;while(p()){if(a=null,i>0){if(!("."==p()&&i<4))return;d++}if(!N.test(p()))return;while(N.test(p())){if(r=parseInt(p(),10),null===a)a=r;else{if(0==a)return;a=10*a+r}if(a>255)return;d++}c[l]=256*c[l]+a,i++,2!=i&&4!=i||l++}if(4!=i)return;break}if(":"==p()){if(d++,!p())return}else if(p())return;c[l++]=t}else{if(null!==u)return;d++,l++,u=l}}if(null!==u){o=l-u,l=7;while(0!=l&&o>0)s=c[l],c[l--]=c[u+o-1],c[u+--o]=s}else if(8!=l)return;return c},V=function(e){for(var t=null,n=1,i=null,a=0,r=0;r<8;r++)0!==e[r]?(a>n&&(t=i,n=a),i=null,a=0):(null===i&&(i=r),++a);return a>n&&(t=i,n=a),t},H=function(e){var t,n,i,a;if("number"==typeof e){for(t=[],n=0;n<4;n++)t.unshift(e%256),e=k(e/256);return t.join(".")}if("object"==typeof e){for(t="",i=V(e),n=0;n<8;n++)a&&0===e[n]||(a&&(a=!1),i===n?(t+=n?":":"::",a=!0):(t+=e[n].toString(16),n<7&&(t+=":")));return"["+t+"]"}return e},Y={},q=p({},Y,{" ":1,'"':1,"<":1,">":1,"`":1}),K=p({},q,{"#":1,"?":1,"{":1,"}":1}),J=p({},K,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),X=function(e,t){var n=m(e,0);return n>32&&n<127&&!d(t,e)?e:encodeURIComponent(e)},Z={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Q=function(e){return d(Z,e.scheme)},$=function(e){return""!=e.username||""!=e.password},ee=function(e){return!e.host||e.cannotBeABaseURL||"file"==e.scheme},te=function(e,t){var n;return 2==e.length&&M.test(e.charAt(0))&&(":"==(n=e.charAt(1))||!t&&"|"==n)},ne=function(e){var t;return e.length>1&&te(e.slice(0,2))&&(2==e.length||"/"===(t=e.charAt(2))||"\\"===t||"?"===t||"#"===t)},ie=function(e){var t=e.path,n=t.length;!n||"file"==e.scheme&&1==n&&te(t[0],!0)||t.pop()},ae=function(e){return"."===e||"%2e"===e.toLowerCase()},re=function(e){return e=e.toLowerCase(),".."===e||"%2e."===e||".%2e"===e||"%2e%2e"===e},oe={},se={},ce={},le={},ue={},de={},pe={},fe={},me={},_e={},he={},ge={},ve={},ye={},we={},be={},xe={},Se={},ke={},Ee={},Ce={},Ae=function(e,t,n,a){var r,o,s,c,l=n||oe,u=0,p="",m=!1,_=!1,h=!1;n||(e.scheme="",e.username="",e.password="",e.host=null,e.port=null,e.path=[],e.query=null,e.fragment=null,e.cannotBeABaseURL=!1,t=t.replace(W,"")),t=t.replace(F,""),r=f(t);while(u<=r.length){switch(o=r[u],l){case oe:if(!o||!M.test(o)){if(n)return A;l=ce;continue}p+=o.toLowerCase(),l=se;break;case se:if(o&&(I.test(o)||"+"==o||"-"==o||"."==o))p+=o.toLowerCase();else{if(":"!=o){if(n)return A;p="",l=ce,u=0;continue}if(n&&(Q(e)!=d(Z,p)||"file"==p&&($(e)||null!==e.port)||"file"==e.scheme&&!e.host))return;if(e.scheme=p,n)return void(Q(e)&&Z[e.scheme]==e.port&&(e.port=null));p="","file"==e.scheme?l=ye:Q(e)&&a&&a.scheme==e.scheme?l=le:Q(e)?l=fe:"/"==r[u+1]?(l=ue,u++):(e.cannotBeABaseURL=!0,e.path.push(""),l=ke)}break;case ce:if(!a||a.cannotBeABaseURL&&"#"!=o)return A;if(a.cannotBeABaseURL&&"#"==o){e.scheme=a.scheme,e.path=a.path.slice(),e.query=a.query,e.fragment="",e.cannotBeABaseURL=!0,l=Ce;break}l="file"==a.scheme?ye:de;continue;case le:if("/"!=o||"/"!=r[u+1]){l=de;continue}l=me,u++;break;case ue:if("/"==o){l=_e;break}l=Se;continue;case de:if(e.scheme=a.scheme,o==i)e.username=a.username,e.password=a.password,e.host=a.host,e.port=a.port,e.path=a.path.slice(),e.query=a.query;else if("/"==o||"\\"==o&&Q(e))l=pe;else if("?"==o)e.username=a.username,e.password=a.password,e.host=a.host,e.port=a.port,e.path=a.path.slice(),e.query="",l=Ee;else{if("#"!=o){e.username=a.username,e.password=a.password,e.host=a.host,e.port=a.port,e.path=a.path.slice(),e.path.pop(),l=Se;continue}e.username=a.username,e.password=a.password,e.host=a.host,e.port=a.port,e.path=a.path.slice(),e.query=a.query,e.fragment="",l=Ce}break;case pe:if(!Q(e)||"/"!=o&&"\\"!=o){if("/"!=o){e.username=a.username,e.password=a.password,e.host=a.host,e.port=a.port,l=Se;continue}l=_e}else l=me;break;case fe:if(l=me,"/"!=o||"/"!=p.charAt(u+1))continue;u++;break;case me:if("/"!=o&&"\\"!=o){l=_e;continue}break;case _e:if("@"==o){m&&(p="%40"+p),m=!0,s=f(p);for(var g=0;g<s.length;g++){var v=s[g];if(":"!=v||h){var y=X(v,J);h?e.password+=y:e.username+=y}else h=!0}p=""}else if(o==i||"/"==o||"?"==o||"#"==o||"\\"==o&&Q(e)){if(m&&""==p)return C;u-=f(p).length+1,p="",l=he}else p+=o;break;case he:case ge:if(n&&"file"==e.scheme){l=be;continue}if(":"!=o||_){if(o==i||"/"==o||"?"==o||"#"==o||"\\"==o&&Q(e)){if(Q(e)&&""==p)return O;if(n&&""==p&&($(e)||null!==e.port))return;if(c=B(e,p),c)return c;if(p="",l=xe,n)return;continue}"["==o?_=!0:"]"==o&&(_=!1),p+=o}else{if(""==p)return O;if(c=B(e,p),c)return c;if(p="",l=ve,n==ge)return}break;case ve:if(!N.test(o)){if(o==i||"/"==o||"?"==o||"#"==o||"\\"==o&&Q(e)||n){if(""!=p){var w=parseInt(p,10);if(w>65535)return T;e.port=Q(e)&&w===Z[e.scheme]?null:w,p=""}if(n)return;l=xe;continue}return T}p+=o;break;case ye:if(e.scheme="file","/"==o||"\\"==o)l=we;else{if(!a||"file"!=a.scheme){l=Se;continue}if(o==i)e.host=a.host,e.path=a.path.slice(),e.query=a.query;else if("?"==o)e.host=a.host,e.path=a.path.slice(),e.query="",l=Ee;else{if("#"!=o){ne(r.slice(u).join(""))||(e.host=a.host,e.path=a.path.slice(),ie(e)),l=Se;continue}e.host=a.host,e.path=a.path.slice(),e.query=a.query,e.fragment="",l=Ce}}break;case we:if("/"==o||"\\"==o){l=be;break}a&&"file"==a.scheme&&!ne(r.slice(u).join(""))&&(te(a.path[0],!0)?e.path.push(a.path[0]):e.host=a.host),l=Se;continue;case be:if(o==i||"/"==o||"\\"==o||"?"==o||"#"==o){if(!n&&te(p))l=Se;else if(""==p){if(e.host="",n)return;l=xe}else{if(c=B(e,p),c)return c;if("localhost"==e.host&&(e.host=""),n)return;p="",l=xe}continue}p+=o;break;case xe:if(Q(e)){if(l=Se,"/"!=o&&"\\"!=o)continue}else if(n||"?"!=o)if(n||"#"!=o){if(o!=i&&(l=Se,"/"!=o))continue}else e.fragment="",l=Ce;else e.query="",l=Ee;break;case Se:if(o==i||"/"==o||"\\"==o&&Q(e)||!n&&("?"==o||"#"==o)){if(re(p)?(ie(e),"/"==o||"\\"==o&&Q(e)||e.path.push("")):ae(p)?"/"==o||"\\"==o&&Q(e)||e.path.push(""):("file"==e.scheme&&!e.path.length&&te(p)&&(e.host&&(e.host=""),p=p.charAt(0)+":"),e.path.push(p)),p="","file"==e.scheme&&(o==i||"?"==o||"#"==o))while(e.path.length>1&&""===e.path[0])e.path.shift();"?"==o?(e.query="",l=Ee):"#"==o&&(e.fragment="",l=Ce)}else p+=X(o,K);break;case ke:"?"==o?(e.query="",l=Ee):"#"==o?(e.fragment="",l=Ce):o!=i&&(e.path[0]+=X(o,Y));break;case Ee:n||"#"!=o?o!=i&&("'"==o&&Q(e)?e.query+="%27":e.query+="#"==o?"%23":X(o,Y)):(e.fragment="",l=Ce);break;case Ce:o!=i&&(e.fragment+=X(o,q));break}u++}},Oe=function(e){var t,n,i=u(this,Oe,"URL"),a=arguments.length>1?arguments[1]:void 0,o=String(e),s=x(i,{type:"URL"});if(void 0!==a)if(a instanceof Oe)t=S(a);else if(n=Ae(t={},String(a)),n)throw TypeError(n);if(n=Ae(s,o,null,t),n)throw TypeError(n);var c=s.searchParams=new w,l=b(c);l.updateSearchParams(s.query),l.updateURL=function(){s.query=String(c)||null},r||(i.href=Me.call(i),i.origin=Ie.call(i),i.protocol=Ne.call(i),i.username=Le.call(i),i.password=Re.call(i),i.host=Pe.call(i),i.hostname=De.call(i),i.port=je.call(i),i.pathname=Ue.call(i),i.search=We.call(i),i.searchParams=Fe.call(i),i.hash=Be.call(i))},Te=Oe.prototype,Me=function(){var e=S(this),t=e.scheme,n=e.username,i=e.password,a=e.host,r=e.port,o=e.path,s=e.query,c=e.fragment,l=t+":";return null!==a?(l+="//",$(e)&&(l+=n+(i?":"+i:"")+"@"),l+=H(a),null!==r&&(l+=":"+r)):"file"==t&&(l+="//"),l+=e.cannotBeABaseURL?o[0]:o.length?"/"+o.join("/"):"",null!==s&&(l+="?"+s),null!==c&&(l+="#"+c),l},Ie=function(){var e=S(this),t=e.scheme,n=e.port;if("blob"==t)try{return new URL(t.path[0]).origin}catch(i){return"null"}return"file"!=t&&Q(e)?t+"://"+H(e.host)+(null!==n?":"+n:""):"null"},Ne=function(){return S(this).scheme+":"},Le=function(){return S(this).username},Re=function(){return S(this).password},Pe=function(){var e=S(this),t=e.host,n=e.port;return null===t?"":null===n?H(t):H(t)+":"+n},De=function(){var e=S(this).host;return null===e?"":H(e)},je=function(){var e=S(this).port;return null===e?"":String(e)},Ue=function(){var e=S(this),t=e.path;return e.cannotBeABaseURL?t[0]:t.length?"/"+t.join("/"):""},We=function(){var e=S(this).query;return e?"?"+e:""},Fe=function(){return S(this).searchParams},Be=function(){var e=S(this).fragment;return e?"#"+e:""},Ge=function(e,t){return{get:e,set:t,configurable:!0,enumerable:!0}};if(r&&c(Te,{href:Ge(Me,(function(e){var t=S(this),n=String(e),i=Ae(t,n);if(i)throw TypeError(i);b(t.searchParams).updateSearchParams(t.query)})),origin:Ge(Ie),protocol:Ge(Ne,(function(e){var t=S(this);Ae(t,String(e)+":",oe)})),username:Ge(Le,(function(e){var t=S(this),n=f(String(e));if(!ee(t)){t.username="";for(var i=0;i<n.length;i++)t.username+=X(n[i],J)}})),password:Ge(Re,(function(e){var t=S(this),n=f(String(e));if(!ee(t)){t.password="";for(var i=0;i<n.length;i++)t.password+=X(n[i],J)}})),host:Ge(Pe,(function(e){var t=S(this);t.cannotBeABaseURL||Ae(t,String(e),he)})),hostname:Ge(De,(function(e){var t=S(this);t.cannotBeABaseURL||Ae(t,String(e),ge)})),port:Ge(je,(function(e){var t=S(this);ee(t)||(e=String(e),""==e?t.port=null:Ae(t,e,ve))})),pathname:Ge(Ue,(function(e){var t=S(this);t.cannotBeABaseURL||(t.path=[],Ae(t,e+"",xe))})),search:Ge(We,(function(e){var t=S(this);e=String(e),""==e?t.query=null:("?"==e.charAt(0)&&(e=e.slice(1)),t.query="",Ae(t,e,Ee)),b(t.searchParams).updateSearchParams(t.query)})),searchParams:Ge(Fe),hash:Ge(Be,(function(e){var t=S(this);e=String(e),""!=e?("#"==e.charAt(0)&&(e=e.slice(1)),t.fragment="",Ae(t,e,Ce)):t.fragment=null}))}),l(Te,"toJSON",(function(){return Me.call(this)}),{enumerable:!0}),l(Te,"toString",(function(){return Me.call(this)}),{enumerable:!0}),y){var ze=y.createObjectURL,Ve=y.revokeObjectURL;ze&&l(Oe,"createObjectURL",(function(e){return ze.apply(y,arguments)})),Ve&&l(Oe,"revokeObjectURL",(function(e){return Ve.apply(y,arguments)}))}h(Oe,"URL"),a({global:!0,forced:!o,sham:!r},{URL:Oe})},"L/Jv":function(e,t,n){var i=n("G9WS");n("4mDm"),n("sMBO"),n("07d7"),n("rB9j"),n("PKPk"),n("EnZy"),n("3bBZ"),n("Kz25");var a,r=i(n("Kwsy")),o=function(e){return"download"in e},s={},c=function(){};c.prototype.init=function(e){this.WosInfo=e},c.prototype.upload=function(e,t,n,i){var r=e.wos_file_name?e.wos_file_name:"",o=e.bucket?e.bucket:"",c=function(){};"function"!==typeof i?i=c:"function"!==typeof n?n=c:"function"!==typeof t&&(t=c),a=new WosSys({appid:this.WosInfo.WOS_APP_ID,bucket:e.bucket,wosurl:this.WosInfo.WOS_URL,getAppSign:function(t){t(encodeURIComponent(e.wos_token))}});var l=e.file.name?e.file.name:null,u=function(e){s[r]=e},d={bucketName:o,remotePath:r,ttl:e.wos_file_expire,insertOnly:this.WosInfo.IS_COVER,taskReady:u,optSliceSize:"1M",alias:l,onUploadProgress:i,onUploadSuccess:t,onUploadError:n};a.upload(e.file,d)},c.prototype.createThumbnail=function(e,t){var n,i=window.URL||window.webkitURL;if(!i)return t(null);n=i.createObjectURL(e);var a=document.createElement("video");a.setAttribute("class","preloadVideo"),a.setAttribute("src",n),a.setAttribute("controls","controls"),a.setAttribute("crossOrigin","Anonymous"),a.setAttribute("visibility","hidden"),a.style.visibility="hidden",a.muted=!0,document.body.appendChild(a);var o=a.play(),s=!1,c=function(){a.pause();var e=1,t=document.createElement("canvas"),n=t.getContext("2d"),i=document.getElementsByClassName("preloadVideo")[0];return t.width=i.videoWidth*e,t.height=i.videoHeight*e,n.drawImage(i,0,0,t.width,t.height),document.body.removeChild(a),s=!0,{data:t.toDataURL("image/jpeg"),width:t.width,height:t.height,duration:i.duration}};o&&"function"==typeof o.then&&o.then((function(){s||t(c())})),(0,r.default)((function(){s||t(c())}),500)},c.prototype.downloadFromURL=function(e,t){var n=document.createElement("a");if(o(n)&&n.setAttribute("download",t),document.body.appendChild(n),n.setAttribute("href",e),t&&"function"==typeof t.split){var i=t.split(".txt");i&&i.length>1&&""==i[i.length-1]&&n.setAttribute("target","_blank")}n.style.display="none",n.click(),document.body.removeChild(n)},c.prototype.downloadFromBlob=function(e,t){var n=window.URL||window.webkitURL,i=new Blob([e]),a=n.createObjectURL(i);this.downloadFromURL(a,t)},c.prototype.cancelUpload=function(e){var t=s[e];a&&a.cancelUpload(t)},e.exports=new c},L1rz:function(e,t,n){var i,a,r,o=n("lulC"),s=n("OsYe"),c=n("39uu"),l=n("AnMC"),u=n("eOcF"),d=n("doUz"),p=n("su3n"),f=n("bpon"),m=s.WeakMap,_=function(e){return r(e)?a(e):i(e,{})},h=function(e){return function(t){var n;if(!c(t)||(n=a(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}};if(o){var g=d.state||(d.state=new m),v=g.get,y=g.has,w=g.set;i=function(e,t){return t.facade=e,w.call(g,e,t),t},a=function(e){return v.call(g,e)||{}},r=function(e){return y.call(g,e)}}else{var b=p("state");f[b]=!0,i=function(e,t){return t.facade=e,l(e,b,t),t},a=function(e){return u(e,b)?e[b]:{}},r=function(e){return u(e,b)}}e.exports={set:i,get:a,has:r,enforce:_,getterFor:h}},L3Tz:function(e,t,n){var i=n("aOzW");e.exports=i},L5f0:function(e,t,n){var i=n("39uu");e.exports=function(e){if(!i(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},L8zM:function(e,t,n){var i=n("G9WS");n("rB9j"),n("UxlC");var a=i(n("o+MX")),r=i(n("lHQ6")),o=n("Bboc"),s=o.isEmpty,c=n("VRhk");e.exports=function(e){e.prototype.bindRTCEmitter=function(){var e=this;if(window.wbWebRTCSDK&&window.wbWebRTCSDK.isSupport&&window.RTCEmitter&&window.RTCEmitter&&c["is_show_audio_video"]){var t=[],n=!1,i=!1,o=null,l=null;RTCEmitter.on("callToCallee",(function(e){n=!0,i=!1,s(e)||s(e.data)||(o={call_type:e.data.call_type,shop_id:e.data.shop_id,shop_source:e.data.shop_source,user_id:e.data.user_id,user_source:e.data.user_source,sender_info:e.data.sender_info})})),RTCEmitter.on("calleeLoadWebRTC",(function(e){n=!1,i=!0,s(e)||s(e.msgItem)||s(e.contact)||(l={call_type:"call_audio"===e.msgItem.show_type?"audio":"call_video"===e.msgItem.show_type?"video":"",user_id:e.msgItem.sender_id,user_source:e.msgItem.sender_source,sender_info:{avatar:e.contact.avatar}},9999===e.msgItem.to_source&&(l.shop_id=e.msgItem.to_id,l.shop_source=e.msgItem.to_source))})),RTCEmitter.on("call_msg",(function(e){if((n||i)&&!s(e)){switch(e.pageCode){case 107:case 101:case 104:t.push(e);break;default:break}switch(e.code){case 201:t.push(e),d();break;case 202:t.push(e),d();break;case 207:t.push(e),d();break;case 120:case 121:case 104:t.push(e);break;default:if(!s(e.callTime)&&"00 : 00"!==e.callTime){var a=e.callTime.replace(/(\s\s*)|:/g,"");!isNaN(a)&&(0,r.default)(a)>0&&(t.push(e),d())}break}}}))}function u(a){for(var c="",u=!1,d=!1,p=!1,f=0;f<a.length;f++){var m=a[f];if(!s(m)){switch(m.pageCode){case 107:case 101:case 104:o&&(o.call_type="audio"),l&&(l.call_type="audio");break;default:break}switch(m.code){case 111:n=!0;break;case 122:i=!0;break;case 120:case 121:case 104:o&&(o.call_type="audio"),l&&(l.call_type="audio");break;case 201:c=n?"已取消":"未接听, 点击回拨",p=!n;break;case 205:case 206:c="呼叫失败",d=!0;break;case 202:c="已拒绝",u=!0,d=!0;break;case 207:c=n?"对方无应答":"未接听, 点击回拨",p=!n,d=!0;break;default:if(!s(m.callTime)&&"00 : 00"!==m.callTime){var _=m.callTime.replace(/(\s\s*)|:/g,"");!isNaN(_)&&(0,r.default)(_)>0&&(c="通话时长 "+m.callTime.replace(/(\s\s*)/g,""),d=!0)}break}}if(d)break}if(t=[],!s(c)){n&&u&&(c="对方"+c);var h,g={};n&&!s(o)?(h=o.user_id+"@"+o.user_source,s(o.shop_id)||s(o.shop_source)||(h+="@@"+o.shop_id+"@"+o.shop_source)):i&&!s(l)&&(h=l.user_id+"@"+l.user_source,s(l.shop_id)||s(l.shop_source)||(h+="@@"+l.shop_id+"@"+l.shop_source));var v=e._biz;if(!s(h)&&!s(v)){var y=v.me(),w={msg_type:2,show_type:"false_msg",content:{msg:c,type:"text"},is_false_new:!0,belong_to:y.user_id+"@"+y.user_source};n?(w.sender_id=y.user_id,w.sender_source=y.user_source,w.to_id=o.user_id,w.to_source=o.user_source,w.shop_id=o.shop_id,w.shop_source=o.shop_source,w.send_time=(new Date).getTime(),w.call_type=o.call_type,w.not_answered=p):i&&(w.sender_id=l.user_id,w.sender_source=l.user_source,w.to_id=y.user_id,w.to_source=y.user_source,w.shop_id=l.shop_id,w.shop_source=l.shop_source,w.send_time=(new Date).getTime(),w.call_type=l.call_type,w.sender_info=l.sender_info,w.not_answered=p);var b,x={user_id:w.sender_id,user_source:w.sender_source};s(w.shop_id)||s(w.shop_source)||(x.shop_id=w.shop_id,x.shop_source=w.shop_source,b=x.shop_id+"@"+x.shop_source),v.getContact([x],(function(e){var t=x.user_id+"@"+x.user_source;b&&(t+="@@"+b);var n=e[t];n.avatar=n&&n.avatar?n.avatar:default_avatar,w.sender_info=n,s(x.shop_id)||s(x.shop_source)||(w.sender_info.shop_id=x.shop_id,w.sender_info.shop_source=x.shop_source,w.is_shop_mode=!0),g[h]=[w],v.triggerEvent("falseNews",g)}))}}}function d(){u((0,a.default)(t).call(t)),o=null,l=null,n=!1,i=!1,t=[]}}}},LGyv:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},LPSS:function(e,t,n){var i,a,r,o=n("2oRo"),s=n("0Dky"),c=n("A2ZE"),l=n("G+Rx"),u=n("zBJ4"),d=n("HNyW"),p=n("YF1G"),f=o.location,m=o.setImmediate,_=o.clearImmediate,h=o.process,g=o.MessageChannel,v=o.Dispatch,y=0,w={},b="onreadystatechange",x=function(e){if(w.hasOwnProperty(e)){var t=w[e];delete w[e],t()}},S=function(e){return function(){x(e)}},k=function(e){x(e.data)},E=function(e){o.postMessage(e+"",f.protocol+"//"+f.host)};m&&_||(m=function(e){var t=[],n=1;while(arguments.length>n)t.push(arguments[n++]);return w[++y]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},i(y),y},_=function(e){delete w[e]},p?i=function(e){h.nextTick(S(e))}:v&&v.now?i=function(e){v.now(S(e))}:g&&!d?(a=new g,r=a.port2,a.port1.onmessage=k,i=c(r.postMessage,r,1)):o.addEventListener&&"function"==typeof postMessage&&!o.importScripts&&f&&"file:"!==f.protocol&&!s(E)?(i=E,o.addEventListener("message",k,!1)):i=b in u("script")?function(e){l.appendChild(u("script"))[b]=function(){l.removeChild(this),x(e)}}:function(e){setTimeout(S(e),0)}),e.exports={set:m,clear:_}},LQDL:function(e,t,n){var i,a,r=n("2oRo"),o=n("NC/Y"),s=r.process,c=s&&s.versions,l=c&&c.v8;l?(i=l.split("."),a=i[0]+i[1]):o&&(i=o.match(/Edge\/(\d+)/),(!i||i[1]>=74)&&(i=o.match(/Chrome\/(\d+)/),i&&(a=i[1]))),e.exports=a&&+a},LT9b:function(e,t,n){var i=n("kw5h");e.exports=i},LYCE:function(e,t,n){e.exports=n("DkPT")},LoXx:function(e,t,n){var i=n("m/sp");i("replace")},LseE:function(e,t,n){var i=n("cWqo");e.exports=i},Lw5C:function(e,t){var n="<div class=im-app tabindex=-1> <div class=im-app-default> <div class=im-app-default-content> <p class=im-app-default-img></p> <span class=im-app-default-des>未选择聊天</span> </div> </div> <div class=im-app-ie-default> <p class=im-app-ie-browsehappy> 你正在使用一个<strong>过时</strong>的浏览器。请<a class=link href=//browsehappy.com target=_blank>升级你的浏览器</a>以查看微聊网页版。</p> <p></p> </div> <div class=im-qrcode-continer style=display:none;z-index:10000;position:absolute;top:50%;left:50%;margin-top:-100px;margin-left:-100px> <div class=im-qrcode style=margin-top:25px;margin-left:25px></div> </div> <div class=im-float-container> </div> </div>";e.exports=n},"M+B/":function(e,t,n){var i=n("G9WS");n("sMBO"),n("rB9j"),n("hByQ");var a=i(n("rPUy")),r=i(n("/FZm")),o=n("JVDe"),s=n("eBtS"),c=n("MDjg"),l=n("/Pub"),u=n("sfi9"),d=n("Itcm"),p=n("SaSm"),f=function(e){this._open=!1,function(t){var n={template:c,search:function(e,t){t([])}};s.extend(n,e),o.call(t,n)}(this),function(e){var t,n,i,a=new d({window:(0,r.default)(t=e._element).call(t,".im-personsearch-content"),content:(0,r.default)(n=e._element).call(n,".im-personsearch-person")});e._children["scrollbar"]=a,(0,r.default)(i=e._element).call(i,".im-personsearch-content").append(a.getElement())}(this),function(e){e.getElement().on("click",".im-personsearch-item",(function(t){t.preventDefault(),e.selectedItem(s(this))}))}(this)};f.prototype=(0,a.default)(o.prototype),f.prototype.open=function(){o.prototype.show.call(this);var e=this._children["scrollbar"];e.init(),e.calHeight(),this._open=!0},f.prototype.close=function(){o.prototype.hide.call(this),this._open=!1},f.prototype.insertPerson=function(e){var t;if(!e.length)return!1;var n,i,a='<li class="im-personsearch-person-title">联系人</li>',o=(0,r.default)(t=this.getElement()).call(t,".im-personsearch-person");for(n in e)a+='<li class="im-personsearch-item" data-userid="'+e[n].id+'" data-source="'+e[n].source+'" data-index="'+n+'"><div class="im-personsearch-item-wrap">',a+='<img src="'+e[n].avatar+'" class="im-personsearch-item-avatar">',a+='<p class="im-personsearch-item-name">'+p(e[n].name)+"</p></div></li>";(o.html(a),this.open(),0==n)&&(0,r.default)(i=this.getElement()).call(i,".im-personsearch-item").eq(0).addClass("im-item-hover");this._data.index=n},f.prototype.selectedItem=function(e){var t=e.attr("data-userid"),n=e.attr("data-source");l.dispatch({type:u.PERSON_CHECK,data:{user_id:t,user_source:n}}),this.close(),this.triggerEvent("personCheck")},f.prototype.keyOperation=function(e,t){var n,i,a,o,s,c,l,u=this,d=this._data.index,p=(0,r.default)(n=this.getElement()).call(n,".im-personsearch-content"),f=this._children["scrollbar"];switch(e){case 38:var m,_;if(s=(0,r.default)(i=this.getElement()).call(i,".im-item-hover"),c=s.height(),s.length)if(s.removeClass("im-item-hover"),"0"!==s.attr("data-index"))s.prev().addClass("im-item-hover"),l=s.prev().offset().top-p.offset().top,l<0?f.scroll(l):l>0&&l<6*c||l>6*c&&f.scroll(l);else(0,r.default)(m=this.getElement()).call(m,".im-personsearch-item").eq(d).addClass("im-item-hover"),f.scrollToBottom();else(0,r.default)(_=this.getElement()).call(_,".im-personsearch-item").eq(d).addClass("im-item-hover"),f.scrollToBottom();break;case 40:var h,g;if(s=(0,r.default)(a=this.getElement()).call(a,".im-item-hover"),c=s.height(),s.length)if(s.removeClass("im-item-hover"),s.attr("data-index")==d)(0,r.default)(h=this.getElement()).call(h,".im-personsearch-item").eq(0).addClass("im-item-hover"),f.scroll(0);else s.next().addClass("im-item-hover"),l=s.next().offset().top-p.offset().top,l<0?f.scroll(l):l<6*c||l>=6*c&&f.scroll(l-5*c);else(0,r.default)(g=this.getElement()).call(g,".im-personsearch-item").eq(0).addClass("im-item-hover"),f.scroll(0);break;case 13:s=(0,r.default)(o=this.getElement()).call(o,".im-item-hover"),s.length&&this.selectedItem(s);break;default:""==t&&this.close(),this._options.search(t,(function(e){u.insertPerson(e)}))}},e.exports=f},M5Mt:function(e,t,n){e.exports=n("tTn0")},M7ui:function(e,t){var n="<div class=im-loading> <span class=im-loading-icon></span> <span class=im-loading-content></span> </div>";e.exports=n},MAKL:function(e,t,n){e.exports=n("lqgj")},MCtm:function(e,t,n){var i=n("wbIY"),a=n("Bvq2"),r=n("eOcF"),o=Object.defineProperty,s={},c=function(e){throw e};e.exports=function(e,t){if(r(s,e))return s[e];t||(t={});var n=[][e],l=!!r(t,"ACCESSORS")&&t.ACCESSORS,u=r(t,0)?t[0]:c,d=r(t,1)?t[1]:void 0;return s[e]=!!n&&!a((function(){if(l&&!i)return!0;var e={length:-1};l?o(e,1,{enumerable:!0,get:c}):e[1]=1,n.call(e,u,d)}))}},MDjg:function(e,t){var n='<div class="im-personsearch-container im-hide"> <div class=im-personsearch-arrow></div> <div class=im-personsearch-content> <ul class=im-personsearch-person> </ul> </div> </div>';e.exports=n},MO5i:function(e,t,n){var i=n("G9WS"),a=n("LYCE");n("07d7"),n("JfAA"),a(t,"__esModule",{value:!0}),t.nextTick=c;var r=i(n("Kwsy")),o=i(n("OBge")),s=i(n("nhkr"));function c(e){var t=function(){e&&"function"===typeof e&&e()};if(void 0!==("undefined"===typeof o.default?"undefined":(0,s.default)(o.default)))t=function(){new o.default((function(e,t){e()})).then((function(){e&&"function"===typeof e&&e()}))};else if(void 0!==("undefined"===typeof MessageChannel?"undefined":(0,s.default)(MessageChannel))&&"function MessageChannel() { [native code] }"===MessageChannel.toString()){var n=new MessageChannel,i=n.port2;n.port1.onmessage=function(){e&&"function"===typeof e&&e()},t=function(){i.postMessage(1)}}else t=function(){(0,r.default)((function(){e&&"function"===typeof e&&e()}),0)};return t}},"MRo+":function(e,t,n){var i=n("G9WS");n("sMBO"),n("toAj"),n("rB9j"),n("EnZy");var a=i(n("rPUy")),r=i(n("/FZm")),o=n("5m4N"),s=n("eBtS"),c=n("6jri"),l=n("/Pub"),u=n("sfi9"),d=n("exIe"),p={download:"下载",cancel_send:"取消",canceled_uploading:"已取消",send_fail:"失败",expire:"过期"},f={failCls:"fail"},m=function(e,t){e.text(t)},_=function(e,t){var n,i=(0,r.default)(n=this._element).call(n,"."+e);return(0,r.default)(i).call(i,"."+t)},h=function(e){var t={},n=e.content,i=e&&n&&n.original_file_name?n.original_file_name:n.url&&n.url.name?n.url.name:"未知",a=i&&i.split(".").length?i.split(".").length:0;return t.type=i&&a>0?i.split(".")[a-1]:"default",t.size=e&&n&&n.size?n.size:n.url&&n.url.size?n.url.size:"未知",t.name=i,t},g=function(e){return e<1024?e+="B":e=1024<=e<1048576?(e/1024).toFixed(2)+"KB":(e/1024/1024).toFixed(2)+"MB",e},v=function(e){var t="";switch(e.toUpperCase()){case"PDF":t="file-img-pdf";break;case"PPT":case"PPTX":t="file-img-ppt";break;case"XLS":case"XLSX":t="file-img-excel";break;case"DOC":case"DOCX":t="file-img-word";break;case"TXT":t="file-img-txt";break;case"KEY":t="file-img-key";break;case"NUMBERS":t="file-img-numbers";break;case"PAGES":t="file-img-pages";break;case"MP4":t="file-img-mp4";break;case"ZIP":t="file-img-zip";break;default:t="file-img-default";break}return t},y=function(){var e=this,t=e._data.msg,n=_.call(e,"im-msg-content","im-msg-file-img"),i=_.call(e,"im-msg-content","im-msg-file-title"),a=_.call(e,"im-msg-content","im-msg-file-size-num"),r=h(t).type,o=v(r);n.addClass(o);var s=h(t).name;i.text(s).attr("title",s);var c=g(h(t).size);a.text(c)},w=function(e){var t=_.call(this,"im-msg-content","im-msg-speed"),n=(0,r.default)(t).call(t,".im-msg-speed-current");e&&0!=e&&100!=e?(t.css("display","block"),n.css("width",e+"px")):t.css("display","none")},b=function(e){(function(t){var n={template:c};s.extend(n,e),o.call(t,n)})(this),this._rendered=!1};b.prototype=(0,a.default)(o.prototype),b.prototype.renderContent=function(){var e=this,t=(e._data.msg,_.call(e,"im-msg-content","im-msg-handle-btn"));t.click((function(t){t.stopPropagation();var n=t.target.innerText,i=e._data.msg;s(t.target).hasClass("download")?i.msg_id&&"DOWNLOADING"!=i.status&&l.dispatch({type:u.FILE_DOWNLOAD,data:i}):n===p.cancel_send&&l.dispatch({type:u.FILE_SENDE_CANCEL,data:i})})),this.update()},b.prototype.switchHandle=function(e){var t=this,n=_.call(this,"im-msg-content","im-msg-handle-btn"),i=n.text();switch(n.removeClass("download"),e){case d.UPLOADING:i!==p.cancel_send&&m(n,p.cancel_send);var a=t._data.msg;a.uploadingPercent?a.uploadingPercent+=30:a.uploadingPercent=1,this.update();break;case d.CANCEL_SENDING:i!==p.canceled_uploading&&(m(n,p.canceled_uploading),w.call(t,0));break;case d.FAIL:i!==p.send_fail&&(m(n,p.send_fail),n.addClass(f.failCls));break;case d.SUCCESS:i!==p.download&&(m(n,""),n.removeClass(f.failCls));a=t._data.msg;a.uploadingPercent=100,this.update(),n.addClass("download");break;case d.DOWNLOAD_FAIL:i!==p.expire&&(m(n,p.expire),n.addClass(f.failCls));break;default:break}},b.prototype.update=function(){var e=this._data.msg;e.uploadingPercent&&w&&w.call(this,e.uploadingPercent),y.call(this)},e.exports=b},Mde1:function(e,t,n){var i=n("G9WS"),a=i(n("rPUy")),r=i(n("/FZm")),o=n("eBtS"),s=n("JVDe"),c=n("2Y2y"),l=n("Bboc"),u=n("/Pub"),d=l.isPhone,p=l.isWechat,f=n("sfi9"),m=(l.isEmpty,function(e){(function(t){var n={template:c};o.extend(n,e),s.call(t,n)})(this),function(e){e._element.click((function(t){var n,i=o(t.target);(i.hasClass("window-contactinfo-bg")||i.hasClass("window-contactinfo-contain"))&&t.stopPropagation();var a=e._element,s=(0,r.default)(n=e._element).call(n,".window-contactinfo-bg"),c=(0,r.default)(a).call(a,"#contactinfo_tel"),l=(0,r.default)(a).call(a,"#contactinfo_wechat"),m=(0,r.default)(a).call(a,".window--contactinfo-info-error");if(i.hasClass("cancel_contactinfo")&&(c.css("border-color","#F0F0F0"),l.css("border-color","#F0F0F0"),m.css("visibility","hidden"),a.hide(),s.hide()),i.hasClass("window-contactinfo-title-x")&&(c.css("border-color","#F0F0F0"),l.css("border-color","#F0F0F0"),m.css("visibility","hidden"),a.hide(),s.hide()),i.hasClass("submit_contactinfo")){var _;t.stopPropagation();var h=c[0].value,g=l[0].value,v=e._data.selfContactinfoTel,y=e._data.selfContactinfoWechat,w=e._data.currentcontact||{};if(!h&&!g)return _="请至少填写一项联系方式",m.text(_),void m.css("visibility","visible");var b=v===h||d(h),x=y===g||p(g);if(""!==h&&!b||""!==g&&!x)return _="联系方式有误，请重新填写",m.text(_),m.css("visibility","visible"),void(b||x?x?b||(c.css("border-color","red"),l.css("border-color","#F0F0F0")):(l.css("border-color","red"),c.css("border-color","#F0F0F0")):(c.css("border-color","red"),l.css("border-color","red")));var S={other_user_id:w.user_id||"",other_user_source:w.user_source||"",tel:v===h?"":h,wechat:y===g?"":g,is_wechat_constant:y===g&&""!==y&&""!==g||y===g&&""==y&&""==g,is_tel_constant:v===h&&""!==v&&""!==h||v===h&&""==v&&""==h};u.dispatch({type:f.SEND_CONTACTINFO,data:S}),c.css("border-color","#F0F0F0"),l.css("border-color","#F0F0F0"),m.css("visibility","hidden"),e.hide()}}))}(this)});m.prototype=(0,a.default)(s.prototype),m.prototype.render=function(){var e=this.getElement(),t=e,n=(0,r.default)(t).call(t,".window-contactinfo-title-text"),i=(0,r.default)(t).call(t,"#contactinfo_tel"),a=(0,r.default)(t).call(t,".window-contactinfo-btn"),o=(0,r.default)(t).call(t,"#contactinfo_wechat"),s=(0,r.default)(t).call(t,".submit_contactinfo"),c=(0,r.default)(t).call(t,".cancel_contactinfo"),l=this._data,u=l.text?l.text:"";n.text(u),(0,r.default)(t).call(t,".window-contactinfo-header-avatar").attr("src",l.avatarInfo),(0,r.default)(t).call(t,".window-contactinfo-header-name").text(l.nameInfo),(0,r.default)(t).call(t,".window-contactinfo-point").text("提示:您发送的联系方式只会提供给索要方，不做他用，请放心填写。您可只填入一项信息，格式正确即可发送，如填入两项信息，则要保证格式全部正确才可发送。"),i[0].value=l.selfContactinfoTel,o[0].value=l.selfContactinfoWechat,s.text("确定发送"),"我的联系方式"===u?a.hasClass("card_contactinfo")?a.removeClass("card_contactinfo").addClass("my_contactinfo"):a.addClass("my_contactinfo"):(a.hasClass("my_contactinfo")?a.removeClass("my_contactinfo").addClass("card_contactinfo"):a.addClass("card_contactinfo"),c.text("忽略"))},m.prototype.show=function(e){s.prototype.show.call(this);var t=this.getElement(),n=t,i=(0,r.default)(t).call(t,".window-contactinfo-bg");n.show(),i.show()},m.prototype.hide=function(){s.prototype.hide.call(this);var e=this.getElement(),t=e,n=(0,r.default)(e).call(e,".window-contactinfo-bg");t.hide(),n.hide()},e.exports=m},MoCz:function(e,t,n){"use strict";var i=n("67WC"),a=n("5Yz+"),r=i.aTypedArray,o=i.exportTypedArrayMethod;o("lastIndexOf",(function(e){return a.apply(r(this),arguments)}))},MqyY:function(e,t){var n='<li class="im-msg im-default-contactinfo-card"> <div class=im-msg-time></div> <div class=im-msg-checkbox></div> <div class=im-msg-main> <img class="im-avatar im-msg-avatar"/> <span class=im-msg-send-status></span> <span class=im-msg-showed-status></span> <span class=im-msg-user-name></span> <div class="im-msg-content im-default-contactinfo-card-content"> <div class=im-default-contactinfo-header> <img class=im-default-contactinfo-header-avatar /> <div class=im-default-contactinfo-header-user> <div class=im-default-contactinfo-header-name></div> <div class=im-default-contactinfo-header-userCard>联系方式</div> <div class=im-default-contactinfo-header-icon></div> </div> </div> <div class=im-default-contactinfo-foot> <div class=im-default-contactinfo-foot-more>点击查看</div> <div class=im-default-contactinfo-foot-tel> <div class=im-default-contactinfo-foot-text>手机号</div> <div class=im-default-contactinfo-foot-tel-text></div> </div> <div class=im-default-contactinfo-foot-wechat> <div class=im-default-contactinfo-foot-text>微信号</div> <div class=im-default-contactinfo-foot-wechat-text></div> </div> <div class=im-default-contactinfo-foot-update>该用户联系方式已变更,请</div> <div class=im-default-contactinfo-foot-update-click>重新索要</div> </div> </div> <span class=im-msg-arrow></span> </div>  <div class=im-msg-collect-name></div> <div class=im-msg-collect-time></div> <div class=im-msg-feedback> <div class=im-msg-feedback-container> <span class=im-msg-feedback-icon></span> <span class=im-msg-feedback-content></span> </div> </div> </li>';e.exports=n},Mucd:function(e,t){var n="<div class=im-content-menu> </div> ";e.exports=n},MycS:function(e,t,n){n("Ibh0");var i=n("oWnS");e.exports=i("Function").bind},"N+g0":function(e,t,n){var i=n("g6v/"),a=n("m/L8"),r=n("glrk"),o=n("33Wh");e.exports=i?Object.defineProperties:function(e,t){r(e);var n,i=o(t),s=i.length,c=0;while(s>c)a.f(e,n=i[c++],t[n]);return e}},N5tY:function(e,t,n){var i=n("G9WS"),a=i(n("/FZm")),r=i(n("rPUy")),o=n("5m4N"),s=n("eBtS"),c=n("MqyY"),l=n("VRhk"),u=(n("Bboc").convertImgParams,n("sfi9")),d=n("vtKQ"),p=n("/Pub"),f=n("Bboc"),m=f.isEmpty,_=f.isAnonymousSession,h=function(e){(function(t){var n={template:c};s.extend(n,e),o.call(t,n)})(this)};h.prototype=(0,r.default)(o.prototype),h.prototype.renderContent=function(){var e=this._data.msg;if(!e)return!1;var t,n=e.content,i=this._element,r=(0,a.default)(i).call(i,".im-default-contactinfo-card-content"),o=(0,a.default)(r).call(r,".im-default-contactinfo-foot");t=e.sender_info.remark?e.sender_info.remark.remark_name||e.sender_info.user_name||"未知":e.sender_info.user_name||"未知",m(t)&&_(e.sender_info)&&(t="游客"+e.sender_info.user_id);var s=e.sender_info.avatar?e.sender_info.avatar:l["default-avatar"],c=n.check_code?n.check_code:"",h={other_user_id:e.sender_info.user_id?e.sender_info.user_id:e.sender_id,other_user_source:e.sender_info.user_source?e.sender_info.user_source:e.sender_source,check_code:c};e.glanceData=h,(0,a.default)(r).call(r,".im-default-contactinfo-header-avatar").attr("src",s),f.isEmojiCharacter(t)&&(0,a.default)(r).call(r,".im-default-contactinfo-header-name").addClass("need-space"),(0,a.default)(r).call(r,".im-default-contactinfo-header-name").text(t),(0,a.default)(r).call(r,".im-default-contactinfo-foot-more").click((function(t){t.stopPropagation(),p.dispatch({type:u.GLANCE_CONTACTINFO,data:e})})),(0,a.default)(o).call(o,".im-default-contactinfo-foot-update-click").click((function(e){e.stopPropagation(),p.dispatch({type:u.ASK_CONTACTINFO,data:h})})),d.register(d.createKey(e.msg_id),(function(t){if(t.data&&t.type&&t.data.msg_id&&t.data.msg_id===e.msg_id)switch(t.type){case u.GLANCE_CONTACTINFO_RETURN:var n=t.data.contactinfoData?t.data.contactinfoData:"",i=n.tel?n.tel:"",r=n.wechat?n.wechat:"";n&&!n.is_uptodate&&(n.msg_showtype&&"collect"==n.msg_showtype?((0,a.default)(o).call(o,".im-default-contactinfo-foot-update").text("该用户的联系方式已变更"),(0,a.default)(o).call(o,".im-default-contactinfo-foot-update-click").css("display","none")):(0,a.default)(o).call(o,".im-default-contactinfo-foot-update-click").css("display","block"),(0,a.default)(o).call(o,".im-default-contactinfo-foot-update").css("display","block")),i||(0,a.default)(o).call(o,".im-default-contactinfo-foot-tel").css("display","none"),r||(0,a.default)(o).call(o,".im-default-contactinfo-foot-wechat").css("display","none"),o.addClass("open"),(0,a.default)(o).call(o,".im-default-contactinfo-foot-tel-text").text(i),(0,a.default)(o).call(o,".im-default-contactinfo-foot-wechat-text").text(r),(0,a.default)(o).call(o,".im-default-contactinfo-foot-more").css("display","none");break;default:break}}))},e.exports=h},"NC/Y":function(e,t,n){var i=n("0GbY");e.exports=i("navigator","userAgent")||""},NaFW:function(e,t,n){var i=n("9d/t"),a=n("P4y1"),r=n("tiKp"),o=r("iterator");e.exports=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||a[i(e)]}},NioV:function(e,t,n){"use strict";var i=n("pevS"),a=n("cEKj"),r=n("81Rs"),o=n("Bvq2"),s=n("mIMY"),c=n("sOpI"),l=n("fvkw"),u=n("1mbr"),d=!!r&&o((function(){r.prototype["finally"].call({then:function(){}},(function(){}))}));i({target:"Promise",proto:!0,real:!0,forced:d},{finally:function(e){var t=c(this,s("Promise")),n="function"==typeof e;return this.then(n?function(n){return l(t,e()).then((function(){return n}))}:e,n?function(n){return l(t,e()).then((function(){throw n}))}:e)}}),a||"function"!=typeof r||r.prototype["finally"]||u(r.prototype,"finally",s("Promise").prototype["finally"])},Njvb:function(e,t,n){var i=n("G9WS");n("qePV"),n("rB9j"),n("EnZy");var a=i(n("RXMP")),r=i(n("eLKs")),o=i(n("/FZm")),s=i(n("rPUy")),c=i(n("M5Mt")),l=n("eBtS"),u=n("JVDe"),d=n("gnxi"),p=n("xuMa"),f=n("Bboc"),m=f.isEmpty;function _(e,t){this.triggerEvent(e,t)}var h=function(e){(function(t){var n={template:d};l.extend(n,e),u.call(t,n)})(this),function(e){e._element.click((function(t){var n,i=l(t.target);if("DIV"==t.target.tagName)if(i.hasClass("im-notice-button"))n=i.data("value")||"",n=n.split("@")||[],2!=n.length||isNaN(n[0])||e._options.noticeItems.length>Number(n[0])&&e._options.noticeItems[n[0]]&&"function"==typeof e._options.noticeItems[n[0]][n[1]]&&e._options.noticeItems[n[0]][n[1]](t);else if(i.hasClass("im-notice-close")){var a,r=i.data("value");if(!isNaN(r))(0,c.default)(a=e._data.notices).call(a,r,1),e.triggerEvent("noticeClose",e._data.notices.length),e.hide()}}))}(this)};h.prototype=(0,s.default)(u.prototype),h.prototype.render=function(){var e,t,n=this,i=this._data.notices,s=this.getElement(),c=(0,o.default)(s).call(s,".im-notices-container"),l=(0,r.default)(_).call(_,n);c.html(""),n._options.noticeItems=[],!m(i)&&i.length>0&&(n.show(),(0,a.default)(i).call(i,(function(a,r){e={broadCast:l,index:r},t=new p(e),t.setData({content:a.text,qalog:a.qaLog,buttons:[{action:"send",text:"发送"},{action:"copy",text:"复制"}]}),n._options.noticeItems.push(t),r==i.length-1&&t.getElement().addClass("last-child"),c.append(t.getElement())})))},h.prototype.show=function(e){u.prototype.show.call(this)},h.prototype.hide=function(){u.prototype.hide.call(this)},e.exports=h},Nu1X:function(e,t,n){var i=n("G9WS");n("rB9j"),n("UxlC");var a=i(n("RXMP")),r=i(n("/FZm")),o=i(n("eLKs")),s=i(n("rPUy")),c=n("eBtS"),l=n("JVDe"),u=n("jYpi"),d=n("Bboc"),p=d.isEmpty,f=d.IEVersion,m=function(e){(function(t){var n={template:u,member:'<div class="chat-float-member"><div class="float-avatar"><img class="float-avatar-img" src="{src}"></div><div class="float-member-name"><span>{name}</span></div></div>'};c.extend(n,e),l.call(t,n)})(this)};m.prototype=(0,s.default)(l.prototype),m.prototype.init=function(e){var t,n=this;n.container=e,n.hideSelf=(0,o.default)(t=function(){this.hide()}).call(t,n),this.bindEvent()},m.prototype.reAppend=function(){var e=this;e.container&&(e.container.html(e._options.template),e.bindEvent())},m.prototype.bindEvent=function(){var e,t=this,n=(0,r.default)(e=this.container||this._element).call(e,".chat-float-add");n.click((function(e){t.triggerEvent("chat_open_organiz")})),(this.container||this._element).on("click",(function(e){e.stopPropagation()}))},m.prototype.renderContacts=function(e,t){var n,i,o=(0,r.default)(n=this.container||this._element).call(n,".chat-float-members"),s=this._options.member,c="";p(t)||!t.length||p(e)||((0,a.default)(i=t||[]).call(i,(function(t){p(e[t])||(c+=s.replace("{src}",e[t].avatar||"").replace("{name}",e[t].remark_name||e[t].nick_name||e[t].user_name||""))})),o.html(c))},m.prototype.show=function(e){l.prototype.show.call(this),this.opened=!0},m.prototype.hide=function(){l.prototype.hide.call(this),this.opened=!1},m.prototype.getElement=function(){return f()>0?this._options.template:this._element},e.exports=m},Nu6W:function(e,t,n){var i=n("G9WS"),a=i(n("rPUy")),r=i(n("ZbhI")),o=i(n("/FZm")),s=n("eBtS"),c=n("DQm3"),l=n("1j43"),u=function(e){this._opened=!1,function(t){var n,i,a={template:c,texts:[]};s.extend(a,e),l.call(t,a),(0,o.default)(n=t._element).call(n,".im-feedback-icon").click((function(){var e,n;t._opened?t.close():(t.open(),-1!==(0,r.default)(e=(0,o.default)(n=t._element).call(n,".im-feedback-texts")[0].innerText).call(e,"屏蔽")&&t._cwheader.isBlackedCheck())})),t._element.on("click",(function(e){e.stopPropagation()}));var u=(0,o.default)(i=t._element).call(i,".im-feedback-texts");s(a.texts).each((function(e,t){s('<li class="texts-icon texts-icon-'+e+'"><span class="texts-icon texts-icon-'+e+'"></span><span class="im-feedback-text">'+t+"</span></li>").appendTo(u)})),u.click((function(e){if(t.close(),s.contains(u[0],s(e.target)[0])){var n,i,a="LI"===e.target.tagName?(0,o.default)(n=s(e.target)).call(n,".im-feedback-text").text():(0,o.default)(i=s(e.target).parent()).call(i,".im-feedback-text").text();"屏蔽"===a?(t._cwheader.addBlackList(),window.WMDA_REPORT&&window.WMDA_REPORT("custom",{event_id:"23"})):"取消屏蔽"===a?(t._cwheader.delBlackList(),window.WMDA_REPORT&&window.WMDA_REPORT("custom",{event_id:"24"})):"举报"===a?(t._cwheader.complaints(),window.WMDA_REPORT&&window.WMDA_REPORT("custom",{event_id:"25"})):"删除并退出"===a?t._cwheader.quitGroup():"群二维码"===a?t._cwheader.getGroupQrCode():"群公告"===a?t._cwheader.groupNotice():"置顶"===a?(t._cwheader.sesTop(!0),window.WMDA_REPORT&&window.WMDA_REPORT("custom",{event_id:"19"})):"取消置顶"===a?(t._cwheader.sesTop(!1),window.WMDA_REPORT&&window.WMDA_REPORT("custom",{event_id:"20"})):"免打扰"===a?(t._cwheader.setSilent(!0),window.WMDA_REPORT&&window.WMDA_REPORT("custom",{event_id:"21"})):"取消免打扰"===a?(t._cwheader.setSilent(!1),window.WMDA_REPORT&&window.WMDA_REPORT("custom",{event_id:"22"})):"群设置"===a?t._cwheader.setGroup(!0):"备注"===a&&t._cwheader.setUserRemark()}})),s(t._win).click((function(e){t._opened&&!s.contains(t._element[0],e.target)&&t.close()}))}(this)};u.prototype=(0,a.default)(l.prototype),e.exports=u},NzrZ:function(e,t,n){var i=n("I2R1");e.exports=i},"O+0l":function(e,t,n){var i=n("G9WS");n("oVuX"),n("qePV"),n("rB9j"),n("UxlC");var a=i(n("guyh")),r=i(n("RXMP")),o=i(n("rPUy")),s=i(n("/FZm")),c=n("eBtS"),l=n("JVDe"),u=n("9Ov1"),d=n("Bboc"),p=(d.isEmpty,n("Gm6T")),f='<div class="im-float-view-time"><div class="im-float-label-time">${time}</div></div>',m=function(e){(function(t){var n={template:u,stage:1};c.extend(n,e),l.call(t,n)})(this),function(e){var t,n=new p({in_float_view:!0});e._children["msgViewer"]=n,(0,s.default)(t=e._element).call(t,".im-float-view-body").append(n.getElement()),e._children_views={}}(this)};m.prototype=(0,o.default)(l.prototype),m.prototype.render=function(){var e,t=this._data.title,n=this,i=this.getElement(),o=[],c=1;if((0,s.default)(i).call(i,".im-float-view-title .im-float-records").html(t),i.on("click",(function(e){n.triggerEvent("setTop",{u_key:n._options._u_key})})),(0,s.default)(i).call(i,".im-float-close").on("click",(function(e){e.preventDefault(),e.stopPropagation(),n.triggerEvent("close",{u_key:n._options._u_key})})),(0,r.default)(e=n._data.msgList||[]).call(e,(function(e,t){switch("string"===typeof e.content&&(e.content=JSON.parse(e.content)),e.show_type=e.content.type,e.content.type){case"audio":e.content.msg="[语音留言]",e.content.type="text",e.show_type="text";break;case"video":break;case"text":break;case"card":case"minicard":case"universal_card1":case"universal_card2":case"universal_card3":case"mix":case"universal_card4":case"universal_card5":case"universal_card6":case"private_card_ganji":break;case"file":break;case"location":e.content.msg="消息格式暂不支持，请在客户端查看",e.content.type="text",e.show_type="text";break;case"call_audio":e.content.msg="[收到一条语音聊天消息，请在手机上查看]",e.content.type="text",e.show_type="text";break;case"call_video":e.content.msg="[收到一条视频聊天消息，请在手机上查看]",e.content.type="text",e.show_type="text";break;case"image":break;case"provide_contactinfo_card":case"default_contactinfo_card":break;case"msg_batch_forward_card":e.content._parent_u_key=n._options._u_key,e.content._root_u_key=n._options._root_u_key,e.show_type="msg_batch_forward_card";break;default:e.content.msg="消息格式暂不支持，请在客户端查看",e.content.type="text",e.show_type="text";break}o.push({msg_id:e.msg_id,_msg_id:Number(""+(new Date).valueOf()+c++),sender_id:e.sender_id,sender_source:e.sender_source,to_id:e.to_id,to_source:e.to_source,content:e.content,sender_info:{avatar:e.sender_avatar,user_name:e.sender_name,hide_avatar:t>0&&e.isSameUserWithPrevious},is_in_float_view:!0,u_key:n._options._u_key,send_time:e.create_time,show_type:e.show_type,msg_collect:e.msg_collect?e.msg_collect:null,forward_msgs:e.forward_msgs?e.forward_msgs:null,msg_type:1005,tel:e.tel?e.tel:null,wechat:e.wechat?e.wechat:null,is_uptodate:e.is_uptodate})})),(0,a.default)(o).call(o,(function(e,t){return e.send_time>t.send_time?1:-1})),n._children["msgViewer"].addMsg(o),o.length){var l=new Date(Number(o[0].send_time)),u=new Date(Number(o[o.length-1].send_time));l===u?(0,s.default)(i).call(i,".im-msg-list").prepend(f.replace("${time}",[l.getFullYear(),l.getMonth()+1,l.getDate()].join("/"))):(0,s.default)(i).call(i,".im-msg-list").prepend(f.replace("${time}",[l.getFullYear(),l.getMonth()+1,l.getDate()].join("/")+"-"+[u.getFullYear(),u.getMonth()+1,u.getDate()].join("/")))}},m.prototype.show=function(e){l.prototype.show.call(this)},m.prototype.hide=function(){l.prototype.hide.call(this)},e.exports=m},O0yt:function(e,t,n){e.exports=n("q/LL")},O3vZ:function(e,t,n){n("u+ON");var i=n("oWnS");e.exports=i("Array").indexOf},O741:function(e,t,n){var i=n("hh1v");e.exports=function(e){if(!i(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},OBge:function(e,t,n){e.exports=n("LseE")},ODYn:function(e,t){var n='<li class="im-msg im-msg-mix"> <div class=im-msg-time></div> <div class=im-msg-checkbox></div> <div class=im-msg-main> <img class="im-avatar im-msg-avatar"/> <span class=im-msg-send-status></span> <span class=im-msg-showed-status></span> <span class=im-msg-user-name></span> <div class=im-msg-content> <a class=im-mix-content href=javascript:void(0)> <div class=im-mix-title></div> <img class=im-mix-img /> <div class=im-mix-detail></div> <div class=im-mix-more> 查看更多 <span class=im-mix-more-icon></span> </div> </a> </div> <span class=im-msg-arrow></span> </div> <div class=im-msg-collect-name></div> <div class=im-msg-collect-time></div> <div class=im-msg-feedback> <div class=im-msg-feedback-container> <span class=im-msg-feedback-icon></span> <span class=im-msg-feedback-content></span> </div> </div> </li>';e.exports=n},OG05:function(e,t,n){var i=n("pevS"),a=n("hVCs");i({target:"Array",proto:!0,forced:a!==[].lastIndexOf},{lastIndexOf:a})},OWCx:function(e,t,n){e.exports=n("qRXW")},"OY+d":function(e,t,n){var i=n("G9WS"),a=n("LYCE");n("07d7"),n("rB9j"),n("JfAA"),n("EnZy"),a(t,"__esModule",{value:!0}),t.isObject=u,t.isArray=d,t.isDate=p,t.isReg=f,t.extend=v,t.scanAndCompare=y,t.scanAndSet=w,t.isSameObject=b,t.isEmpty=x;var r=i(n("+oHS")),o=i(n("ZbhI")),s=i(n("nhkr")),c=i(n("RXMP")),l=i(n("bhf8"));function u(e){return"[object Object]"===Object.prototype.toString.call(e)}function d(e){return"[object Array]"===Object.prototype.toString.call(e)}function p(e){return"[object Date]"===Object.prototype.toString.call(e)}function f(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var m=function(){var e={},t="Boolean Number String Function Array Date RegExp Object Error Symbol".split(" ");return(0,c.default)(t).call(t,(function(t){e["[object "+t+"]"]=t.toLowerCase()})),e}(),_=function(e){return null==e?e+"":"object"===(0,s.default)(e)||"function"===typeof e?m[{}.toString.call(e)]||"object":(0,s.default)(e)},h=function(e){return"function"===_(e)},g=function(e){return"object"===_(e)};function v(){var e,t,n,i,a,r,o=arguments[0]||{},c=1,l=arguments.length,u=!1;for("boolean"===typeof o&&(u=o,o=arguments[c]||{},c++),"object"===(0,s.default)(o)||h(o)||(o={}),c===l&&(o=this,c--);c<l;c++)if(null!=(a=arguments[c]))for(i in a)e=o[i],n=a[i],o!==n&&(u&&n&&(g(n)||(t=d(n)))?(t?(t=!1,r=e&&d(e)?e:[]):r=e&&g(e)?e:{},o[i]=v(u,r,n)):void 0!==n&&(o[i]=n));return o}function y(e,t,n){for(var i in e)t.hasOwnProperty(i)?(0,s.default)(e[i])!==(0,s.default)(t[i])||x(e[i])||x(t[i])?l.default?t[i]=e[i]:"function"===typeof t.__vm__set?t.__vm__set(i,e[i]):t[i]=e[i]:u(e[i])?y(e[i],t[i],!0):(d(e[i]),l.default?t[i]=e[i]:"function"===typeof t.__vm__set?t.__vm__set(i,e[i]):t[i]=e[i]):l.default?t[i]=e[i]:"function"===typeof t.__vm__set?t.__vm__set(i,e[i]):t[i]=e[i];var a=["__vm__get","__vm__hash","__vm__set"];if(n)for(var r in t)(0,o.default)(a).call(a,r)<0&&!e.hasOwnProperty(r)&&(t[r]=void 0,delete t[r])}function w(e,t,n){for(var i in e)t.hasOwnProperty(i)?(0,s.default)(e[i])!==(0,s.default)(t[i])?t[i]=e[i]:u(e[i])&&u(t[i])?w(e[i],t[i],!0):(d(e[i]),t[i]=e[i]):t[i]=e[i];if(n)for(var a in t)e.hasOwnProperty(a)||delete t[a]}function b(e,t){var n=!0;if(u(e)&&u(t)){var i=(0,r.default)(e),a=(0,r.default)(t);if(i.length!=a.length)return n;for(var o in e)if(o){if(!t.hasOwnProperty(o)){n=!1;break}if(u(t[o])&&u(e[o]))b(t[o],e[o])||(n=!1);else if(d(t[o])&&d(e[o]))b(t[o],e[o])||(n=!1);else if(t[o]!==e[o]){n=!1;break}}for(var s in t)if(s){if(!e.hasOwnProperty(s)){n=!1;break}if(u(t[s])&&u(e[s]))b(t[s],e[s])||(n=!1);else if(d(t[s])&&d(e[s]))b(t[s],e[s])||(n=!1);else if(t[s]!==e[s]){n=!1;break}}}else{if(!d(e)||!d(t))return p(e)&&p(t)?e.getTime()===t.getTime():f(e)&&f(t)?reg.valueOf()===reg.valueOf():e===t;if(e.length!==t.length)return!1;for(var c=0;c<e.length;c++)if(!b(e[0],t[0])){n=!1;break}}return n}function x(e){return e+""==="null"||e+""==="undefined"||""===e}},Oiu0:function(e,t,n){var i=n("G9WS"),a=n("yQr1");n("rB9j"),n("EnZy");var r=i(n("M5Mt")),o=i(n("UtpJ")),s=i(n("ZbhI")),c=i(n("06Pm")),l=i(n("kA7L")),u=i(n("hO3g")),d=i(n("X5/F")),p=i(n("3SUL")),f=i(n("eYnF")),m=i(n("PdFA"));function _(e){var t=h();return function(){var n,i=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;n=a(i,arguments,r)}else n=i.apply(this,arguments);return(0,p.default)(this,n)}}function h(){if("undefined"===typeof Reflect||!a)return!1;if(a.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(a(Date,[],(function(){}))),!0}catch(e){return!1}}var g=n("k6ad"),v=(n("JVDe"),n("eBtS")),y=n("TOzb"),w=n("FZ3N"),b=n("/Pub"),x=(n("l1Yk"),n("sfi9")),S=n("6Rj3"),k=n("8e1d").strToNumCompare,E=function(e){if(e.group)return"group-"+e.group.id;if(e.contact){var t="contact-"+e.contact.user_id+"@"+e.contact.user_source,n=e.contact.shop_id+"@"+e.contact.shop_source;return e.contact.shop_id&&e.contact.shop_source?t+"@@"+n:t}return null},C=function(e){(0,d.default)(n,e);var t=_(n);function n(e){var i;(0,c.default)(this,n);var a={template:y,getMoreSession:function(e){e([],!1)}};return v.extend(a,e),i=t.call(this,a),i._oldOrder=[],i._newOrder=[],i._loadingSession=!1,i._moreSession=!0,i._render=!1,i._rendered=!1,i._currentSession=null,i._lastMsg=null,function(e){b.register((function(t){switch(t.type){case x.SESSION_SELF_CHANGE:var n=t.data,i=E(n);n.checked&&e._children[i]&&(e._currentSession=i,e.scrollToTarget(i)),e.updateContactSession(n);break;case x.CONTACT_ONLINE_CHANGE:e.setOnline(t.data);break;default:break}}))}((0,u.default)(i)),function(e){if(e._options&&e._options.is_vm);else{var t=new S;e.getElement().append(t.getElement()),e._children["session-loading"]=t}e.addMoreSession(),e.getElement().css({marginTop:0})}((0,u.default)(i)),i}return(0,l.default)(n,[{key:"components",value:function(){return{"session-item":w,loading:S}}},{key:"vm_template",value:function(){return g()}},{key:"vm_data",value:function(){return{sessions:[]}}},{key:"vm_methods",value:function(){return{createkey:E}}},{key:"setOnline",value:function(e){var t=this,n="contact-"+e.user_id+"@"+e.user_source;this._children[n]&&this._children[n].setData({is_online:e.is_online}),v.each(this._children,(function(i,a){-1!==(0,s.default)(i).call(i,"@@")&&i.split("@@")[0]==n?t._children[i].setData({is_online:e.is_online}):-1!==(0,s.default)(i).call(i,"group")&&a._data&&a._data.session&&a._data.session.children&&v.each(a._data.session.children,(function(t,n){n.contact&&n.contact.user_id==e.user_id&&n.contact.user_source==e.user_source&&(a._data.session.children[t].is_online=e.is_online)}))}))}},{key:"empty",value:function(){var e=this;v.each(this._children,(function(t,n){n.destroy(),delete e._children[t]}))}},{key:"setSessions",value:function(e,t){var n=this,i=null,a=null;n._options&&n._options.is_vm?n.setData({sessions:e},!1,(function(){v.each(e,(function(e,t){var r=E(t);n._children[r]&&t.checked&&(i=r,a=t.msg?t.msg.msg_id:null)})),n._currentSession===i&&i?0!=k(n._lastMsg,a)&&(n._lastMsg=a,n.scrollToTarget(i)):n._currentSession=i,n._children["session-loading"]&&n._children["session-loading"].close(),"function"===typeof t&&t()})):(v.each(e,(function(e,t){var r=E(t);if(n._children[r])return n.reorderSession(r),n._children[r].setSession(t),void(t.checked&&(i=r,a=t.msg?t.msg.msg_id:null));var o=new w({key:r});o&&(n._children[r]=o,o.setSession(t),n._element.append(o.getElement())),n.reorderSession(r)})),this._currentSession===i&&i?0!=k(this._lastMsg,a)&&(this._lastMsg=a,this.scrollToTarget(i)):this._currentSession=i,this._children["session-loading"]&&this._children["session-loading"].close(),this.deleteSpareSession(),"function"===typeof t&&t())}},{key:"updateContactSession",value:function(e){var t=E(e),n=this._children[t];n&&n.setSession(e)}},{key:"deleteSpareSession",value:function(){this._render&&this._rendered&&(this._render=!1,this._rendered=!1,this.addMoreSession());var e=this,t=this._oldOrder,n=[];if(this._newOrder.length<t.length){var i=(0,o.default)(t).call(t,this._newOrder.length);v.each(i,(function(t,i){e.remove(i),n.push(i)}))}this._oldOrder=this._newOrder,this._newOrder=[]}},{key:"reorderSession",value:function(e){var t=this._oldOrder,n=v.inArray(e,this._newOrder);if("-1"!=n)return!1;this._newOrder.push(e);var i=v.inArray(e,t),a=this._children[e];"-1"!=i&&(0,r.default)(t).call(t,i,1),(0,r.default)(t).call(t,this._newOrder.length-1,0,e),this._newOrder.length<2?this.getElement().prepend(a.getElement()):this._children[this._newOrder[this._newOrder.length-2]].after(this._children[e])}},{key:"remove",value:function(e){this._children[e]&&this._children[e].destroy(),delete this._children[e]}},{key:"addLoading",value:function(){var e=this.getElement().outerHeight()-this.getElement().parent().outerHeight();if(!this._moreSession||this._loadingSession)return!1;var t=this;this._loadingSession=!0,this._children["session-loading"]&&this._children["session-loading"].open(),this.getElement().css("margin-top",-(e+25)),this._options.getMoreSession((function(n,i){t._children["session-loading"]&&t._children["session-loading"].close(),t._loadingSession=!1,i&&0!==n.length||(t._moreSession=!1,t.getElement().css({marginTop:-e}))}))}},{key:"addMoreSession",value:function(){(function e(t,n,i){if(t._render||i++>=n)return t._rendered=!0,!1;t._render=!0;var a=t.getElement().parent().height(),r=t.getElement().height();if(r>a)return t._render=!1,t._rendered=!0,!1;t._options.getMoreSession((function(a,r){if(!r)return 0===a.length&&0===t._oldOrder.length&&(t._children["session-loading"].close(),t.triggerEvent("voidlist")),t._render=!1,t._rendered=!0,!1;a.length||(t._render=!1),e(t,n,i)}))})(this,100,0)}},{key:"scrollToTarget",value:function(e){var t,n=this._children[e].getElement().position().top,i=this.getElement().parent().height();t=!(n>=0&&n<=i-this._children[e].getElement().height())&&(n<0?n:this._children[e].getElement().height()-(i-n)),this.triggerEvent("setScrollTop",t)}}]),n}(m.default);e.exports=C},Onu3:function(e,t,n){"use strict";var i=n("67WC"),a=n("tycR").findIndex,r=i.aTypedArray,o=i.exportTypedArrayMethod;o("findIndex",(function(e){return a(r(this),e,arguments.length>1?arguments[1]:void 0)}))},OsYe:function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||function(){return this}()||Function("return this")()}).call(this,n("yLpj"))},P4y1:function(e,t){e.exports={}},P8wP:function(e,t,n){"use strict";var i=n("67WC"),a=n("tycR").map,r=n("SEBh"),o=i.aTypedArray,s=i.aTypedArrayConstructor,c=i.exportTypedArrayMethod;c("map",(function(e){return a(o(this),e,arguments.length>1?arguments[1]:void 0,(function(e,t){return new(s(r(e,e.constructor)))(t)}))}))},PF2M:function(e,t,n){"use strict";var i=n("67WC"),a=n("UMSQ"),r=n("GC2F"),o=n("ewvW"),s=n("0Dky"),c=i.aTypedArray,l=i.exportTypedArrayMethod,u=s((function(){new Int8Array(1).set({})}));l("set",(function(e){c(this);var t=r(arguments.length>1?arguments[1]:void 0,1),n=this.length,i=o(e),s=a(i.length),l=0;if(s+t>n)throw RangeError("Wrong length");while(l<s)this[t+l]=i[l++]}),u)},"PJ+M":function(e,t,n){var i=n("DKI4");e.exports=i},PKPk:function(e,t,n){"use strict";var i=n("ZUd8").charAt,a=n("afO8"),r=n("fdAy"),o="String Iterator",s=a.set,c=a.getterFor(o);r(String,"String",(function(e){s(this,{type:o,string:String(e),index:0})}),(function(){var e,t=c(this),n=t.string,a=t.index;return a>=n.length?{value:void 0,done:!0}:(e=i(n,a),t.index+=e.length,{value:e,done:!1})}))},PdFA:function(e,t,n){var i=n("G9WS"),a=n("LYCE"),r=n("HnXd"),o=n("qjzJ"),s=n("RXMP"),c=n("fHi0"),l=n("5PDf"),u=n("OWCx"),d=n("+oHS"),p=n("yQr1");a(t,"__esModule",{value:!0}),t.default=void 0;var f=i(n("eLKs")),m=i(n("M5Mt")),_=i(n("6UaR")),h=i(n("04Ix")),g=i(n("06Pm")),v=i(n("kA7L")),y=i(n("hO3g")),w=i(n("X5/F")),b=i(n("3SUL")),x=i(n("eYnF")),S=i(n("YTVN")),k=i(n("yd4P")),E=i(n("5PQY")),C=i(n("AZU8")),A=i(n("CThG")),O=i(n("wMv5")),T=i(n("XxAm")),M=i(n("Ff6i")),I=n("MO5i"),N=n("OY+d");function L(e,t){var n=d(e);if(u){var i=u(e);t&&(i=l(i).call(i,(function(t){return c(e,t).enumerable}))),n.push.apply(n,i)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)s(n=L(Object(i),!0)).call(n,(function(t){(0,h.default)(e,t,i[t])}));else if(o)r(e,o(i));else{var l;s(l=L(Object(i))).call(l,(function(t){a(e,t,c(i,t))}))}}return e}function P(e){var t=D();return function(){var n,i=(0,x.default)(e);if(t){var a=(0,x.default)(this).constructor;n=p(i,arguments,a)}else n=i.apply(this,arguments);return(0,b.default)(this,n)}}function D(){if("undefined"===typeof Reflect||!p)return!1;if(p.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(p(Date,[],(function(){}))),!0}catch(e){return!1}}var j=n("eBtS"),U=function(e){return!isNaN(e)&&e>=0},W=function(e){(0,w.default)(n,e);var t=P(n);function n(e){var i;return(0,g.default)(this,n),i=t.call(this,e),i._element=null,i._children={},i._options=e,e&&e.is_vm?(i.setData=i.vm_setData,i._vm_data=i.vm_data(),i._data=i.vm_data(),i._vm_data=R(R({},i._vm_data),e.data),i._data_vnode_vm_row=[],i._data_vnode_changes=[],i._data_vnode_changes_hash={},i._data_vnode_change_promise,i._vm_methods=i.pack_methods(),i.renderFromTemplate()):function(e){e._options.template&&(e._element=j(e._options.template))}((0,y.default)(i)),i}return(0,v.default)(n,[{key:"vm_data",value:function(){return{}}},{key:"vm_template",value:function(){return{}}},{key:"vm_methods",value:function(){return{}}},{key:"data",value:function(){return{}}},{key:"$watch",value:function(e,t,n){var i=this;n=n||{};var a=new E.default(i,e,t,n);return n.immediate&&t.call(i,a.value),function(){a.teardown()}}},{key:"$set",value:function(e,t,n){if((0,_.default)(e)&&U(t))return e.length=Math.max(e.length,t),(0,m.default)(e).call(e,t,1,n),n;if(t in e&&!(t in Object.prototype))return e[t]=n,n;var i=e.__ob__;return e.__isVue||i&&i.vmCount?n:i?((0,C.default)(i.value,t,n),i.dep.notify(),n):(e[t]=n,n)}},{key:"$delete",value:function(e,t){if((0,_.default)(e)&&U(t))(0,m.default)(e).call(e,t,1);else{var n=e.__ob__;e.__isVue||n&&n.vmCount||hasOwn(e,t)&&(delete e[t],n&&n.dep.notify())}}},{key:"renderFromTemplate",value:function(){var e=this;this.__ob__=new k.default(this._vm_data);var t=A.default.call(this,this._vm_data,!0);this._old_tree=t,this._element=(0,O.default)(t.template),this._vm_element=this._element,this._element=j(this._element),(0,T.default)(this._vm_data,t.watched,(function(t){e._data_vnode_changes_hash[t]||(e._data_vnode_changes_hash[t]=!0,e._data_vnode_changes.push(t))}))}},{key:"pack_methods",value:function(){var e=this,t={},n=this.vm_methods();for(var i in n){var a;if("function"===typeof n[i])t[i]=(0,f.default)(a=n[i]).call(a,e)}return t}},{key:"vm_setData",value:function(e,t,n){var i=this;(0,N.scanAndSet)(e,i._data);var a="function"===typeof i.components?i.components():{};i._data_vnode_change_promise||(i._data_vnode_change_promise=(0,I.nextTick)((function(){var e=i.mutation(i._data);if((0,N.isObject)(e)&&(0,N.scanAndCompare)(e,i._vm_data,t||!1),i._data_vnode_changes.length){var r=A.default.call(i,i._vm_data);M.default.call(i,i._old_tree.template,r.template,a),i._old_tree=r}i._data_vnode_changes=[],i._data_vnode_changes_hash={},i._data_vnode_change_promise=null,"function"===typeof n&&n()})),i._data_vnode_change_promise())}},{key:"createKey",value:function(){}},{key:"mutation",value:function(e){return e}},{key:"getElement",value:function(){return this._element}},{key:"vm_get_element",value:function(){return this._vm_element}}]),n}(S.default),F=W;t.default=F},Pkdo:function(e,t,n){var i=n("pevS"),a=n("wbIY"),r=n("QYBB");i({target:"Object",stat:!0,forced:!a,sham:!a},{defineProperty:r.f})},Pkew:function(e,t,n){"use strict";var i=n("y9AQ").charAt,a=n("L1rz"),r=n("QFZC"),o="String Iterator",s=a.set,c=a.getterFor(o);r(String,"String",(function(e){s(this,{type:o,string:String(e),index:0})}),(function(){var e,t=c(this),n=t.string,a=t.index;return a>=n.length?{value:void 0,done:!0}:(e=i(n,a),t.index+=e.length,{value:e,done:!1})}))},PoCt:function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+i).toString(36)}},Ptoe:function(e,t,n){var i=n("G9WS");n("rB9j"),n("UxlC");var a=i(n("ZbhI")),r=n("mSDJ").Base64,o=function(e){if(null==e||0==e.length)return"";var t=r.encode(e),n=0,i=(0,a.default)(t).call(t,"=");-1!==i&&(n=t.length-i,t=t.substring(0,i)),t+=n,t=t.replace(/\+/g,"-").replace(/\//g,"_");var o=Math.floor(t.length/2),s=t.substring(o),c=t.substring(0,o),l=s+c;return l};o.getVersion=function(){return"j1.0"},e.exports=o},Q0Rw:function(e,t,n){var i=n("39uu"),a=n("YiBS"),r=n("A2Ma"),o=r("species");e.exports=function(e,t){var n;return a(e)&&(n=e.constructor,"function"!=typeof n||n!==Array&&!a(n.prototype)?i(n)&&(n=n[o],null===n&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},QDXk:function(e,t,n){var i=n("4zJj");e.exports=i},QFZC:function(e,t,n){"use strict";var i=n("pevS"),a=n("9XUY"),r=n("V3kF"),o=n("7GIe"),s=n("KHTo"),c=n("AnMC"),l=n("1mbr"),u=n("A2Ma"),d=n("cEKj"),p=n("dGO/"),f=n("u4PT"),m=f.IteratorPrototype,_=f.BUGGY_SAFARI_ITERATORS,h=u("iterator"),g="keys",v="values",y="entries",w=function(){return this};e.exports=function(e,t,n,u,f,b,x){a(n,t,u);var S,k,E,C=function(e){if(e===f&&I)return I;if(!_&&e in T)return T[e];switch(e){case g:return function(){return new n(this,e)};case v:return function(){return new n(this,e)};case y:return function(){return new n(this,e)}}return function(){return new n(this)}},A=t+" Iterator",O=!1,T=e.prototype,M=T[h]||T["@@iterator"]||f&&T[f],I=!_&&M||C(f),N="Array"==t&&T.entries||M;if(N&&(S=r(N.call(new e)),m!==Object.prototype&&S.next&&(d||r(S)===m||(o?o(S,m):"function"!=typeof S[h]&&c(S,h,w)),s(S,A,!0,!0),d&&(p[A]=w))),f==v&&M&&M.name!==v&&(O=!0,I=function(){return M.call(this)}),d&&!x||T[h]===I||c(T,h,I),p[t]=I,f)if(k={values:C(v),keys:b?I:C(g),entries:C(y)},x)for(E in k)(_||O||!(E in T))&&l(T,E,k[E]);else i({target:t,proto:!0,forced:_||O},k);return k}},QIpd:function(e,t,n){var i=n("xrYK");e.exports=function(e){if("number"!=typeof e&&"Number"!=i(e))throw TypeError("Incorrect invocation");return+e}},QQub:function(e,t,n){"use strict";var i=n("pevS"),a=n("3uAa").map,r=n("nJYk"),o=n("MCtm"),s=r("map"),c=o("map");i({target:"Array",proto:!0,forced:!s||!c},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})},QWnO:function(e,t,n){var i=n("G9WS"),a=i(n("rPUy")),r=i(n("ZbhI")),o=n("JVDe"),s=(n("eBtS"),function(e){var t,n;o.call(this,e),function(e){e._element.addClass("im-plugin")}(this),this._input=null,(0,r.default)(t=navigator.userAgent).call(t,"MSIE 7.0")>0||(0,r.default)(n=navigator.userAgent).call(n,"MSIE 8.0")>0?this._win=document:this._win=window});s.prototype=(0,a.default)(o.prototype),s.prototype.render=function(){this._data.opened?this._element.addClass("im-opened"):this._element.removeClass("im-opened")},s.prototype.open=function(){this._opened=!0,this.setData({opened:!0})},s.prototype.close=function(){this._opened=!1,this.setData({opened:!1})},s.prototype.setInput=function(e){return this._input=e},e.exports=s},QYBB:function(e,t,n){var i=n("wbIY"),a=n("d7IX"),r=n("b42z"),o=n("cWgI"),s=Object.defineProperty;t.f=i?s:function(e,t,n){if(r(e),t=o(t,!0),r(n),a)try{return s(e,t,n)}catch(i){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},QgIy:function(e,t,n){n("FHuo");var i=n("oWnS");e.exports=i("Array").filter},Qo9l:function(e,t,n){var i=n("2oRo");e.exports=i},QoNM:function(e,t,n){var i,a=n("G9WS"),r=a(n("04Ix")),o=n("ooPF");e.exports=o((i={text:null,modify_msg:null,tip:null,operation_tip:null,auth_tip:null,image:null,file:null,video:null,audio:null,call_audio:null,call_video:null,standard_evaluate_card1:null,standard_evaluate_card2:null,universal_card1:null,universal_card2:null,universal_card3:null,universal_card4:null,universal_card5:null,universal_card6:null,wuba_card:null,private_card_ganji:null,shop_common_card:null,provide_contactinfo_card:null,default_contactinfo_card:null},(0,r.default)(i,"provide_contactinfo_card",null),(0,r.default)(i,"msg_batch_forward_card",null),(0,r.default)(i,"chat_card",null),i))},QqFD:function(e,t,n){var i=n("G9WS");n("oVuX"),n("rB9j"),n("UxlC");var a=i(n("/FZm")),r=i(n("M5Mt")),o=i(n("FLGM")),s=i(n("UtpJ")),c=i(n("RXMP")),l=i(n("rPUy")),u=i(n("ZbhI")),d=i(n("guyh")),p=n("5m4N"),f=n("eBtS"),m=n("vlhY"),_=n("/Pub"),h=n("sfi9"),g=n("823k"),v=(n("exIe"),n("XYJ2")),y=n("4X6O"),w=n("SaSm"),b=n("Bboc"),x=n("Bboc"),S=x.isEmpty,k=b.isGroupUser,E=b.jsonHandler,C=b.isEmpty,A=b.isShopModeUser,O=n("VRhk"),T=/(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&:/~\+#]*[\w\-\@?^=%&/~\+#])?[^(&nbsp;)]/gi,M='<a class="im-msg-action im-msg-click" data-msg-id="${msg-id}">${content}</a>',I=function(e){var t=e.replace(T,(function(e){return'<a class="im-msg-action" href="'+e+'" target="_blank">'+e+"</a>"}));return t},N=function(e,t){if(C(e)||C(t)||0===t.length)return e;var n=e;return(0,d.default)(t).call(t,(function(e,t){return t.rule.pos_start-e.rule.pos_start})),f.each(t,(function(t,i){var a=i.rule,r=a.pos_start,o=a.pos_end,s=e.length;n=n.substring(0,r)+i.replaceText+n.substring(o,s)})),n},L=function(e){return e=e.replace(/(\[[^\[\]]*\])/g,(function(e){var t,n=(0,u.default)(t=g.emotionTitles).call(t,e.replace(/[\[\]]/g,""));return-1==n?e:'<div style="margin-bottom:-3px;margin-left:5px;display:inline-block;" class="im-emotion-'+n+'"></div>'})),e},R=function(e,t){if(C(e)||C(e.content)||"text"!=e.content.type||C(e.at_info)||-1===e.at_index)return e;var n,i=[];if("string"===typeof e.at_info&&(n=E.parse(e.at_info)),C(n))return e;var a=n.targets;if(C(a)||0==a.length)return e;var r="string"===typeof e.content?E.parse(e.content):C(e.content)?{}:e.content,o=k({user_source:e.to_source});switch(t){case"session":break;default:f.each(a,(function(t,n){var a,s;if(o)k({user_source:n.source})&&(e.extendAt||-1!=(0,u.default)(s=r.msg).call(s,"@所有人")||(a="@所有人 "));else if(!e.is_mine){var c=O["me"](),l=c.user_id+"@"+c.user_source;l===n.id+"@"+n.source&&c.userInfo&&c.userInfo.user_name&&(a="@"+c.userInfo.user_name)}C(a)||i.push({rule:n,replaceText:a})})),r.msg=N(r.msg,i);break}return e.content="string"===typeof e.content?E.stringify(r):r,e},P=function(e){return e=e.replace(/(\n)/g,"<br>"),e=e.replace(/\s/g,"&nbsp;"),e=I(e),e=L(e),e=v.doFilter(e),e},D=function(e){(function(t){var n={template:m};f.extend(n,e),p.call(t,n)})(this),this._rendered=!1};D.prototype=(0,l.default)(p.prototype),D.prototype.renderContent=function(){var e,t=this._data.msg;t=R(t);var n,i=t.content,l=C(i.extra)||"string"!=typeof i.extra?{}:E.parse(i.extra),d=C(i.imExtra)?{}:i.imExtra;if(!C(l)&&!C(l.better_msg)&&"shop_common_card"==l.better_msg.type){var p=l.better_msg.element||[];(0,c.default)(p).call(p,(function(e){if("text"==e.type)i.msg=e.text;else if("buttons"==e.type){var t;(0,c.default)(t=e.childs||[]).call(t,(function(e){if("button"==e.type&&e.action&&e.actionData&&e.actionPostData){if("恢复绑定"!=e.text)return;C(i.actions)&&(i.actions=[]),i.actions.push({action:e.action,actionData:e.actionData,actionPostData:C(e.actionPostData)?{}:E.parse(e.actionPostData),actionText:e.text})}}))}}))}if(y.isNeedConvert(i)){i.extra=l;var f=i.extra.richtext_format.richtext;i.extra.richtext_format.richtext=P(f),i.extra=E.stringify(i.extra),t.content=i,n=y.richTextFormat(t).content.msg}else{var m,g=i.msg||"",v=i.msg||"",b=[],x=[],k="";if(g=g.replace(T,(function(e){if(!S(e)){var t,n;if(m={value:e,length:e.length,start:(0,u.default)(v).call(v,e)+k.length},m.end=m.start+e.length,b.length)m.start==b[b.length-1].end?m.position=b[b.length-1].position+1:m.start>b[b.length-1].end&&(m.position=b[b.length-1].position+2),x.push((0,s.default)(t=i.msg).call(t,b[b.length-1].end,m.start));else m.position=m.start>0?1:0,x.push((0,s.default)(n=i.msg).call(n,0,m.start));b.push(m),v=v.replace(e,""),k+=e}return""})),b.length){var O;if(b[b.length-1].end<i.msg.length-1)x.push((0,s.default)(O=i.msg).call(O,b[b.length-1].end));g=(0,o.default)(x).call(x,(function(e){return w(e)})),(0,c.default)(b).call(b,(function(e){(0,r.default)(g).call(g,e.position,0,e.value)})),n=P(g.join(""))}else n=P(w(i.msg))}if(C(i.actions)){var I;if((0,a.default)(I=this._element).call(I,".im-msg-content").html(n),!C(this._options.me)&&A(t,this._options.me)&&!d.isAIMsg&&!t.is_mine&&C(i.quote)){var N,L=this._options.me.user_id+"@"+this._options.me.user_source;if(L!=t.sender_id+"@"+t.sender_source&&L!=t.to_id+"@"+t.to_source)(0,a.default)(N=this._element).call(N,".im-msg-ai").data("msg-id",t.msg_id).show()}}else{var D,j,U=n+"<br/>";if(!C(i.actions)&&i.actions.length)(0,c.default)(j=i.actions).call(j,(function(e){U+=M.replace("${content}",e.actionText).replace("${msg-id}",t.msg_id)}));(0,a.default)(D=this._element).call(D,".im-msg-content").html(U)}var W=(0,a.default)(e=this._element).call(e,".im-msg-content");W.click((function(e){e.stopPropagation(),"collect"===t.msg_showtype&&_.dispatch({type:h.COLLECTION_MESSAGE_FLOAT,data:{msgList:t.msgs,title:t.sender_info.user_name+"聊天记录",id:t.msg_id,parent_u_key:t.content._parent_u_key?t.content._parent_u_key:""}})}))},e.exports=D},Qub4:function(e,t,n){var i=n("Bvq2");e.exports=!i((function(){return Object.isExtensible(Object.preventExtensions({}))}))},R4fh:function(e,t,n){var i=n("G9WS");n("rB9j"),n("UxlC"),n("EnZy");var a=i(n("ZbhI")),r=i(n("OBge")),o=n("Bboc"),s=o.isEmpty,c=o.jsonHandler,l={},u=function(e,t,n){try{var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="blob",i.onload=t,i.onerror=n,i.send()}catch(a){n&&n(a)}},d=function(e,t,n){return new r.default((function(t,n){if(!s(e)){var i=e._original_content?e._original_content:e.content,a=e._original_show_type||e.show_type||i.type,r=0;switch(a){case"text":r=i.msg.length,t(r);break;case"mix":case"minicard":case"universal_card1":case"universal_card2":case"universal_card3":case"universal_card4":case"universal_card5":case"universal_card6":case"standard_evaluate_card1":case"standard_evaluate_card2":case"provide_contactinfo_card":case"default_contactinfo_card":r=c.stringify(i).length,t(r);break;case"file":case"video":case"image":case"audio":var o;"audio"===i.type?o=i.oldUrl?i.oldUrl:i.url:"image"===i.type?(o=i.url,o=o.replace("http:","")):o=i.url,l[o]||!s(i.size)&&i.size>0?(l[o]=s(l[o])?i.size:l[o],t(l[o])):u(o,(function(e,i,a){var c=this.response&&this.response.size?this.response.size:null;s(c)?n({error_code:405,error_msg:"获取文件大小未知错误"}):(l[o]=r,t(l[o]))}),(function(e,t,i){e&&"404"==e.status?n({error_code:404,error_msg:"文件不存在",err:e}):n({error_code:405,error_msg:"获取文件大小未知错误",err:e})}));break;default:r=c.stringify(i).length,t(r);break}}}))},p=function(e,t,n){return new r.default((function(i,r){var o,c,l,u,d,p=n._original_content?n._original_content:n.content;if(-1==(0,a.default)(o=["video","audio","file"]).call(o,p.type))return i();var f=[],m=-1!=(0,a.default)(c=p.url).call(c,e.WOS_CLIENT_APP_ID)&&e.WOS_CLIENT_URL?e.WOS_CLIENT_URL:e.WOS_CDN_URL?e.WOS_CDN_URL:"",_=decodeURIComponent(p.url).split(m);f=!s(m)&&_.length>1?_[1].split("/"):!s(m)&&_.length>0?_[0].split("/"):[];if(0!=f.length){var h,g=p.wos_file_name?p.wos_file_name:-1!=(0,a.default)(l=p.url).call(l,e.WOS_CLIENT_APP_ID)?f[8]||f[5]:f[3],v=-1!=(0,a.default)(u=p.url).call(u,e.WOS_CLIENT_APP_ID)?e.WOS_CLIENT_APP_ID:f[1],y=f.length;s(v)&&y>3&&(v=f[y-3],h=f[y-2]);var w=new WosSys({appid:v,bucket:t.bucket,wosurl:-1!=(0,a.default)(d=p.url).call(d,e.WOS_CLIENT_APP_ID)&&e.WOS_CLIENT_URL?e.WOS_CLIENT_URL:e.WOS_URL?e.WOS_URL:"",getAppSign:function(e){e(encodeURIComponent(t.wos_token))}}),b={bucketName:t.bucket,remotePath:g,ttl:t.no_extendMsgValidity?t._wos_file_expire:t.extend_wos_file_expire?t.extend_wos_file_expire:0,onUploadProgress:function(e){},onUploadSuccess:function(e){i(e)},onUploadError:function(e){h!==t.bucket&&t.no_extendMsgValidity?i():r({error_code:e.status?e.status:"404",error_msg:"设置文件有效期，上传文件错误",err:e})}};w.setFileTtl(b)}else r({error_code:406,error_msg:"文件源地址无法延期"})}))};e.exports={getMsgSize:d,extendMsgValidity:p}},R9qo:function(e,t,n){n("WtsB");var i=n("dktu");e.exports=i.Object.getOwnPropertyDescriptors},RALh:function(e,t,n){var i=n("9EaA");e.exports=i},RK3t:function(e,t,n){var i=n("0Dky"),a=n("xrYK"),r="".split;e.exports=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==a(e)?r.call(e,""):Object(e)}:Object},RKTd:function(e,t,n){e.exports=n("juuZ")},RLMD:function(e,t,n){n("TAYc");var i=n("oWnS");e.exports=i("Array").reduce},RLqH:function(e,t,n){var i=n("wbIY"),a=n("cEPT"),r=n("LGyv"),o=n("pCEo"),s=n("cWgI"),c=n("eOcF"),l=n("d7IX"),u=Object.getOwnPropertyDescriptor;t.f=i?u:function(e,t){if(e=o(e),t=s(t,!0),l)try{return u(e,t)}catch(n){}if(c(e,t))return r(!a.f.call(e,t),e[t])}},RN6c:function(e,t,n){var i=n("2oRo");e.exports=function(e,t){var n=i.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},RNIs:function(e,t,n){var i=n("tiKp"),a=n("fHMY"),r=n("m/L8"),o=i("unscopables"),s=Array.prototype;void 0==s[o]&&r.f(s,o,{configurable:!0,value:a(null)}),e.exports=function(e){s[o][e]=!0}},ROdP:function(e,t,n){var i=n("hh1v"),a=n("xrYK"),r=n("tiKp"),o=r("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==a(e))}},RQhY:function(e,t,n){var i=n("FWHo"),a=Math.max,r=Math.min;e.exports=function(e,t){var n=i(e);return n<0?a(n+t,0):r(n,t)}},RXMP:function(e,t,n){e.exports=n("JLQQ")},Rk6w:function(e,t,n){var i=n("pevS");i({target:"Date",stat:!0},{now:function(){return(new Date).getTime()}})},Rm1S:function(e,t,n){"use strict";var i=n("14Sl"),a=n("glrk"),r=n("UMSQ"),o=n("HYAF"),s=n("iqWW"),c=n("FMNM");i("match",1,(function(e,t,n){return[function(t){var n=o(this),i=void 0==t?void 0:t[e];return void 0!==i?i.call(t,n):new RegExp(t)[e](String(n))},function(e){var i=n(t,e,this);if(i.done)return i.value;var o=a(e),l=String(this);if(!o.global)return c(o,l);var u=o.unicode;o.lastIndex=0;var d,p=[],f=0;while(null!==(d=c(o,l))){var m=String(d[0]);p[f]=m,""===m&&(o.lastIndex=s(l,r(o.lastIndex),u)),f++}return 0===f?null:p}]}))},"Rxu/":function(e,t,n){"use strict";var i=n("ZBQp"),a=n("T/97"),r=n("+qqD"),o=n("JhaV"),s=n("ZyXh"),c=n("bBVJ"),l=n("C3ug");e.exports=function(e){var t,n,u,d,p,f,m=a(e),_="function"==typeof this?this:Array,h=arguments.length,g=h>1?arguments[1]:void 0,v=void 0!==g,y=l(m),w=0;if(v&&(g=i(g,h>2?arguments[2]:void 0,2)),void 0==y||_==Array&&o(y))for(t=s(m.length),n=new _(t);t>w;w++)f=v?g(m[w],w):m[w],c(n,w,f);else for(d=y.call(m),p=d.next,n=new _;!(u=p.call(d)).done;w++)f=v?r(d,g,[u.value,w],!0):u.value,c(n,w,f);return n.length=w,n}},S0Ae:function(e,t){(function(){for(var e=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;n++)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var n=(new Date).getTime(),i=Math.max(0,16-(n-e)),a=window.setTimeout((function(){t(n+i)}),i);return e=n+i,a}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})})()},SAPz:function(e,t){var n='<li class="im-msg im-msg-mix im-msg-card5 im-msg-ganji"> <div class=im-msg-time></div> <div class=im-msg-checkbox></div> <div class=im-msg-main> <img class="im-avatar im-msg-avatar"/> <span class=im-msg-send-status></span> <span class=im-msg-showed-status></span> <span class=im-msg-user-name></span> <div class=im-msg-content> <a class=im-card-thumbnail target=_blank></a> <div class=im-card-content> <div class=card-header> <div class="one-line card-title"></div> <div class=card-sub-titles></div> </div> <ul class=card-list> <script type=text/html> <li class="list-item">\n              <div class="item-body vertical-middle">\n                <div class="cell">\n                  <div class="inner">\n                    <span class="one-line item-title"></span>\n                    <div class="one-line item-label"></div>\n                    <div class="one-line item-price">\n                      \x3c!--<span class="price"></span>\n                      <span class="unit">元/月</span>--\x3e\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <img class="item-img" src="" alt="">\n            </li> <\/script> </ul> </div> <a class="im-mix-content card-more"> <div class=im-mix-more> 查看更多 <span class=im-mix-more-icon></span> </div> </a> </div> <span class=im-msg-arrow></span> </div> <div class=im-msg-collect-name></div> <div class=im-msg-collect-time></div> <div class=im-msg-feedback> <div class=im-msg-feedback-container> <span class=im-msg-feedback-icon></span> <span class=im-msg-feedback-content></span> </div> </div> </li>';e.exports=n},SE4I:function(e,t,n){var i=n("pevS"),a=n("Rxu/"),r=n("feed"),o=!r((function(e){Array.from(e)}));i({target:"Array",stat:!0,forced:o},{from:a})},SEBh:function(e,t,n){var i=n("glrk"),a=n("HAuM"),r=n("tiKp"),o=r("species");e.exports=function(e,t){var n,r=i(e).constructor;return void 0===r||void 0==(n=i(r)[o])?t:a(n)}},SJYm:function(e,t,n){var i,a=n("b42z"),r=n("wjB2"),o=n("nleh"),s=n("bpon"),c=n("7b0v"),l=n("ejc7"),u=n("su3n"),d=">",p="<",f="prototype",m="script",_=u("IE_PROTO"),h=function(){},g=function(e){return p+m+d+e+p+"/"+m+d},v=function(e){e.write(g("")),e.close();var t=e.parentWindow.Object;return e=null,t},y=function(){var e,t=l("iframe"),n="java"+m+":";return t.style.display="none",c.appendChild(t),t.src=String(n),e=t.contentWindow.document,e.open(),e.write(g("document.F=Object")),e.close(),e.F},w=function(){try{i=document.domain&&new ActiveXObject("htmlfile")}catch(t){}w=i?v(i):y();var e=o.length;while(e--)delete w[f][o[e]];return w()};s[_]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(h[f]=a(e),n=new h,h[f]=null,n[_]=e):n=w(),void 0===t?n:r(n,t)}},STAE:function(e,t,n){var i=n("0Dky");e.exports=!!Object.getOwnPropertySymbols&&!i((function(){return!String(Symbol())}))},SaSm:function(e,t){var n;e.exports=function(e){return n=n||document.createElement("div"),void 0!==n.textContent?n.textContent=e:n.innerText=e,n.innerHTML}},ScaH:function(e,t,n){var i=n("G9WS"),a=i(n("rPUy")),r=i(n("RXMP")),o=i(n("/FZm")),s=n("eBtS"),c=n("hH+v"),l=n("QWnO"),u=n("VRhk"),d=n("/Pub"),p=n("sfi9"),f=function(e){this._opened=!1,function(t){var n,i,a={template:c,texts:[]};s.extend(a,e),l.call(t,a);var f=(0,o.default)(n=t._element).call(n,".im-contactinfo-texts");(0,o.default)(i=t._element).call(i,".im-contactinfo-icon").click((function(){var e;(t._opened?t.close():t.open(),f[0].getElementsByTagName("li")&&f[0].getElementsByTagName("li").length>0)||(0,r.default)(e=u["user-contactinfo"]).call(e,(function(e){!1!==t._data.is_anonymous_user&&"索取TA的联系方式"===e||s("<li>").text(e).appendTo(f)}))})),f.click((function(e){t.close(),"LI"==e.target.tagName&&"发送我的联系方式"===e.target.innerText?d.dispatch({type:p.PROVIDE_CONTACTINFO,data:"我的联系方式"}):"LI"==e.target.tagName&&"索取TA的联系方式"===e.target.innerText&&t._input.askContactinfo()})),s(t._win).click((function(e){t._opened&&!s.contains(t._element[0],e.target)&&t.close()}))}(this)};f.prototype=(0,a.default)(l.prototype),e.exports=f},SqY4:function(e,t,n){var i,a,r=n("OsYe"),o=n("lxfd"),s=r.process,c=s&&s.versions,l=c&&c.v8;l?(i=l.split("."),a=i[0]+i[1]):o&&(i=o.match(/Edge\/(\d+)/),(!i||i[1]>=74)&&(i=o.match(/Chrome\/(\d+)/),i&&(a=i[1]))),e.exports=a&&+a},SreQ:function(e,t,n){var i=n("G9WS");n("sMBO"),n("rB9j"),n("UxlC");var a=i(n("rPUy")),r=i(n("/FZm")),o=i(n("ZbhI")),s=n("5m4N"),c=n("eBtS"),l=n("xmrK"),u=n("/Pub"),d=n("sfi9"),p=(n("exIe"),n("Bboc")),f=n("VRhk"),m=n("Bwsg"),_=(n("L/Jv"),function(){var e,t,n,i=this,a=i._data.msg.content,s=-1!==(0,o.default)(e=m.name).call(e,"Safari"),c=function(e){var t,n=p.getImgParams(e),a=(0,r.default)(t=i._element).call(t,".im-msg-content");a.css({height:n.height+"px",width:n.width+"px","background-size":n.background_size,"background-image":"url("+n.url+")","background-repeat":"no-repeat"})},l={minsize:50,maxsize:250,image_width:a.thumbnail_width,image_height:a.thumbnail_height,url:a.thumbnail_url&&-1===(0,o.default)(t=a.thumbnail_url).call(t,"data:")&&-1!==!(0,o.default)(n=a.thumbnail_url).call(n,"//")?a.thumbnail_url:f["default-card-img"]};if(s){var u,d=function(e){var t;e&&e.length>1&&-1==(0,o.default)(t=a.thumbnail_url).call(t,".mp4")?l.url=a.thumbnail_url:l.url=f["default-card-img"]},_=a.thumbnail_url;a.thumbnail_url&&(0,o.default)(u=a.thumbnail_url).call(u,"data:")>-1&&(_=a.thumbnail_url.replace("data:","")),d(_)}c(l)}),h=function(e){(function(t){var n={template:l};c.extend(n,e),s.call(t,n)})(this),this._rendered=!1};h.prototype=(0,a.default)(s.prototype),h.prototype.renderContent=function(){var e,t=this,n=t._data.msg,i=(0,r.default)(e=t._element).call(e,".im-msg-video-btn");i.click((function(){u.dispatch({type:d.VIDEO_PLAY,data:n})})),this.update()},h.prototype.update=function(){_.call(this)},e.exports=h},"T/97":function(e,t,n){var i=n("GHVm");e.exports=function(e){return Object(i(e))}},TAYc:function(e,t,n){"use strict";var i=n("pevS"),a=n("5GCO").left,r=n("n2Hk"),o=n("MCtm"),s=n("SqY4"),c=n("AUl2"),l=r("reduce"),u=o("reduce",{1:0}),d=!c&&s>79&&s<83;i({target:"Array",proto:!0,forced:!l||!u||d},{reduce:function(e){return a(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},TBlU:function(e,t,n){var i=n("Jqo0"),a=Array.prototype;e.exports=function(e){var t=e.concat;return e===a||e instanceof Array&&t===a.concat?i:t}},TOzb:function(e,t){var n="<ul class=im-session-list></ul>";e.exports=n},TPFd:function(e,t,n){e.exports=n("KO0j")},TWNs:function(e,t,n){var i=n("g6v/"),a=n("2oRo"),r=n("lMq5"),o=n("cVYH"),s=n("m/L8").f,c=n("JBy8").f,l=n("ROdP"),u=n("rW0t"),d=n("n3/R"),p=n("busE"),f=n("0Dky"),m=n("afO8").set,_=n("JiZb"),h=n("tiKp"),g=h("match"),v=a.RegExp,y=v.prototype,w=/a/g,b=/a/g,x=new v(w)!==w,S=d.UNSUPPORTED_Y,k=i&&r("RegExp",!x||S||f((function(){return b[g]=!1,v(w)!=w||v(b)==b||"/a/i"!=v(w,"i")})));if(k){var E=function(e,t){var n,i=this instanceof E,a=l(e),r=void 0===t;if(!i&&a&&e.constructor===E&&r)return e;x?a&&!r&&(e=e.source):e instanceof E&&(r&&(t=u.call(e)),e=e.source),S&&(n=!!t&&t.indexOf("y")>-1,n&&(t=t.replace(/y/g,"")));var s=o(x?new v(e,t):v(e,t),i?this:y,E);return S&&n&&m(s,{sticky:n}),s},C=function(e){e in E||s(E,e,{configurable:!0,get:function(){return v[e]},set:function(t){v[e]=t}})},A=c(v),O=0;while(A.length>O)C(A[O++]);y.constructor=E,E.prototype=y,p(a,"RegExp",E)}_("RegExp")},TWQb:function(e,t,n){var i=n("/GqU"),a=n("UMSQ"),r=n("I8vh"),o=function(e){return function(t,n,o){var s,c=i(t),l=a(c.length),u=r(o,l);if(e&&n!=n){while(l>u)if(s=c[u++],s!=s)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},TesA:function(e,t,n){var i=n("G9WS"),a=n("LYCE");a(t,"__esModule",{value:!0}),t.traverse=d;var r=i(n("+oHS")),o=i(n("TPFd")),s=i(n("6UaR")),c=i(n("BF1V")),l=n("OY+d"),u=new c.default;function d(e){p(e,u),u.clear()}function p(e,t){var n,i,a=(0,s.default)(e);if((a||(0,l.isObject)(e))&&!(0,o.default)(e)){if(e.__ob__){var c=e.__ob__.dep.id;if(t.has(c))return;t.add(c)}if(a){n=e.length;while(n--)p(e[i[n]],t)}else{i=(0,r.default)(e),n=i.length;while(n--)p(e[i[n]],t)}}}},TfTi:function(e,t,n){"use strict";var i=n("A2ZE"),a=n("ewvW"),r=n("m92n"),o=n("6VoE"),s=n("UMSQ"),c=n("hBjN"),l=n("NaFW");e.exports=function(e){var t,n,u,d,p,f,m=a(e),_="function"==typeof this?this:Array,h=arguments.length,g=h>1?arguments[1]:void 0,v=void 0!==g,y=l(m),w=0;if(v&&(g=i(g,h>2?arguments[2]:void 0,2)),void 0==y||_==Array&&o(y))for(t=s(m.length),n=new _(t);t>w;w++)f=v?g(m[w],w):m[w],c(n,w,f);else for(d=y.call(m),p=d.next,n=new _;!(u=p.call(d)).done;w++)f=v?r(d,g,[u.value,w],!0):u.value,c(n,w,f);return n.length=w,n}},UMSQ:function(e,t,n){var i=n("ppGB"),a=Math.min;e.exports=function(e){return e>0?a(i(e),9007199254740991):0}},"UQe+":function(e,t,n){n("QQub");var i=n("oWnS");e.exports=i("Array").map},UTVS:function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},UUWy:function(e,t,n){n("kQON");var i=n("eKLf"),a=n("OsYe"),r=n("j5XY"),o=n("AnMC"),s=n("dGO/"),c=n("A2Ma"),l=c("toStringTag");for(var u in i){var d=a[u],p=d&&d.prototype;p&&r(p)!==l&&o(p,l,u),s[u]=s.Array}},Ui3k:function(e,t,n){var i=n("OsYe"),a=n("KHTo");a(i.JSON,"JSON",!0)},UlI3:function(e,t){var n='<li class="im-msg im-msg-mutual"> <div class=im-msg-time></div> <div class=im-msg-checkbox></div> <div class=im-msg-main> <img class="im-avatar im-msg-avatar"/> <span class=im-msg-send-status></span> <span class=im-msg-showed-status></span> <span class=im-msg-user-name></span> <div class=im-msg-content> <a class=im-mutual-content href=javascript:void(0) target=_blank> <div class=im-mutual-title></div> <div class=im-mutual-center> <img class=im-mutual-img /> <div class=im-mutual-text> <div class=im-mutual-detail></div> <div class=im-mutual-normal></div> </div> </div> <div class=im-mutual-btn></div> </a> </div> <span class=im-msg-arrow></span> </div> <div class=im-msg-collect-name></div> <div class=im-msg-collect-time></div> <div class=im-msg-feedback> <div class=im-msg-feedback-container> <span class=im-msg-feedback-icon></span> <span class=im-msg-feedback-content></span> </div> </div> </li>';e.exports=n},Uovk:function(e,t,n){var i=n("G9WS"),a=i(n("rPUy")),r=n("IBac"),o=n("eBtS"),s=n("XYJ2"),c=n("Bboc"),l=c.IEVersion(),u=n("SaSm"),d=function(e){var t={template:'<div class="im-input-richtext" contenteditable="true" style="height: 100%;overflow: auto;"></div>'};o.extend(t,e),r.call(this,t)};d.prototype=(0,a.default)(r.prototype),d.prototype.clear=function(){this._element.html(""),this.focus()},d.prototype.get=function(){return{type:"text",msg:this._element.html()}},d.prototype.update=function(e,t){var n=t&&t.is_emotion,i=this.get().msg,a=n||t&&t.need_html_2;-1!==l&&(i="<br>"==i?"":i);var r=s.doFilter(i+(a?e:u(e)));this._element.html(r),this.focus()},d.prototype.inputChange=function(e){this.triggerEvent("inputChange",e)},d.prototype.inputKeyUp=function(e){this.triggerEvent("inputKeyUp",e)},d.prototype.keyboard_output=function(e){this.triggerEvent("keyboardOutput",e)},e.exports=d},UtpJ:function(e,t,n){e.exports=n("QDXk")},UxlC:function(e,t,n){"use strict";var i=n("14Sl"),a=n("glrk"),r=n("ewvW"),o=n("UMSQ"),s=n("ppGB"),c=n("HYAF"),l=n("iqWW"),u=n("FMNM"),d=Math.max,p=Math.min,f=Math.floor,m=/\$([$&'`]|\d\d?|<[^>]*>)/g,_=/\$([$&'`]|\d\d?)/g,h=function(e){return void 0===e?e:String(e)};i("replace",2,(function(e,t,n,i){var g=i.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,v=i.REPLACE_KEEPS_$0,y=g?"$":"$0";return[function(n,i){var a=c(this),r=void 0==n?void 0:n[e];return void 0!==r?r.call(n,a,i):t.call(String(a),n,i)},function(e,i){if(!g&&v||"string"===typeof i&&-1===i.indexOf(y)){var r=n(t,e,this,i);if(r.done)return r.value}var c=a(e),f=String(this),m="function"===typeof i;m||(i=String(i));var _=c.global;if(_){var b=c.unicode;c.lastIndex=0}var x=[];while(1){var S=u(c,f);if(null===S)break;if(x.push(S),!_)break;var k=String(S[0]);""===k&&(c.lastIndex=l(f,o(c.lastIndex),b))}for(var E="",C=0,A=0;A<x.length;A++){S=x[A];for(var O=String(S[0]),T=d(p(s(S.index),f.length),0),M=[],I=1;I<S.length;I++)M.push(h(S[I]));var N=S.groups;if(m){var L=[O].concat(M,T,f);void 0!==N&&L.push(N);var R=String(i.apply(void 0,L))}else R=w(O,f,T,M,N,i);T>=C&&(E+=f.slice(C,T)+R,C=T+O.length)}return E+f.slice(C)}];function w(e,n,i,a,o,s){var c=i+e.length,l=a.length,u=_;return void 0!==o&&(o=r(o),u=m),t.call(s,u,(function(t,r){var s;switch(r.charAt(0)){case"$":return"$";case"&":return e;case"`":return n.slice(0,i);case"'":return n.slice(c);case"<":s=o[r.slice(1,-1)];break;default:var u=+r;if(0===u)return t;if(u>l){var d=f(u/10);return 0===d?t:d<=l?void 0===a[d-1]?r.charAt(1):a[d-1]+r.charAt(1):t}s=a[u-1]}return void 0===s?"":s}))}}))},V3kF:function(e,t,n){var i=n("eOcF"),a=n("T/97"),r=n("su3n"),o=n("9fuf"),s=r("IE_PROTO"),c=Object.prototype;e.exports=o?Object.getPrototypeOf:function(e){return e=a(e),i(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?c:null}},VRhk:function(e,t,n){var i=n("G9WS");n("rB9j"),n("UxlC");var a=i(n("ZbhI")),r={me:function(){},"msg-shortcut":[],"user-contactinfo":["发送我的联系方式","索取TA的联系方式"],"msg-show-converter":function(e){return e},"msg-send-converter":function(e){return e},"session-msg-converter":function(e){return null},"msg-avatar":!0,stat:{appversion:"1.0",appid:"",appkey:"",cookiename:"webimwmda",pn:"default",reportIntervalTime:15,reportIntervalCount:1},maxUrl:"javascript:void(0);",organization:{enabled:!1,getDetailByGroup:function(e,t){t([])},search:function(e,t){t([])}},"msg-sound":"https://wx.qq.com/zh_CN/htmledition/v2/sound/msg.mp3","default-avatar":"https://pic1.58cdn.com.cn/p1/n_v1bkuymc2tsxlfo5wrgb7a.png","default-anonymous-avatar":"https://img.58cdn.com.cn/git/teg-app-fe/im-images/default-images/avatar/anonymous-avatar@2x.png","default-card-img":"https://pic3.58cdn.com.cn/nowater/webim/big/n_v1bl2lwxtpeksfrr3aea3q.png",getUserinfo:function(){},getContactDetailInfo:function(e){return null},"bind-cellphone":function(e,t){t()},"get-bindcellphone-url":function(){return""},"xz-source":"","sessions-converter":function(e,t){t(e)},"on-session-item-click":function(e){var t=!0;return t},"default-contactwindow":{img:"https://pic3.58cdn.com.cn/nowater/webim/big/n_v24245011a3bdf4341a38d213a5cf76fbb.png",tip:"尚未和其他人聊天,请选择您中意的帖子,并与发布者交谈"},"audio-converter":function(e){var t;return"string"===typeof e&&(0,a.default)(e).call(e,"audioconvert.58.com")>-1?0===(0,a.default)(e).call(e,"http://audioconvert.58.com")?t=e.replace("http","https"):0===(0,a.default)(e).call(e,"//audioconvert.58.com")?t="https:"+e:0===(0,a.default)(e).call(e,"audioconvert.58.com")?t="https://"+e:0===(0,a.default)(e).call(e,"https://audioconvert.58.com")&&(t=e):t="https://audioconvert.58.com/convert?amrurl="+encodeURIComponent(e),t},"normal-iframe-position":{right:0,bottom:0},is_show_audio_video:!1,"business-msg-shortcut":[{rootcateid:0,cateid:0,quickmsgs:["你好","在吗"]},{rootcateid:1,cateid:0,quickmsgs:["你好，请问房子还在么？","您是房东，还是中介？","价格还可以商量么？","什么时候方便看房？"]},{rootcateid:574,cateid:0,quickmsgs:["你好，请问这个岗位现在还招人么？","你好，简历已投，请关注","请问有五险一金吗？","请问什么时候可以面试？"]},{rootcateid:577,cateid:0,quickmsgs:["你好，请问这个岗位现在还招人么？","你好，简历已投，请关注","请问有五险一金吗？","请问什么时候可以面试？"]},{rootcateid:4,cateid:0,quickmsgs:["你好，在么？","你好，这辆车还在么？","价格还可以商量么？","什么时候方便看车？"]},{rootcateid:5,cateid:0,quickmsgs:["你好，东西还在吗？","价格还可以商量吗？","东西是几成新？","有购买发票么？"]},{rootcateid:833,cateid:0,quickmsgs:["你好，在吗？","价格还可以商量吗？","能见面交易吗？","谢谢，我再看看！"]},{rootcateid:4279,cateid:0,quickmsgs:["你好，在吗？","价格还可以商量吗？","能见面交易吗？","谢谢，我再看看！"]},{rootcateid:968,cateid:0,quickmsgs:["你好，在吗？","价格还可以商量吗？","能见面交易吗？","谢谢，我再看看！"]},{rootcateid:495,cateid:0,quickmsgs:["你好，在吗？","价格还可以商量吗？","能见面交易吗？","谢谢，我再看看！"]},{rootcateid:92,cateid:0,quickmsgs:["你好，在吗？","价格还可以商量吗？","能见面交易吗？","谢谢，我再看看！"]},{rootcateid:187,cateid:0,quickmsgs:["你好，在吗？","价格还可以商量吗？","能见面交易吗？","谢谢，我再看看！"]},{rootcateid:143,cateid:0,quickmsgs:["你好，在吗？","价格还可以商量吗？","能见面交易吗？","谢谢，我再看看！"]},{rootcateid:534,cateid:0,quickmsgs:["你好，在吗？","价格还可以商量吗？","能见面交易吗？","谢谢，我再看看！"]},{rootcateid:526,cateid:0,quickmsgs:["你好，在吗？","价格还可以商量吗？","能见面交易吗？","谢谢，我再看看！"]},{rootcateid:1010,cateid:0,quickmsgs:["你好，在吗？","价格还可以商量吗？","能见面交易吗？","谢谢，我再看看！"]},{rootcateid:495,cateid:0,quickmsgs:["你好，在吗？","价格还可以商量吗？","能见面交易吗？","谢谢，我再看看！"]},{rootcateid:515,cateid:0,quickmsgs:["你好，在吗？","价格还可以商量吗？","能见面交易吗？","谢谢，我再看看！"]},{rootcateid:1009,cateid:0,quickmsgs:["你好，在吗？","价格还可以商量吗？","能见面交易吗？","谢谢，我再看看！"]},{rootcateid:1135,cateid:0,quickmsgs:["你好，在吗？","价格还可以商量吗？","能见面交易吗？","谢谢，我再看看！"]},{rootcateid:1006,cateid:0,quickmsgs:["你好，在吗？","价格还可以商量吗？","能见面交易吗？","谢谢，我再看看！"]},{rootcateid:1917,cateid:0,quickmsgs:["你好，在吗？","价格还可以商量吗？","能见面交易吗？","谢谢，我再看看！"]},{rootcateid:1008,cateid:0,quickmsgs:["你好，在吗？","价格还可以商量吗？","能见面交易吗？","谢谢，我再看看！"]},{rootcateid:4278,cateid:0,quickmsgs:["你好，在吗？","价格还可以商量吗？","能见面交易吗？","谢谢，我再看看！"]}],anonymous_group:{id:"1",is_anonymous_group:!0,name:"游客留言",unread_show_type:"rash",avatar:"https://img.58cdn.com.cn/git/teg-app-fe/im-images/default-images/avatar/anonymous-group@2x.png"},message_reminder:{avatar:"https://img.58cdn.com.cn/git/teg-app-fe/im-images/default-images/avatar/reminder@2x.png"}};e.exports=r},VZgT:function(e,t,n){var i=n("G9WS"),a=i(n("/FZm")),r=i(n("rPUy")),o=n("5m4N"),s=n("eBtS"),c=n("WpfS"),l=(n("VRhk"),n("Bboc").convertImgParams,n("XYJ2")),u=n("Bboc"),d=u.isEmpty,p=function(e){(function(t){var n={template:c};s.extend(n,e),o.call(t,n)})(this)};p.prototype=(0,r.default)(o.prototype),p.prototype.renderContent=function(){var e=this._data.msg;if(!e)return!1;var t=e.content,n=this._element,i=(0,a.default)(n).call(n,".im-minicard-title"),r=(0,a.default)(n).call(n,".im-minicard-content"),o=(0,a.default)(n).call(n,".im-minicard-detail"),c=(0,a.default)(n).call(n,".im-minicard-extend"),p=(0,a.default)(n).call(n,".im-minicard-img"),f="javascript:void(0)";r.attr("href",t.card_action_pc_url||f),i.text(l.doFilter(t.card_title)),t&&t.card_picture_url&&""!==t.card_picture_url?p.attr("src",t.card_picture_url):(p.css("display","none"),r.css("paddingLeft",0)),t.card_content&&""!==t.card_content?o.text(t.card_content):o.css("display","none");var m=t.card_labels;if(m&&m.length>0){for(var _=s("<ul></ul>").addClass("im-minicard-labels"),h=0;h<m.length;h++)if(!d(m[h])){var g=s("<li></li>").text(m[h]);_.append(g)}c.append(_)}if(t.card_price){var v=s("<span></span>").text(t.card_price).addClass("im-minicard-price");c.append(v)}(0,a.default)(n).call(n,".im-msg-content").on("click","[href]",(function(e){e.preventDefault();var t=s(this).attr("href");t!=f&&u.openPage(t)}))},e.exports=p},VdC8:function(e,t,n){var i=n("pevS"),a=n("9E9t");i({target:"Object",stat:!0,forced:Object.assign!==a},{assign:a})},Vhpp:function(e,t,n){var i=n("G9WS");n("rB9j"),n("UxlC");var a=i(n("RXMP")),r=i(n("rPUy")),o=n("eBtS"),s=n("JVDe"),c=n("Mucd"),l=n("Bboc"),u=l.isEmpty,d=function(e){(function(t){var n={template:c,selection:'<div class="im-menu-selection" data-index=${index}>${text}</div>'};o.extend(n,e),s.call(t,n)})(this),function(e){e._element.click((function(t){var n,i=o(t.target);"DIV"==t.target.tagName&&i.hasClass("im-menu-selection")&&(n=i.data("index"),!u(n)&&e._data.selections&&e._data.selections[n]&&e.triggerEvent("click",{action:e._data.selections[n].action,message:e._data.message,e:e._data.e}))}))}(this)};d.prototype=(0,r.default)(s.prototype),d.prototype.render=function(){var e=this._data.selections||[],t="",n=this;(0,a.default)(e).call(e,(function(e,i){e&&(t+=n._options.selection.replace("${text}",e.text).replace("${index}",i))})),this._element.html(t)},d.prototype.show=function(e){s.prototype.show.call(this)},d.prototype.hide=function(){s.prototype.hide.call(this)},e.exports=d},VpIT:function(e,t,n){var i=n("xDBR"),a=n("xs3f");(e.exports=function(e,t){return a[e]||(a[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.8.1",mode:i?"pure":"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})},VsT0:function(e,t,n){n("qLPT");var i=n("oWnS");e.exports=i("Array").forEach},VsXB:function(e,t,n){var i=n("pevS"),a=n("7GIe");i({target:"Object",stat:!0},{setPrototypeOf:a})},Vu81:function(e,t,n){var i=n("0GbY"),a=n("JBy8"),r=n("dBg+"),o=n("glrk");e.exports=i("Reflect","ownKeys")||function(e){var t=a.f(o(e)),n=r.f;return n?t.concat(n(e)):t}},W1ep:function(e,t,n){var i=n("b42z"),a=n("JhaV"),r=n("ZyXh"),o=n("ZBQp"),s=n("C3ug"),c=n("ijsr"),l=function(e,t){this.stopped=e,this.result=t};e.exports=function(e,t,n){var u,d,p,f,m,_,h,g=n&&n.that,v=!(!n||!n.AS_ENTRIES),y=!(!n||!n.IS_ITERATOR),w=!(!n||!n.INTERRUPTED),b=o(t,g,1+v+w),x=function(e){return u&&c(u),new l(!0,e)},S=function(e){return v?(i(e),w?b(e[0],e[1],x):b(e[0],e[1])):w?b(e,x):b(e)};if(y)u=e;else{if(d=s(e),"function"!=typeof d)throw TypeError("Target is not iterable");if(a(d)){for(p=0,f=r(e.length);f>p;p++)if(m=S(e[p]),m&&m instanceof l)return m;return new l(!1)}u=d.call(e)}_=u.next;while(!(h=_.call(u)).done){try{m=S(h.value)}catch(k){throw c(u),k}if("object"==typeof m&&m&&m instanceof l)return m}return new l(!1)}},WCfw:function(e,t){var n="<div class=im-float-window> <div class=im-float-content></div> </div> ";e.exports=n},WJkJ:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},WKiH:function(e,t,n){var i=n("HYAF"),a=n("WJkJ"),r="["+a+"]",o=RegExp("^"+r+r+"*"),s=RegExp(r+r+"*$"),c=function(e){return function(t){var n=String(i(t));return 1&e&&(n=n.replace(o,"")),2&e&&(n=n.replace(s,"")),n}};e.exports={start:c(1),end:c(2),trim:c(3)}},WhRN:function(e,t){var n="<div class=im-organization-structure> <ul class=im-organization-list></ul> </div> ";e.exports=n},WpfS:function(e,t){var n='<li class="im-msg im-msg-minicard"> <div class=im-msg-time></div> <div class=im-msg-checkbox></div> <div class=im-msg-main> <img class="im-avatar im-msg-avatar"/> <span class=im-msg-send-status></span> <span class=im-msg-showed-status></span> <span class=im-msg-user-name></span> <div class=im-msg-content> <a class=im-minicard-content target=_blank href=javascript:void(0);> <div class=im-mini-content-text> <div class=im-mini-content-left> <div class=im-minicard-title></div> <div class=im-minicard-detail></div> </div> <img src=# alt="" class=im-minicard-img> </div> <span class=im-minicard-extend></span> </a> </div> <span class=im-msg-arrow></span> </div> <div class=im-msg-collect-name></div> <div class=im-msg-collect-time></div> <div class=im-msg-feedback> <div class=im-msg-feedback-container> <span class=im-msg-feedback-icon></span> <span class=im-msg-feedback-content></span> </div> </div> </li>';e.exports=n},WqJt:function(e,t,n){var i=n("G9WS"),a=(i(n("WxoT")),function(e){try{var t=document.createElement("INPUT");t.type="hidden",t.style.display="none",t.addBehavior("#default#userData"),document.body.appendChild(t);var n=new Date;return n.setDate(n.getDate()+365),t.expires=n.toUTCString(),{load:function(){try{t.load(e)}catch(n){}},save:function(){try{t.save(e)}catch(n){}},getAttribute:function(e){try{return t.getAttribute(e)}catch(n){}},setAttribute:function(e,n){try{t.setAttribute(e,n)}catch(i){}},removeAttribute:function(e){try{t.removeAttribute(e)}catch(n){}},clear:function(){try{var e=new Date;e.setMinutes(e.getMinutes()-1),t.expires=e.toUTCString(),this.save()}catch(n){}}}}catch(i){return null}});e.exports=a},"Wrk+":function(e,t,n){n("5RnW");var i=n("dktu");e.exports=i.Array.isArray},WtsB:function(e,t,n){var i=n("pevS"),a=n("wbIY"),r=n("FN+V"),o=n("pCEo"),s=n("RLqH"),c=n("bBVJ");i({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(e){var t,n,i=o(e),a=s.f,l=r(i),u={},d=0;while(l.length>d)n=a(i,t=l[d++]),void 0!==n&&c(u,t,n);return u}})},Wvup:function(e,t,n){var i,a,r,o=n("OsYe"),s=n("Bvq2"),c=n("ZBQp"),l=n("7b0v"),u=n("ejc7"),d=n("D1mM"),p=n("AUl2"),f=o.location,m=o.setImmediate,_=o.clearImmediate,h=o.process,g=o.MessageChannel,v=o.Dispatch,y=0,w={},b="onreadystatechange",x=function(e){if(w.hasOwnProperty(e)){var t=w[e];delete w[e],t()}},S=function(e){return function(){x(e)}},k=function(e){x(e.data)},E=function(e){o.postMessage(e+"",f.protocol+"//"+f.host)};m&&_||(m=function(e){var t=[],n=1;while(arguments.length>n)t.push(arguments[n++]);return w[++y]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},i(y),y},_=function(e){delete w[e]},p?i=function(e){h.nextTick(S(e))}:v&&v.now?i=function(e){v.now(S(e))}:g&&!d?(a=new g,r=a.port2,a.port1.onmessage=k,i=c(r.postMessage,r,1)):o.addEventListener&&"function"==typeof postMessage&&!o.importScripts&&f&&"file:"!==f.protocol&&!s(E)?(i=E,o.addEventListener("message",k,!1)):i=b in u("script")?function(e){l.appendChild(u("script"))[b]=function(){l.removeChild(this),x(e)}}:function(e){setTimeout(S(e),0)}),e.exports={set:m,clear:_}},WxoT:function(e,t,n){e.exports=n("DSbf")},X1zt:function(e,t){var n='<li class="im-msg im-msg-false"> <div class=im-msg-time></div> <div class=im-msg-checkbox></div> <div class=im-msg-main> <img class="im-avatar im-msg-avatar"/> <span class=im-msg-send-status></span> <span class=im-msg-showed-status></span> <span class=im-msg-user-name></span> <div class=im-msg-content></div> <div class=im-msg-false-icon></div> <span class=im-msg-arrow></span> </div> <div class=im-msg-feedback> <div class=im-msg-feedback-container> <span class=im-msg-feedback-icon></span> <span class=im-msg-feedback-content></span> </div> </div> </li> ';e.exports=n},X32N:function(e,t){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},"X5/F":function(e,t,n){var i=n("CeEi"),a=n("mRwR");function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=i(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}e.exports=r},X55t:function(e,t,n){var i=n("QgIy"),a=Array.prototype;e.exports=function(e){var t=e.filter;return e===a||e instanceof Array&&t===a.filter?i:t}},X5Zq:function(e,t,n){"use strict";var i=n("67WC"),a=i.aTypedArray,r=i.exportTypedArrayMethod,o=[].join;r("join",(function(e){return o.apply(a(this),arguments)}))},X7LM:function(e,t,n){"use strict";var i=2147483647,a=36,r=1,o=26,s=38,c=700,l=72,u=128,d="-",p=/[^\0-\u007E]/,f=/[.\u3002\uFF0E\uFF61]/g,m="Overflow: input needs wider integers to process",_=a-r,h=Math.floor,g=String.fromCharCode,v=function(e){var t=[],n=0,i=e.length;while(n<i){var a=e.charCodeAt(n++);if(a>=55296&&a<=56319&&n<i){var r=e.charCodeAt(n++);56320==(64512&r)?t.push(((1023&a)<<10)+(1023&r)+65536):(t.push(a),n--)}else t.push(a)}return t},y=function(e){return e+22+75*(e<26)},w=function(e,t,n){var i=0;for(e=n?h(e/c):e>>1,e+=h(e/t);e>_*o>>1;i+=a)e=h(e/_);return h(i+(_+1)*e/(e+s))},b=function(e){var t=[];e=v(e);var n,s,c=e.length,p=u,f=0,_=l;for(n=0;n<e.length;n++)s=e[n],s<128&&t.push(g(s));var b=t.length,x=b;b&&t.push(d);while(x<c){var S=i;for(n=0;n<e.length;n++)s=e[n],s>=p&&s<S&&(S=s);var k=x+1;if(S-p>h((i-f)/k))throw RangeError(m);for(f+=(S-p)*k,p=S,n=0;n<e.length;n++){if(s=e[n],s<p&&++f>i)throw RangeError(m);if(s==p){for(var E=f,C=a;;C+=a){var A=C<=_?r:C>=_+o?o:C-_;if(E<A)break;var O=E-A,T=a-A;t.push(g(y(A+O%T))),E=h(O/T)}t.push(g(y(E))),_=w(f,k,x==b),f=0,++x}}++f,++p}return t.join("")};e.exports=function(e){var t,n,i=[],a=e.toLowerCase().replace(f,".").split(".");for(t=0;t<a.length;t++)n=a[t],i.push(p.test(n)?"xn--"+b(n):n);return i.join(".")}},XEyi:function(e,t,n){var i=n("oM22");e.exports=i},XGjS:function(e,t,n){var i=n("45KF");e.exports=i},XGwC:function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},XMab:function(e,t,n){var i=n("dOgj");i("Uint8",(function(e){return function(t,n,i){return e(this,t,n,i)}}))},XSSY:function(e,t,n){e.exports=n("ZCZK")},XYJ2:function(e,t,n){n("rB9j"),n("UxlC");var i=function(){};i.prototype.doFilter=function(e){var t;try{t=e.replace(/\<script/gi,"&lt;script").replace(/script\>/gi,"script&gt;").replace(/\<\/script/gi,"&lt;/script")}catch(n){t=e}return t},i.prototype.resetFilter=function(e){var t=e.replace(/&lt;/gi,"<").replace(/&gt;/gi,">");return t},e.exports=new i},XxAm:function(e,t,n){var i=n("G9WS"),a=n("LYCE"),r=n("iYz8"),o=n("6UaR"),s=n("Dcj1"),c=n("O0yt"),l=n("0lTi"),u=n("UtpJ");a(t,"__esModule",{value:!0}),t.default=_;var d=i(n("5PQY"));function p(e,t){var n;if("undefined"===typeof c||null==s(e)){if(o(e)||(n=f(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,u=!0,d=!1;return{s:function(){n=r(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){d=!0,l=e},f:function(){try{u||null==n.return||n.return()}finally{if(d)throw l}}}}function f(e,t){var n;if(e){if("string"===typeof e)return m(e,t);var i=u(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?l(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _(e,t,n){var i,a=[],r={},o=p(t);try{var s=function(){var t=i.value;if(r[t])return"continue";a.push(new d.default(e,t,(function(e,i){e!==i&&n&&n(t)})))};for(o.s();!(i=o.n()).done;)s()}catch(err){o.e(err)}finally{o.f()}return a}},Y4Ys:function(e,t,n){var i=n("pCEo"),a=n("ZyXh"),r=n("RQhY"),o=function(e){return function(t,n,o){var s,c=i(t),l=a(c.length),u=r(o,l);if(e&&n!=n){while(l>u)if(s=c[u++],s!=s)return!0}else for(;l>u;u++)if((e||u in c)&&c[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},Y4yM:function(e,t,n){var i=n("Bvq2"),a=n("/EgQ"),r="".split;e.exports=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==a(e)?r.call(e,""):Object(e)}:Object},YF1G:function(e,t,n){var i=n("xrYK"),a=n("2oRo");e.exports="process"==i(a.process)},YG62:function(e,t,n){var i=n("X55t");e.exports=i},YKFC:function(e,t){e.exports={rd:{WOS_APP_ID:"JLkLFeDcBaJPq",WOS_URL:"https://testv3.58v5.cn",WOS_CDN_URL:"https://testv3.58v5.cn",WOS_SECRECT_ID:"KUYDnaVA2ohJWnf2ASwVXD7Wt2ixi73d",WOS_SECRECT_KEY:"FJKMLjdn7OSue3YFYmxcgtsSg4xlaDqR",IS_COVER:1},qa:{WOS_APP_ID:"JLkLFeDcBaJPq",WOS_URL:"https://testv3.58v5.cn",WOS_CDN_URL:"https://testv3.58v5.cn",WOS_SECRECT_ID:"KUYDnaVA2ohJWnf2ASwVXD7Wt2ixi73d",WOS_SECRECT_KEY:"FJKMLjdn7OSue3YFYmxcgtsSg4xlaDqR",IS_COVER:1},integrate:{WOS_APP_ID:"uVsRqPouVAC",WOS_CLIENT_APP_ID:"vBtSrQpOnvx",WOS_CLIENT_URL:"https://jcwos.58.com",WOS_URL:"https://wos.58.com",WOS_CDN_URL:"https://wos.58cdn.com.cn",WOS_SECRECT_ID:"KUYDnaVA2ohJWnf2ASwVXD7Wt2ixi73d",WOS_SECRECT_KEY:"FJKMLjdn7OSue3YFYmxcgtsSg4xlaDqR",IS_COVER:1},online:{WOS_APP_ID:"rSpOnMlrSxY",WOS_CLIENT_APP_ID:"pQnMlKjIpQt",WOS_URL:"https://wos2.58.com",WOS_CLIENT_URL:"https://wos.58.com",WOS_CDN_URL:"https://wos2.58cdn.com.cn",WOS_CLIENT_CDN_URL:"https://wos.58cdn.com.cn",WOS_SECRECT_ID:"6AFmpLoXKlqBlZaRB89WEXthIGfAoDfk",WOS_SECRECT_KEY:"xvM3yVSNU15ySqn49sNLG6FaqvWwLilx",IS_COVER:1}}},YL0P:function(e,t,n){"use strict";var i=n("2oRo"),a=n("67WC"),r=n("4mDm"),o=n("tiKp"),s=o("iterator"),c=i.Uint8Array,l=r.values,u=r.keys,d=r.entries,p=a.aTypedArray,f=a.exportTypedArrayMethod,m=c&&c.prototype[s],_=!!m&&("values"==m.name||void 0==m.name),h=function(){return l.call(p(this))};f("entries",(function(){return d.call(p(this))})),f("keys",(function(){return u.call(p(this))})),f("values",h,!_),f(s,h,!_)},YNrV:function(e,t,n){"use strict";var i=n("g6v/"),a=n("0Dky"),r=n("33Wh"),o=n("dBg+"),s=n("0eef"),c=n("ewvW"),l=n("RK3t"),u=Object.assign,d=Object.defineProperty;e.exports=!u||a((function(){if(i&&1!==u({b:1},u(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol(),a="abcdefghijklmnopqrst";return e[n]=7,a.split("").forEach((function(e){t[e]=e})),7!=u({},e)[n]||r(u({},t)).join("")!=a}))?function(e,t){var n=c(e),a=arguments.length,u=1,d=o.f,p=s.f;while(a>u){var f,m=l(arguments[u++]),_=d?r(m).concat(d(m)):r(m),h=_.length,g=0;while(h>g)f=_[g++],i&&!p.call(m,f)||(n[f]=m[f])}return n}:u},YTVN:function(e,t,n){var i=n("G9WS"),a=i(n("rPUy")),r=n("eBtS"),o=n("80UC"),s=function(e){o.call(this),this._show=!0,this._data={}};s.prototype=(0,a.default)(o.prototype),s.prototype.show=function(){this._show=!0,this._element.show()},s.prototype.hide=function(){this._show=!1,this._element.hide()},s.prototype.getElement=function(){return this._element},s.prototype.setData=function(e){r.extend(this._data,e),this.render()},s.prototype.render=function(){},s.prototype.destroy=function(){r.each(this._children,(function(e,t){t&&t.destroy()})),this._children={},this._element.remove(),this._element=null,this._data=null,this._options=null},s.prototype.before=function(e){e instanceof s!==!1&&this._element.before(e.getElement())},s.prototype.after=function(e){e instanceof s!==!1&&this._element.after(e.getElement())},s.prototype.width=function(){return this._element.outerWidth()},s.prototype.height=function(){return this._element.outerHeight()},e.exports=s},YcVy:function(e,t,n){var i=n("G9WS"),a=i(n("rPUy")),r=i(n("/FZm")),o=n("eBtS"),s=n("kWc3"),c=n("QWnO"),l=function(e){(function(t){var n,i={template:s};o.extend(i,e),c.call(t,i),(0,r.default)(n=t._element).call(n,".im-file-icon").click((function(){var e;(0,r.default)(e=t._element).call(e,".im-file-choose").trigger("click"),window.WMDA_REPORT&&window.WMDA_REPORT("custom",{event_id:"27"})})),t._element.on("change",".im-file-choose",(function(){0!==this.files.length&&(t._input.fileSend(this.files[0]),this.outerHTML=this.outerHTML,window.WMDA_REPORT&&window.WMDA_REPORT("custom",{event_id:"28"}))}))})(this)};l.prototype=(0,a.default)(c.prototype),e.exports=l},Yhre:function(e,t,n){"use strict";var i=n("2oRo"),a=n("g6v/"),r=n("qYE9"),o=n("kRJp"),s=n("4syw"),c=n("0Dky"),l=n("GarU"),u=n("ppGB"),d=n("UMSQ"),p=n("CyXQ"),f=n("d6cI"),m=n("4WOD"),_=n("0rvr"),h=n("JBy8").f,g=n("m/L8").f,v=n("gdVl"),y=n("1E5z"),w=n("afO8"),b=w.get,x=w.set,S="ArrayBuffer",k="DataView",E="prototype",C="Wrong length",A="Wrong index",O=i[S],T=O,M=i[k],I=M&&M[E],N=Object.prototype,L=i.RangeError,R=f.pack,P=f.unpack,D=function(e){return[255&e]},j=function(e){return[255&e,e>>8&255]},U=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},W=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},F=function(e){return R(e,23,4)},B=function(e){return R(e,52,8)},G=function(e,t){g(e[E],t,{get:function(){return b(this)[t]}})},z=function(e,t,n,i){var a=p(n),r=b(e);if(a+t>r.byteLength)throw L(A);var o=b(r.buffer).bytes,s=a+r.byteOffset,c=o.slice(s,s+t);return i?c:c.reverse()},V=function(e,t,n,i,a,r){var o=p(n),s=b(e);if(o+t>s.byteLength)throw L(A);for(var c=b(s.buffer).bytes,l=o+s.byteOffset,u=i(+a),d=0;d<t;d++)c[l+d]=u[r?d:t-d-1]};if(r){if(!c((function(){O(1)}))||!c((function(){new O(-1)}))||c((function(){return new O,new O(1.5),new O(NaN),O.name!=S}))){T=function(e){return l(this,T),new O(p(e))};for(var H,Y=T[E]=O[E],q=h(O),K=0;q.length>K;)(H=q[K++])in T||o(T,H,O[H]);Y.constructor=T}_&&m(I)!==N&&_(I,N);var J=new M(new T(2)),X=I.setInt8;J.setInt8(0,2147483648),J.setInt8(1,2147483649),!J.getInt8(0)&&J.getInt8(1)||s(I,{setInt8:function(e,t){X.call(this,e,t<<24>>24)},setUint8:function(e,t){X.call(this,e,t<<24>>24)}},{unsafe:!0})}else T=function(e){l(this,T,S);var t=p(e);x(this,{bytes:v.call(new Array(t),0),byteLength:t}),a||(this.byteLength=t)},M=function(e,t,n){l(this,M,k),l(e,T,k);var i=b(e).byteLength,r=u(t);if(r<0||r>i)throw L("Wrong offset");if(n=void 0===n?i-r:d(n),r+n>i)throw L(C);x(this,{buffer:e,byteLength:n,byteOffset:r}),a||(this.buffer=e,this.byteLength=n,this.byteOffset=r)},a&&(G(T,"byteLength"),G(M,"buffer"),G(M,"byteLength"),G(M,"byteOffset")),s(M[E],{getInt8:function(e){return z(this,1,e)[0]<<24>>24},getUint8:function(e){return z(this,1,e)[0]},getInt16:function(e){var t=z(this,2,e,arguments.length>1?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=z(this,2,e,arguments.length>1?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return W(z(this,4,e,arguments.length>1?arguments[1]:void 0))},getUint32:function(e){return W(z(this,4,e,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(e){return P(z(this,4,e,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(e){return P(z(this,8,e,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(e,t){V(this,1,e,D,t)},setUint8:function(e,t){V(this,1,e,D,t)},setInt16:function(e,t){V(this,2,e,j,t,arguments.length>2?arguments[2]:void 0)},setUint16:function(e,t){V(this,2,e,j,t,arguments.length>2?arguments[2]:void 0)},setInt32:function(e,t){V(this,4,e,U,t,arguments.length>2?arguments[2]:void 0)},setUint32:function(e,t){V(this,4,e,U,t,arguments.length>2?arguments[2]:void 0)},setFloat32:function(e,t){V(this,4,e,F,t,arguments.length>2?arguments[2]:void 0)},setFloat64:function(e,t){V(this,8,e,B,t,arguments.length>2?arguments[2]:void 0)}});y(T,S),y(M,k),e.exports={ArrayBuffer:T,DataView:M}},YiBS:function(e,t,n){var i=n("/EgQ");e.exports=Array.isArray||function(e){return"Array"==i(e)}},YnFm:function(e,t,n){e.exports=n("NzrZ")},"YqT+":function(e,t,n){n("hFpA");var i=n("oWnS");e.exports=i("Array").sort},Yr6i:function(e,t){var n=function(e,t){var n,i;switch(e.action_type+""){case"appeal":var a=e.me.user_id+"",r=e.xz_source+"";n={sceneid:"97",userid:a,appealerid:a,appealobjid:a,appealobjtype:"2",appealtermsource:r,appealsource:r,type:"appeal"};break;case"complaints":a=e.me.user_id+"";var o=e.contact.user_id+"",s=e.xz_source+"",c=e.contact.user_source+"";n={sceneid:"94",userid:a,voterid:a,accusedid:o,accusedobjid:o,accusedobjtype:"2",votetermsource:s,votesource:s,accusedsource:c,type:"complaints"};break;case"faceVerify":var l=e.xz_source+"";i={channel:l};break}return n?(t&&window.top.XXZLWL.Config(n),n):i?(t&&window.top.XXZLWL.faceVerify(i),i):void 0};e.exports=n},YtAO:function(e,t,n){var i=n("HmPo");e.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},YuTi:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},YyYo:function(e,t,n){n("+LQf");var i=n("dktu");e.exports=i.Reflect.construct},ZBQp:function(e,t,n){var i=n("zJQS");e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,a){return e.call(t,n,i,a)}}return function(){return e.apply(t,arguments)}}},ZBY9:function(e,t){var n="<div class=im-videoviewer> <video class=im-video-player preload=auto controls=controls></video> </div>";e.exports=n},ZCZK:function(e,t,n){var i=n("rAxL");e.exports=i},ZJ55:function(e,t,n){"use strict";var i=n("67WC"),a=n("tycR").some,r=i.aTypedArray,o=i.exportTypedArrayMethod;o("some",(function(e){return a(r(this),e,arguments.length>1?arguments[1]:void 0)}))},ZNKf:function(e,t,n){var i=n("G9WS"),a=i(n("rPUy")),r=i(n("RXMP")),o=i(n("/FZm")),s=n("eBtS"),c=n("wYGR"),l=n("QWnO"),u=n("VRhk"),d=function(e){this._opened=!1,function(t){var n,i,a={template:c,texts:[]};s.extend(a,e),l.call(t,a);var d=(0,o.default)(n=t._element).call(n,".im-shortcut-texts");(0,o.default)(i=t._element).call(i,".im-shortcut-icon").click((function(){var e;(t._opened?t.close():t.open(),t.triggerEvent("setBussinessSession"),window.WMDA_REPORT&&window.WMDA_REPORT("custom",{event_id:"15"}),d[0].getElementsByTagName("li")&&d[0].getElementsByTagName("li").length>0)||(0,r.default)(e=u["msg-shortcut"]).call(e,(function(e){s("<li>").text(e).appendTo(d)}))})),d.click((function(e){t.close(),"LI"==e.target.tagName&&t._input.send({type:"text",msg:s(e.target).html()})})),s(t._win).click((function(e){t._opened&&!s.contains(t._element[0],e.target)&&t.close()}))}(this)};d.prototype=(0,a.default)(l.prototype),e.exports=d},ZNvi:function(e,t){},ZUd8:function(e,t,n){var i=n("ppGB"),a=n("HYAF"),r=function(e){return function(t,n){var r,o,s=String(a(t)),c=i(n),l=s.length;return c<0||c>=l?e?"":void 0:(r=s.charCodeAt(c),r<55296||r>56319||c+1===l||(o=s.charCodeAt(c+1))<56320||o>57343?e?s.charAt(c):r:e?s.slice(c,c+2):o-56320+(r-55296<<10)+65536)}};e.exports={codeAt:r(!1),charAt:r(!0)}},ZWPS:function(e,t,n){n("G7fP");var i=n("dktu");e.exports=i.Object.isFrozen},ZZQp:function(e,t,n){var i=n("bpon"),a=n("39uu"),r=n("eOcF"),o=n("QYBB").f,s=n("PoCt"),c=n("Qub4"),l=s("meta"),u=0,d=Object.isExtensible||function(){return!0},p=function(e){o(e,l,{value:{objectID:"O"+ ++u,weakData:{}}})},f=function(e,t){if(!a(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!r(e,l)){if(!d(e))return"F";if(!t)return"E";p(e)}return e[l].objectID},m=function(e,t){if(!r(e,l)){if(!d(e))return!0;if(!t)return!1;p(e)}return e[l].weakData},_=function(e){return c&&h.REQUIRED&&d(e)&&!r(e,l)&&p(e),e},h=e.exports={REQUIRED:!1,fastKey:f,getWeakData:m,onFreeze:_};i[l]=!0},ZbhI:function(e,t,n){e.exports=n("J6x8")},ZfDv:function(e,t,n){var i=n("hh1v"),a=n("6LWA"),r=n("tiKp"),o=r("species");e.exports=function(e,t){var n;return a(e)&&(n=e.constructor,"function"!=typeof n||n!==Array&&!a(n.prototype)?i(n)&&(n=n[o],null===n&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},ZyXh:function(e,t,n){var i=n("FWHo"),a=Math.min;e.exports=function(e){return e>0?a(i(e),9007199254740991):0}},"a/VA":function(e,t){e.exports={non_contentmenu_show_types:["tip","modify_msg","auth_tip","operation_tip","shop_common_card","call_audio","call_video","wechat_notice_card"],non_multiple_selected_show_types:["tip","modify_msg","auth_tip","operation_tip","shop_common_card","call_audio","call_video","wechat_notice_card"],non_forward_show_types:["tip","false_msg","modify_msg","auth_tip","operation_tip","shop_common_card","provide_contactinfo_card","default_contactinfo_card","call_audio","call_video","standard_evaluate_card1","standard_evaluate_card2","wechat_notice_card"],non_delete_show_types:["tip","modify_msg","auth_tip","operation_tip","shop_common_card","call_audio","call_video","wechat_notice_card"],non_collect_show_types:["tip","false_msg","modify_msg","auth_tip","operation_tip","universal_card6","provide_contactinfo_card","shop_common_card","call_audio","call_video","standard_evaluate_card1","standard_evaluate_card2","wechat_notice_card"],non_withdraw_show_types:["tip","modify_msg","auth_tip","operation_tip","shop_common_card","call_audio","call_video","false_msg","standard_evaluate_card1","standard_evaluate_card2","wechat_notice_card"]}},a1NO:function(e,t){var n='<div class=im-chatwindow> <div class=im-chatwindow-header></div> <div class=im-chatwindow-content> <div class=im-chatwindow-topic> <div class=im-chatwindow-topic-content></div> </div> <div class=im-topic-icon></div> <div class=im-noticelist-container></div> </div> <div class=im-chatwindow-input></div> <div class=im-chatwindow-float> <div class=im-chatwindow-arrow></div> <div class="im-chatwindow-arrow outer-arrow"></div> </div> <div class=im-panel-container></div> <div class=im-menu-container></div> <div class=im-multiplemenu-container></div> <div class=im-chatfloat-container></div> </div> ';e.exports=n},aBPM:function(e,t,n){"use strict";var i,a,r,o,s=n("pevS"),c=n("cEKj"),l=n("OsYe"),u=n("mIMY"),d=n("81Rs"),p=n("1mbr"),f=n("Cupc"),m=n("KHTo"),_=n("04M5"),h=n("39uu"),g=n("zJQS"),v=n("X32N"),y=n("6Jnn"),w=n("W1ep"),b=n("feed"),x=n("sOpI"),S=n("Wvup").set,k=n("oOYW"),E=n("fvkw"),C=n("wvDy"),A=n("rSeq"),O=n("m40S"),T=n("L1rz"),M=n("oOVA"),I=n("A2Ma"),N=n("AUl2"),L=n("SqY4"),R=I("species"),P="Promise",D=T.get,j=T.set,U=T.getterFor(P),W=d,F=l.TypeError,B=l.document,G=l.process,z=u("fetch"),V=A.f,H=V,Y=!!(B&&B.createEvent&&l.dispatchEvent),q="function"==typeof PromiseRejectionEvent,K="unhandledrejection",J="rejectionhandled",X=0,Z=1,Q=2,$=1,ee=2,te=M(P,(function(){var e=y(W)!==String(W);if(!e){if(66===L)return!0;if(!N&&!q)return!0}if(c&&!W.prototype["finally"])return!0;if(L>=51&&/native code/.test(W))return!1;var t=W.resolve(1),n=function(e){e((function(){}),(function(){}))},i=t.constructor={};return i[R]=n,!(t.then((function(){}))instanceof n)})),ne=te||!b((function(e){W.all(e)["catch"]((function(){}))})),ie=function(e){var t;return!(!h(e)||"function"!=typeof(t=e.then))&&t},ae=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;k((function(){var i=e.value,a=e.state==Z,r=0;while(n.length>r){var o,s,c,l=n[r++],u=a?l.ok:l.fail,d=l.resolve,p=l.reject,f=l.domain;try{u?(a||(e.rejection===ee&&ce(e),e.rejection=$),!0===u?o=i:(f&&f.enter(),o=u(i),f&&(f.exit(),c=!0)),o===l.promise?p(F("Promise-chain cycle")):(s=ie(o))?s.call(o,d,p):d(o)):p(i)}catch(m){f&&!c&&f.exit(),p(m)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&oe(e)}))}},re=function(e,t,n){var i,a;Y?(i=B.createEvent("Event"),i.promise=t,i.reason=n,i.initEvent(e,!1,!0),l.dispatchEvent(i)):i={promise:t,reason:n},!q&&(a=l["on"+e])?a(i):e===K&&C("Unhandled promise rejection",n)},oe=function(e){S.call(l,(function(){var t,n=e.facade,i=e.value,a=se(e);if(a&&(t=O((function(){N?G.emit("unhandledRejection",i,n):re(K,n,i)})),e.rejection=N||se(e)?ee:$,t.error))throw t.value}))},se=function(e){return e.rejection!==$&&!e.parent},ce=function(e){S.call(l,(function(){var t=e.facade;N?G.emit("rejectionHandled",t):re(J,t,e.value)}))},le=function(e,t,n){return function(i){e(t,i,n)}},ue=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=Q,ae(e,!0))},de=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw F("Promise can't be resolved itself");var i=ie(t);i?k((function(){var n={done:!1};try{i.call(t,le(de,n,e),le(ue,n,e))}catch(a){ue(n,a,e)}})):(e.value=t,e.state=Z,ae(e,!1))}catch(a){ue({done:!1},a,e)}}};te&&(W=function(e){v(this,W,P),g(e),i.call(this);var t=D(this);try{e(le(de,t),le(ue,t))}catch(n){ue(t,n)}},i=function(e){j(this,{type:P,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:X,value:void 0})},i.prototype=f(W.prototype,{then:function(e,t){var n=U(this),i=V(x(this,W));return i.ok="function"!=typeof e||e,i.fail="function"==typeof t&&t,i.domain=N?G.domain:void 0,n.parent=!0,n.reactions.push(i),n.state!=X&&ae(n,!1),i.promise},catch:function(e){return this.then(void 0,e)}}),a=function(){var e=new i,t=D(e);this.promise=e,this.resolve=le(de,t),this.reject=le(ue,t)},A.f=V=function(e){return e===W||e===r?new a(e):H(e)},c||"function"!=typeof d||(o=d.prototype.then,p(d.prototype,"then",(function(e,t){var n=this;return new W((function(e,t){o.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof z&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return E(W,z.apply(l,arguments))}}))),s({global:!0,wrap:!0,forced:te},{Promise:W}),m(W,P,!1,!0),_(P),r=u(P),s({target:P,stat:!0,forced:te},{reject:function(e){var t=V(this);return t.reject.call(void 0,e),t.promise}}),s({target:P,stat:!0,forced:c||te},{resolve:function(e){return E(c&&this===r?W:this,e)}}),s({target:P,stat:!0,forced:ne},{all:function(e){var t=this,n=V(t),i=n.resolve,a=n.reject,r=O((function(){var n=g(t.resolve),r=[],o=0,s=1;w(e,(function(e){var c=o++,l=!1;r.push(void 0),s++,n.call(t,e).then((function(e){l||(l=!0,r[c]=e,--s||i(r))}),a)})),--s||i(r)}));return r.error&&a(r.value),n.promise},race:function(e){var t=this,n=V(t),i=n.reject,a=O((function(){var a=g(t.resolve);w(e,(function(e){a.call(t,e).then(n.resolve,i)}))}));return a.error&&i(a.value),n.promise}})},aMtA:function(e,t){var n="<ul class=im-msg-list> </ul> ";e.exports=n},aNUn:function(e,t,n){var i=n("G9WS"),a=i(n("rPUy")),r=i(n("ZbhI")),o=i(n("lHQ6")),s=i(n("/FZm")),c=n("eBtS"),l=n("QWnO"),u=n("f3qf"),d=n("823k"),p=n("ArO8"),f=n("Bboc"),m=function(e){this._opened=!1,function(t){var n,i,a,m,_,h,g,v={template:u};c.extend(v,e),l.call(t,v),(0,s.default)(n=t._element).call(n,".im-emotion-icon").click((function(){t._opened?t.close():t.open(),window.WMDA_REPORT&&window.WMDA_REPORT("custom",{event_id:"26"})}));var y=(0,s.default)(i=(0,s.default)(a=t._element).call(a,".im-emotion-list")).call(i,".im-emotion-unit").parent("a").parent("li");y.click((function(e){e.preventDefault();var n,i=(0,o.default)(c(this).children("a").attr("data-emotionid")),a="["+d.getEmotionTitles(i)+"]";n="DIV"==t._input._options.editor._element[0].tagName?'<img src = "http://static.58.com/git/teg-app-fe/im-images/xcx-images/emotions@2x/'+i+'.png" data="'+a+'" style="margin-bottom:-3px;margin-left:5px;display:inline-block;width:24px;height:24px;">':a;var s=navigator.userAgent;if((0,r.default)(s).call(s,"Firefox")>-1)t._input._options.editor.update(n,{is_emotion:!0});else{var l=p.get("curRange");f.getInsertEmojiCursor(n,l)}t.close(),t._input.showSend()}));var w=(0,s.default)(m=(0,s.default)(_=(0,s.default)(h=t._element).call(h,".im-emotion-footer")).call(_,".im-emotion-arrow")).call(m,"a"),b=((0,s.default)(g=t._element).call(g,".im-emotion-list"),1),x=1,S=3;w.click((function(e){var t;e.preventDefault();var n=-1!==(0,r.default)(t=e.target.className).call(t,"im-right-arrow")?"right":"left";b="right"===n?x+1:x-1,b>S||b<1?b=x:(c(".im-emotion-page.page"+x).hide(),c(".im-emotion-page.page"+b).show(),b==S&&c(this).removeClass("im-right-arrow").addClass("im-right-arrow-no").prev().removeClass("im-left-arrow-no").addClass("im-left-arrow"),b<S&&b>1&&("right"===n?c(this).prev().removeClass("im-left-arrow-no").addClass("im-left-arrow"):c(this).next().removeClass("im-right-arrow-no").addClass("im-right-arrow")),1==b&&c(this).removeClass("im-left-arrow").addClass("im-left-arrow-no").next().removeClass("im-right-arrow-no").addClass("im-right-arrow"),x=b)})),c(t._win).click((function(e){var n=c.contains(t._element[0],e.target);t._opened&&!n&&t.close()}))}(this)};m.prototype=(0,a.default)(l.prototype),e.exports=m},aOzW:function(e,t,n){n("VsXB");var i=n("dktu");e.exports=i.Object.setPrototypeOf},aTWP:function(e,t,n){var i=n("G9WS"),a=n("LYCE"),r=n("iYz8"),o=n("6UaR"),s=n("Dcj1"),c=n("O0yt"),l=n("0lTi"),u=n("UtpJ");n("rB9j"),n("Rm1S"),n("EnZy"),a(t,"__esModule",{value:!0}),t.default=h;var d=i(n("bhf8")),p=n("OY+d");function f(e,t){var n;if("undefined"===typeof c||null==s(e)){if(o(e)||(n=m(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,u=!0,d=!1;return{s:function(){n=r(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){d=!0,l=e},f:function(){try{u||null==n.return||n.return()}finally{if(d)throw l}}}}function m(e,t){var n;if(e){if("string"===typeof e)return _(e,t);var i=u(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?l(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function h(e){var t=/^[[\w]+|[\w+\[\d+\]]][\.\w]*$/;if(!t.test(e))return function(){};var n=e.split(".");return function(e){var t,i=!0,a=e,r=f(n);try{for(r.s();!(t=r.n()).done;){var o=t.value,s=/^([\w]+)\[(\d+)\]$/;if(s.test(o)){var c=o.match(s);if(c&&c.length>=3){var l=c[1],u=c[2];if(!(0,p.isObject)(a)||(0,p.isEmpty)(a)||!a.hasOwnProperty(l)){i=!1;break}a[l]instanceof Array&&(d.default?a=a[l][u]:"function"===typeof a.__vm__get?(a=a.__vm__get(l),a=a[u]):a=a[u][u])}}else{if(!(0,p.isObject)(a)||(0,p.isEmpty)(a)||!a.hasOwnProperty(o)){i=!1;break}a=d.default?a[o]:"function"===typeof a.__vm__get?a.__vm__get(o):a[o]}}}catch(err){r.e(err)}finally{r.f()}if(i)return a}}},aUXC:function(e,t){e.exports=function(){return{tagName:"li",attribs:{},className:["im-session",{is_caculate:!0,caculate:"checked ? 'im-session-active' : ''",watched:"checked"},{is_caculate:!0,caculate:"im_session_blacked ? 'im-session-blacked' : ''",watched:"im_session_blacked"},{is_caculate:!0,caculate:"im_session_silent ? 'im-session-silent' : ''",watched:"im_session_silent"},{is_caculate:!0,caculate:"im_session_shop ? 'im-session-shop' : ''",watched:"im_session_shop"},{is_caculate:!0,caculate:"im_session_ses_top ? 'im-session-ses-top' : ''",watched:"im_session_ses_top"},{is_caculate:!0,caculate:"im_session_ics ? 'im-session-ics' : ''",watched:"im_session_ics"}],id:"",children:[{tagName:"div",attribs:{},className:["im-session-container"],id:"",children:[{tagName:"div",attribs:{},className:["im-session-portrait"],id:"",children:[{tagName:"img",attribs:{"im-src":[{is_bind:!0,bind:"avatar"}],"im-error":"handleImgFailLoad",alt:"",crossorigin:"anonymous"},className:["im-avatar","im-session-img"],id:""},{tagName:"p",attribs:{},className:["im-session-online-status",{is_caculate:!0,caculate:"im_session_no_online_status ? 'im-session-no-online-status' : ''",watched:"im_session_no_online_status"},{is_caculate:!0,caculate:"im_session_offline ? 'im-session-offline' : ''",watched:"im_session_offline"},{is_caculate:!0,caculate:"im_session_group ? 'im-session-group' : ''",watched:"im_session_group"}],id:""}]},{tagName:"div",attribs:{},className:["im-session-user"],id:"",children:[{tagName:"span",attribs:{},className:["im-session-username",{is_caculate:!0,caculate:"need_space ? 'need-space' : ''",watched:"need_space"}],id:"",children:[{tagName:"text",text:[{is_bind:!0,bind:"name"}],attribs:{},className:"",id:""}]},{tagName:"span",attribs:{},className:["im-shop-icon"],id:"",children:[{tagName:"text",text:[{is_caculate:!0,caculate:"shop_icon_text ? shop_icon_text : '商家聊天'",watched:"shop_icon_text"}],attribs:{},className:"",id:""}]},{tagName:"span",attribs:{"im-show":"is_shop_business"},className:["im-business-icon"],id:"",children:[{tagName:"text",text:["商"],attribs:{},className:"",id:""}]},{tagName:"span",attribs:{"im-if":"show_time"},className:["im-msg-time"],id:"",children:[{tagName:"text",text:[{is_bind:!0,bind:"time"}],attribs:{},className:"",id:""}]},{tagName:"span",attribs:{"im-html":"content"},className:["im-last-msg",{is_caculate:!0,caculate:"not_answered ? 'im-false-not-answered' : false",watched:"not_answered"}],id:""},{tagName:"span",attribs:{},className:["im-silent-icon"],id:""},{tagName:"span",attribs:{},className:["im-session-msg-count",{is_caculate:!0,caculate:"im_hide ? 'im-hide' : ''",watched:"im_hide"},{is_bind:!0,bind:"unread_show_type"}],id:"",children:[{tagName:"text",text:[{is_bind:!0,bind:"count"}],attribs:{},className:"",id:""}]}]}]}]}}},afO8:function(e,t,n){var i,a,r,o=n("f5p1"),s=n("2oRo"),c=n("hh1v"),l=n("kRJp"),u=n("UTVS"),d=n("xs3f"),p=n("93I0"),f=n("0BK2"),m=s.WeakMap,_=function(e){return r(e)?a(e):i(e,{})},h=function(e){return function(t){var n;if(!c(t)||(n=a(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}};if(o){var g=d.state||(d.state=new m),v=g.get,y=g.has,w=g.set;i=function(e,t){return t.facade=e,w.call(g,e,t),t},a=function(e){return v.call(g,e)||{}},r=function(e){return y.call(g,e)}}else{var b=p("state");f[b]=!0,i=function(e,t){return t.facade=e,l(e,b,t),t},a=function(e){return u(e,b)?e[b]:{}},r=function(e){return u(e,b)}}e.exports={set:i,get:a,has:r,enforce:_,getterFor:h}},aqev:function(e,t){var n='<li class="im-msg im-msg-batch-card"> <div class=im-msg-time></div> <div class=im-msg-checkbox></div> <div class=im-msg-main> <img class="im-avatar im-msg-avatar"/> <span class=im-msg-send-status></span> <span class=im-msg-showed-status></span> <span class=im-msg-user-name></span> <div class=im-msg-content> <div class=im-msg-forward-content> <div class=im-msg-forward-title> <span class=im-msg-forward-to></span> </div> <div class=im-msg-forward-body> </div> <div class=im-msg-forward-label>聊天记录</div></div> </div> <span class=im-msg-arrow></span> </div> <div class=im-msg-collect-name></div> <div class=im-msg-collect-time></div> <div class=im-msg-feedback> <div class=im-msg-feedback-container> <span class=im-msg-feedback-icon></span> <span class=im-msg-feedback-content></span> </div> </div> </li> ';e.exports=n},azbg:function(e,t,n){var i,a=n("G9WS"),r=a(n("rPUy")),o=n("eBtS"),s=n("JVDe"),c=n("/Pub"),l=n("sfi9"),u=function(){c.dispatch({type:l.MSG_AUDIO_READ_END,data:i})},d=function(e){(function(t){var n={template:'<audio autoplay="autoplay" onended="" onpause=""></audio>'};o.extend(n,e),s.call(t,n),t._element[0].onended=function(){u()},t._element[0].onpause=function(){u()}})(this)};d.prototype=(0,r.default)(s.prototype),d.prototype.play=function(e){"string"===typeof e?this._element.attr("src",e):(i=e,this._element.attr("src",e.content.url),c.dispatch({type:l.MSG_AUDIO_READ_START,data:e}))},d.prototype.stop=function(){this._element.attr("src","")},e.exports=d},b42z:function(e,t,n){var i=n("39uu");e.exports=function(e){if(!i(e))throw TypeError(String(e)+" is not an object");return e}},b4mI:function(e,t){},bBVJ:function(e,t,n){"use strict";var i=n("cWgI"),a=n("QYBB"),r=n("LGyv");e.exports=function(e,t,n){var o=i(t);o in e?a.f(e,o,r(0,n)):e[o]=n}},bF2R:function(e,t,n){var i=n("TBlU");e.exports=i},bXAe:function(e,t,n){var i=n("G9WS"),a=n("iYz8"),r=n("6UaR"),o=n("Dcj1"),s=n("O0yt"),c=n("0lTi"),l=n("UtpJ");n("oVuX"),n("rB9j"),n("hByQ");var u=i(n("M5Mt")),d=i(n("rPUy")),p=i(n("o+MX")),f=i(n("guyh"));function m(e,t){var n;if("undefined"===typeof s||null==o(e)){if(r(e)||(n=_(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,c=function(){};return{s:c,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,u=!0,d=!1;return{s:function(){n=a(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){d=!0,l=e},f:function(){try{u||null==n.return||n.return()}finally{if(d)throw l}}}}function _(e,t){var n;if(e){if("string"===typeof e)return h(e,t);var i=l(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?c(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var g=n("80UC"),v=n("8e1d").each,y=n("8e1d").strToNumCompare,w=n("Bboc"),b=n("ArO8"),x=w.isEmpty,S=w.isObjectValueEqual,k=w.jsonHandler,E=function(e,t){for(var n=-1,i=0,a=e.length;i<a;i++){var r=e[i];if(t.contact&&r.contact&&t.contact.user_id==r.contact.user_id&&t.contact.user_source==r.contact.user_source){n=i;break}if(t.group&&r.group&&t.group.id==r.group.id){n=i;break}}return n},C=function(e,t){return e.sort_time>t.sort_time?-1:e.sort_time<t.sort_time?1:0},A=function(e){var t=[];return v(e,(function(e,n){n.group?t.push("group-"+n.group.id):n.contact&&(n.contact.shop_id&&n.contact.shop_source?t.push("contact-"+n.contact.user_id+"@"+n.contact.user_source+"@@"+n.contact.shop_id+"@"+n.contact.shop_source):t.push("contact-"+n.contact.user_id+"@"+n.contact.user_source))})),t},O=function(e){var t,n=[],i=[],a=[];return v(e,(function(e,t){t.is_top_group?n.push(t):t.contact&&t.contact.msg_set&&1==t.contact.msg_set.ses_top&&x(t.contact.shop_id)?i.push(t):a.push(t)})),(0,f.default)(n).call(n,C),(0,f.default)(i).call(i,C),(0,f.default)(a).call(a,C),(0,p.default)(t=(0,p.default)(n).call(n,i)).call(t,a)},T=function(e){var t=A(e);e=O(e);var n=A(e);return t.join(",")!=n.join(",")},M=function(e){var t=A(e);e=O(e);var n=A(e);return{result:t.join(",")!=n.join(","),sortedArray:e}},I=function(e,t){if(!e&&!t)return!0;if(e&&!t)return!1;if(!e&&t)return!1;if(!e.msg_id&&!t.msg_id)return!0;var n=0==y(e.msg_id,t.msg_id);return!(n&&!S(e,t))&&n},N=function(e,t){return k.stringify(e)==k.stringify(t)},L=function(e){var t=0;return v(e.children,(function(e,n){n.unread&&(t+=n.unread)})),t},R=function(e){var t;return v(e.children,(function(e,n){n.msg&&(t?y(t.msg_id,n.msg.msg_id)<0&&(t=n.msg):t=n.msg)})),t},P=function(e){function t(e){e.children&&(e.group_key_ids={},e.key_ids={},v(e.children,(function(n,i){var a=i.group;a&&a.id&&(e.group_key_ids[a.id]=n);var r=i.contact;r&&(r.is_shop_mode&&r.shop_id&&r.shop_source?e.key_ids[r.user_id+"@"+r.user_source+"@@"+r.shop_id+"@"+r.shop_source]=n:e.key_ids[r.user_id+"@"+r.user_source]=n),i.children&&t(i)})))}t(e)},D=!0,j=function(){g.call(this),this._totalunread=0,this._root={is_root:!0,contact:null,group:null,children:[],unread:0,msg:null,checked:!1}};j.prototype=(0,d.default)(g.prototype),j.prototype.getSession=function(){var e,t,n;if(1==arguments.length)n=arguments[0];else if(2==arguments.length){var i=arguments[0],a=arguments[1];e=i+"@"+a}else if(3==arguments.length){i=arguments[0],a=arguments[1];var r=arguments[2];e=i+"@"+a,r&&r.shop_id&&r.shop_source&&(e+="@@"+r.shop_id+"@"+r.shop_source)}else if(4==arguments.length){i=arguments[0],a=arguments[1],r=arguments[2];t=arguments[3],e=i+"@"+a,r&&r.is_shop_mode&&r.shop_id&&r.shop_source&&(e+="@@"+r.shop_id+"@"+r.shop_source)}return function o(s){var c=null;if(void 0!=n){var l=s.group;l&&l.id==n&&(c=s)}if(void 0!=i&&void 0!=a){var u=s.contact;u&&u.user_id==i&&u.user_source==a&&(x(r)&&!u.is_shop_mode?c=s:x(r)||r.shop_id!=u.shop_id||r.shop_source!=u.shop_source||(c=s))}if(c)return c;if(s.children){if(t){if(n&&!x(s.group_key_ids)){var d=s.group_key_ids[n];isNaN(d)||(c=s.children[d])}if(!x(s.key_ids)&&e){d=s.key_ids[e];isNaN(d)||(c=s.children[d])}}c||v(s.children,(function(e,t){if(c=o(t),c)return!1}))}return c}(this._root)},j.prototype.getParentSession=function(){if(1==arguments.length)var e=arguments[0];else if(2==arguments.length)var t=arguments[0],n=arguments[1];return function i(a){for(var r=null,o=0,s=a.children.length;o<s;o++){var c=a.children[o];if(c.group){if(c.group.id==e){r=a;break}if(r=i(c),r)break}if(void 0!=t&&void 0!=n&&c.contact){var l=c.contact;if(l&&l.user_id==t&&l.user_source==n){r=a;break}}}return r}(this._root)},j.prototype.addGroup=function(e){var t=this.getSession(e.id);t||(this._root.children.unshift({group:e,children:[],unread:0,msg:null,unread_show_type:e.unread_show_type||"",is_top_group:!e.is_anonymous_group,sort_time:(new Date).getTime()}),this.triggerEvent("childrenchanged",this._root))},j.prototype.addContact=function(e){var t=this.getSession(e.user_id,e.user_source,e);if(!t){var n=(new Date).getTime();this._root.children.unshift({contact:e,unread:0,msg:null,sort_time:n}),this.triggerEvent("childrenchanged",this._root)}},j.prototype.addContactSession=function(e){var t=e.user;if(t){var n=e.currentContact,i=e.msg,a=this.getSession(t.user_id,t.user_source,t);if(!a){var r=e.sort_time?e.sort_time:(new Date).getTime(),o=e.unread?e.unread:0,s=t.shop_id?b.get("tmpMsg-session-"+t.user_id+"@"+t.user_source+"@@"+t.shop_id+"@"+t.shop_source):b.get("tmpMsg-session-"+t.user_id+"@"+t.user_source);if(this._root.children.unshift({contact:t,unread:o,msg:i,falseMsg:s,sort_time:r,unread_show_type:e.unread_show_type,is_top_group:!!e.is_top_group}),!x(n)){var c=n.user_id+"@"+n.user_source;x(n.shop_id)||x(n.shop_source)||(c+="@@"+n.shop_id+"@"+n.shop_source);var l=t.user_id+"@"+t.user_source;x(t.shop_id)||x(t.shop_source)||(l+="@@"+t.shop_id+"@"+t.shop_source),c===l&&(this._root.children[0].checked=!0)}var u=M(this._root.children);u.result&&(this._root.children=u.sortedArray),this.triggerEvent("childrenchanged",this._root),this.calTotalUnread()}}},j.prototype.addContactSessions=function(e){var t=!1,n=null,i=[];D&&P(this._root);for(var a=0,r=e.length;a<r;a++){var o=e[a],s=o.user,c=o.msg,l=o.unread?o.unread:0,u=this.getSession(s.user_id,s.user_source,s,D),d=s.shop_id?b.get("tmpMsg-session-"+s.user_id+"@"+s.user_source+"@@"+s.shop_id+"@"+s.shop_source):b.get("tmpMsg-session-"+s.user_id+"@"+s.user_source);if(u){var m=!1;u.msg&&u.msg.msg_id<0&&u.msg.is_mine&&"FAIL"===u.msg.status&&y(o.sort_time,u.msg.sort_time)<0&&(m=!0),m&&(o.msg=u.msg),!x(u.msg)&&!x(d)&&y(d.msg_id,u.msg.msg_id)>0&&(o.sort_time=d.send_time),u.sort_time==o.sort_time||u.is_top_group||(u.sort_time=o.sort_time,t=!0),s.update_time&&s.update_time!=u.contact.update_time&&(t=!0),s.msg_set&&u.contact.msg_set&&(s.msg_set.ses_top!=u.contact.msg_set.ses_top||s.msg_set.silent!=u.contact.msg_set.silent)&&(t=!0),!t&&I(u.msg,o.msg)&&N(u.contact,s)&&u.unread==o.unread||(u.falseMsg=d,u.msg=o.msg,u.unread=l,u.contact=s,u.unread_show_type=o.unread_show_type,u.is_top_group=o.is_top_group,this.triggerEvent("selfchanged",u),t=!0,l>0&&(n?o.msg&&o.msg.send_time>n.msg.send_time&&(n=o):n=o)),i[a]=u}else u={contact:s,unread:l,msg:c,falseMsg:d,sort_time:o.sort_time,unread_show_type:o.unread_show_type,is_top_group:!!o.is_top_group},i.push(u),t=!0}if(e.length<this._root.children.length&&(t=!0),t){var _=[];v(this._root.children,(function(e,t){t.group&&t.group.id&&t.children&&t.children.length&&_.push(t)})),(0,f.default)(_).call(_,C),this._root.children=O((0,p.default)(_).call(_,i)),this.triggerEvent("childrenchanged",this._root);var h=this.calTotalUnread();h!=this._totalunread&&(this._totalunread=h,this.triggerEvent("totalUnreadChanged",{lastsession:n&&n.user?n.user:null,amount:h}))}},j.prototype.setContactToGroup=function(){var e,t,n,i,a,r=this,o=!1;if(1!=arguments.length){if(2==arguments.length){if(i=arguments[0],x(i)||(a=i.sessions,o=i.clear),x(a)||!(a.length>=1))return;n=arguments[1]}else 3==arguments.length&&(e=arguments[0],t=arguments[1],n=arguments[2]);var s=function(e,t,n){var i,a=r.getSession(e,t),s=r.getSession(n);if(!a||!s)return null;var c=r.getParentSession(e,t),l=E(c.children,a);return(0,u.default)(i=c.children).call(i,l,1),o&&(s.children=[],o=!1),s.children.push(a),{from_parent_session:c,to_group_session:s}},c=function(e){x(e)||(e.msg=R(e),e.unread=L(e),e.sort_time=e.msg&&e.msg.send_time,r.triggerEvent("childrenchanged",e),r.triggerEvent("selfchanged",e))};if(x(e)||x(t)||x(n)){if(!x(n)&&!x(a)&&a.length){var l,d=[],p={},f=!1,_=function(e){x(e)||(e.is_root&&!f&&(f=!0,d.push(e)),e.group&&!p[e.group.id]&&(p[e.group.id]=!0,d.push(e)))},h=m(a);try{for(h.s();!(l=h.n()).done;){var g=l.value;user_id=g.user_id,user_source=g.user_source;var v=s(user_id,user_source,n);x(v)||(_(v.from_parent_session),_(v.to_group_session))}}catch(err){h.e(err)}finally{h.f()}for(var y=0,w=d;y<w.length;y++){var b=w[y];c(b)}}}else{var S=s(e,t,n);x(S)||(c(S.from_parent_session),c(S.to_group_session))}}},j.prototype.addContactGroupSessions=function(e,t){var n=!1,i=[],a=this.getSession(t);if(!x(a)){for(var r=0,o=e.length;r<o;r++){var s=e[r],c=s.user,l=s.msg,u=s.unread?s.unread:0,d=this.getSession(c.user_id,c.user_source,c),p=c.shop_id?b.get("tmpMsg-session-"+c.user_id+"@"+c.user_source+"@@"+c.shop_id+"@"+c.shop_source):b.get("tmpMsg-session-"+c.user_id+"@"+c.user_source);d?(!x(d.msg)&&!x(p)&&y(p.msg_id,d.msg.msg_id)>0&&(s.sort_time=p.send_time),d.sort_time==s.sort_time||d.is_top_group||(d.sort_time=s.sort_time,n=!0),c.update_time&&c.update_time!=d.contact.update_time&&(n=!0),!n&&I(d.msg,s.msg)&&N(d.contact,c)&&d.unread==s.unread||(d.falseMsg=p,d.msg=s.msg,d.unread=u,d.contact=c,d.unread_show_type=s.unread_show_type,d.is_top_group=s.is_top_group,this.triggerEvent("selfchanged",d),n=!0),i[r]=d):(d={contact:c,unread:u,msg:l,falseMsg:p,sort_time:s.sort_time,unread_show_type:s.unread_show_type,is_top_group:!!s.is_top_group,is_anonymous_user:s.is_anonymous_user},i.push(d),n=!0)}if(a.children&&e.length<a.children.length&&(n=!0),a.children=O(i),a.msg=R(a),a.unread=L(a),a.sort_time=a.msg&&a.msg.send_time,n){var f=null;v(this._root.children,(function(e,t){var n=t.unread?t.unread:0;n>0&&(f?t.msg&&t.msg.send_time>f.msg.send_time&&(f=t):f=t)})),this._root.children=O(this._root.children),this.triggerEvent("selfchanged",a),this.triggerEvent("childrenchanged",a),this.triggerEvent("childrenchanged",this._root);var m=this.calTotalUnread();m!=this._totalunread&&(this._totalunread=m,this.triggerEvent("totalUnreadChanged",{lastsession:f&&f.user?f.user:null,amount:m}))}}},j.prototype.changeLastMsg=function(e,t,n){var i={user_id:e,user_source:t,shop_id:n.shop_id,shop_source:n.shop_source},a=this.getSession(e,t,i);if(a){a.msg=n,this.triggerEvent("selfchanged",a);var r=this.getParentSession(e,t);if(r.msg=n,this.triggerEvent("selfchanged",r),T(r.children)&&this.triggerEvent("childrenchanged",r),r.group){var o=this.getParentSession(r.group.id);o&&T(o.children)&&this.triggerEvent("selfchanged",o)}}},j.prototype.changeLastFalseMsg=function(){var e,t,n,i;5===arguments.length?(e=arguments[0],t=arguments[1],n=arguments[2],arguments[3],i=arguments[4]):(e=arguments[0],t=arguments[1],i=arguments[2]);var a={user_id:e,user_source:t,shop_id:(i?i.shop_id:null)||n||null,shop_source:(i?i.shop_source:null)||n||null},r=this.getSession(e,t,a);if(r){r.falseMsg=i,!x(i)&&!x(r.msg)&&y(i.msg_id,r.msg.msg_id)>0&&(r.sort_time=i.send_time),x(i)&&!x(r.msg)&&(r.sort_time=r.msg.send_time),this.triggerEvent("selfchanged",r);var o=this.getParentSession(e,t),s=M(o.children);if(s.result){var c=$.extend({},o,{children:s.sortedArray});this.triggerEvent("childrenchanged",c)}}},j.prototype.calTotalUnread=function(){var e=0;return function t(n){if(n.contact&&"rash"!==n.unread_show_type&&!n.is_anonymous_user&&(e+=n.unread),n.children)for(var i=0,a=n.children.length;i<a;i++)t(n.children[i])}(this._root),e},j.prototype.search=function(e){return function t(n){if(e(n))return n;var i=null;return v(n.children,(function(e,n){if(i=t(n),i)return!1})),i}(this._root)},j.prototype.setChecked=function(e,t,n){var i=this.search((function(e){return!0===e.checked})),a=this.search((function(i){var a=i.contact;if(a&&a.user_id==e&&a.user_source==t){if(n&&n.shop_id==a.shop_id&&n.shop_source==a.shop_source)return!0;if(!n)return!0}return!1}));i!=a&&(i&&(i.checked=!1,this.triggerEvent("selfchanged",i)),a&&(a.checked=!0,this.triggerEvent("selfchanged",a)))},j.prototype.tabSession=function(e,t){var n,i="",a=this._root;if(t){var r=this.getSession(t.user_id,t.user_source,t);a=this.getParentSession(t.user_id,t.user_source),i=E(a.children,r)}if(38===e)if(0===i||i){if(0===i)return!1;n=i-1}else n=a.children.length-1;else if(40===e){if(i===a.children.length-1)return!1;n=0===i||i?i+1:0}var o=a.children[n].contact;this.triggerEvent("tabSession",o)},j.prototype.removeChecked=function(){var e=this.search((function(e){return!0===e.checked}));e&&(e.checked=!1,this.triggerEvent("selfchanged",e))},e.exports=new j},bhf8:function(e,t,n){var i=n("G9WS"),a=n("LYCE");a(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("LYCE")),o=r.default&&"function"===typeof r.default,s=o;t.default=s},bpon:function(e,t){e.exports={}},br0Y:function(e,t,n){n("xahd");var i=n("dktu");e.exports=i.setTimeout},busE:function(e,t,n){var i=n("2oRo"),a=n("kRJp"),r=n("UTVS"),o=n("zk60"),s=n("iSVu"),c=n("afO8"),l=c.get,u=c.enforce,d=String(String).split("String");(e.exports=function(e,t,n,s){var c,l=!!s&&!!s.unsafe,p=!!s&&!!s.enumerable,f=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof t||r(n,"name")||a(n,"name",t),c=u(n),c.source||(c.source=d.join("string"==typeof t?t:""))),e!==i?(l?!f&&e[t]&&(p=!0):delete e[t],p?e[t]=n:a(e,t,n)):p?e[t]=n:o(t,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&l(this).source||s(this)}))},bzSO:function(e,t,n){var i=n("G9WS"),a=i(n("/FZm")),r=i(n("rPUy")),o=n("5m4N"),s=n("eBtS"),c=n("hfKi"),l=(n("/Pub"),n("sfi9"),n("exIe"),n("Bboc")),u=function(e){(function(t){var n={template:c,onImageClick:function(){}};s.extend(n,e),o.call(t,n)})(this),this._rendered=!1};u.prototype=(0,r.default)(o.prototype),u.prototype.renderContent=function(){var e,t=this,n=(0,a.default)(e=this._element).call(e,".im-msg-content");n.click((function(){t._data.msg.msg_id&&t._options.onImageClick()}));var i=this._data.msg.content,r={minsize:50,maxsize:250,image_width:i.image_width,image_height:i.image_height,url:i.url},o=l.getImgParams(r);n.css({height:o.height+"px",width:o.width+"px","background-size":o.background_size,"background-image":"url("+o.url+")","background-repeat":"no-repeat"})},e.exports=u},c0ig:function(e,t,n){var i=n("G9WS"),a=i(n("ZbhI")),r=i(n("/FZm")),o=i(n("rPUy")),s=n("5m4N"),c=n("eBtS"),l=n("UlI3"),u=(n("VRhk"),n("sfi9")),d=n("/Pub"),p=function(e){(function(t){var n={template:l};c.extend(n,e),s.call(t,n)})(this)};p.prototype=(0,o.default)(s.prototype),p.prototype.renderContent=function(){var e=this._data.msg;if(!e)return!1;var t=e.content,n=this._element,i=(0,r.default)(n).call(n,".im-mutual-title"),o=(0,r.default)(n).call(n,".im-mutual-text"),s=(0,r.default)(n).call(n,".im-mutual-normal"),l=(0,r.default)(n).call(n,".im-mutual-detail"),p=(0,r.default)(n).call(n,".im-mutual-img"),f=(0,r.default)(n).call(n,".im-mutual-content"),m=(0,r.default)(n).call(n,".im-mutual-btn"),_=navigator.userAgent;((0,a.default)(_).call(_,"Firefox")>-1||window.ActiveXObject||"ActiveXObject"in window)&&(l.css("whiteSpace","nowrap"),l.css("display","block")),t.card_action_url&&""!==t.card_action_url?f.attr("href",t.card_action_url):(f.attr("href","javascript:;"),f[0].addEventListener("click",(function(){var e="请在手机端58APP中查看详情";d.dispatch({type:u.TOAST_SHOW,data:{content:e,interval:2e3}})}))),t.card_title&&""!==t.card_title?i.text(t.card_title):i.css("display","none"),t.card_content&&""!==t.card_content?l.text(t.card_content):l.css("display","none"),t.card_subContent&&""!==t.card_subContent?s.text(t.card_subContent):(s.css("display","none"),s.text("附加信息")),t.card_picture_url&&""!==t.card_picture_url?p.attr("src",t.card_picture_url):(p.css("display","none"),o.css("margin-left","0px"));var h=t.card_btnArray;if(h&&""!==h)for(var g=h.length,v=g>4?4:g,y=0;y<v;y++)h[y].card_sub_btnUrl&&""!==h[y].card_sub_btnUrl?m.append(c('<a class="btn-label"  href="'+h[y].card_sub_btnUrl+'" target="_blank"></a>').text(h[y].card_sub_btnTitle)):m.append(c('<a class="btn-label" href="javascript:void(0)"></a>').text(h[y].card_sub_btnTitle));else m.remove();m.click((function(e){c(e.target).attr("disabled",!0).css({background:"#3333",color:"white"})}))},e.exports=p},c162:function(e,t,n){"use strict";var i=n("67WC"),a=n("gdVl"),r=i.aTypedArray,o=i.exportTypedArrayMethod;o("fill",(function(e){return a.apply(r(this),arguments)}))},cEKj:function(e,t){e.exports=!0},cEPT:function(e,t,n){"use strict";var i={}.propertyIsEnumerable,a=Object.getOwnPropertyDescriptor,r=a&&!i.call({1:2},1);t.f=r?function(e){var t=a(this,e);return!!t&&t.enumerable}:i},cKMF:function(e,t){var n='<li class="im-msg im-msg-chat-card"> <div class=im-msg-time></div> <div class=im-msg-checkbox></div> <div class=im-msg-main> <img class="im-avatar im-msg-avatar"/> <span class=im-msg-send-status></span> <span class=im-msg-showed-status></span> <span class=im-msg-user-name></span> <div class=im-chat-msg-contents> </div> <span class=im-msg-arrow></span> </div> <div class=im-msg-collect-name></div> <div class=im-msg-collect-time></div> <div class=im-msg-feedback> <div class=im-msg-feedback-container> <span class=im-msg-feedback-icon></span> <span class=im-msg-feedback-content></span> </div> </div> </li>';e.exports=n},cRbr:function(e,t,n){"use strict";var i=n("pevS"),a=n("RQhY"),r=n("FWHo"),o=n("ZyXh"),s=n("T/97"),c=n("Q0Rw"),l=n("bBVJ"),u=n("nJYk"),d=n("MCtm"),p=u("splice"),f=d("splice",{ACCESSORS:!0,0:0,1:2}),m=Math.max,_=Math.min,h=9007199254740991,g="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!p||!f},{splice:function(e,t){var n,i,u,d,p,f,v=s(this),y=o(v.length),w=a(e,y),b=arguments.length;if(0===b?n=i=0:1===b?(n=0,i=y-w):(n=b-2,i=_(m(r(t),0),y-w)),y+n-i>h)throw TypeError(g);for(u=c(v,i),d=0;d<i;d++)p=w+d,p in v&&l(u,d,v[p]);if(u.length=i,n<i){for(d=w;d<y-i;d++)p=d+i,f=d+n,p in v?v[f]=v[p]:delete v[f];for(d=y;d>y-i+n;d--)delete v[d-1]}else if(n>i)for(d=y-i;d>w;d--)p=d+i-1,f=d+n-1,p in v?v[f]=v[p]:delete v[f];for(d=0;d<n;d++)v[d+w]=arguments[d+2];return v.length=y-i+n,u}})},cVYH:function(e,t,n){var i=n("hh1v"),a=n("0rvr");e.exports=function(e,t,n){var r,o;return a&&"function"==typeof(r=t.constructor)&&r!==n&&i(o=r.prototype)&&o!==n.prototype&&a(e,o),e}},cWgI:function(e,t,n){var i=n("39uu");e.exports=function(e,t){if(!i(e))return e;var n,a;if(t&&"function"==typeof(n=e.toString)&&!i(a=n.call(e)))return a;if("function"==typeof(n=e.valueOf)&&!i(a=n.call(e)))return a;if(!t&&"function"==typeof(n=e.toString)&&!i(a=n.call(e)))return a;throw TypeError("Can't convert object to primitive value")}},cWqo:function(e,t,n){n("jly2"),n("b4mI"),n("aBPM"),n("hNJ/"),n("dd/9"),n("NioV"),n("Pkew"),n("UUWy");var i=n("dktu");e.exports=i.Promise},cgHO:function(e,t,n){var i=n("m/sp");i("dispose")},cvf0:function(e,t,n){"use strict";var i=n("67WC").exportTypedArrayMethod,a=n("0Dky"),r=n("2oRo"),o=r.Uint8Array,s=o&&o.prototype||{},c=[].toString,l=[].join;a((function(){c.call({})}))&&(c=function(){return l.call(this)});var u=s.toString!=c;i("toString",c,u)},cwyl:function(e,t,n){var i=n("G9WS");n("sMBO"),n("rB9j"),n("UxlC"),n("EnZy");var a=i(n("o+MX")),r=i(n("ZbhI")),o=i(n("UtpJ")),s=i(n("rPUy")),c=i(n("/FZm")),l=n("eBtS"),u=n("hF4M"),d=n("JVDe"),p=n("362D"),f=n("XYJ2"),m=n("eS68"),_=n("ArO8"),h=function(e){(function(t){var n,i={template:u,plugins:[],editor:null};l.extend(i,e),d.call(t,i),l(i.plugins).each((function(e,n){var i;(0,c.default)(i=t._element).call(i,".im-input-plugins").append(n.getElement()),n.setInput(t)})),(0,c.default)(n=t._element).call(n,".im-input-text").append(i.editor.getElement()),i.editor.setInput(t)})(this),function(e){var t,n;(0,c.default)(t=e._element).call(t,".im-send").on("click",(function(){var t=e._options.editor.get().msg;if(!g.call(e,t)){var n=_.get("position"),i=n==m.CENTER?11:10;window.WMDA_REPORT&&window.WMDA_REPORT("custom",{event_id:i})}e.send()})),(0,c.default)(n=e._element).call(n,".im-input-footer").on("click",(function(t){"im-send"!=t.target.className&&e._options.editor.focus()}))}(this)},g=function(e){var t=this;if(0===e.length){var n="发送内容不能为空！";return t.showNotice(n),!0}var i=e.replace(/&nbsp;/g,"").replace(/<br>/g,"").replace(/\s/g,"");if(0==i.length){n="不支持仅包含空格或换行符的消息！";return t.showNotice(n),t._options.editor.clear(),!0}return!1};h.prototype=(0,s.default)(d.prototype),h.prototype.showNotice=function(e){var t;(0,c.default)(t=this._element).call(t,".im-input-notice").show().text(e)},h.prototype.hideNotice=function(){var e;(0,c.default)(e=this._element).call(e,".im-input-notice").hide().text("")},h.prototype.showSend=function(){var e,t;(0,c.default)(e=this._element).call(e,".im-send").show(),(0,c.default)(t=this._element).call(t,".im-send-notice").css("right","112px")},h.prototype.hideSend=function(){var e,t;(0,c.default)(e=this._element).call(e,".im-send").hide(),(0,c.default)(t=this._element).call(t,".im-send-notice").css("right","24px")},h.prototype.setMaxInputLength=function(e){this.maxInputLength=e},h.prototype.getMaxInputLength=function(){return this.maxInputLength},h.prototype.send=function(e){var t=this;if(e)t.triggerEvent("inputCompleted",e);else{e=t._options.editor.get().msg;e=t._options.editor.emotionToText(e),e=e.replace(/&amp;/gi,"&"),e=e.replace(/&nbsp;/gi," "),e=e.replace(/<br>/gi,"\n"),e=f.resetFilter(e);var n=g.call(t,e);if(1!=n){var i={msg:e,type:"text"},a=i.msg.length,r=t.getMaxInputLength();if(a>r)for(var s,c=Math.ceil(a/r),l=0;l<c;l++){var u,d;if(l!=c-1)s=(0,o.default)(u=i.msg).call(u,l*r,(l+1)*r);else s=(0,o.default)(d=i.msg).call(d,l*r,a);var p={msg:s,type:"text"};t.triggerEvent("inputCompleted",p)}else t.triggerEvent("inputCompleted",i);t._options.editor.clear(),t._options.editor.focus(),t.hideSend(),t.hideNotice()}}},h.prototype.imgSend=function(e){var t=this;if(t.hideNotice(),e.name){var n=e.name.split("."),i=n[n.length-1];i=i.toLowerCase(),this.value="";var a=["jpg","jpeg","png","gif"];if(-1===(0,r.default)(a).call(a,i))return void t.showNotice("请选择jpg、jpeg、png或gif格式的图片")}var o=new FileReader;o.readAsDataURL(e),o.onload=function(){var e=this.result,n=new Image;n.onload=function(){t.send({type:"image",url:e,image_width:n.width,image_height:n.height})},n.src=e}},h.prototype.fileSend=function(e){var t,n=this,i=31457280;if(n.hideNotice(),e.name){var o=e.name.split("."),s=o[o.length-1];s=s.toLowerCase(),this.value="";var c=["txt","doc","docx","xls","xlsx","pdf","ppt","pptx","pages","numbers","key"],l=["mp4"];-1!==(0,r.default)(c).call(c,s)?t="file":-1!==(0,r.default)(l).call(l,s)&&(t="video");var u=(0,a.default)(c).call(c,l);if(-1===(0,r.default)(u).call(u,s))return void n.showNotice("文件格式暂不支持发送!")}e.size&&e.size>i?n.showNotice("文件不能超出30M!"):0!==e.size?n.send({type:t,url:e}):n.showNotice("不能发送大小为0的文件")},h.prototype.previewImage=function(e){var t,n=this,i=new p({files:e});i.setInput(n),(0,c.default)(t=n._element).call(t,".im-input-plugins").append(i.getElement())},h.prototype.askContactinfo=function(e){var t=this;t.triggerEvent("askContactinfo",e)},e.exports=h},d1i8:function(e,t,n){var i=n("G9WS");n("sMBO"),n("rB9j"),n("UxlC");var a=i(n("/FZm")),r=i(n("RXMP")),o=i(n("rPUy")),s=n("5m4N"),c=n("eBtS"),l=n("/Pub"),u=n("sfi9"),d=n("cKMF"),p='<p class="im-chat-msg-name">${name}:</p><p class="im-chat-msg-content">${message}</p>',f=function(e){(function(t){var n={template:d};c.extend(n,e),s.call(t,n)})(this)};f.prototype=(0,o.default)(s.prototype),f.prototype.renderContent=function(){var e,t=this._data.msg;if(!t)return!1;var n="",i=t.content,o=this._element;(0,r.default)(e=i||[]).call(e,(function(e,t){n+=p.replace("${name}",e.name).replace("${message}",e.msg_content)}));var s=(0,a.default)(o).call(o,".im-chat-msg-contents");s.html(n),s.click((function(e){var n;e.stopPropagation(),(0,r.default)(n=t.msgs).call(n,(function(e){"string"===typeof e.content&&(e.content=JSON.parse(e.content)),"msg_batch_forward_card"==e.content.type&&(e.forward_msgs=t.forward_msgs,e.msg_collect="collect")})),l.dispatch({type:u.COLLECTION_MESSAGE_FLOAT,data:{msgList:t.msgs,title:t.title,id:t.msg_id,parent_u_key:t.content._parent_u_key?t.content._parent_u_key:""}})}))},e.exports=f},d6cI:function(e,t){var n=1/0,i=Math.abs,a=Math.pow,r=Math.floor,o=Math.log,s=Math.LN2,c=function(e,t,c){var l,u,d,p=new Array(c),f=8*c-t-1,m=(1<<f)-1,_=m>>1,h=23===t?a(2,-24)-a(2,-77):0,g=e<0||0===e&&1/e<0?1:0,v=0;for(e=i(e),e!=e||e===n?(u=e!=e?1:0,l=m):(l=r(o(e)/s),e*(d=a(2,-l))<1&&(l--,d*=2),e+=l+_>=1?h/d:h*a(2,1-_),e*d>=2&&(l++,d/=2),l+_>=m?(u=0,l=m):l+_>=1?(u=(e*d-1)*a(2,t),l+=_):(u=e*a(2,_-1)*a(2,t),l=0));t>=8;p[v++]=255&u,u/=256,t-=8);for(l=l<<t|u,f+=t;f>0;p[v++]=255&l,l/=256,f-=8);return p[--v]|=128*g,p},l=function(e,t){var i,r=e.length,o=8*r-t-1,s=(1<<o)-1,c=s>>1,l=o-7,u=r-1,d=e[u--],p=127&d;for(d>>=7;l>0;p=256*p+e[u],u--,l-=8);for(i=p&(1<<-l)-1,p>>=-l,l+=t;l>0;i=256*i+e[u],u--,l-=8);if(0===p)p=1-c;else{if(p===s)return i?NaN:d?-n:n;i+=a(2,t),p-=c}return(d?-1:1)*i*a(2,p-t)};e.exports={pack:c,unpack:l}},d7IX:function(e,t,n){var i=n("wbIY"),a=n("Bvq2"),r=n("ejc7");e.exports=!i&&!a((function(){return 7!=Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a}))},"dBg+":function(e,t){t.f=Object.getOwnPropertySymbols},"dG/n":function(e,t,n){var i=n("Qo9l"),a=n("UTVS"),r=n("5Tg+"),o=n("m/L8").f;e.exports=function(e){var t=i.Symbol||(i.Symbol={});a(t,e)||o(t,e,{value:r.f(e)})}},"dGO/":function(e,t){e.exports={}},dOgj:function(e,t,n){"use strict";var i=n("I+eb"),a=n("2oRo"),r=n("g6v/"),o=n("iqeF"),s=n("67WC"),c=n("Yhre"),l=n("GarU"),u=n("XGwC"),d=n("kRJp"),p=n("UMSQ"),f=n("CyXQ"),m=n("GC2F"),_=n("wE6v"),h=n("UTVS"),g=n("9d/t"),v=n("hh1v"),y=n("fHMY"),w=n("0rvr"),b=n("JBy8").f,x=n("oHi+"),S=n("tycR").forEach,k=n("JiZb"),E=n("m/L8"),C=n("Bs8V"),A=n("afO8"),O=n("cVYH"),T=A.get,M=A.set,I=E.f,N=C.f,L=Math.round,R=a.RangeError,P=c.ArrayBuffer,D=c.DataView,j=s.NATIVE_ARRAY_BUFFER_VIEWS,U=s.TYPED_ARRAY_TAG,W=s.TypedArray,F=s.TypedArrayPrototype,B=s.aTypedArrayConstructor,G=s.isTypedArray,z="BYTES_PER_ELEMENT",V="Wrong length",H=function(e,t){var n=0,i=t.length,a=new(B(e))(i);while(i>n)a[n]=t[n++];return a},Y=function(e,t){I(e,t,{get:function(){return T(this)[t]}})},q=function(e){var t;return e instanceof P||"ArrayBuffer"==(t=g(e))||"SharedArrayBuffer"==t},K=function(e,t){return G(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},J=function(e,t){return K(e,t=_(t,!0))?u(2,e[t]):N(e,t)},X=function(e,t,n){return!(K(e,t=_(t,!0))&&v(n)&&h(n,"value"))||h(n,"get")||h(n,"set")||n.configurable||h(n,"writable")&&!n.writable||h(n,"enumerable")&&!n.enumerable?I(e,t,n):(e[t]=n.value,e)};r?(j||(C.f=J,E.f=X,Y(F,"buffer"),Y(F,"byteOffset"),Y(F,"byteLength"),Y(F,"length")),i({target:"Object",stat:!0,forced:!j},{getOwnPropertyDescriptor:J,defineProperty:X}),e.exports=function(e,t,n){var r=e.match(/\d+$/)[0]/8,s=e+(n?"Clamped":"")+"Array",c="get"+e,u="set"+e,_=a[s],h=_,g=h&&h.prototype,E={},C=function(e,t){var n=T(e);return n.view[c](t*r+n.byteOffset,!0)},A=function(e,t,i){var a=T(e);n&&(i=(i=L(i))<0?0:i>255?255:255&i),a.view[u](t*r+a.byteOffset,i,!0)},N=function(e,t){I(e,t,{get:function(){return C(this,t)},set:function(e){return A(this,t,e)},enumerable:!0})};j?o&&(h=t((function(e,t,n,i){return l(e,h,s),O(function(){return v(t)?q(t)?void 0!==i?new _(t,m(n,r),i):void 0!==n?new _(t,m(n,r)):new _(t):G(t)?H(h,t):x.call(h,t):new _(f(t))}(),e,h)})),w&&w(h,W),S(b(_),(function(e){e in h||d(h,e,_[e])})),h.prototype=g):(h=t((function(e,t,n,i){l(e,h,s);var a,o,c,u=0,d=0;if(v(t)){if(!q(t))return G(t)?H(h,t):x.call(h,t);a=t,d=m(n,r);var _=t.byteLength;if(void 0===i){if(_%r)throw R(V);if(o=_-d,o<0)throw R(V)}else if(o=p(i)*r,o+d>_)throw R(V);c=o/r}else c=f(t),o=c*r,a=new P(o);M(e,{buffer:a,byteOffset:d,byteLength:o,length:c,view:new D(a)});while(u<c)N(e,u++)})),w&&w(h,W),g=h.prototype=y(F)),g.constructor!==h&&d(g,"constructor",h),U&&d(g,U,s),E[s]=h,i({global:!0,forced:h!=_,sham:!j},E),z in h||d(h,z,r),z in g||d(g,z,r),k(s)}):e.exports=function(){}},dP0U:function(e,t,n){var i=n("m/sp");i("observable")},"dd/9":function(e,t,n){"use strict";var i=n("pevS"),a=n("zJQS"),r=n("mIMY"),o=n("rSeq"),s=n("m40S"),c=n("W1ep"),l="No one promise resolved";i({target:"Promise",stat:!0},{any:function(e){var t=this,n=o.f(t),i=n.resolve,u=n.reject,d=s((function(){var n=a(t.resolve),o=[],s=0,d=1,p=!1;c(e,(function(e){var a=s++,c=!1;o.push(void 0),d++,n.call(t,e).then((function(e){c||p||(p=!0,i(e))}),(function(e){c||p||(c=!0,o[a]=e,--d||u(new(r("AggregateError"))(o,l)))}))})),--d||u(new(r("AggregateError"))(o,l))}));return d.error&&u(d.value),n.promise}})},dktu:function(e,t){e.exports={}},dmt9:function(e,t,n){"use strict";var i=n("QYBB").f,a=n("SJYm"),r=n("Cupc"),o=n("ZBQp"),s=n("X32N"),c=n("W1ep"),l=n("QFZC"),u=n("04M5"),d=n("wbIY"),p=n("ZZQp").fastKey,f=n("L1rz"),m=f.set,_=f.getterFor;e.exports={getConstructor:function(e,t,n,l){var u=e((function(e,i){s(e,u,t),m(e,{type:t,index:a(null),first:void 0,last:void 0,size:0}),d||(e.size=0),void 0!=i&&c(i,e[l],{that:e,AS_ENTRIES:n})})),f=_(t),h=function(e,t,n){var i,a,r=f(e),o=g(e,t);return o?o.value=n:(r.last=o={index:a=p(t,!0),key:t,value:n,previous:i=r.last,next:void 0,removed:!1},r.first||(r.first=o),i&&(i.next=o),d?r.size++:e.size++,"F"!==a&&(r.index[a]=o)),e},g=function(e,t){var n,i=f(e),a=p(t);if("F"!==a)return i.index[a];for(n=i.first;n;n=n.next)if(n.key==t)return n};return r(u.prototype,{clear:function(){var e=this,t=f(e),n=t.index,i=t.first;while(i)i.removed=!0,i.previous&&(i.previous=i.previous.next=void 0),delete n[i.index],i=i.next;t.first=t.last=void 0,d?t.size=0:e.size=0},delete:function(e){var t=this,n=f(t),i=g(t,e);if(i){var a=i.next,r=i.previous;delete n.index[i.index],i.removed=!0,r&&(r.next=a),a&&(a.previous=r),n.first==i&&(n.first=a),n.last==i&&(n.last=r),d?n.size--:t.size--}return!!i},forEach:function(e){var t,n=f(this),i=o(e,arguments.length>1?arguments[1]:void 0,3);while(t=t?t.next:n.first){i(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!g(this,e)}}),r(u.prototype,n?{get:function(e){var t=g(this,e);return t&&t.value},set:function(e,t){return h(this,0===e?0:e,t)}}:{add:function(e){return h(this,e=0===e?0:e,e)}}),d&&i(u.prototype,"size",{get:function(){return f(this).size}}),u},setStrong:function(e,t,n){var i=t+" Iterator",a=_(t),r=_(i);l(e,t,(function(e,t){m(this,{type:i,target:e,state:a(e),kind:t,last:void 0})}),(function(){var e=r(this),t=e.kind,n=e.last;while(n&&n.removed)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),u(t)}}},doUz:function(e,t,n){var i=n("OsYe"),a=n("j60x"),r="__core-js_shared__",o=i[r]||a(r,{});e.exports=o},eAFf:function(e,t,n){n("sMBO");var i={init:{url:"user/init",method:"get"},get_userinfo:{url:"user/get_userinfo",method:"get"},get_userinfo_batch:{url:"user/get_user_info_batch",method:"post"},get_user_online_info:{url:"user/get_user_online_info",method:"get"},get_users_online_info:{url:"user/get_users_online_info",method:"post"},add_black_list:{url:"user/add_black_list",method:"get"},del_black_list:{url:"user/del_black_list",method:"get"},is_blacked:{url:"user/is_blacked",method:"get"},msg_set:{url:"user/msg_set",method:"post"},remark:{url:"user/remark",method:"post"},sendmsg:{url:"msg/sendmessage",method:"post",sign:!0},send_msg_js:{url:"msg/send_msg_js",method:"post",sign:!0},withdraw_msg:{url:"msg/withdraw_msg",method:"post"},ack_msg_batch:{url:"msg/ack_msg_batch",method:"post"},ack_msg_read:{url:"msg/ack_msg_read",method:"post"},ack_msg_show:{url:"msg/ack_msg_show",method:"post"},get_session_list:{url:"msg/get_session_list",method:"get"},get_specify_session_list:{url:"msg/get_specify_session_list",method:"post"},get_chat_records:{url:"msg/get_chat_records",method:"get"},get_unrecv_msgs:{url:"msg/get_unrecv_msgs",method:"get"},get_captcha:{url:"msg/get_captcha",method:"get"},validate_captcha:{url:"msg/validate_captcha",method:"get"},get_session_unread_msg_count:{url:"msg/get_session_unread_msg_count",method:"get"},exchange_xid:{url:"common/js/exchange_xid",method:"post"},get_total_unread_msg_count:{url:"msg/get_total_unread_msg_count",method:"get"},clear_all_unread_msgs:{url:"msg/clear_all_unread_msgs",method:"post"},get_others_showed_count:{url:"msg/get_others_showed_count",method:"post"},get_wostoken:{url:"rich_text/get_wostoken",method:"post"},notify_hunter:{url:"rich_text/notify_hunter",method:"post"},check_file:{url:"rich_text/check_file",method:"post"},set_evaluation:{url:"msg/set_evaluation",method:"post"},del_sessions:{url:"msg/del_sessions",method:"post"},call:{url:"msg/call",method:"post"},update_call:{url:"msg/update_call",method:"post"},update_event:{url:"msg/update_event",method:"post"},call_join_room:{url:"join/",method:"post",api_type:"call"},call_get_room:{url:"room/getroomid",method:"post",api_type:"call"},del_msg:{url:"msg/delete_msg",method:"post"},create_group:{url:"group/create_group",method:"post"},update_group:{url:"group/update_group",method:"post"},disband_group:{url:"group/disband_group",method:"post"},apply_join_group:{url:"group/apply_join_group",method:"get"},invite_join_group:{url:"group/invite_join_group",method:"post"},accept_join_group_apply:{url:"group/accept_join_group_apply",method:"post"},accept_join_group_invite:{url:"group/accept_join_group_invite",method:"post"},manage_group_member:{url:"group/manage_group_member",method:"post"},quit_group:{url:"group/quit_group",method:"get"},transfer_group_owner:{url:"group/transfer_group_owner",method:"post"},get_group_member:{url:"group/get_group_member",method:"post"},get_group_member_byid:{url:"group/get_group_member_byid",method:"post"},get_group_info:{url:"group/get_group_info",method:"post"},set_slient:{url:"group/set_slient",method:"post"},accept_join_group:{url:"group/accept_join_group",method:"post"},confirm_invite:{url:"group/confirm_invite",method:"post"},get_qrcode_id:{url:"group/get_qrcode_id",method:"post"},get_qrcode_info:{url:"group/get_qrcode_info",method:"post"},report_msg:{url:"msg/reportmsg",method:"post"},ack_contactinfo:{url:"user/ask_contactinfo",method:"get"},provide_contactinfo:{url:"user/provide_contactinfo",method:"post"},glance_contactinfo:{url:"user/glance_contactinfo",method:"get"},get_self_contactinfo:{url:"user/get_self_contactinfo",method:"get"},get_forward_msg:{url:"msg/get_forward_msg",method:"post"},collection:{url:"msg/collection",method:"post"},del_collection:{url:"msg/del_collection",method:"post"},get_collection:{url:"msg/get_collection",method:"post"},set_template_msg:{url:"im/settemplatemsg",method:"post"},get_template_msg:{url:"im/gettemplatemsg",method:"post"},update_template_msg:{url:"im/updatetemplatemsg",method:"post"},delete_template_msg:{url:"im/deletetemplatemsg",method:"post"},add_notice_task:{url:"user/add_notice_task",method:"post"},update_notice_task:{url:"user/update_notice_task",method:"post"},get_notice_task_batch:{url:"user/get_notice_task_batch",method:"post"},merge_user:{url:"user/merge_user",method:"get"}};for(var a in i)i.hasOwnProperty(a)&&(i[a].name=a);e.exports=i},eBYl:function(e,t){var n="<div class=im-static-input> <div class=im-static-words></div> <div class=im-static-login> <div class=im-static-login-btn> <i class=im-static-login-btn-icon></i> <span class=im-static-login-btn-txt>我想发送更多信息</span> <div class=im-static-login-btn-mask></div> </div> </div> </div>";e.exports=n},eBtS:function(e,t){e.exports=window.jQuery},"eDl+":function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},eKLf:function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},eLKs:function(e,t,n){e.exports=n("tbMQ")},eOcF:function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},eS68:function(e,t,n){var i=n("ooPF");e.exports=i({RIGHT_BOTTOM:null,CENTER:null})},eTws:function(e,t,n){n("r4HA");var i=n("dktu");e.exports=i.parseInt},eYnF:function(e,t,n){var i=n("XSSY"),a=n("CxHw");function r(t){return e.exports=r=a?i:function(e){return e.__proto__||i(e)},r(t)}e.exports=r},ebvu:function(e,t,n){var i=n("B9Ye");window.WebIMApp=i,n("sMXB")},ehgS:function(e,t,n){var i=n("elf+"),a=n("Uovk");e.exports=function(){return document.body.contentEditable?a:i}()},ejc7:function(e,t,n){var i=n("OsYe"),a=n("39uu"),r=i.document,o=a(r)&&a(r.createElement);e.exports=function(e){return o?r.createElement(e):{}}},"elf+":function(e,t,n){var i=n("G9WS"),a=i(n("rPUy")),r=n("IBac"),o=n("eBtS"),s=n("SaSm"),c=function(e){var t={template:'<textarea class="im-input-plaintext"></textarea>'};o.extend(t,e),r.call(this,t)};c.prototype=(0,a.default)(r.prototype),c.prototype.clear=function(){this._element.val("")},c.prototype.get=function(){return{type:"text",msg:this._element.val()}},c.prototype.update=function(e,t){var n=t&&t.is_emotion,i=this.get().msg,a=n||t&&t.need_html_2;this._element.val(i+(a?e:s(e)))},e.exports=c},ewvW:function(e,t,n){var i=n("HYAF");e.exports=function(e){return Object(i(e))}},exIe:function(e,t,n){var i=n("ooPF");e.exports=i({UPLOADING:null,UPLOAD_FAIL:null,SENDING:null,CANCEL_SENDING:null,SUCCESS:null,FAIL:null,DOWNLOADING:null,DOWNLOADED:null,DOWNLOAD_FAIL:null,VIDEO_PLAY_ERROR:null})},f3qf:function(e,t){var n='<div class=im-emotion> <div class="im-emotion-icon tooltip"> <span class="tooltiptext tooltiptext1">表情</span> </div> <div class=im-emotion-content> <ul class=im-emotion-list> <div class="im-emotion-page page1"> <div class=emotion-page> <li> <a data-emotionid=0 href=javascript:;> <div class="im-emotion-unit im-emotion-0"></div> </a> </li> <li> <a data-emotionid=1 href=javascript:;> <div class="im-emotion-unit im-emotion-1"></div> </a> </li> <li> <a data-emotionid=2 href=javascript:;> <div class="im-emotion-unit im-emotion-2"></div> </a> </li> <li> <a data-emotionid=3 href=javascript:;> <div class="im-emotion-unit im-emotion-3"></div> </a> </li> <li> <a data-emotionid=4 href=javascript:;> <div class="im-emotion-unit im-emotion-4"></div> </a> </li> <li> <a data-emotionid=5 href=javascript:;> <div class="im-emotion-unit im-emotion-5"></div> </a> </li> <li> <a data-emotionid=6 href=javascript:;> <div class="im-emotion-unit im-emotion-6"></div> </a> </li> <li> <a data-emotionid=7 href=javascript:;> <div class="im-emotion-unit im-emotion-7"></div> </a> </li> <li> <a data-emotionid=8 href=javascript:;> <div class="im-emotion-unit im-emotion-8"></div> </a> </li> <li> <a data-emotionid=9 href=javascript:;> <div class="im-emotion-unit im-emotion-9"></div> </a> </li> <li> <a data-emotionid=10 href=javascript:;> <div class="im-emotion-unit im-emotion-10"></div> </a> </li> <li> <a data-emotionid=11 href=javascript:;> <div class="im-emotion-unit im-emotion-11"></div> </a> </li> <li> <a data-emotionid=12 href=javascript:;> <div class="im-emotion-unit im-emotion-12"></div> </a> </li> <li> <a data-emotionid=13 href=javascript:;> <div class="im-emotion-unit im-emotion-13"></div> </a> </li> <li> <a data-emotionid=14 href=javascript:;> <div class="im-emotion-unit im-emotion-14"></div> </a> </li> <li> <a data-emotionid=15 href=javascript:;> <div class="im-emotion-unit im-emotion-15"></div> </a> </li> <li> <a data-emotionid=16 href=javascript:;> <div class="im-emotion-unit im-emotion-16"></div> </a> </li> <li> <a data-emotionid=17 href=javascript:;> <div class="im-emotion-unit im-emotion-17"></div> </a> </li> <li> <a data-emotionid=18 href=javascript:;> <div class="im-emotion-unit im-emotion-18"></div> </a> </li> <li> <a data-emotionid=19 href=javascript:;> <div class="im-emotion-unit im-emotion-19"></div> </a> </li> <li> <a data-emotionid=20 href=javascript:;> <div class="im-emotion-unit im-emotion-20"></div> </a> </li> <li> <a data-emotionid=21 href=javascript:;> <div class="im-emotion-unit im-emotion-21"></div> </a> </li> <li> <a data-emotionid=22 href=javascript:;> <div class="im-emotion-unit im-emotion-22"></div> </a> </li> <li> <a data-emotionid=23 href=javascript:;> <div class="im-emotion-unit im-emotion-23"></div> </a> </li> <li> <a data-emotionid=24 href=javascript:;> <div class="im-emotion-unit im-emotion-24"></div> </a> </li> <li> <a data-emotionid=25 href=javascript:;> <div class="im-emotion-unit im-emotion-25"></div> </a> </li> <li> <a data-emotionid=26 href=javascript:;> <div class="im-emotion-unit im-emotion-26"></div> </a> </li> <li> <a data-emotionid=27 href=javascript:;> <div class="im-emotion-unit im-emotion-27"></div> </a> </li> <li> <a data-emotionid=28 href=javascript:;> <div class="im-emotion-unit im-emotion-28"></div> </a> </li> <li> <a data-emotionid=29 href=javascript:;> <div class="im-emotion-unit im-emotion-29"></div> </a> </li> <li> <a data-emotionid=30 href=javascript:;> <div class="im-emotion-unit im-emotion-30"></div> </a> </li> <li> <a data-emotionid=31 href=javascript:;> <div class="im-emotion-unit im-emotion-31"></div> </a> </li> <li> <a data-emotionid=32 href=javascript:;> <div class="im-emotion-unit im-emotion-32"></div> </a> </li> <li> <a data-emotionid=33 href=javascript:;> <div class="im-emotion-unit im-emotion-33"></div> </a> </li> <li> <a data-emotionid=34 href=javascript:;> <div class="im-emotion-unit im-emotion-34"></div> </a> </li> <li> <a data-emotionid=35 href=javascript:;> <div class="im-emotion-unit im-emotion-35"></div> </a> </li> <li> <a data-emotionid=36 href=javascript:;> <div class="im-emotion-unit im-emotion-36"></div> </a> </li> <li> <a data-emotionid=37 href=javascript:;> <div class="im-emotion-unit im-emotion-37"></div> </a> </li> <li> <a data-emotionid=38 href=javascript:;> <div class="im-emotion-unit im-emotion-38"></div> </a> </li> <li> <a data-emotionid=39 href=javascript:;> <div class="im-emotion-unit im-emotion-39"></div> </a> </li> </div> <div class="im-emotion-point im-emotion-point-page1"></div> </div> <div class="im-emotion-page page2" style=display:none> <div class=emotion-page> <li> <a data-emotionid=40 href=javascript:;> <div class="im-emotion-unit im-emotion-40"></div> </a> </li> <li> <a data-emotionid=41 href=javascript:;> <div class="im-emotion-unit im-emotion-41"></div> </a> </li> <li> <a data-emotionid=42 href=javascript:;> <div class="im-emotion-unit im-emotion-42"></div> </a> </li> <li> <a data-emotionid=43 href=javascript:;> <div class="im-emotion-unit im-emotion-43"></div> </a> </li> <li> <a data-emotionid=44 href=javascript:;> <div class="im-emotion-unit im-emotion-44"></div> </a> </li> <li> <a data-emotionid=45 href=javascript:;> <div class="im-emotion-unit im-emotion-45"></div> </a> </li> <li> <a data-emotionid=46 href=javascript:;> <div class="im-emotion-unit im-emotion-46"></div> </a> </li> <li> <a data-emotionid=47 href=javascript:;> <div class="im-emotion-unit im-emotion-47"></div> </a> </li> <li> <a data-emotionid=48 href=javascript:;> <div class="im-emotion-unit im-emotion-48"></div> </a> </li> <li> <a data-emotionid=49 href=javascript:;> <div class="im-emotion-unit im-emotion-49"></div> </a> </li> <li> <a data-emotionid=50 href=javascript:;> <div class="im-emotion-unit im-emotion-50"></div> </a> </li> <li> <a data-emotionid=51 href=javascript:;> <div class="im-emotion-unit im-emotion-51"></div> </a> </li> <li> <a data-emotionid=52 href=javascript:;> <div class="im-emotion-unit im-emotion-52"></div> </a> </li> <li> <a data-emotionid=53 href=javascript:;> <div class="im-emotion-unit im-emotion-53"></div> </a> </li> <li> <a data-emotionid=54 href=javascript:;> <div class="im-emotion-unit im-emotion-54"></div> </a> </li> <li> <a data-emotionid=55 href=javascript:;> <div class="im-emotion-unit im-emotion-55"></div> </a> </li> <li> <a data-emotionid=56 href=javascript:;> <div class="im-emotion-unit im-emotion-56"></div> </a> </li> <li> <a data-emotionid=57 href=javascript:;> <div class="im-emotion-unit im-emotion-57"></div> </a> </li> <li> <a data-emotionid=58 href=javascript:;> <div class="im-emotion-unit im-emotion-58"></div> </a> </li> <li> <a data-emotionid=59 href=javascript:;> <div class="im-emotion-unit im-emotion-59"></div> </a> </li> <li> <a data-emotionid=60 href=javascript:;> <div class="im-emotion-unit im-emotion-60"></div> </a> </li> <li> <a data-emotionid=61 href=javascript:;> <div class="im-emotion-unit im-emotion-61"></div> </a> </li> <li> <a data-emotionid=62 href=javascript:;> <div class="im-emotion-unit im-emotion-62"></div> </a> </li> <li> <a data-emotionid=63 href=javascript:;> <div class="im-emotion-unit im-emotion-63"></div> </a> </li> <li> <a data-emotionid=64 href=javascript:;> <div class="im-emotion-unit im-emotion-64"></div> </a> </li> <li> <a data-emotionid=65 href=javascript:;> <div class="im-emotion-unit im-emotion-65"></div> </a> </li> <li> <a data-emotionid=66 href=javascript:;> <div class="im-emotion-unit im-emotion-66"></div> </a> </li> <li> <a data-emotionid=67 href=javascript:;> <div class="im-emotion-unit im-emotion-67"></div> </a> </li> <li> <a data-emotionid=68 href=javascript:;> <div class="im-emotion-unit im-emotion-68"></div> </a> </li> <li> <a data-emotionid=69 href=javascript:;> <div class="im-emotion-unit im-emotion-69"></div> </a> </li> <li> <a data-emotionid=70 href=javascript:;> <div class="im-emotion-unit im-emotion-70"></div> </a> </li> <li> <a data-emotionid=71 href=javascript:;> <div class="im-emotion-unit im-emotion-71"></div> </a> </li> <li> <a data-emotionid=72 href=javascript:;> <div class="im-emotion-unit im-emotion-72"></div> </a> </li> <li> <a data-emotionid=73 href=javascript:;> <div class="im-emotion-unit im-emotion-73"></div> </a> </li> <li> <a data-emotionid=74 href=javascript:;> <div class="im-emotion-unit im-emotion-74"></div> </a> </li> <li> <a data-emotionid=75 href=javascript:;> <div class="im-emotion-unit im-emotion-75"></div> </a> </li> <li> <a data-emotionid=76 href=javascript:;> <div class="im-emotion-unit im-emotion-76"></div> </a> </li> <li> <a data-emotionid=77 href=javascript:;> <div class="im-emotion-unit im-emotion-77"></div> </a> </li> <li> <a data-emotionid=78 href=javascript:;> <div class="im-emotion-unit im-emotion-78"></div> </a> </li> <li> <a data-emotionid=79 href=javascript:;> <div class="im-emotion-unit im-emotion-79"></div> </a> </li> </div> <div class="im-emotion-point im-emotion-point-page2"></div> </div> <div class="im-emotion-page page3" style=display:none> <div class=emotion-page> <li> <a data-emotionid=80 href=javascript:;> <div class="im-emotion-unit im-emotion-80"></div> </a> </li> <li> <a data-emotionid=81 href=javascript:;> <div class="im-emotion-unit im-emotion-81"></div> </a> </li> <li> <a data-emotionid=82 href=javascript:;> <div class="im-emotion-unit im-emotion-82"></div> </a> </li> <li> <a data-emotionid=83 href=javascript:;> <div class="im-emotion-unit im-emotion-83"></div> </a> </li> <li> <a data-emotionid=84 href=javascript:;> <div class="im-emotion-unit im-emotion-84"></div> </a> </li> <li> <a data-emotionid=85 href=javascript:;> <div class="im-emotion-unit im-emotion-85"></div> </a> </li> <li> <a data-emotionid=86 href=javascript:;> <div class="im-emotion-unit im-emotion-86"></div> </a> </li> <li> <a data-emotionid=87 href=javascript:;> <div class="im-emotion-unit im-emotion-87"></div> </a> </li> <li> <a data-emotionid=88 href=javascript:;> <div class="im-emotion-unit im-emotion-88"></div> </a> </li> <li> <a data-emotionid=89 href=javascript:;> <div class="im-emotion-unit im-emotion-89"></div> </a> </li> <li> <a data-emotionid=90 href=javascript:;> <div class="im-emotion-unit im-emotion-90"></div> </a> </li> <li> <a data-emotionid=91 href=javascript:;> <div class="im-emotion-unit im-emotion-91"></div> </a> </li> <li> <a data-emotionid=92 href=javascript:;> <div class="im-emotion-unit im-emotion-92"></div> </a> </li> <li> <a data-emotionid=93 href=javascript:;> <div class="im-emotion-unit im-emotion-93"></div> </a> </li> <li> <a data-emotionid=94 href=javascript:;> <div class="im-emotion-unit im-emotion-94"></div> </a> </li> <li> <a data-emotionid=95 href=javascript:;> <div class="im-emotion-unit im-emotion-95"></div> </a> </li> <li> <a data-emotionid=96 href=javascript:;> <div class="im-emotion-unit im-emotion-96"></div> </a> </li> <li> <a data-emotionid=97 href=javascript:;> <div class="im-emotion-unit im-emotion-97"></div> </a> </li> <li> <a data-emotionid=98 href=javascript:;> <div class="im-emotion-unit im-emotion-98"></div> </a> </li> <li> <a data-emotionid=99 href=javascript:;> <div class="im-emotion-unit im-emotion-99"></div> </a> </li> <li> <a data-emotionid=100 href=javascript:;> <div class="im-emotion-unit im-emotion-100"></div> </a> </li> <li> <a data-emotionid=101 href=javascript:;> <div class="im-emotion-unit im-emotion-101"></div> </a> </li> <li> <a data-emotionid=102 href=javascript:;> <div class="im-emotion-unit im-emotion-102"></div> </a> </li> </div> <div class="im-emotion-point im-emotion-point-page3"></div> </div> </ul> <div class=im-emotion-footer> <div class=im-emotion-title> <div class=im-emotion-normal> <a class=im-normal>默认</a> </div> </div> <div class=im-emotion-arrow> <a class=im-left-arrow-no title=上一页 href=javascript:void(0);>&nbsp;</a> <a class=im-right-arrow title=下一页 href=javascript:void(0);>&nbsp;</a> </div> </div> <div class=im-emotion-arrow-down></div> </div> </div>';e.exports=n},f5p1:function(e,t,n){var i=n("2oRo"),a=n("iSVu"),r=i.WeakMap;e.exports="function"===typeof r&&/native code/.test(a(r))},fHMY:function(e,t,n){var i,a=n("glrk"),r=n("N+g0"),o=n("eDl+"),s=n("0BK2"),c=n("G+Rx"),l=n("zBJ4"),u=n("93I0"),d=">",p="<",f="prototype",m="script",_=u("IE_PROTO"),h=function(){},g=function(e){return p+m+d+e+p+"/"+m+d},v=function(e){e.write(g("")),e.close();var t=e.parentWindow.Object;return e=null,t},y=function(){var e,t=l("iframe"),n="java"+m+":";return t.style.display="none",c.appendChild(t),t.src=String(n),e=t.contentWindow.document,e.open(),e.write(g("document.F=Object")),e.close(),e.F},w=function(){try{i=document.domain&&new ActiveXObject("htmlfile")}catch(t){}w=i?v(i):y();var e=o.length;while(e--)delete w[f][o[e]];return w()};s[_]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(h[f]=a(e),n=new h,h[f]=null,n[_]=e):n=w(),void 0===t?n:r(n,t)}},fHRf:function(e,t,n){var i=n("szfI");e.exports=i},fHi0:function(e,t,n){e.exports=n("uDyp")},fOAc:function(e,t,n){var i=n("G9WS"),a=i(n("/FZm")),r=i(n("rPUy")),o=n("5m4N"),s=n("eBtS"),c=n("Cgyp"),l=n("Bboc"),u=function(e){(function(t){var n={template:c};s.extend(n,e),o.call(t,n)})(this),this._rendered=!1};u.prototype=(0,r.default)(o.prototype),u.prototype.renderContent=function(){var e,t="javascript:void(0)",n=this._data.msg,i=n.content,r=i.card_content_array,o=this._element,c=(0,a.default)(o).call(o,".card-header"),u=(0,a.default)(o).call(o,".card-list"),d=(0,a.default)(o).call(o,".card-more"),p=((0,a.default)(o).call(o,".inner"),(0,a.default)(u).call(u,"script").html()),f=s("<div>");(0,a.default)(o).call(o,".im-msg-content").on("click","[href]",(function(e){e=e||window.event,e.preventDefault(),e.stopPropagation();var n=s(this).attr("href");n!=t&&l.openPage(n)})),(0,a.default)(e=c.attr({href:i.card_action_pc_url||t})).call(e,"img").attr({src:i.card_picture_url}),(0,a.default)(c).call(c,".img-title").text(i.card_title),i.card_list_url&&r.length>=3?d.attr({href:i.card_list_url||t}):d.hide();for(var m=r.length,_=0;_<m;_++){var h=_===m-1?"last-item":"",g=r[_],v=g.card_sub_labels,y=v&&v.length>0,w=!!g.card_sub_picture_url,b=s(p).attr({href:g.card_sub_action_pc_url||t}).addClass(h),x=((0,a.default)(b).call(b,".item1-minor").html(""),(0,a.default)(b).call(b,".item-label").html("")),S=(0,a.default)(b).call(b,".item-img"),k=(0,a.default)(b).call(b,".item-price");if(1===m&&b.css("margin-bottom","0px"),y)for(var E=0;E<v.length;E++)x.append(s('<div class="label"></div>').text(v[E]));else x.remove();g.card_sub_content?k.text(g.card_sub_content):k.remove(),(0,a.default)(b).call(b,".item-title").attr({title:g.card_sub_title}).text(g.card_sub_title),w?S.attr({src:g.card_sub_picture_url}):(b.addClass("no-img"),S.remove()),f.append(b)}u.html(f.html())},e.exports=u},fdAy:function(e,t,n){"use strict";var i=n("I+eb"),a=n("ntOU"),r=n("4WOD"),o=n("0rvr"),s=n("1E5z"),c=n("kRJp"),l=n("busE"),u=n("tiKp"),d=n("xDBR"),p=n("P4y1"),f=n("rpNk"),m=f.IteratorPrototype,_=f.BUGGY_SAFARI_ITERATORS,h=u("iterator"),g="keys",v="values",y="entries",w=function(){return this};e.exports=function(e,t,n,u,f,b,x){a(n,t,u);var S,k,E,C=function(e){if(e===f&&I)return I;if(!_&&e in T)return T[e];switch(e){case g:return function(){return new n(this,e)};case v:return function(){return new n(this,e)};case y:return function(){return new n(this,e)}}return function(){return new n(this)}},A=t+" Iterator",O=!1,T=e.prototype,M=T[h]||T["@@iterator"]||f&&T[f],I=!_&&M||C(f),N="Array"==t&&T.entries||M;if(N&&(S=r(N.call(new e)),m!==Object.prototype&&S.next&&(d||r(S)===m||(o?o(S,m):"function"!=typeof S[h]&&c(S,h,w)),s(S,A,!0,!0),d&&(p[A]=w))),f==v&&M&&M.name!==v&&(O=!0,I=function(){return M.call(this)}),d&&!x||T[h]===I||c(T,h,I),p[t]=I,f)if(k={values:C(v),keys:b?I:C(g),entries:C(y)},x)for(E in k)(_||O||!(E in T))&&l(T,E,k[E]);else i({target:t,proto:!0,forced:_||O},k);return k}},feed:function(e,t,n){var i=n("A2Ma"),a=i("iterator"),r=!1;try{var o=0,s={next:function(){return{done:!!o++}},return:function(){r=!0}};s[a]=function(){return this},Array.from(s,(function(){throw 2}))}catch(c){}e.exports=function(e,t){if(!t&&!r)return!1;var n=!1;try{var i={};i[a]=function(){return{next:function(){return{done:n=!0}}}},e(i)}catch(c){}return n}},fvkw:function(e,t,n){var i=n("b42z"),a=n("39uu"),r=n("rSeq");e.exports=function(e,t){if(i(e),a(t)&&t.constructor===e)return t;var n=r.f(e),o=n.resolve;return o(t),n.promise}},"g+4o":function(e,t,n){var i=n("Bvq2"),a=n("gfA+"),r="​᠎";e.exports=function(e){return i((function(){return!!a[e]()||r[e]()!=r||a[e].name!==e}))}},"g/fi":function(e,t,n){var i=n("G9WS"),a=i(n("/FZm")),r=i(n("rPUy")),o=n("5m4N"),s=n("eBtS"),c=n("AIit"),l=(n("VRhk"),n("Bboc").convertImgParams,n("sfi9")),u=n("/Pub"),d=function(e){(function(t){var n={template:c};s.extend(n,e),o.call(t,n)})(this)};d.prototype=(0,r.default)(o.prototype),d.prototype.renderContent=function(){var e=this._data.msg;if(!e)return!1;e.content;var t,n=this._element,i=(0,a.default)(n).call(n,".im-contactinfo-card-content"),r=(0,a.default)(n).call(n,".im-contactinfo-title"),o=(0,a.default)(n).call(n,".im-contactinfo-detail");t=e.sender_info.remark?e.sender_info.remark.remark_name||e.sender_info.user_name||"未知":e.sender_info.user_name||"未知",r.text("邀请您提供联系方式");var s=t+"邀请您提供联系方式，确保了解对方再提供，提供的信息仅对方可见，进入查看我的名片。";o.text(s),i.click((function(e){e.stopPropagation(),u.dispatch({type:l.PROVIDE_CONTACTINFO,data:"联系方式邀请"})}))},e.exports=d},g4Mb:function(e,t,n){var i=n("eTws");e.exports=i},g5V9:function(e,t){e.exports=function(){return{tagName:"div",attribs:{},className:["im-loading"],id:"",children:[{tagName:"span",attribs:{},className:["im-loading-icon"],id:""},{tagName:"span",attribs:{},className:["im-loading-content"],id:""}]}}},"g6v/":function(e,t,n){var i=n("0Dky");e.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},gByu:function(e,t,n){n("i3tW");var i=n("dktu");e.exports=i.Object.getOwnPropertySymbols},gH1P:function(e,t){var n='<li class="im-msg im-msg-audio"> <div class=im-msg-time></div> <div class=im-msg-checkbox></div> <div class=im-msg-main> <img class="im-avatar im-msg-avatar"/> <span class=im-msg-send-status></span> <span class=im-msg-showed-status></span> <span class=im-msg-user-name></span> <span class=im-msg-content></span> <span class=im-msg-arrow></span> <span class=im-msg-duration></span> <span class=im-msg-read-status></span> </div> <div class=im-msg-collect-name></div> <div class=im-msg-collect-time></div> <div class=im-msg-feedback> <div class=im-msg-feedback-container> <span class=im-msg-feedback-icon></span> <span class=im-msg-feedback-content></span> </div> </div> </li>';e.exports=n},gXaK:function(e,t){},gdVl:function(e,t,n){"use strict";var i=n("ewvW"),a=n("I8vh"),r=n("UMSQ");e.exports=function(e){var t=i(this),n=r(t.length),o=arguments.length,s=a(o>1?arguments[1]:void 0,n),c=o>2?arguments[2]:void 0,l=void 0===c?n:a(c,n);while(l>s)t[s++]=e;return t}},geEi:function(e,t){var n="<div class=multiple-forward-window> <div class=multiple-sessions> <div class=multiple-sessions-title> <span>最近聊天</span> </div> <div class=multiple-sessions-body> <div class=multiple-sessions-window> <div class=multiple-sessions-container> </div> </div> </div> </div> <div class=multiple-operation> <div class=multiple-selected-container> <div class=multiple-selected-titles> <span class=multiple-selected-main-title>分别发送给</span> <span class=multiple-selected-sub-title>已选择4个聊天</span> </div> <div class=multiple-selected-sessions></div> </div> <div class=multiple-functions-container> <div class=multiple-input> <textarea placeholder=留言></textarea> </div> <div class=multiple-btns> <div class=multiple-forward-window-close>取消</div> <div class=multiple-forward-window-submit>确认</div> </div> </div> </div> </div> <div class=multiple-forward-window-bg></div>";e.exports=n},"gfA+":function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},glrk:function(e,t,n){var i=n("hh1v");e.exports=function(e){if(!i(e))throw TypeError(String(e)+" is not an object");return e}},gnxi:function(e,t){var n="<div class=im-notice-list> <div class=im-notices-container></div> </div> ";e.exports=n},guyh:function(e,t,n){e.exports=n("E7Zm")},gvgV:function(e,t,n){"use strict";var i=n("67WC"),a=n("TWQb").includes,r=i.aTypedArray,o=i.exportTypedArrayMethod;o("includes",(function(e){return a(r(this),e,arguments.length>1?arguments[1]:void 0)}))},hBjN:function(e,t,n){"use strict";var i=n("wE6v"),a=n("m/L8"),r=n("XGwC");e.exports=function(e,t,n){var o=i(t);o in e?a.f(e,o,r(0,n)):e[o]=n}},hByQ:function(e,t,n){"use strict";var i=n("14Sl"),a=n("glrk"),r=n("HYAF"),o=n("Ep9I"),s=n("FMNM");i("search",1,(function(e,t,n){return[function(t){var n=r(this),i=void 0==t?void 0:t[e];return void 0!==i?i.call(t,n):new RegExp(t)[e](String(n))},function(e){var i=n(t,e,this);if(i.done)return i.value;var r=a(e),c=String(this),l=r.lastIndex;o(l,0)||(r.lastIndex=0);var u=s(r,c);return o(r.lastIndex,l)||(r.lastIndex=l),null===u?-1:u.index}]}))},hF4M:function(e,t){var n="<div class=im-input> <div class=im-input-header> <div class=im-input-plugins></div> </div> <div class=im-input-text> </div> <div class=im-input-footer> <span class=im-send-notice>Enter发送，Control+Enter换行</span> <div class=im-send style=display:none>发送</div> <span class=im-sendEmptyTips>发送信息不能为空哦！</span> </div> <div class=im-input-notice></div> </div> ";e.exports=n},hFpA:function(e,t,n){"use strict";var i=n("pevS"),a=n("zJQS"),r=n("T/97"),o=n("Bvq2"),s=n("n2Hk"),c=[],l=c.sort,u=o((function(){c.sort(void 0)})),d=o((function(){c.sort(null)})),p=s("sort"),f=u||!d||!p;i({target:"Array",proto:!0,forced:f},{sort:function(e){return void 0===e?l.call(r(this)):l.call(r(this),a(e))}})},"hH+v":function(e,t){var n='<div class=im-contactinfo> <div class="im-contactinfo-icon tooltip"> <span class=tooltiptext>联系方式</span> </div> <div class=im-contactinfo-content> <ul class=im-contactinfo-texts> </ul> <div class=im-contactinfo-arrow-down></div> </div> </div> ';e.exports=n},"hNJ/":function(e,t,n){"use strict";var i=n("pevS"),a=n("zJQS"),r=n("rSeq"),o=n("m40S"),s=n("W1ep");i({target:"Promise",stat:!0},{allSettled:function(e){var t=this,n=r.f(t),i=n.resolve,c=n.reject,l=o((function(){var n=a(t.resolve),r=[],o=0,c=1;s(e,(function(e){var a=o++,s=!1;r.push(void 0),c++,n.call(t,e).then((function(e){s||(s=!0,r[a]={status:"fulfilled",value:e},--c||i(r))}),(function(e){s||(s=!0,r[a]={status:"rejected",reason:e},--c||i(r))}))})),--c||i(r)}));return l.error&&c(l.value),n.promise}})},hO3g:function(e,t){function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}e.exports=n},hVCs:function(e,t,n){"use strict";var i=n("pCEo"),a=n("FWHo"),r=n("ZyXh"),o=n("n2Hk"),s=n("MCtm"),c=Math.min,l=[].lastIndexOf,u=!!l&&1/[1].lastIndexOf(1,-0)<0,d=o("lastIndexOf"),p=s("indexOf",{ACCESSORS:!0,1:0}),f=u||!d||!p;e.exports=f?function(e){if(u)return l.apply(this,arguments)||0;var t=i(this),n=r(t.length),o=n-1;for(arguments.length>1&&(o=c(o,a(arguments[1]))),o<0&&(o=n+o);o>=0;o--)if(o in t&&t[o]===e)return o||0;return-1}:l},hXpO:function(e,t,n){var i=n("HYAF"),a=/"/g;e.exports=function(e,t,n,r){var o=String(i(e)),s="<"+t;return""!==n&&(s+=" "+n+'="'+String(r).replace(a,"&quot;")+'"'),s+">"+o+"</"+t+">"}},hdMt:function(e,t,n){e.exports=n("mhMO")},hfGx:function(e,t){var n="<ul class=im-contact-group-detail> <li class=im-contact-group-detail-header> <p class=im-backto-contactlist> <i class=im-back-icon>&nbsp;</i> </p> <p class=im-contact-group-msg></p> </li> <li class=im-contact-group-detail-body></li> </ul>";e.exports=n},hfKi:function(e,t){var n='<li class="im-msg im-msg-image"> <div class=im-msg-time></div> <div class=im-msg-checkbox></div> <div class=im-msg-main> <img class="im-avatar im-msg-avatar"/> <span class=im-msg-send-status></span> <span class=im-msg-showed-status></span> <span class=im-msg-user-name></span> <div class=im-msg-content></div> </div> <div class=im-msg-collect-name></div> <div class=im-msg-collect-time></div> <div class=im-msg-feedback> <div class=im-msg-feedback-container> <span class=im-msg-feedback-icon></span> <span class=im-msg-feedback-content></span> </div> </div> </li>';e.exports=n},hh1v:function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},i3tW:function(e,t,n){"use strict";var i=n("pevS"),a=n("OsYe"),r=n("mIMY"),o=n("cEKj"),s=n("wbIY"),c=n("HmPo"),l=n("YtAO"),u=n("Bvq2"),d=n("eOcF"),p=n("YiBS"),f=n("39uu"),m=n("b42z"),_=n("T/97"),h=n("pCEo"),g=n("cWgI"),v=n("LGyv"),y=n("SJYm"),w=n("oBZR"),b=n("DPDV"),x=n("jhEP"),S=n("ogVW"),k=n("RLqH"),E=n("QYBB"),C=n("cEPT"),A=n("AnMC"),O=n("1mbr"),T=n("1lkh"),M=n("su3n"),I=n("bpon"),N=n("PoCt"),L=n("A2Ma"),R=n("vuoM"),P=n("m/sp"),D=n("KHTo"),j=n("L1rz"),U=n("3uAa").forEach,W=M("hidden"),F="Symbol",B="prototype",G=L("toPrimitive"),z=j.set,V=j.getterFor(F),H=Object[B],Y=a.Symbol,q=r("JSON","stringify"),K=k.f,J=E.f,X=x.f,Z=C.f,Q=T("symbols"),$=T("op-symbols"),ee=T("string-to-symbol-registry"),te=T("symbol-to-string-registry"),ne=T("wks"),ie=a.QObject,ae=!ie||!ie[B]||!ie[B].findChild,re=s&&u((function(){return 7!=y(J({},"a",{get:function(){return J(this,"a",{value:7}).a}})).a}))?function(e,t,n){var i=K(H,t);i&&delete H[t],J(e,t,n),i&&e!==H&&J(H,t,i)}:J,oe=function(e,t){var n=Q[e]=y(Y[B]);return z(n,{type:F,tag:e,description:t}),s||(n.description=t),n},se=l?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof Y},ce=function(e,t,n){e===H&&ce($,t,n),m(e);var i=g(t,!0);return m(n),d(Q,i)?(n.enumerable?(d(e,W)&&e[W][i]&&(e[W][i]=!1),n=y(n,{enumerable:v(0,!1)})):(d(e,W)||J(e,W,v(1,{})),e[W][i]=!0),re(e,i,n)):J(e,i,n)},le=function(e,t){m(e);var n=h(t),i=w(n).concat(me(n));return U(i,(function(t){s&&!de.call(n,t)||ce(e,t,n[t])})),e},ue=function(e,t){return void 0===t?y(e):le(y(e),t)},de=function(e){var t=g(e,!0),n=Z.call(this,t);return!(this===H&&d(Q,t)&&!d($,t))&&(!(n||!d(this,t)||!d(Q,t)||d(this,W)&&this[W][t])||n)},pe=function(e,t){var n=h(e),i=g(t,!0);if(n!==H||!d(Q,i)||d($,i)){var a=K(n,i);return!a||!d(Q,i)||d(n,W)&&n[W][i]||(a.enumerable=!0),a}},fe=function(e){var t=X(h(e)),n=[];return U(t,(function(e){d(Q,e)||d(I,e)||n.push(e)})),n},me=function(e){var t=e===H,n=X(t?$:h(e)),i=[];return U(n,(function(e){!d(Q,e)||t&&!d(H,e)||i.push(Q[e])})),i};if(c||(Y=function(){if(this instanceof Y)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=N(e),n=function(e){this===H&&n.call($,e),d(this,W)&&d(this[W],t)&&(this[W][t]=!1),re(this,t,v(1,e))};return s&&ae&&re(H,t,{configurable:!0,set:n}),oe(t,e)},O(Y[B],"toString",(function(){return V(this).tag})),O(Y,"withoutSetter",(function(e){return oe(N(e),e)})),C.f=de,E.f=ce,k.f=pe,b.f=x.f=fe,S.f=me,R.f=function(e){return oe(L(e),e)},s&&(J(Y[B],"description",{configurable:!0,get:function(){return V(this).description}}),o||O(H,"propertyIsEnumerable",de,{unsafe:!0}))),i({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:Y}),U(w(ne),(function(e){P(e)})),i({target:F,stat:!0,forced:!c},{for:function(e){var t=String(e);if(d(ee,t))return ee[t];var n=Y(t);return ee[t]=n,te[n]=t,n},keyFor:function(e){if(!se(e))throw TypeError(e+" is not a symbol");if(d(te,e))return te[e]},useSetter:function(){ae=!0},useSimple:function(){ae=!1}}),i({target:"Object",stat:!0,forced:!c,sham:!s},{create:ue,defineProperty:ce,defineProperties:le,getOwnPropertyDescriptor:pe}),i({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:fe,getOwnPropertySymbols:me}),i({target:"Object",stat:!0,forced:u((function(){S.f(1)}))},{getOwnPropertySymbols:function(e){return S.f(_(e))}}),q){var _e=!c||u((function(){var e=Y();return"[null]"!=q([e])||"{}"!=q({a:e})||"{}"!=q(Object(e))}));i({target:"JSON",stat:!0,forced:_e},{stringify:function(e,t,n){var i,a=[e],r=1;while(arguments.length>r)a.push(arguments[r++]);if(i=t,(f(t)||void 0!==e)&&!se(e))return p(t)||(t=function(e,t){if("function"==typeof i&&(t=i.call(this,e,t)),!se(t))return t}),a[1]=t,q.apply(null,a)}})}Y[B][G]||A(Y[B],G,Y[B].valueOf),D(Y,F),I[W]=!0},i8Iq:function(e,t,n){var i=n("ooPF");e.exports=i({NORMAL:null,MIN:null})},iCai:function(e,t,n){var i=n("G9WS");n("sMBO");var a=i(n("WxoT")),r=i(n("rPUy")),o=i(n("/FZm")),s=i(n("guyh")),c=i(n("UtpJ")),l=i(n("RXMP")),u=n("eBtS"),d=n("JVDe"),p=n("qWuP"),f=n("/Pub"),m=n("sfi9"),_=n("Gm6T"),h=n("Vhpp"),g=n("VRhk"),v=n("Bboc"),y=v.isEmpty,w=v.isGroupUser,b=function(e){if(e)return(0,l.default)(e).call(e,(function(e,t){switch("string"===typeof e.content&&(e.content=JSON.parse(e.content)),e.content.type){case"audio":e.content.msg="[语音]",e.content.type="text",e.show_type="text";break;case"video":e.content.msg="[视频]",e.content.type="text",e.show_type="text";break;case"text":break;case"card":case"minicard":case"universal_card1":case"universal_card2":case"universal_card3":case"mix":case"universal_card4":case"universal_card5":case"universal_card6":case"private_card_ganji":e.content.msg="[卡片]",e.content.type="text",e.show_type="text";break;case"provide_contactinfo_card":case"default_contactinfo_card":e.content.msg="[名片]",e.content.type="text",e.show_type="text";break;case"standard_evaluate_card1":case"standard_evaluate_card2":e.content.msg="[评价邀请]",e.content.type="text",e.show_type="text";break;case"file":e.content.msg="[文件]",e.content.type="text",e.show_type="text";break;case"location":e.content.msg="消息格式暂不支持，请在客户端查看",e.content.type="text",e.show_type="text";break;case"call_audio":e.content.msg="[收到一条语音聊天消息，请在手机上查看]",e.content.type="text",e.show_type="text";break;case"call_video":e.content.msg="[收到一条视频聊天消息，请在手机上查看]",e.content.type="text",e.show_type="text";break;case"image":e.content.msg="[图片]",e.content.type="text",e.show_type="text";break;case"msg_batch_forward_card":e.content.msg="[聊天记录]",e.content.type="text",e.show_type="text";break;default:e.content.msg="消息格式暂不支持，请在客户端查看",e.content.type="text",e.show_type="text";break}})),e},x=function(e,t){return e.send_time>t.send_time?-1:e.send_time<t.send_time?1:0},S=function(e){var t=[];if(e)return(0,l.default)(e).call(e,(function(e,n){if(e.msgs&&e.msgs.length>=2){var i,a,r=u.extend(!0,[],(0,c.default)(i=e.msgs).call(i,0,2));r=b(r);var o=[];(0,l.default)(r).call(r,(function(e){o.push({msg_content:e.content.msg,name:e.sender_name,msg:e})})),(0,l.default)(a=e.msgs).call(a,(function(e){e.msg_showtype="collect",e.msg_collect="collect"}));var s=y(e.other_name)?o[0].name:e.other_name;w({user_source:r[0].to_source})&&y(e.other_name)&&(s="群聊"),t.push({collect_id:e.collect_id,msg_id:e.collect_id,forward_msgs:e.forward_msgs,msgs:e.msgs,content:o,sender_info:{user_name:s},title:s+"的聊天记录",send_time:e.collect_time,show_type:"chat_card",msg_showtype:"collect"})}else{var d=e.msgs[0];if("string"===typeof d.content&&(d.content=JSON.parse(d.content)),"audio"===e.type){var p=d.content.url;d.content.url=g["audio-converter"](p)}s=y(e.other_name)?d.sender_name:e.other_name;w({user_source:d.to_source})&&y(e.other_name)&&(s="群聊"),t.push({collect_id:e.collect_id,msg_id:e.collect_id,forward_msgs:e.forward_msgs,msgs:e.msgs,content:d.content,sender_info:{user_name:s},to_source:d.to_source,send_time:e.collect_time,show_type:"link"===e.type?d.content.type:e.type,msg_showtype:"collect"})}})),(0,s.default)(t).call(t,x),t},k=function(e){(function(t){var n={template:p};u.extend(n,e),d.call(t,n),t._menuTexts=[],t._messages=[],t._type="",t._isLoading=!1,t._haveMore=!0,t.iconIndex="0",t.menuText=["全部","聊天记录","图片","文件","链接","音频","视频"],t.updateMenuList(t.menuText),t.updateMenuActive()})(this),function(e){var t;e._children["contentmenu"]=new h({}),(0,o.default)(t=e._element).call(t,".im-menu-container").append(e._children["contentmenu"].getElement()),e._children["contentmenu"].addEventListener("click",(function(t){var n;switch(t.action){case"delCollection":f.dispatch({type:m.DEL_COLLECTION,data:{message:t.message}}),(0,o.default)(n=e._element).call(n,".im-menu-container").hide(),e._children["contentmenu"].hide();break;default:break}}))}(this),function(e){e._element.click((function(t){t.stopPropagation();var n=u(t.target);if(n.hasClass("window-collect-header-close"))return e.iconIndex="0",e.updateMenuActive(),e.hide(),void f.dispatch({type:m.CLOSE_ALL_FLOAT_VIEWS});if(n.hasClass("menu-icon")||n.hasClass("window-collect-menu-text")){var i=n[0].dataset.icon,a="1"===i?"chat":"2"===i?"image":"3"===i?"file":"4"===i?"link":"5"===i?"audio":"6"===i?"video":"";e.iconIndex=i,e.updateMenuActive(),e._type=a,void 0!==a&&f.dispatch({type:m.GET_MY_COLLECTION,data:{type:a}})}}))}(this)};k.prototype=(0,r.default)(d.prototype),k.prototype.render=function(){var e=this.getElement(),t=e;(0,o.default)(t).call(t,".window-collect-header-close");this.updateCollectMsgs(this._data.collections,this._data.have_more),this.updateRemainedSize(this._data.total,this._data.remained_size)},k.prototype.updateCollectMsgs=function(e,t){var n,i,a=this,r=S(e);a._messages=r,a._haveMore=t,(0,o.default)(n=a._element).call(n,".window-collect-msgs").empty();var s=new _({});a._children["msgViewer"]=s,(0,o.default)(i=a._element).call(i,".window-collect-msgs").append(s.getElement()),a._children["msgViewer"].addCollectMsg(r),a._children["msgViewer"].addEventListener("addMoreCollectMsg",(function(){a._haveMore&&!a._isLoading&&(a.isLoading=!0,a._children["msgViewer"].startLoading(),a.getMoreCollectMsg((function(e,t){var n=S(e);a._messages=n,a._isLoading=!1,a._haveMore=t,a._children["msgViewer"].stopLoading(),a._children["msgViewer"].addCollectMsg(n,t)})))})),a._children["msgViewer"].addEventListener("contentMenuOpen",(function(e){var t,n;(0,o.default)(t=a._element).call(t,".im-menu-container").show();var i=[{text:"删除",action:"delCollection"}];a._children["contentmenu"].setData({selections:i,message:e.message}),i.length&&(0,o.default)(n=a._element).call(n,".im-menu-container").css("left",e.position.x-a._element.offset().left).css("top",e.position.y-a._element.offset().top).show(),a._children["contentmenu"].show(),a._children["msgViewer"]._options.contentOpened=!0})),a._children["msgViewer"].addEventListener("contentMenuClose",(function(e){var t;(0,o.default)(t=a._element).call(t,".im-menu-container").hide(),a._children["contentmenu"].hide(),a._children["msgViewer"]._options.contentOpened=!1}))},k.prototype.delCollections=function(e){var t=this;(0,l.default)(e).call(e,(function(e,n){t._children["msgViewer"].remove(null,null,e)}))},k.prototype.updateMenuList=function(e){var t,n=this;n._menuTexts&&e&&(0,a.default)(n._menuTexts)==(0,a.default)(e)||((0,o.default)(t=n._element).call(t,".window-collect-menu-texts").html(""),u(e).each((function(e,t){var i;(0,o.default)(i=n._element).call(i,".window-collect-menu-texts").append(u('<li class="menu-icon menu-icon-'+e+'" data-icon ="'+e+'" ><span class="menu-icon menu-icon-'+e+'" data-icon ="'+e+'" ></span><span class="window-collect-menu-text" data-icon ="'+e+'">'+t+"</span></li>"))})),n._menuTexts=e)},k.prototype.updateMenuActive=function(){for(var e,t,n=this,i=(0,o.default)(e=n._element).call(e,".window-collect-menu-texts").children(),a=i.length,r=0;r<a;r++)u(i[r]).removeClass("active"),n.iconIndex&&n.iconIndex==r&&u(i[r]).addClass("active");var s=(0,o.default)(t=n._element).call(t,".window-collect-header-title"),c="全部"==n.menuText[n.iconIndex]?"全部收藏":n.menuText[n.iconIndex];s.text(c)},k.prototype.updateRemainedSize=function(e,t){var n,i=this,a=Math.ceil((e-t)/1024/1024)+" MB",r=e/1024/1024+" MB";(0,o.default)(n=i._element).call(n,".window-collect-menu-space").text("已用空间:"+a+"/"+r)},k.prototype.getMoreCollectMsg=function(e){if(this._messages.length&&"function"===typeof e&&"function"===typeof this._options.getMoreCollectMsg){var t=this._messages[this._messages.length-1],n={last_collect_id:t.msg_id,type:this._type,count:50};this._options.getMoreCollectMsg(n,e)}},k.prototype.show=function(e){d.prototype.show.call(this);var t=this.getElement(),n=t,i=(0,o.default)(t).call(t,".window-collect-bg");n.show(),i.show()},k.prototype.hide=function(){d.prototype.hide.call(this);var e=this.getElement(),t=e,n=(0,o.default)(e).call(e,".window-collect-bg");t.hide(),n.hide()},e.exports=k},iF40:function(e,t){var n="<div class=im-msgviewer> </div> ";e.exports=n},iSI8:function(e,t,n){var i=n("G9WS"),a=n("LYCE"),r=n("iYz8"),o=n("6UaR"),s=n("Dcj1"),c=n("O0yt"),l=n("0lTi"),u=n("UtpJ");n("oVuX"),n("rB9j"),n("UxlC"),a(t,"__esModule",{value:!0}),t.default=g;var d=i(n("eLKs")),p=i(n("aTWP")),f=n("OY+d");function m(e,t){var n;if("undefined"===typeof c||null==s(e)){if(o(e)||(n=_(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,u=!0,d=!1;return{s:function(){n=r(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){d=!0,l=e},f:function(){try{u||null==n.return||n.return()}finally{if(d)throw l}}}}function _(e,t){var n;if(e){if("string"===typeof e)return h(e,t);var i=u(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?l(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function g(e,t,n,i,a,r){if(e&&e[i]){_attribs=e[i],e[i]="";var o,s=[],c=m(_attribs);try{for(c.s();!(o=c.n()).done;){var l=o.value;if(l&&((0,f.isObject)(l)||l.length))if(l&&l.is_function){if(l.fun_name&&l.fun_param){var u=l.fun_name,_=l.fun_param;if(n&&"function"===typeof n[u]&&t&&!(0,f.isEmpty)(t[_])){var h=n[u](t[_]);s.push(h||"")}}}else if(l&&l.is_caculate)try{var g=new Function("with(this) { return "+l.caculate+" }"),v=(0,d.default)(g).call(g,t)();s.push(v||""),r&&l.watched&&a&&a.push(l.watched)}catch(y){}else l&&l.is_bind&&(0,d.default)(l)?(s.push((0,p.default)((0,d.default)(l))(t)||""),r&&a&&a.push((0,d.default)(l).replace(/\s+/g,""))):(0,f.isObject)(l)||s.push(l)}}catch(err){c.e(err)}finally{c.f()}e[i]=s.join(" ")}}},iSVu:function(e,t,n){var i=n("xs3f"),a=Function.toString;"function"!=typeof i.inspectSource&&(i.inspectSource=function(e){return a.call(e)}),e.exports=i.inspectSource},iVne:function(e,t,n){var i=n("G9WS"),a=i(n("WxoT")),r=i(n("ZbhI")),o=i(n("rPUy")),s=i(n("/FZm")),c=n("eBtS"),l=n("/fP4"),u=n("JVDe"),d=function(e){(function(t){var n={template:l,plugins:[]};c.extend(n,e),u.call(t,n),t._beforeTexts=[],c(n.plugins).each((function(e,n){var i;(0,s.default)(i=t._element).call(i,".im-cwheader-plugins").append(n.getElement()),n.setCwHeader(t)}))})(this)};d.prototype=(0,o.default)(u.prototype),d.prototype.addBlackList=function(){this.triggerEvent("addBlackList")},d.prototype.delBlackList=function(){this.triggerEvent("delBlackList")},d.prototype.complaints=function(){this.triggerEvent("complaints")},d.prototype.isBlackedCheck=function(){this.triggerEvent("isBlackedCheck")},d.prototype.updateHandleText=function(e){var t,n,i=(0,s.default)(t=(0,s.default)(n=this._element).call(n,".im-feedback-texts")).call(t,"LI");c(i).each((function(t,n){var i,a,o=(0,s.default)(i=c(n)).call(i,".im-feedback-text").text();(o.length>e.length&&-1!==(0,r.default)(o).call(o,e)||o.length<e.length&&-1!==(0,r.default)(e).call(e,o))&&(0,s.default)(a=c(n)).call(a,".im-feedback-text").text(e)}))},d.prototype.updateFeedBackList=function(e,t){var n,i,r,o=this;o._beforeTexts&&e&&(0,a.default)(o._beforeTexts)==(0,a.default)(e)||((0,s.default)(n=o._element).call(n,".im-feedback-texts").html(""),c(e).each((function(e,n){var i,a;t?(0,s.default)(i=o._element).call(i,".im-feedback-texts").append(c('<li class="texts-icon texts-icon-'+(t[e]||e)+'"><span class="texts-icon texts-icon-'+(t[e]||e)+'"></span><span class="im-feedback-text">'+n+"</span></li>")):(0,s.default)(a=o._element).call(a,".im-feedback-texts").append(c('<li class="texts-icon texts-icon-'+e+'"><span class="texts-icon texts-icon-'+e+'"></span><span class="im-feedback-text">'+n+"</span></li>"))})),o._beforeTexts=e,e&&e.length?(0,s.default)(i=o._element).call(i,".im-feedback").removeClass("im-closed").show():(0,s.default)(r=o._element).call(r,".im-feedback").hide())},d.prototype.quitGroup=function(){this.triggerEvent("quitGroup")},d.prototype.disbandGroup=function(){this.triggerEvent("disbandGroup")},d.prototype.getGroupQrCode=function(){this.triggerEvent("getGroupQrCode")},d.prototype.groupNotice=function(){this.triggerEvent("groupNotice")},d.prototype.sesTop=function(e){this.triggerEvent("sesTop",e)},d.prototype.setSilent=function(e){this.triggerEvent("setSilent",e)},d.prototype.setGroup=function(e){this.triggerEvent("setGroup",e)},d.prototype.switchFeedbackIcon=function(e){var t,n;e?(0,s.default)(t=this._element).call(t,".im-feedback").show():(0,s.default)(n=this._element).call(n,".im-feedback").hide()},d.prototype.setUserRemark=function(){this.triggerEvent("setUserRemark")},e.exports=d},iYz8:function(e,t,n){e.exports=n("FvEI")},"ia+l":function(e,t){var n='<div class=im-image> <div class="im-image-icon tooltip"> <span class="tooltiptext tooltiptext1">图片</span> </div> <input class=im-image-choose type=file /> </div>';e.exports=n},if9f:function(e,t,n){var i=n("G9WS");n("rB9j"),n("UxlC");var a=i(n("526F")),r=i(n("Kwsy")),o=i(n("/FZm")),s=i(n("rPUy")),c=i(n("o+MX")),l=i(n("guyh")),u=i(n("RXMP")),d=n("eBtS"),p=n("JVDe"),f=n("Itcm"),m=n("geEi"),_=n("Bboc"),h=n("/Pub"),g=n("sfi9"),v=n("VRhk"),y=_.isEmpty,w=_.isAnonymousSession,b=function(e,t){return e.sort_time>t.sort_time?-1:e.sort_time<t.sort_time?1:0},x=function(e){var t,n=[],i=[],a=[];return(0,u.default)(e).call(e,(function(e,t){e.is_top_group?n.push(e):e.contact&&e.contact.msg_set&&1==e.contact.msg_set.ses_top&&y(e.contact.shop_id)?i.push(e):a.push(e)})),(0,l.default)(n).call(n,b),(0,l.default)(i).call(i,b),(0,l.default)(a).call(a,b),(0,c.default)(t=(0,c.default)(n).call(n,i)).call(t,a)},S=function(e){(function(t){var n={selected:{},selectedNum:0,sessionDomNumber:0,template:m,sessionTpl:'<div class="session-to-forward"><div class="session-forward-left ${{im-show-shop-icon}}"><div class="session-forward-portrait"><img alt="" class="session-to-forward-avatar" crossorigin="anonymous" src="${{avatar}}"></div><span class="session-forward-username">${{username}}</span><span class="im-shop-icon">商家聊天</span></div><div class="session-forward-right"><div class="session-forward-checkbox" data-index="${{index}}"></div></div></div>',selectedSessionTpl:'<div class="session-to-forward"><div class="session-forward-left ${{im-show-shop-icon}}"><div class="session-forward-portrait"><img alt="" class="session-to-forward-avatar" crossorigin="anonymous" src="${{avatar}}"></div><span class="session-forward-username">${{username}}</span><span class="im-shop-icon">商家聊天</span></div><div class="session-forward-right"><div class="session-forward-uncheckbox" data-index="${{index}}"></div></div></div>'};d.extend(n,e),p.call(t,n)})(this),function(e){e._element.click((function(t){var n=d(t.target);if(t.stopPropagation(),n.hasClass("multiple-forward-window-close")&&h.dispatch({type:g.MULTIPLE_FORWARD_WINDOW_CLOSE}),n.hasClass("multiple-forward-window-submit")){if(0==e._options.selectedNum)return;var i,a=[];for(var r in e._options.selected)i=e._options.selected[r],i&&i.user&&i.user.user_id&&!y(i.user.user_source)&&a.push(i);h.dispatch({type:g.MULTIPLE_FORWARD_WINDOW_SUBMIT,data:{toUsers:a,messages:e._data.messages,forward_one_by_one:e._data.forward_one_by_one,leaveMsg:e.getMessage().msg}})}if(n.hasClass("session-forward-checkbox")){var o=n.data("index");if(!isNaN(o)){if(e._options.single_select&&e._options.selectedNum>0)for(var s in e._options.selected)s!==o+""&&e.unselectSession(s);e._options.selected[o]||e.selectSession(o)}}if(n.hasClass("session-forward-uncheckbox")){o=n.data("index");isNaN(o)||e.unselectSession(o)}}))}(this)};S.prototype=(0,s.default)(p.prototype),S.prototype.render=function(){var e=this,t=this.getElement(),n=this._data.sessions||[],i=this._data.contacts||{};(0,o.default)(t).call(t,".multiple-sessions-container").html(""),y(e._children["sessionlist-scrollbar"])?this.addScrollbar():e._children["sessionlist-scrollbar"]&&e._children["sessionlist-scrollbar"].scroll(0),e.addMoreSessions(n,i)},S.prototype.bindEvents=function(){(0,o.default)($element).call($element,".session-to-forward-avatar").error((function(){var e=d(this).attr("src");e!==v["default-avatar"]&&d(this).attr("src",v["default-avatar"])}))},S.prototype.selectSession=function(e){var t,n,i=this,a=this.getElement(),r=this._data.sessions||[],s=this._data.contacts||{};if(!i._options.selected[e]&&!y(s)&&!y(r[e])&&!y(r[e].user)&&(i._options.selected[e]=r[e],id_source=r[e].user.user_id+"@"+r[e].user.user_source,n=r[e].user.shop_id&&r[e].user.shop_source,n&&(id_source+="@@"+r[e].user.shop_id+"@"+r[e].user.shop_source),!y(s[id_source]))){var c="";w(s[id_source])&&(c="游客"+s[id_source].user_id),t=d(i._options.selectedSessionTpl.replace("${{index}}",e).replace("${{avatar}}",s[id_source].avatar).replace("${{username}}",(s[id_source].remark&&s[id_source].remark.remark_name?s[id_source].remark.remark_name:s[id_source].user_name)||c||"未知").replace("${{im-show-shop-icon}}",n?"im-show-shop-icon":"")),(0,o.default)(t).call(t,".session-to-forward-avatar").error((function(){var e=d(this).attr("src");e!==v["default-avatar"]&&d(this).attr("src",v["default-avatar"])})),(0,o.default)(a).call(a,".multiple-selected-sessions").append(t),(0,o.default)(a).call(a,'.multiple-sessions-container .session-to-forward .session-forward-checkbox[data-index="'+e+'"]').parents(".session-to-forward").addClass("session-to-forward-selected"),i._options.selectedNum+=1,i._options.selectedNum>0&&((0,o.default)(a).call(a,".multiple-selected-sub-title").show().html("已选择"+i._options.selectedNum+"个聊天"),(0,o.default)(a).call(a,".multiple-forward-window-submit").css("background","#3478F6"),(0,o.default)(a).call(a,".multiple-forward-window-submit").css("border","1px solid #3478F6"))}},S.prototype.unselectSession=function(e){var t=this,n=this.getElement();t._options.selected[e]&&(delete t._options.selected[e],(0,o.default)(n).call(n,'.multiple-selected-sessions .session-to-forward .session-forward-uncheckbox[data-index="'+e+'"]').parents(".session-to-forward").remove(),(0,o.default)(n).call(n,'.multiple-sessions-container .session-to-forward .session-forward-checkbox[data-index="'+e+'"]').parents(".session-to-forward").removeClass("session-to-forward-selected"),t._options.selectedNum-=1,t._options.selectedNum>0?(0,o.default)(n).call(n,".multiple-selected-sub-title").html("已选择"+t._options.selectedNum+"个聊天"):((0,o.default)(n).call(n,".multiple-selected-sub-title").hide(),(0,o.default)(n).call(n,".multiple-forward-window-submit").css("background","grey"),(0,o.default)(n).call(n,".multiple-forward-window-submit").css("border","1px solid grey")))},S.prototype.reset=function(){var e=this;e._options.selected={},e._options.selectedNum=0,e._options.sessionDomNumber=0,e._options.isLoading=!1,e._options.hasMore=!0,e._data.sessions=[],e._data.messages=[];var t=this.getElement();(0,o.default)(t).call(t,".multiple-selected-sessions").html(""),(0,o.default)(t).call(t,".multiple-sessions-container").html(""),(0,o.default)(t).call(t,".multiple-selected-sub-title").hide(),(0,o.default)(t).call(t,".multiple-input textarea").val(""),e._children["sessionlist-scrollbar"]&&e._children["sessionlist-scrollbar"].scroll(0)},S.prototype.addScrollbar=function(){var e,t,n,i=this,a=new f({window:(0,o.default)(e=i._element).call(e,".multiple-sessions-window"),content:(0,o.default)(t=i._element).call(t,".multiple-sessions-container")});(0,o.default)(n=i._element).call(n,".multiple-sessions-window").append(a.getElement()),i._children["sessionlist-scrollbar"]=a,(0,r.default)((function(){a.init()}),0),a.addEventListener("scrolled",(function(e){var t,n,a=(0,o.default)(t=i.getElement()).call(t,".multiple-sessions-window").height(),r=(0,o.default)(n=i.getElement()).call(n,".multiple-sessions-container").height();if(r<a)return!1;r-a-e<=5&&i._options.hasMore&&!i._options.isLoading&&(i._options.isLoading=!0,i.getMoreSessions((function(e,t,n){e&&e.length&&i.addMoreSessions(e,t),i._options.isLoading=!1,i._options.hasMore=n})))}))},S.prototype.addMoreSessions=function(e,t){var n,i,r,s=this,l=this.getElement(),p=[],f=s._options.sessionDomNumber,m=s._options.sessionDomNumber;if(!y(t)){var _;if((0,u.default)(e).call(e,(function(n,a){n&&!y(n.user)&&(i=n.user.user_id+"@"+n.user.user_source,e[a].user.shop_id&&e[a].user.shop_source&&(i+="@@"+e[a].user.shop_id+"@"+e[a].user.shop_source),y(t[i])||(n.contact=t[i]))})),e=x(e),0===f)s._data.sessions=e;else s._data.sessions=(0,c.default)(_=s._data.sessions).call(_,e),s._data.contacts=(0,a.default)(s._data.contacts,t);(0,u.default)(e).call(e,(function(t,i){var a=t.contact;if(a){m=f+(f>0?1+i:i),r=e[i].user.shop_id&&e[i].user.shop_source;var c="";w(a)&&(c="游客"+a.user_id),n=d(s._options.sessionTpl.replace("${{index}}",m).replace("${{avatar}}",a.avatar).replace("${{username}}",(a.remark&&a.remark.remark_name?a.remark.remark_name:a.user_name)||c||"未知").replace("${{im-show-shop-icon}}",r?"im-show-shop-icon":"")),(0,o.default)(n).call(n,".session-to-forward-avatar").error((function(){var e=d(this).attr("src");e!==v["default-avatar"]&&d(this).attr("src",v["default-avatar"])})),p.push(n)}})),(0,o.default)(l).call(l,".multiple-sessions-container .session-to-forward").length?(0,o.default)(l).call(l,".multiple-sessions-container").append(p):(0,o.default)(l).call(l,".multiple-sessions-container").html(p),s._options.sessionDomNumber=m,s._children["sessionlist-scrollbar"]&&s._children["sessionlist-scrollbar"].calHeight()}},S.prototype.getMoreSessions=function(e){if(this._data.sessions.length&&"function"===typeof e&&"function"===typeof this._options.getMoreSessions){var t=this._data.sessions[this._data.sessions.length-1],n={last_other_id:t.user.user_id,last_other_source:t.user.user_source,last_msg_id:t.msg.msg_id,count:50};this._options.getMoreSessions(n,e)}},S.prototype.getMessage=function(){var e=this.getElement();return{type:"text",msg:(0,o.default)(e).call(e,".multiple-input textarea").val()}},S.prototype.show=function(){p.prototype.show.call(this);var e=this.getElement();(0,o.default)(e).call(e,".multiple-forward-window-bg").show()},S.prototype.hide=function(){p.prototype.hide.call(this);var e=this.getElement();(0,o.default)(e).call(e,".multiple-forward-window-submit").css("background","grey"),(0,o.default)(e).call(e,".multiple-forward-window-submit").css("border","1px solid grey"),(0,o.default)(e).call(e,".multiple-forward-window-bg").hide()},e.exports=S},ijsr:function(e,t,n){var i=n("b42z");e.exports=function(e){var t=e["return"];if(void 0!==t)return i(t.call(e)).value}},iqWW:function(e,t,n){"use strict";var i=n("ZUd8").charAt;e.exports=function(e,t,n){return t+(n?i(e,t).length:1)}},iqeF:function(e,t,n){var i=n("2oRo"),a=n("0Dky"),r=n("HH4o"),o=n("67WC").NATIVE_ARRAY_BUFFER_VIEWS,s=i.ArrayBuffer,c=i.Int8Array;e.exports=!o||!a((function(){c(1)}))||!a((function(){new c(-1)}))||!r((function(e){new c,new c(null),new c(1.5),new c(e)}),!0)||a((function(){return 1!==new c(new s(2),1,void 0).length}))},j5XY:function(e,t,n){var i=n("1jut"),a=n("/EgQ"),r=n("A2Ma"),o=r("toStringTag"),s="Arguments"==a(function(){return arguments}()),c=function(e,t){try{return e[t]}catch(n){}};e.exports=i?a:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=c(t=Object(e),o))?n:s?a(t):"Object"==(i=a(t))&&"function"==typeof t.callee?"Arguments":i}},j60x:function(e,t,n){var i=n("OsYe"),a=n("AnMC");e.exports=function(e,t){try{a(i,e,t)}catch(n){i[e]=t}return t}},jFqN:function(e,t,n){"use strict";var i=n("DK5n"),a=n("dmt9");e.exports=i("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),a)},jP3w:function(e,t,n){var i=n("MycS"),a=Function.prototype;e.exports=function(e){var t=e.bind;return e===a||e instanceof Function&&t===a.bind?i:t}},jQUo:function(e,t,n){var i=n("m/sp");i("toPrimitive")},jYpi:function(e,t){var n="<div class=im-chat-float> <div class=chat-float-btns> <div class=chat-float-btn> <div class=chat-float-add></div> <span>添加新成员</span> </div> </div> <div class=chat-float-members></div> </div> ";e.exports=n},jhEP:function(e,t,n){var i=n("pCEo"),a=n("DPDV").f,r={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return a(e)}catch(t){return o.slice()}};e.exports.f=function(e){return o&&"[object Window]"==r.call(e)?s(e):a(i(e))}},jly2:function(e,t,n){"use strict";var i=n("pevS"),a=n("V3kF"),r=n("7GIe"),o=n("SJYm"),s=n("AnMC"),c=n("LGyv"),l=n("W1ep"),u=function(e,t){var n=this;if(!(n instanceof u))return new u(e,t);r&&(n=r(new Error(void 0),a(n))),void 0!==t&&s(n,"message",String(t));var i=[];return l(e,i.push,{that:i}),s(n,"errors",i),n};u.prototype=o(Error.prototype,{constructor:c(5,u),message:c(5,""),name:c(5,"AggregateError")}),i({global:!0},{AggregateError:u})},jqOg:function(e,t){var n='<li class="im-msg im-msg-card-shop"> <div class=im-msg-time></div> <div class=im-msg-main> <img class="im-avatar im-msg-avatar"/> <span class=im-msg-send-status></span> <span class=im-msg-showed-status></span> <span class=im-msg-user-name></span> <div class=im-msg-content> </div> </div> <div class=im-msg-collect-name></div> <div class=im-msg-collect-time></div> <div class=im-msg-feedback> <div class=im-msg-feedback-container> <span class=im-msg-feedback-icon></span> <span class=im-msg-feedback-content></span> </div> </div> </li> ';e.exports=n},juuZ:function(e,t,n){var i=n("vA9J");e.exports=i},k0EP:function(e,t,n){var i=n("G9WS");n("sMBO"),n("rB9j"),n("UxlC"),n("EnZy");var a=i(n("RXMP")),r=i(n("/FZm")),o=i(n("ZbhI")),s=i(n("rPUy")),c=n("5m4N"),l=n("eBtS"),u=n("4Iq6"),d=n("Bboc"),p=d.isEmpty,f=function(e){(function(t){var n={template:u,detail_tpl:'<span class="{{style}} job-detail">{{text}}</span>',label_tpl:"<span class=job-label>{{text}}</span>"};l.extend(n,e),c.call(t,n)})(this),this._rendered=!1};f.prototype=(0,s.default)(c.prototype),f.prototype.renderContent=function(){var e=this._data.msg,t=e.content,n=this._element,i=t.json_data,s=t.xml_data,c=this,u={},f="javascript:void(0)";if(!p(s))try{for(var m=new DOMParser,_=m.parseFromString(s,"text/xml"),h=_.getElementsByTagName("content"),g=!p(h)&&h.length?h[0].attributes:[],v=["catename","fl","reqnum","c","x","joburl","dis"],y=0;y<g.length;y++){var w=(0,o.default)(v).call(v,g[y].name);w>=0&&(u[v[w]]=g[y].value)}}catch(C){}if("string"==typeof i)try{i=JSON.parse(i)}catch(C){i=null}if(!p(i)&&!p(i.card_content)){var b=i.card_content;p(u["fl"])&&(u["fl"]=b.jobwelfare||""),p(u["catename"])&&(u["catename"]=b.jobname||""),p(u["x"])&&(u["x"]=b.jobsalary||""),p(u["joburl"])&&(u["joburl"]=b.joburl||""),p(u["dis"])&&(u["dis"]=b.companyaddress||"")}b=i.card_content;(0,r.default)(n).call(n,".im-job-title").html(u.c||""),(0,r.default)(n).call(n,".im-job-price").html(u.x||"");var x=[],S=[],k="",E="";u.catename&&x.push(u.catename),u.dis&&x.push(u.dis),u.reqnum&&x.push("招"+u.reqnum+"人"),u.fl&&(S=u.fl.split(" ")),(0,a.default)(x).call(x,(function(e,t){k+=c._options.detail_tpl.replace("{{style}}",t>0?"job-border-detail":"").replace("{{text}}",e)})),(0,a.default)(S).call(S,(function(e){E+=c._options.label_tpl.replace("{{text}}",e)})),(0,r.default)(n).call(n,".im-job-detail").html(k),(0,r.default)(n).call(n,".im-job-label").html(E),u.joburl&&(0,r.default)(n).call(n,".im-job-content").attr("href",u.joburl||f),(0,r.default)(n).call(n,".im-msg-content").on("click","[href]",(function(e){e.preventDefault();var t=l(this).attr("href");t!=f&&d.openPage(t)}))},e.exports=f},k2Gq:function(e,t,n){var i=n("0X2M");e.exports=i},k6ad:function(e,t){e.exports=function(){return{tagName:"ul",attribs:{},className:["im-session-list"],id:"",children:[{tagName:"session-item",attribs:{"im-for":{for_group_name:"sessions",for_item_name:"session"},"im-item":"session","im-key":[{is_function:!0,fun_name:"createkey",fun_param:"session"}]},className:"",id:""},{tagName:"loading",attribs:{"im-key":["session-loading"]},className:"",id:""}]}}},kA7L:function(e,t,n){var i=n("hdMt");function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),i(e,a.key,a)}}function r(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}e.exports=r},kE3c:function(e,t,n){var i=n("uC8H");e.exports=i},kIAf:function(e,t,n){var i=n("m/sp");i("isConcatSpreadable")},kJdU:function(e,t,n){n("Rk6w");var i=n("dktu");e.exports=i.Date.now},kOOl:function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+i).toString(36)}},kQON:function(e,t,n){"use strict";var i=n("pCEo"),a=n("xE4W"),r=n("dGO/"),o=n("L1rz"),s=n("QFZC"),c="Array Iterator",l=o.set,u=o.getterFor(c);e.exports=s(Array,"Array",(function(e,t){l(this,{type:c,target:i(e),index:0,kind:t})}),(function(){var e=u(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}}),"values"),r.Arguments=r.Array,a("keys"),a("values"),a("entries")},kRJp:function(e,t,n){var i=n("g6v/"),a=n("m/L8"),r=n("XGwC");e.exports=i?function(e,t,n){return a.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},kWc3:function(e,t){var n='<div class=im-file> <div class="im-file-icon tooltip"> <span class=tooltiptext>发送文件</span> </div> <input class=im-file-choose type=file /> </div>';e.exports=n},kmMV:function(e,t,n){"use strict";var i=n("rW0t"),a=n("n3/R"),r=RegExp.prototype.exec,o=String.prototype.replace,s=r,c=function(){var e=/a/,t=/b*/g;return r.call(e,"a"),r.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),l=a.UNSUPPORTED_Y||a.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],d=c||u||l;d&&(s=function(e){var t,n,a,s,d=this,p=l&&d.sticky,f=i.call(d),m=d.source,_=0,h=e;return p&&(f=f.replace("y",""),-1===f.indexOf("g")&&(f+="g"),h=String(e).slice(d.lastIndex),d.lastIndex>0&&(!d.multiline||d.multiline&&"\n"!==e[d.lastIndex-1])&&(m="(?: "+m+")",h=" "+h,_++),n=new RegExp("^(?:"+m+")",f)),u&&(n=new RegExp("^"+m+"$(?!\\s)",f)),c&&(t=d.lastIndex),a=r.call(p?n:d,h),p?a?(a.input=a.input.slice(_),a[0]=a[0].slice(_),a.index=d.lastIndex,d.lastIndex+=a[0].length):d.lastIndex=0:c&&a&&(d.lastIndex=d.global?a.index+a[0].length:t),u&&a&&a.length>1&&o.call(a[0],n,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(a[s]=void 0)})),a}),e.exports=s},kolJ:function(e,t,n){var i=n("G9WS");n("sMBO");var a=i(n("ZbhI")),r=i(n("/FZm")),o=i(n("rPUy")),s=n("5m4N"),c=n("eBtS"),l=n("55UI"),u=n("/Pub"),d=n("sfi9"),p=(n("exIe"),n("XYJ2")),f=n("4X6O"),m=n("Bboc"),_=m.isEmpty,h=function(e){(function(t){var n={template:l};c.extend(n,e),s.call(t,n)})(this),this._rendered=!1,this._isConfirmed=!1};h.prototype=(0,o.default)(s.prototype),h.prototype.renderContent=function(){var e,t,n,i,o=this._data.msg,s=o.content,c=s&&s.type,l={},m=(0,r.default)(e=this._element).call(e,".im-msg-tip-content");switch(c){case"tip":case"modify_msg":i=s.text,i=f.richTextFormat(o).content.text;var h=this._data.msg.sender_info,g=(0,a.default)(i).call(i,"撤回一条消息");-1!==g&&"你撤回一条消息"!==i&&h&&108!==h.user_source&&(i=(_(h)||_(h.nick_name)?h.user_name?h.user_name:i.substring(0,g):h.nick_name)+i.substring(g)),_(o.original_content)||"text"!=o.original_content.type&&"modify_msg"!=o.original_content.type||(l={name:"redit",content:o.original_content.msg||""});break;case"operation_tip":i=s.default_text;break;case"auth_tip":if(i=s.default_text,s.action_text){var v=s.action_text.pos_start,y=s.action_text.pos_end;i=i.substring(0,v-1)+'<a style="cursor:pointer">'+i.substring(v-1,y)+"</a>"+i.substring(y)}var w=this;m[0].addEventListener("click",(function(e){if(!w._isConfirmed){var t=w._data.msg,n=t.to_id,i=t.to_source;i<1e4&&t.sender_source>1e4&&(n=t.sender_id,i=t.sender_source);var a=t.content.invite_id,o=t.msg_id;u.dispatch({type:d.CONFIRM_INVITE,data:{target_gid:n,target_gsource:i,invite_id:a,tip_msg_id:o}});var s=t.content,c=s.default_text;if(s.action_text){var l,p=s.action_text.pos_start,f=s.action_text.pos_end;c=c.substring(0,p-1)+"已确认"+c.substring(f),(0,r.default)(l=w._element).call(l,".im-msg-tip-content").html(c),w._isConfirmed=!0}}}));break;default:break}i=p.doFilter(i),(0,r.default)(t=this._element).call(t,".im-msg-tip-content").html(i),"redit"==l.name&&o.is_mine&&(0,r.default)(n=this._element).call(n,".im-msg-redit-content").html("重新编辑").data("redit-content",l.content)},e.exports=h},ks2j:function(e,t,n){n("HTq5");var i=n("oWnS");e.exports=i("Array").slice},kw5h:function(e,t,n){n("lRVh");var i=n("dktu"),a=i.Object,r=e.exports=function(e,t){return a.defineProperties(e,t)};a.defineProperties.sham&&(r.sham=!0)},l1Yk:function(e,t){e.exports={ONLINE:1,OFFLINE:0}},lHQ6:function(e,t,n){e.exports=n("g4Mb")},lMq5:function(e,t,n){var i=n("0Dky"),a=/#|\.prototype\./,r=function(e,t){var n=s[o(e)];return n==l||n!=c&&("function"==typeof t?i(t):!!t)},o=r.normalize=function(e){return String(e).replace(a,".").toLowerCase()},s=r.data={},c=r.NATIVE="N",l=r.POLYFILL="P";e.exports=r},lRVh:function(e,t,n){var i=n("pevS"),a=n("wbIY"),r=n("wjB2");i({target:"Object",stat:!0,forced:!a,sham:!a},{defineProperties:r})},lq94:function(e,t){var n='<div class=im-preview-image> <div class=im-preview-image-mask></div> <div class=im-preview-image-content> <div class=im-preview-image-head> <div class=im-preview-image-title>发送图片</div> </div> <div class=im-preview-image-body> <img class=im-preview-image-pic src=# alt> </div> <div class=im-preview-image-footer> <button class="im-preview-image-button im-preview-image-default-button"> <span>取消</span> </button> <button class="im-preview-image-button im-preview-image-primary-button"> <span>确定</span> </button> </div> <div class=im-preview-image-close></div> </div> </div>';e.exports=n},lqgj:function(e,t,n){var i=n("kJdU");e.exports=i},lulC:function(e,t,n){var i=n("OsYe"),a=n("6Jnn"),r=i.WeakMap;e.exports="function"===typeof r&&/native code/.test(a(r))},lxfd:function(e,t,n){var i=n("mIMY");e.exports=i("navigator","userAgent")||""},"m/L8":function(e,t,n){var i=n("g6v/"),a=n("DPsx"),r=n("glrk"),o=n("wE6v"),s=Object.defineProperty;t.f=i?s:function(e,t,n){if(r(e),t=o(t,!0),r(n),a)try{return s(e,t,n)}catch(i){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},"m/sp":function(e,t,n){var i=n("dktu"),a=n("eOcF"),r=n("vuoM"),o=n("QYBB").f;e.exports=function(e){var t=i.Symbol||(i.Symbol={});a(t,e)||o(t,e,{value:r.f(e)})}},m40S:function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}},m7iD:function(e,t,n){var i=n("pevS"),a=n("Bvq2"),r=n("pCEo"),o=n("RLqH").f,s=n("wbIY"),c=a((function(){o(1)})),l=!s||c;i({target:"Object",stat:!0,forced:l,sham:!s},{getOwnPropertyDescriptor:function(e,t){return o(r(e),t)}})},m92n:function(e,t,n){var i=n("glrk"),a=n("KmKo");e.exports=function(e,t,n,r){try{return r?t(i(n)[0],n[1]):t(n)}catch(o){throw a(e),o}}},mA47:function(e,t,n){var i=n("m/sp");i("search")},mAJt:function(e,t,n){var i=n("m/sp");i("replaceAll")},mGGf:function(e,t,n){"use strict";n("4mDm");var i=n("I+eb"),a=n("0GbY"),r=n("DTth"),o=n("busE"),s=n("4syw"),c=n("1E5z"),l=n("ntOU"),u=n("afO8"),d=n("GarU"),p=n("UTVS"),f=n("A2ZE"),m=n("9d/t"),_=n("glrk"),h=n("hh1v"),g=n("fHMY"),v=n("XGwC"),y=n("mh/w"),w=n("NaFW"),b=n("tiKp"),x=a("fetch"),S=a("Headers"),k=b("iterator"),E="URLSearchParams",C=E+"Iterator",A=u.set,O=u.getterFor(E),T=u.getterFor(C),M=/\+/g,I=Array(4),N=function(e){return I[e-1]||(I[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},L=function(e){try{return decodeURIComponent(e)}catch(t){return e}},R=function(e){var t=e.replace(M," "),n=4;try{return decodeURIComponent(t)}catch(i){while(n)t=t.replace(N(n--),L);return t}},P=/[!'()~]|%20/g,D={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},j=function(e){return D[e]},U=function(e){return encodeURIComponent(e).replace(P,j)},W=function(e,t){if(t){var n,i,a=t.split("&"),r=0;while(r<a.length)n=a[r++],n.length&&(i=n.split("="),e.push({key:R(i.shift()),value:R(i.join("="))}))}},F=function(e){this.entries.length=0,W(this.entries,e)},B=function(e,t){if(e<t)throw TypeError("Not enough arguments")},G=l((function(e,t){A(this,{type:C,iterator:y(O(e).entries),kind:t})}),"Iterator",(function(){var e=T(this),t=e.kind,n=e.iterator.next(),i=n.value;return n.done||(n.value="keys"===t?i.key:"values"===t?i.value:[i.key,i.value]),n})),z=function(){d(this,z,E);var e,t,n,i,a,r,o,s,c,l=arguments.length>0?arguments[0]:void 0,u=this,f=[];if(A(u,{type:E,entries:f,updateURL:function(){},updateSearchParams:F}),void 0!==l)if(h(l))if(e=w(l),"function"===typeof e){t=e.call(l),n=t.next;while(!(i=n.call(t)).done){if(a=y(_(i.value)),r=a.next,(o=r.call(a)).done||(s=r.call(a)).done||!r.call(a).done)throw TypeError("Expected sequence with length 2");f.push({key:o.value+"",value:s.value+""})}}else for(c in l)p(l,c)&&f.push({key:c,value:l[c]+""});else W(f,"string"===typeof l?"?"===l.charAt(0)?l.slice(1):l:l+"")},V=z.prototype;s(V,{append:function(e,t){B(arguments.length,2);var n=O(this);n.entries.push({key:e+"",value:t+""}),n.updateURL()},delete:function(e){B(arguments.length,1);var t=O(this),n=t.entries,i=e+"",a=0;while(a<n.length)n[a].key===i?n.splice(a,1):a++;t.updateURL()},get:function(e){B(arguments.length,1);for(var t=O(this).entries,n=e+"",i=0;i<t.length;i++)if(t[i].key===n)return t[i].value;return null},getAll:function(e){B(arguments.length,1);for(var t=O(this).entries,n=e+"",i=[],a=0;a<t.length;a++)t[a].key===n&&i.push(t[a].value);return i},has:function(e){B(arguments.length,1);var t=O(this).entries,n=e+"",i=0;while(i<t.length)if(t[i++].key===n)return!0;return!1},set:function(e,t){B(arguments.length,1);for(var n,i=O(this),a=i.entries,r=!1,o=e+"",s=t+"",c=0;c<a.length;c++)n=a[c],n.key===o&&(r?a.splice(c--,1):(r=!0,n.value=s));r||a.push({key:o,value:s}),i.updateURL()},sort:function(){var e,t,n,i=O(this),a=i.entries,r=a.slice();for(a.length=0,n=0;n<r.length;n++){for(e=r[n],t=0;t<n;t++)if(a[t].key>e.key){a.splice(t,0,e);break}t===n&&a.push(e)}i.updateURL()},forEach:function(e){var t,n=O(this).entries,i=f(e,arguments.length>1?arguments[1]:void 0,3),a=0;while(a<n.length)t=n[a++],i(t.value,t.key,this)},keys:function(){return new G(this,"keys")},values:function(){return new G(this,"values")},entries:function(){return new G(this,"entries")}},{enumerable:!0}),o(V,k,V.entries),o(V,"toString",(function(){var e,t=O(this).entries,n=[],i=0;while(i<t.length)e=t[i++],n.push(U(e.key)+"="+U(e.value));return n.join("&")}),{enumerable:!0}),c(z,E),i({global:!0,forced:!r},{URLSearchParams:z}),r||"function"!=typeof x||"function"!=typeof S||i({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,n,i,a=[e];return arguments.length>1&&(t=arguments[1],h(t)&&(n=t.body,m(n)===E&&(i=t.headers?new S(t.headers):new S,i.has("content-type")||i.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=g(t,{body:v(0,String(n)),headers:v(0,i)}))),a.push(t)),x.apply(this,a)}}),e.exports={URLSearchParams:z,getState:O}},mIMY:function(e,t,n){var i=n("dktu"),a=n("OsYe"),r=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?r(i[e])||r(a[e]):i[e]&&i[e][t]||a[e]&&a[e][t]}},mRwR:function(e,t,n){var i=n("CxHw");function a(t,n){return e.exports=a=i||function(e,t){return e.__proto__=t,e},a(t,n)}e.exports=a},mSDJ:function(e,t,n){var i=n("G9WS");n("oVuX"),n("07d7"),n("TWNs"),n("rB9j"),n("JfAA"),n("UxlC");var a=i(n("LYCE"));(function(t){"use strict";var n,i=t.Base64,r="2.1.9";e.exports;var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=function(e){for(var t={},n=0,i=e.length;n<i;n++)t[e.charAt(n)]=n;return t}(o),c=String.fromCharCode,l=function(e){if(e.length<2){var t=e.charCodeAt(0);return t<128?e:t<2048?c(192|t>>>6)+c(128|63&t):c(224|t>>>12&15)+c(128|t>>>6&63)+c(128|63&t)}t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return c(240|t>>>18&7)+c(128|t>>>12&63)+c(128|t>>>6&63)+c(128|63&t)},u=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,d=function(e){return e.replace(u,l)},p=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0),i=[o.charAt(n>>>18),o.charAt(n>>>12&63),t>=2?"=":o.charAt(n>>>6&63),t>=1?"=":o.charAt(63&n)];return i.join("")},f=t.btoa?function(e){return t.btoa(e)}:function(e){return e.replace(/[\s\S]{1,3}/g,p)},m=n?function(e){return(e.constructor===n.constructor?e:new n(e)).toString("base64")}:function(e){return f(d(e))},_=function(e,t){return t?m(String(e)).replace(/[+\/]/g,(function(e){return"+"==e?"-":"_"})).replace(/=/g,""):m(String(e))},h=function(e){return _(e,!0)},g=new RegExp(["[À-ß][-¿]","[à-ï][-¿]{2}","[ð-÷][-¿]{3}"].join("|"),"g"),v=function(e){switch(e.length){case 4:var t=(7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3),n=t-65536;return c(55296+(n>>>10))+c(56320+(1023&n));case 3:return c((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return c((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},y=function(e){return e.replace(g,v)},w=function(e){var t=e.length,n=t%4,i=(t>0?s[e.charAt(0)]<<18:0)|(t>1?s[e.charAt(1)]<<12:0)|(t>2?s[e.charAt(2)]<<6:0)|(t>3?s[e.charAt(3)]:0),a=[c(i>>>16),c(i>>>8&255),c(255&i)];return a.length-=[0,0,2,1][n],a.join("")},b=t.atob?function(e){return t.atob(e)}:function(e){return e.replace(/[\s\S]{1,4}/g,w)},x=n?function(e){return(e.constructor===n.constructor?e:new n(e,"base64")).toString()}:function(e){return y(b(e))},S=function(e){return x(String(e).replace(/[-_]/g,(function(e){return"-"==e?"+":"/"})).replace(/[^A-Za-z0-9\+\/]/g,""))},k=function(){var e=t.Base64;return t.Base64=i,e};if(t.Base64={VERSION:r,atob:b,btoa:f,fromBase64:S,toBase64:_,utob:d,encode:_,encodeURI:h,btou:y,decode:S,noConflict:k},"function"===typeof a.default){var E=function(e){return{value:e,enumerable:!1,writable:!0,configurable:!0}};t.Base64.extendString=function(){(0,a.default)(String.prototype,"fromBase64",E((function(){return S(this)}))),(0,a.default)(String.prototype,"toBase64",E((function(e){return _(this,e)}))),(0,a.default)(String.prototype,"toBase64URI",E((function(){return _(this,!0)})))}}})(window)},maQk:function(e,t,n){"use strict";var i=n("3uAa").forEach,a=n("n2Hk"),r=n("MCtm"),o=a("forEach"),s=r("forEach");e.exports=o&&s?[].forEach:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}},"mh/w":function(e,t,n){var i=n("glrk"),a=n("NaFW");e.exports=function(e){var t=a(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return i(t.call(e))}},mhMO:function(e,t,n){var i=n("o4zr");e.exports=i},mmui:function(e,t,n){"use strict";var i=n("pevS"),a=n("/5b1").trim,r=n("g+4o");i({target:"String",proto:!0,forced:r("trim")},{trim:function(){return a(this)}})},moxL:function(e,t,n){"use strict";var i=n("67WC"),a=n("FF6l"),r=i.aTypedArray,o=i.exportTypedArrayMethod;o("copyWithin",(function(e,t){return a.call(r(this),e,t,arguments.length>2?arguments[2]:void 0)}))},msS4:function(e,t,n){var i=n("m/sp");i("species")},n2Hk:function(e,t,n){"use strict";var i=n("Bvq2");e.exports=function(e,t){var n=[][e];return!!n&&i((function(){n.call(null,t||function(){throw 1},1)}))}},"n3/R":function(e,t,n){"use strict";var i=n("0Dky");function a(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=i((function(){var e=a("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=i((function(){var e=a("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},nJYk:function(e,t,n){var i=n("Bvq2"),a=n("A2Ma"),r=n("SqY4"),o=a("species");e.exports=function(e){return r>=51||!i((function(){var t=[],n=t.constructor={};return n[o]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"nUB+":function(e,t,n){var i=n("G9WS");n("oVuX"),n("07d7"),n("rB9j"),n("UxlC"),n("EnZy");var a=i(n("UtpJ")),r=i(n("eLKs")),o=i(n("WxoT")),s=i(n("Kwsy")),c=i(n("ZbhI")),l=i(n("rPUy")),u=i(n("6UaR")),d=i(n("nhkr")),p=i(n("RXMP")),f=function(){var e={},t="Boolean Number String Function Array Date RegExp Object Error Symbol".split(" ");return(0,p.default)(t).call(t,(function(t){e["[object "+t+"]"]=t.toLowerCase()})),e}(),m=function(e){return null==e?e+"":"object"===(0,d.default)(e)||"function"===typeof e?f[{}.toString.call(e)]||"object":(0,d.default)(e)},_=u.default,h=function(e){return"function"===m(e)},g=function(e){return"object"===m(e)},v=function e(){var t,n,i,a,r,o,s=arguments[0]||{},c=1,l=arguments.length,u=!1;for("boolean"===typeof s&&(u=s,s=arguments[c]||{},c++),"object"===(0,d.default)(s)||h(s)||(s={}),c===l&&(s=this,c--);c<l;c++)if(null!=(r=arguments[c]))for(a in r)t=s[a],i=r[a],s!==i&&(u&&i&&(g(i)||(n=_(i)))?(n?(n=!1,o=t&&_(t)?t:[]):o=t&&g(t)?t:{},s[a]=e(u,o,i)):void 0!==i&&(s[a]=i));return s},y=function(e,t){var n,i=0;if(_(e)){for(n=e.length;i<n;i++)if(!1===t.call(e[i],i,e[i]))break}else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},w=function(e){var t=[],n=arguments.length>1&&0==arguments[1]?"false":"true";for(var i in e){var a=e[i];a=null==a?"":a,t[t.length]="false"===n?i+"="+a:encodeURIComponent(i)+"="+encodeURIComponent(a)}var r=/%20/g;return t.join("&").replace(r,"+")},b=function(e,t,n){var i;return"function"===typeof t?(i=t,t=null):i=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},v(i,e,n||{}),i.__super__=e.prototype,i.prototype=(0,l.default)(e.prototype),i.prototype._super=e,t&&v(!0,i.prototype,t),i},x=function(e){if(!e||"string"!==typeof e)return e;var t=e;return(0,c.default)(e).call(e,"https:")>-1?t=e.substr(6):(0,c.default)(e).call(e,"http:")>-1?t=e.substr(5):0===(0,c.default)(e).call(e,"//")&&(t=e),t},S=function(e,t){var n,i=0;if(!e&&!t)return i;if(isNaN(e)||isNaN(t))return null;if(e+="",t+="","-"==e.charAt(0)&&"-"!=t.charAt(0))return i=-1,i;if("-"!=e.charAt(0)&&"-"==t.charAt(0))return i=1,i;"-"==e.charAt(0)&&"-"==t.charAt(0)&&(e=e.substring(1),t=t.substring(1),n=!0);var a=e.length,r=t.length;if(a>r)i=1;else if(a<r)i=-1;else if(a==r)for(var o=0;o<a;o++){if(e[o]>t[o]){i=1;break}if(e[o]<t[o]){i=-1;break}e[o],t[o]}return n&&(i=1==i?-1:-1==i?1:0),i},k=null,E=1e4,C=function(e){"complete"===document.readyState?e&&e():(k=(0,s.default)((function(){k=null,e&&e()}),E),$(window).load((function(){k&&(clearTimeout(k),e&&e())})))},A={parse:function(e){try{e=JSON.parse(e)}catch(t){e={}}return e},stringify:function(e){try{e=(0,o.default)(e)}catch(t){e=""}return e}},O=function(){var e=function(e){var t,n;this.row=[],this.options={status:0,index:0};var i=(0,r.default)(t=this.resolve).call(t,this),a=(0,r.default)(n=this.reject).call(n,this);e&&e(i,a)};return e.prototype.of=function(){var t=new e;return t.row=this.row,t.options={status:0,index:0},t},e.prototype.resolve=function(){if(3!=this.options.status){var e=(0,a.default)(Array.prototype).apply(arguments);if(this.options.status=1,this.resolve_val=e,!(this.options.index>=this.row.length)){this.options.status=3;var t=this.row[this.options.index];t&&t.success.apply(t,e)}}},e.prototype.reject=function(e){if(3!=this.options.status){var t=(0,a.default)(Array.prototype).apply(arguments);if(this.options.status=2,this.reject_val=t,!(this.options.index>=this.row.length)){this.options.status=3;var n=this.row[this.options.index];n&&n.fail.apply(n,t)}}},e.prototype.then=function(e,t){var n=this.of(e,t);return n.options.index=this.options.index+1,n.success=e,n.fail=t,this.row.push(n),1==this.options.status?n.success.apply(n,this.resolve_val):2==this.options.status&&n.fail.apply(n,this.reject_val),n},e}(),T=function(){},M=function(e){return e+""==="null"||e+""==="undefined"||""===e},I=function(e){return e?e+"":""};e.exports={extend:v,each:y,param:w,inherits:b,urlConvert:x,fnEmpty:T,toString:I,onload:C,isEmpty:M,jsonHandler:A,strToNumCompare:S,asynchPipe:O}},nhkr:function(e,t,n){var i=n("YnFm"),a=n("q4g7");function r(t){return e.exports=r="function"===typeof a&&"symbol"===typeof i?function(e){return typeof e}:function(e){return e&&"function"===typeof a&&e.constructor===a&&e!==a.prototype?"symbol":typeof e},r(t)}e.exports=r},nleh:function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},ntOU:function(e,t,n){"use strict";var i=n("rpNk").IteratorPrototype,a=n("fHMY"),r=n("XGwC"),o=n("1E5z"),s=n("P4y1"),c=function(){return this};e.exports=function(e,t,n){var l=t+" Iterator";return e.prototype=a(i,{next:r(1,n)}),o(e,l,!1,!0),s[l]=c,e}},"o+MX":function(e,t,n){e.exports=n("bF2R")},o4zr:function(e,t,n){n("Pkdo");var i=n("dktu"),a=i.Object,r=e.exports=function(e,t,n){return a.defineProperty(e,t,n)};a.defineProperty.sham&&(r.sham=!0)},oBZR:function(e,t,n){var i=n("syO3"),a=n("nleh");e.exports=Object.keys||function(e){return i(e,a)}},"oHi+":function(e,t,n){var i=n("ewvW"),a=n("UMSQ"),r=n("NaFW"),o=n("6VoE"),s=n("A2ZE"),c=n("67WC").aTypedArrayConstructor;e.exports=function(e){var t,n,l,u,d,p,f=i(e),m=arguments.length,_=m>1?arguments[1]:void 0,h=void 0!==_,g=r(f);if(void 0!=g&&!o(g)){d=g.call(f),p=d.next,f=[];while(!(u=p.call(d)).done)f.push(u.value)}for(h&&m>2&&(_=s(_,arguments[2],2)),n=a(f.length),l=new(c(this))(n),t=0;n>t;t++)l[t]=h?_(f[t],t):f[t];return l}},oM22:function(e,t,n){n("CqEA");var i=n("dktu");e.exports=i.Object.keys},oOVA:function(e,t,n){var i=n("Bvq2"),a=/#|\.prototype\./,r=function(e,t){var n=s[o(e)];return n==l||n!=c&&("function"==typeof t?i(t):!!t)},o=r.normalize=function(e){return String(e).replace(a,".").toLowerCase()},s=r.data={},c=r.NATIVE="N",l=r.POLYFILL="P";e.exports=r},oOYW:function(e,t,n){var i,a,r,o,s,c,l,u,d=n("OsYe"),p=n("RLqH").f,f=n("Wvup").set,m=n("D1mM"),_=n("AUl2"),h=d.MutationObserver||d.WebKitMutationObserver,g=d.document,v=d.process,y=d.Promise,w=p(d,"queueMicrotask"),b=w&&w.value;b||(i=function(){var e,t;_&&(e=v.domain)&&e.exit();while(a){t=a.fn,a=a.next;try{t()}catch(n){throw a?o():r=void 0,n}}r=void 0,e&&e.enter()},!m&&!_&&h&&g?(s=!0,c=g.createTextNode(""),new h(i).observe(c,{characterData:!0}),o=function(){c.data=s=!s}):y&&y.resolve?(l=y.resolve(void 0),u=l.then,o=function(){u.call(l,i)}):o=_?function(){v.nextTick(i)}:function(){f.call(d,i)}),e.exports=b||function(e){var t={fn:e,next:void 0};r&&(r.next=t),a||(a=t,o()),r=t}},oQPd:function(e,t,n){"use strict";function i(){if(!w){w=(new Date).getTime();for(var e=0;e<x.length;e++)x[e](w);document.removeEventListener?document.removeEventListener("DOMContentLoaded",i,!1):document.detachEvent&&document.detachEvent("onreadystatechange",i)}}function a(){if(!k){k=(new Date).getTime();for(var e=0;e<A.length;e++)A[e](k);clearTimeout(E),window.removeEventListener?window.removeEventListener("load",a,!1):window.detachEvent&&window.detachEvent("onload",a)}}function r(){var e=window.performance||window.webkitPerformance||window.msPerformance||window.mozPerformance||window.oPerformance,t=e&&e.timing;if(t){var n=t.navigationStart,i=t.msFirstPaint||t.mozFirstPaintTime,a=t.loadEventEnd||(new Date).getTime();if(0===i);else if(i>0)P.firstPaintTime=i-n;else{var r=window.chrome&&window.chrome.loadTimes&&window.chrome.loadTimes(),o=(r||{}).firstPaintTime||0;r&&o>0&&(P.firstPaintTime=1e3*o-n)}P.dns=t.domainLookupEnd-t.domainLookupStart,P.tcp=t.connectEnd-t.connectStart,P.ttfb=t.responseStart-t.requestStart,P.domReady=t.domContentLoadedEventEnd-n,P.load=a-n}for(var s=e&&e.getEntries&&e.getEntries()||[],c=0;c<s.length;c++){var l=s[c],u=l.duration;u>=N&&P.slowResources.push({duration:u,name:l.name.substr(0,T)})}}function o(e){var t=(e||"").split(".");return t.length<=2?e:/(com|edu|gov|net|org|mil)\.[\w]+$/i.test(e)?t.slice(-3).join("."):t.slice(-2).join(".")}function s(e){var t=(e||"").match(/^(https?:|)\/\/([^/:]+)/),n=!t&&!/:?\/\//.test(e)&&location.hostname;return t&&t[2]||n}function c(e){for(var t=0;t<q.length;t++)q[t](e)}function l(){var e=document.getElementsByTagName("script"),t=document.getElementsByTagName("iframe"),n=[].concat(e).concat(t).length;n!==z&&(0!==z&&c([{}]),z=n)}function u(e){for(var t=o(s(e)),n=0;n<Z.length;n++)if(Z[n]===t)return!0;return!1}function d(e,t,n){for(var i=document.getElementsByTagName(e),a=[],r=0;r<i.length;r++){var o=i[r].getAttribute(t);o&&!u(o)&&a.push(o.substr(0,T))}a.length>0&&n({type:e,urls:a})}function p(){for(var e=0;e<te.length;e++){var t=te[e],n=t.readyState;if("complete"===n||"loaded"===n||t.complete)return t}var i=new Image;return te.push(i),i}function f(e,t){(t=t||{}).userId=t.userId||ce.userId,ne(ce.reportUrl,e,t,ce.projectID)}function m(){if(ue.getItem){var e=(new Date).getTime();e-+ue.getItem(ie)>108e5&&(ue.setItem(ie,e),D((function(e){f(ae,e)})))}}function _(){U((function(e){f(re,e)}))}function h(){F(ce.reportUrl,(function(e){f(oe,e)}))}function g(){Q((function(e){f(se,e)}),ce.whiteList)}function v(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=Object.prototype.hasOwnProperty;for(var n in e)t.call(e,n)&&e[n]&&t.call(ce,n)&&(ce[n]=e[n])}var y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w=0,b=10,x=[];!function(){var e=document.readyState;"complete"===e||"loading"!==e&&document.addEventListener?setTimeout(i,1):document.addEventListener?document.addEventListener("DOMContentLoaded",i,!1):document.attachEvent&&(document.attachEvent("onreadystatechange",i),w||function(){var e=!1;try{e=null===window.frameElement&&document.documentElement}catch(e){}e&&e.doScroll&&function(){var t=Math.ceil(5e3/b),n=0;!function i(){if(!w&&n++<t)try{e.doScroll("left"),w=(new Date).getTime();for(var a=0;a<x.length;a++)x[a](w)}catch(e){setTimeout(i,b)}}()}()}())}();var S=function(e){"function"==typeof e&&(w?e(w):x.push(e))},k=void 0,E=void 0,C=1e4,A=[];!function(){if("complete"===document.readyState)return a();E=setTimeout(a,C),window.addEventListener?window.addEventListener("load",a,!1):window.attachEvent&&window.attachEvent("onload",a)}();var O=function(e){"function"==typeof e&&(k?e(k):A.push(e))},T=100,M=100,I=500,N=800,L=(new Date).getTime(),R=[],P={dns:"",tcp:"",ttfb:"",firstPaintTime:"",domReady:"",load:"",slowResources:[]};S((function(e){P.domReady=e-L})),O((function(e){P.load=e-L,r();for(var t=0;t<R.length;t++)R[t](P)}));var D=function(e){"function"==typeof e&&(P.load>0?e(P):R.push(e))},j=!1,U=function(e){j||(j=!0,window.onerror=function(t,n,i,a,r){var o=!("undefined"==typeof JSON||!JSON.stringify);e({errmsg:t.substr(0,M),uri:n.substr(0,T),line:i,column:a,obj:o?JSON.stringify(r||{}).substr(0,I):r})})},W=!1,F=function(e,t){window.addEventListener&&!W&&(W=!0,window.addEventListener("securitypolicyviolation",(function(n){-1===n.blockedURI.indexOf(e)&&t({documentURI:n.documentURI.substr(0,T),referrer:n.referrer.substr(0,T),blockedURI:n.blockedURI.substr(0,T),violatedDirective:n.violatedDirective,originalPolicy:n.originalPolicy})})))},B=void 0,G=void 0,z=0,V=1e3,H=1e4,Y=(new Date).getTime(),q=[],K=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,J=function(e,t,n){if(t?"[object Array]"!==Object.prototype.toString.call(t)&&(t=[t]):t=[document.body],n=n||{childList:!0},q.push(e),K){G||(G=new K(c));for(var i=0;i<t.length;i++)G.observe(t[i],n)}else l(),B||(B=setInterval((function(){(new Date).getTime()-Y<H&&clearInterval(B),l()}),V))},X=!1,Z=[o(location.hostname)],Q=function(e){var t=arguments.length<=1||void 0===arguments[1]?[]:arguments[1];Z=Z.concat(t),X||(X=!0,J((function(){d("script","src",e),d("iframe","src",e)}),[document.body,document.head],null))},$="1",ee=function(e){e=e||"default",this.keys=[],this.inited=!1,this.filename=[e,$].join("_")};window.localStorage?ee.prototype={_newKey:function(e){return[this.filename,e].join("_")},_addKey:function(e){for(var t=!1,n=0;n<this.keys.length;n++)if(this.keys[n]===e){t=!0;break}t||(this.keys.push(e),localStorage.setItem(this.filename,JSON.stringify(this.keys)))},_delKey:function(e){for(var t=0;t<this.keys.length;t++)this.keys[t]===e&&this.keys.splice(t--,1);localStorage.setItem(this.filename,JSON.stringify(this.keys))},init:function(){this.keys=JSON.parse(localStorage.getItem(this.filename)||"[]")},setItem:function(e,t){e=this._newKey(e),localStorage.setItem(e,t),this._addKey(e)},getItem:function(e){return e=this._newKey(e),localStorage.getItem(e)},remove:function(e){e=this._newKey(e),localStorage.removeItem(e),this._delKey(e)},clear:function(){for(var e=0;e<this.keys.length;e++){var t=this.keys[e];localStorage.removeItem(t)}this.keys=[],localStorage.removeItem(this.filename)}}:/mise/i.exec(navigator.userAgent)&&(ee.prototype={_load:function(){try{this.input.load(this.filename)}catch(e){}},_save:function(){try{this.input.save()}catch(e){}},init:function(){if(!this.inited){this.inited=!0;var e=document.createElement("INPUT");e.type="hidden",e.style.display="none",e.addBehavior("#default#userData"),document.body.appendChild(e);var t=new Date;t.setDate(t.getDate()+365),e.expires=t.toUTCString(),this.input=e}},setItem:function(e,t){this.init(),this._load(),this.input.setAttribute(e,t),this._save()},getItem:function(e){return this.init(),this._load(),this.input.getAttribute(e)},remove:function(e){this.init(),this._load(),this.input.removeAttribute(e),this._save()},clear:function(){this.init();var e=new Date;e.setMinutes(e.getMinutes()-1),this.input.expires=e.toUTCString(),this._save()}});var te=[],ne=function(e,t,n,i){var a=n;try{"object"!==(void 0===n?"undefined":y(n))&&(a={msg:n}),a.pageUrl=location.href.substr(0,T),a=JSON.stringify(a);var r=[e,["category="+i,"type="+t,"data="+(a=encodeURIComponent(a)),"t="+(new Date).getTime()].join("&")].join("?");p().src=r}catch(e){}},ie="performance_storage_key",ae="performance",re="error",oe="csp",se="injection",ce={projectID:"MONITOR_ANONYMOUS",reportUrl:"//collectlog.58.com/log",userId:window.USER_ID||"",whiteList:[]},le=null,ue=new ee(ie);v.prototype={init:function(){_(),m(),h(),ce.whiteList&&ce.whiteList.length>0&&g()},errorReport:_,performanceReport:m,cspReport:h,injectionReport:g,report:function(e,t){f(e,t)},getPerformance:D},v.getInstance=function(e){return le||(le=new v(e)),le},e.exports=v},oVuX:function(e,t,n){"use strict";var i=n("I+eb"),a=n("RK3t"),r=n("/GqU"),o=n("pkCn"),s=[].join,c=a!=Object,l=o("join",",");i({target:"Array",proto:!0,forced:c||!l},{join:function(e){return s.call(r(this),void 0===e?",":e)}})},oWnS:function(e,t,n){var i=n("dktu");e.exports=function(e){return i[e+"Prototype"]}},ofWN:function(e,t,n){var i=n("G9WS"),a=i(n("/FZm")),r=i(n("rPUy")),o=n("5m4N"),s=n("eBtS"),c=n("EhHj"),l=n("XYJ2"),u=function(e){(function(t){var n={template:c};s.extend(n,e),o.call(t,n)})(this),this._rendered=!1};u.prototype=(0,r.default)(o.prototype),u.prototype.renderContent=function(){var e=this._data.msg,t=e.content,n=this._element,i=(0,a.default)(n).call(n,".im-card-thumbnail"),r=(0,a.default)(n).call(n,".im-card-title"),o=(0,a.default)(n).call(n,".im-card-word"),s=(0,a.default)(n).call(n,".im-card-price");if(!e)return!1;t.url||(t.url="javascript:void(0);"),i.attr("href",t.url).css({"background-image":"url("+t.thumbnail+")"}),r.attr("href",t.url).html(l.doFilter(t.title)),o.html(l.doFilter(t.describe)),s.html(l.doFilter(t.price))},e.exports=u},ogVW:function(e,t){t.f=Object.getOwnPropertySymbols},ooPF:function(e,t,n){"use strict";var i=n("G9WS"),a=i(n("6UaR")),r=function(e){var t,n={};if(!(e instanceof Object)||(0,a.default)(e))throw new Error("keyMirror(...): Argument must be an object.");for(t in e)e.hasOwnProperty(t)&&(n[t]=t);return n};e.exports=r},pBd9:function(e,t){var n='<div class=im-contactwindow> <div class=im-contactwindow-header> <p class=im-contact-img></p> <p class=im-contactwindow-tips> <span class=im-contactwindow-info>微聊</span> <span class="im-mini-newmsg-count im-hide"></span> </p> <span class="im-switchsize-btn im-contactwindow-normalize"> <span class=im-contactwindow-switch-icon></span> </span> <a class=im-my-collect-btn> <span class=im-my-collect-btn-icon></span> <span class=im-my-collect-label>我的收藏</span> </a> <a class=im-clearmsg-btn> <span class=im-clearmsg-btn-icon></span> <span class=im-clearmsg-label>清除全部未读消息</span> </a> <span class=im-contactwindow-fullscreen> <span class=im-contactwindow-fullscreen-icon></span> </span> </div> <div class=im-contactwindow-body> <div class=im-contactwindow-default> <p class=im-contactwindow-defaultImg></p> <div class=im-contactwindow-defaultDes> <span class=im-des-line1>尚未和其他人聊天</span> </div> </div> <div class=im-contactwindow-organization> <div class=im-contactWindow-search> <p class=im-contactWindow-header-searchinput> <input type=text placeholder=搜索 class=im-contactWindow-header-searchinput-input> <i class=im-contactWindow-header-searchinput-icon>&nbsp;</i> </p> </div> <div class=im-contactwindow-switcher> <p class=im-contactwindow-sessionlist> <i class="im-contactwindow-sessionlist-icon im-active">&nbsp;</i> <span class="im-max-newmsg-count im-hide"></span> </p> <p class=im-contactwindow-organiz> <i class=im-contactwindow-organization-icon>&nbsp;</i> </p> </div> </div> <div class=im-session-list-wrap></div> </div> </div> ';e.exports=n},pCEo:function(e,t,n){var i=n("Y4yM"),a=n("GHVm");e.exports=function(e){return i(a(e))}},pNMO:function(e,t,n){"use strict";var i=n("I+eb"),a=n("2oRo"),r=n("0GbY"),o=n("xDBR"),s=n("g6v/"),c=n("STAE"),l=n("/b8u"),u=n("0Dky"),d=n("UTVS"),p=n("6LWA"),f=n("hh1v"),m=n("glrk"),_=n("ewvW"),h=n("/GqU"),g=n("wE6v"),v=n("XGwC"),y=n("fHMY"),w=n("33Wh"),b=n("JBy8"),x=n("BX/b"),S=n("dBg+"),k=n("Bs8V"),E=n("m/L8"),C=n("0eef"),A=n("kRJp"),O=n("busE"),T=n("VpIT"),M=n("93I0"),I=n("0BK2"),N=n("kOOl"),L=n("tiKp"),R=n("5Tg+"),P=n("dG/n"),D=n("1E5z"),j=n("afO8"),U=n("tycR").forEach,W=M("hidden"),F="Symbol",B="prototype",G=L("toPrimitive"),z=j.set,V=j.getterFor(F),H=Object[B],Y=a.Symbol,q=r("JSON","stringify"),K=k.f,J=E.f,X=x.f,Z=C.f,Q=T("symbols"),$=T("op-symbols"),ee=T("string-to-symbol-registry"),te=T("symbol-to-string-registry"),ne=T("wks"),ie=a.QObject,ae=!ie||!ie[B]||!ie[B].findChild,re=s&&u((function(){return 7!=y(J({},"a",{get:function(){return J(this,"a",{value:7}).a}})).a}))?function(e,t,n){var i=K(H,t);i&&delete H[t],J(e,t,n),i&&e!==H&&J(H,t,i)}:J,oe=function(e,t){var n=Q[e]=y(Y[B]);return z(n,{type:F,tag:e,description:t}),s||(n.description=t),n},se=l?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof Y},ce=function(e,t,n){e===H&&ce($,t,n),m(e);var i=g(t,!0);return m(n),d(Q,i)?(n.enumerable?(d(e,W)&&e[W][i]&&(e[W][i]=!1),n=y(n,{enumerable:v(0,!1)})):(d(e,W)||J(e,W,v(1,{})),e[W][i]=!0),re(e,i,n)):J(e,i,n)},le=function(e,t){m(e);var n=h(t),i=w(n).concat(me(n));return U(i,(function(t){s&&!de.call(n,t)||ce(e,t,n[t])})),e},ue=function(e,t){return void 0===t?y(e):le(y(e),t)},de=function(e){var t=g(e,!0),n=Z.call(this,t);return!(this===H&&d(Q,t)&&!d($,t))&&(!(n||!d(this,t)||!d(Q,t)||d(this,W)&&this[W][t])||n)},pe=function(e,t){var n=h(e),i=g(t,!0);if(n!==H||!d(Q,i)||d($,i)){var a=K(n,i);return!a||!d(Q,i)||d(n,W)&&n[W][i]||(a.enumerable=!0),a}},fe=function(e){var t=X(h(e)),n=[];return U(t,(function(e){d(Q,e)||d(I,e)||n.push(e)})),n},me=function(e){var t=e===H,n=X(t?$:h(e)),i=[];return U(n,(function(e){!d(Q,e)||t&&!d(H,e)||i.push(Q[e])})),i};if(c||(Y=function(){if(this instanceof Y)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=N(e),n=function(e){this===H&&n.call($,e),d(this,W)&&d(this[W],t)&&(this[W][t]=!1),re(this,t,v(1,e))};return s&&ae&&re(H,t,{configurable:!0,set:n}),oe(t,e)},O(Y[B],"toString",(function(){return V(this).tag})),O(Y,"withoutSetter",(function(e){return oe(N(e),e)})),C.f=de,E.f=ce,k.f=pe,b.f=x.f=fe,S.f=me,R.f=function(e){return oe(L(e),e)},s&&(J(Y[B],"description",{configurable:!0,get:function(){return V(this).description}}),o||O(H,"propertyIsEnumerable",de,{unsafe:!0}))),i({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:Y}),U(w(ne),(function(e){P(e)})),i({target:F,stat:!0,forced:!c},{for:function(e){var t=String(e);if(d(ee,t))return ee[t];var n=Y(t);return ee[t]=n,te[n]=t,n},keyFor:function(e){if(!se(e))throw TypeError(e+" is not a symbol");if(d(te,e))return te[e]},useSetter:function(){ae=!0},useSimple:function(){ae=!1}}),i({target:"Object",stat:!0,forced:!c,sham:!s},{create:ue,defineProperty:ce,defineProperties:le,getOwnPropertyDescriptor:pe}),i({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:fe,getOwnPropertySymbols:me}),i({target:"Object",stat:!0,forced:u((function(){S.f(1)}))},{getOwnPropertySymbols:function(e){return S.f(_(e))}}),q){var _e=!c||u((function(){var e=Y();return"[null]"!=q([e])||"{}"!=q({a:e})||"{}"!=q(Object(e))}));i({target:"JSON",stat:!0,forced:_e},{stringify:function(e,t,n){var i,a=[e],r=1;while(arguments.length>r)a.push(arguments[r++]);if(i=t,(f(t)||void 0!==e)&&!se(e))return p(t)||(t=function(e,t){if("function"==typeof i&&(t=i.call(this,e,t)),!se(t))return t}),a[1]=t,q.apply(null,a)}})}Y[B][G]||A(Y[B],G,Y[B].valueOf),D(Y,F),I[W]=!0},pOXT:function(e,t){var n='<div class=add-delete> <div class="member-btn js-delete-member">-</div> <div class="member-btn js-add-member">+</div> </div> <div class=im-group-panel> <div class=im-panel-members> <div class=panel-members></div> </div> </div> <div class=im-panel-control> <div class=control-content> <div class=control-label>群名</div> <div class=control-container> <input class="control-input js-group-name" type=text maxlength=40 disabled=disabled /> <div class="control-button js-group-name edit-btn hower-show">编辑</div> <div class="control-button js-group-name ensure-btn">确认</div> </div> </div> <div class=control-content> <div class=control-label>群公告</div> <div class=control-container> <input class="control-input js-group-notice" type=text disabled=disabled /> <div class="control-button js-group-notice edit-btn hower-show">编辑</div> <div class="control-button js-group-notice ensure-btn">确认</div> </div> </div> <div class="control-content js-group-qrcode"> <div class=control-label><span class=control-icon></span>群二维码</div> <div class=control-input></div> </div> <div class=control-content> <div class=control-label>我在本群中的昵称</div> <div class=control-container> <input class="control-input js-group-nick" type=text disabled=disabled /> <div class="control-button js-group-nick edit-btn hower-show">编辑</div> <div class="control-button js-group-nick ensure-btn">确认</div> </div> </div> </div> <div class=im-panel-exit> <div class=panel-button> 删除并退出 </div> <div class=panel-disband-button> 解散群组 </div> </div> ';e.exports=n},pVHv:function(e,t,n){var i=n("pevS"),a=n("Bvq2"),r=n("jhEP").f,o=a((function(){return!Object.getOwnPropertyNames(1)}));i({target:"Object",stat:!0,forced:o},{getOwnPropertyNames:r})},pevS:function(e,t,n){"use strict";var i=n("OsYe"),a=n("RLqH").f,r=n("oOVA"),o=n("dktu"),s=n("ZBQp"),c=n("AnMC"),l=n("eOcF"),u=function(e){var t=function(t,n,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return e.apply(this,arguments)};return t.prototype=e.prototype,t};e.exports=function(e,t){var n,d,p,f,m,_,h,g,v,y=e.target,w=e.global,b=e.stat,x=e.proto,S=w?i:b?i[y]:(i[y]||{}).prototype,k=w?o:o[y]||(o[y]={}),E=k.prototype;for(f in t)n=r(w?f:y+(b?".":"#")+f,e.forced),d=!n&&S&&l(S,f),_=k[f],d&&(e.noTargetGet?(v=a(S,f),h=v&&v.value):h=S[f]),m=d&&h?h:t[f],d&&typeof _===typeof m||(g=e.bind&&d?s(m,i):e.wrap&&d?u(m):x&&"function"==typeof m?s(Function.call,m):m,(e.sham||m&&m.sham||_&&_.sham)&&c(g,"sham",!0),k[f]=g,x&&(p=y+"Prototype",l(o,p)||c(o,p,{}),o[p][f]=m,e.real&&E&&!E[f]&&c(E,f,m)))}},pkCn:function(e,t,n){"use strict";var i=n("0Dky");e.exports=function(e,t){var n=[][e];return!!n&&i((function(){n.call(null,t||function(){throw 1},1)}))}},ppGB:function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},"q/LL":function(e,t,n){var i=n("HCkw");e.exports=i},q4g7:function(e,t,n){e.exports=n("tfHg")},qLPT:function(e,t,n){"use strict";var i=n("pevS"),a=n("maQk");i({target:"Array",proto:!0,forced:[].forEach!=a},{forEach:a})},qOEq:function(e,t){var n="<div class=im-scrollbar> <div class=im-scrollbar-rail> <div class=im-scrollbar-wheel></div> </div> </div>";e.exports=n},qPNw:function(e,t){var n="<div class=im-multiple-menu> <div class=im-multiple-close></div> <div class=im-multiple-selections></div> </div> ";e.exports=n},qQKe:function(e,t,n){n("AFTl");var i=n("dktu");i.JSON||(i.JSON={stringify:JSON.stringify}),e.exports=function(e,t,n){return i.JSON.stringify.apply(null,arguments)}},qRXW:function(e,t,n){var i=n("gByu");e.exports=i},qWuP:function(e,t){var n="<div class=window-collect-contain> <div class=window-collect-menu-content> <ul class=window-collect-menu-texts> </ul> <div class=window-collect-menu-space> </div> </div> <div class=window-collect-content> <div class=window-collect-header> <div class=window-collect-header-title>我的收藏</div> <div class=window-collect-header-close></div> </div> <div class=window-collect-msgs> </div> <div class=im-menu-container></div> </div> </div> ";e.exports=n},qXVe:function(e,t,n){"use strict";var i=n("67WC"),a=n("tycR").every,r=i.aTypedArray,o=i.exportTypedArrayMethod;o("every",(function(e){return a(r(this),e,arguments.length>1?arguments[1]:void 0)}))},qYE9:function(e,t){e.exports="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof DataView},qePV:function(e,t,n){"use strict";var i=n("g6v/"),a=n("2oRo"),r=n("lMq5"),o=n("busE"),s=n("UTVS"),c=n("xrYK"),l=n("cVYH"),u=n("wE6v"),d=n("0Dky"),p=n("fHMY"),f=n("JBy8").f,m=n("Bs8V").f,_=n("m/L8").f,h=n("WKiH").trim,g="Number",v=a[g],y=v.prototype,w=c(p(y))==g,b=function(e){var t,n,i,a,r,o,s,c,l=u(e,!1);if("string"==typeof l&&l.length>2)if(l=h(l),t=l.charCodeAt(0),43===t||45===t){if(n=l.charCodeAt(2),88===n||120===n)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:i=2,a=49;break;case 79:case 111:i=8,a=55;break;default:return+l}for(r=l.slice(2),o=r.length,s=0;s<o;s++)if(c=r.charCodeAt(s),c<48||c>a)return NaN;return parseInt(r,i)}return+l};if(r(g,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var x,S=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof S&&(w?d((function(){y.valueOf.call(n)})):c(n)!=g)?l(new v(b(t)),n,S):b(t)},k=i?f(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),E=0;k.length>E;E++)s(v,x=k[E])&&!s(S,x)&&_(S,x,m(v,x));S.prototype=y,y.constructor=S,o(a,g,S)}},qhvP:function(e,t,n){var i=n("m/sp");i("unscopables")},qjzJ:function(e,t,n){e.exports=n("2uPm")},qpuQ:function(e,t,n){var i=n("Wrk+");e.exports=i},qw2F:function(e,t,n){var i=n("G9WS"),a=i(n("ZbhI")),r=i(n("/FZm")),o=i(n("rPUy")),s=n("eBtS"),c=n("JVDe"),l=n("7iEH"),u=function(e){(function(t){var n={template:l};s.extend(n,e),c.call(t,n)})(this)};u.prototype=(0,o.default)(c.prototype),u.prototype.show=function(e){var t,n,i,o,s,l=this,u=e.content;if(u){var d;if((0,r.default)(t=this._element).call(t,".im-modal-content").text(u),(0,r.default)(n=this._element).call(n,".im-modal-title").text(e.title),e.cancelText&&(0,r.default)(i=this._element).call(i,".im-modal-cancel").text(e.cancelText),e.confirmText&&(0,r.default)(o=this._element).call(o,".im-modal-submit").text(e.confirmText),e.showCancel)(0,r.default)(d=this._element).call(d,".im-modal-cancel").show();c.prototype.show.call(this),(0,r.default)(s=this._element).call(s,".im-modal-handler").on("click",(function(t){var n=t&&t.target?t.target.className:"";if(n&&""!==n){var i,r="im-modal-submit"==n?{confirm:!0}:"im-modal-cancel"==n?{cancel:!0}:{};e.success&&e.success(r),-1!=(0,a.default)(i=["im-modal-submit","im-modal-cancel"]).call(i,n)&&l.hide()}}))}else e.fail&&e.fail()},u.prototype.hide=function(){var e;(0,r.default)(e=this._element).call(e,".im-modal-handler").off("click"),c.prototype.hide.call(this)},e.exports=u},r4HA:function(e,t,n){var i=n("pevS"),a=n("GWfs");i({global:!0,forced:parseInt!=a},{parseInt:a})},rAxL:function(e,t,n){n("3mr1");var i=n("dktu");e.exports=i.Object.getPrototypeOf},rB9j:function(e,t,n){"use strict";var i=n("I+eb"),a=n("kmMV");i({target:"RegExp",proto:!0,forced:/./.exec!==a},{exec:a})},rOQg:function(e,t,n){"use strict";var i=n("I+eb"),a=n("0Dky"),r=n("Yhre"),o=n("glrk"),s=n("I8vh"),c=n("UMSQ"),l=n("SEBh"),u=r.ArrayBuffer,d=r.DataView,p=u.prototype.slice,f=a((function(){return!new u(2).slice(1,void 0).byteLength}));i({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:f},{slice:function(e,t){if(void 0!==p&&void 0===t)return p.call(o(this),e);var n=o(this).byteLength,i=s(e,n),a=s(void 0===t?n:t,n),r=new(l(this,u))(c(a-i)),f=new d(this),m=new d(r),_=0;while(i<a)m.setUint8(_++,f.getUint8(i++));return r}})},rPUy:function(e,t,n){e.exports=n("RALh")},rSeq:function(e,t,n){"use strict";var i=n("zJQS"),a=function(e){var t,n;this.promise=new e((function(e,i){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=i})),this.resolve=i(t),this.reject=i(n)};e.exports.f=function(e){return new a(e)}},rTHS:function(e,t){var n='<div class=im-imageviewer> <div class=im-imageviewer-content> <div class=im-imageviewer-close></div> </div> <div class=im-image-toolbar> <span class=im-image-prev>&nbsp;</span> <a class=im-image-download>&nbsp;</a> <span class="im-image-rotate im-hide">&nbsp;</span> <span class=im-image-next>&nbsp;</span> </div> </div>';e.exports=n},rW0t:function(e,t,n){"use strict";var i=n("glrk");e.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},rkAj:function(e,t,n){var i=n("g6v/"),a=n("0Dky"),r=n("UTVS"),o=Object.defineProperty,s={},c=function(e){throw e};e.exports=function(e,t){if(r(s,e))return s[e];t||(t={});var n=[][e],l=!!r(t,"ACCESSORS")&&t.ACCESSORS,u=r(t,0)?t[0]:c,d=r(t,1)?t[1]:void 0;return s[e]=!!n&&!a((function(){if(l&&!i)return!0;var e={length:-1};l?o(e,1,{enumerable:!0,get:c}):e[1]=1,n.call(e,u,d)}))}},rpNk:function(e,t,n){"use strict";var i,a,r,o=n("4WOD"),s=n("kRJp"),c=n("UTVS"),l=n("tiKp"),u=n("xDBR"),d=l("iterator"),p=!1,f=function(){return this};[].keys&&(r=[].keys(),"next"in r?(a=o(o(r)),a!==Object.prototype&&(i=a)):p=!0),void 0==i&&(i={}),u||c(i,d)||s(i,d,f),e.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:p}},rwPt:function(e,t,n){var i=n("0Dky");e.exports=function(e){return i((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},s5qe:function(e,t,n){"use strict";var i=n("2oRo"),a=n("67WC"),r=n("0Dky"),o=i.Int8Array,s=a.aTypedArray,c=a.exportTypedArrayMethod,l=[].toLocaleString,u=[].slice,d=!!o&&r((function(){l.call(new o(1))})),p=r((function(){return[1,2].toLocaleString()!=new o([1,2]).toLocaleString()}))||!r((function(){o.prototype.toLocaleString.call([1,2])}));c("toLocaleString",(function(){return l.apply(d?u.call(s(this)):s(this),arguments)}),p)},sD8x:function(e,t,n){var i,a=n("G9WS"),r=a(n("5PDf")),o=a(n("WxoT")),s=a(n("guyh")),c=a(n("RXMP")),l=n("Bboc"),u=l.queque,d=l.isEmpty,p=l.sumBigNumber,f=l.strToNumCompare,m=n("VRhk"),_=u(10),h={},g={},v={},y={},w={},b=0,x="",S=!1,k=function(e,t){if(!d(e.msg_id)&&!d(t)){if(d(h[t])&&(h[t]={}),!d(h[t][e.msg_id]))return;if(h[t][e.msg_id]=e,!d(e.follow_msg_id)&&!d(h[t][e.follow_msg_id])){var n=h[t][e.follow_msg_id];n.fellow_id=e.msg_id}}},E=function(e){var t,n,i,a={};if((0,c.default)(t=e||[]).call(t,(function(e){if(!d(e.msg_id)&&!d(e.tmpKey)){if(d(h[e.tmpKey]))return;i=e.tmpKey,d(h[i][e.msg_id])||(n=h[i][e.msg_id],delete h[i][n.msg_id],delete v[e.msg_id],a[n.msg_id]=!0)}})),!d(n)){var r=_.pull(),l=[];(0,c.default)(r).call(r,(function(e,t){e&&e.msg_id&&a[e.msg_id]&&l.push(t)})),(0,s.default)(l).call(l);var u=_.len();if((0,c.default)(l).call(l,(function(e){var t=_.len();_.remove(e-(u-t),(function(){}))})),l.length){for(var p=_.pull(),f=0;f<p.length;f++){var m=p[f];d(g[m.belong_to])&&(g[m.belong_to]={}),g[m.belong_to][m.tmpKey]=m}p.length||(g={});try{window.localStorage.setItem("false_msgs_queue",(0,o.default)({msgs:_.pull()}))}catch(y){}}}};function C(e,t){if(e&&t&&e.length&&t.length){var n=t[0],i=!1,a=null;if(n.follow_msg_id){a=n.msg_id;for(var r=e.length-1;r>=0;r--)e[r].belong_to===n.belong_to&&e[r].tmpKey===n.tmpKey&&e[r].msg_id===n.follow_msg_id&&(n.follow_msg_id=e[r].follow_msg_id,n.msg_id=e[r].msg_id,i=!0);if(i&&a)for(r=1;r<t.length;r++)if(t[0].belong_to===t[r].belong_to&&t[0].tmpKey===t[r].tmpKey&&t[r].follow_msg_id===a){t[r].follow_msg_id=t[0].msg_id;break}}}}function A(){try{i=window.localStorage.getItem("false_msgs_queue")||"{}",i=JSON.parse(i),i=i.msgs||[]}catch(a){i=[]}_.push(i,C);for(var e=_.pull(),t=0;t<e.length;t++){var n=e[t];n.tmpKey&&(k(n,n.tmpKey),d(g[n.belong_to])&&(g[n.belong_to]={}),g[n.belong_to][n.tmpKey]=n)}}var O=function(e,t){var n=[];if(!d(t)&&!d(e)&&(t=p(t,"1"),!d(h[e])))while(!d(h[e][t])&&h[e][t].belong_to===x){if(h[e][t]&&n.push(h[e][t]),d(h[e][t].fellow_id))break;var i=h[e][t].fellow_id;if(i==t)break;t=i}return n};function T(e){var t=x+"-"+e;w[t]=g[x]&&g[x][e]?g[x][e].msg_id:null;var n=y[e]||0;y[e]=0,b-=n||0}function M(e,t){var n=x+"-"+e,i=!1;w[n]&&f(t,w[n])>0?i=!0:w[n]||(i=!0),i&&(y[e]=y[e]||0,y[e]+=1,b+=1)}function I(){window.wbWebRTCSDK&&window.wbWebRTCSDK.isSupport&&m["is_show_audio_video"]&&(S||(A(),S=!0))}e.exports={get:function(){return!S&&I(),_.pull()},set:function(e){if(!S&&I(),e instanceof Array&&e.length){e=(0,r.default)(e).call(e,(function(e,t){return!v[e.msg_id]&&(v[e.msg_id]=!0,!0)})),_.push(e,C);try{window.localStorage.setItem("false_msgs_queue",(0,o.default)({msgs:_.pull()}))}catch(t){}}},falseMsgMinus:T,falseMsgPlus:M,getReadMsgNumber:function(e){return y[e]||0},getFalseUnreadTotal:function(){return b},setUser:function(e,t){x=e+"@"+t},getExistFalseMsg:function(e,t){if(!S&&I(),h[e]&&!d(t)&&"string"===typeof t&&x){var n=p(t,"1"),i=h[e][n];if(i&&i.belong_to===x)return i}return null},gatherFalseLastMsgs:function(e){return!S&&I(),g[e]?g[e]:{}},saveExistFalseMsgs:function(){return!S&&I(),k.apply(this,arguments)},gatherExistFalseMsgs:function(){return!S&&I(),O.apply(this,arguments)},deleteExistFalseMsgs:function(){return!S&&I(),E.apply(this,arguments)}}},sEFX:function(e,t,n){"use strict";var i=n("AO7/"),a=n("9d/t");e.exports=i?{}.toString:function(){return"[object "+a(this)+"]"}},sMBO:function(e,t,n){var i=n("g6v/"),a=n("m/L8").f,r=Function.prototype,o=r.toString,s=/^\s*function ([^ (]*)/,c="name";i&&!(c in r)&&a(r,c,{configurable:!0,get:function(){try{return o.call(this).match(s)[1]}catch(e){return""}}})},sMXB:function(e,t,n){},sNBN:function(e,t,n){var i,a=n("WqJt");i=window.localStorage?window.localStorage:function(){var e="localstorage_and_userdata";return{setItem:function(t,n){var i=a(e);i.load(),i.setAttribute(t,n),i.save()},getItem:function(t){var n=a(e);n.load();var i=n.getAttribute(t);return i},removeItem:function(t){var n=a(e);n.load(),n.removeAttribute(t),n.save()}}}(),e.exports=i},sOpI:function(e,t,n){var i=n("b42z"),a=n("zJQS"),r=n("A2Ma"),o=r("species");e.exports=function(e,t){var n,r=i(e).constructor;return void 0===r||void 0==(n=i(r)[o])?t:a(n)}},sfi9:function(e,t,n){var i=n("ooPF");e.exports=i({APP_STATUS_CHANGE:null,INPUT_CHANGE:null,PRIVATE_INPUT_CHANGE:null,KEYBOARD_OUTPUT:null,MSG_SEND_APPLY:null,MSG_RESEND_APPLY:null,MSG_SEND_STATUS_CHANGE:null,MSG_HANDLER_STATUS_CHANGE:null,MSG_SYNC:null,MSG_AUDIO_READ:null,MSG_AUDIO_READ_START:null,MSG_AUDIO_READ_END:null,MSG_AUDIO_ACK_READ:null,UNREAD_CHANGE:null,CONTACT_ONLINE_CHANGE:null,LAST_MSG_CHANGE:null,IMAGE_CLICK:null,SESSION_SELF_CHANGE:null,SESSION_CHILDREN_CHANGE:null,SESSION_CLICK:null,CAPTCHA_SUBMIT:null,CAPTCHA_CHANGE:null,PERSON_CHECK:null,CREATE_GROUP_CHECK:null,JOIN_GROUP_CHECK:null,HIDE_GROUP_WIN:null,QUIT_GROUP:null,DISBAND_GROUP:null,GET_GROUP_QRCODE:null,GROUP_NOTICE:null,CONFIRM_INVITE:null,SES_TOP:null,SET_SILENT:null,SET_GROUP:null,UPDATE_NICKNAME:null,UPDATE_GROUPNAME:null,ADD_MEMBER_WIN:null,DELETE_MEMBER_WIN:null,DELETE_MEMBER:null,AI_SEND:null,FULLSCREEN_OPEN:null,FULLSCREEN_CLOSE:null,ADD_BLACKLIST:null,DEL_BLACKLIST:null,IS_BLACKED_CHECK:null,COMPLAINTS:null,UPLOAD_AUDIT_CHANGE:null,FILE_DOWNLOAD:null,FILE_SENDE_CANCEL:null,VIDEO_PLAY:null,VIDEO_PLAY_START:null,VIDEO_PLAY_PASUED:null,VIDEO_PLAY_END:null,VIDEO_PLAY_ERROR:null,MSG_INFO_UPDATED:null,TOAST_SHOW:null,MODAL_WIN_SHOW:null,CHAT_VIDEO:null,CHAT_AUDIO:null,MSG_CLICK:null,MSG_ACTION:null,MSG_WITHDRAW:null,SET_EVALUATE:null,GROUP_At_CONTACTS:null,CARD_SEND_MESSAGE:null,CLEAR_ALL_UNREAD_MSGS:null,REPORT_MESSAGES:null,SET_USER_REMARK:null,PROVIDE_CONTACTINFO:null,SEND_CONTACTINFO:null,ASK_CONTACTINFO:null,GLANCE_CONTACTINFO:null,GLANCE_CONTACTINFO_RETURN:null,GET_SELF_CONTACTINFO:null,GET_MY_COLLECTION:null,ADD_COLLECTION:null,DEL_COLLECTION:null,MULTIPLE_FORWARD_WINDOW_OPEN:null,MULTIPLE_FORWARD_WINDOW_CLOSE:null,MULTIPLE_FORWARD_WINDOW_SUBMIT:null,MULTIPLE_MENU_CLOSE:null,MSG_BATCH_SEND_APPLY:null,FORWARD_MESSAGE_FLOAT:null,COLLECTION_MESSAGE_FLOAT:null,DEL_MSG:null,DEL_FALSE_MSGS:null,DELETE_TOGETHER:null,CLOSE_ALL_FLOAT_VIEWS:null,STATIC_SEND_MESSAGE:null,STATIC_LOGIN:null})},su3n:function(e,t,n){var i=n("1lkh"),a=n("PoCt"),r=i("keys");e.exports=function(e){return r[e]||(r[e]=a(e))}},syO3:function(e,t,n){var i=n("eOcF"),a=n("pCEo"),r=n("Y4Ys").indexOf,o=n("bpon");e.exports=function(e,t){var n,s=a(e),c=0,l=[];for(n in s)!i(o,n)&&i(s,n)&&l.push(n);while(t.length>c)i(s,n=t[c++])&&(~r(l,n)||l.push(n));return l}},szfI:function(e,t,n){var i=n("RLMD"),a=Array.prototype;e.exports=function(e){var t=e.reduce;return e===a||e instanceof Array&&t===a.reduce?i:t}},tKrM:function(e,t,n){var i=n("G9WS"),a=i(n("WxoT")),r=i(n("rPUy")),o=n("80UC"),s=(n("i8Iq"),n("1Fqx")),c=n("Bboc"),l=c.isShopModeUser,u=c.isEmpty,d=c.jsonHandler,p=window.localStorage,f=function(){o.call(this),this._sessionkey=null,this._app_status=null};f.prototype=(0,r.default)(o.prototype),f.prototype.start=function(){if(p){var e,t,n=this;n.setAppStatus("MIN"),this._getStatusTimer=new s({onElapsed:function(i){e=d.parse(p.getItem("sessionKey")),t=d.parse(p.getItem("openState")),n._app_status!==t&&(n._app_status=t,n.triggerEvent("appStatusChange",t)),n._sessionkey=e,n.triggerEvent("sessionCheckChange",e),i()},duration:1e3}),this._getStatusTimer.start()}},f.prototype.getSession=function(){return this._sessionkey},f.prototype.getAppStatus=function(){return this._app_status},f.prototype.setSession=function(e){p&&e.user_id&&(this._sessionkey=e.user_id+"@"+e.user_source,!l(e)||u(e.shop_id)||u(e.shop_source)||(this._sessionkey+="@@"+e.shop_id+"@"+e.shop_source),p.setItem("sessionKey",(0,a.default)(this._sessionkey)))},f.prototype.setAppStatus=function(e){p&&(this._app_status=e,p.setItem("openState",(0,a.default)(this._app_status)))},f.prototype.clearStatus=function(e){p&&p.removeItem(e)},f.prototype.stop=function(){this._getStatusTimer&&this._getStatusTimer.stop()},e.exports=new f},tTn0:function(e,t,n){var i=n("5jX9");e.exports=i},tXUg:function(e,t,n){var i,a,r,o,s,c,l,u,d=n("2oRo"),p=n("Bs8V").f,f=n("LPSS").set,m=n("HNyW"),_=n("YF1G"),h=d.MutationObserver||d.WebKitMutationObserver,g=d.document,v=d.process,y=d.Promise,w=p(d,"queueMicrotask"),b=w&&w.value;b||(i=function(){var e,t;_&&(e=v.domain)&&e.exit();while(a){t=a.fn,a=a.next;try{t()}catch(n){throw a?o():r=void 0,n}}r=void 0,e&&e.enter()},!m&&!_&&h&&g?(s=!0,c=g.createTextNode(""),new h(i).observe(c,{characterData:!0}),o=function(){c.data=s=!s}):y&&y.resolve?(l=y.resolve(void 0),u=l.then,o=function(){u.call(l,i)}):o=_?function(){v.nextTick(i)}:function(){f.call(d,i)}),e.exports=b||function(e){var t={fn:e,next:void 0};r&&(r.next=t),a||(a=t,o()),r=t}},tbMQ:function(e,t,n){var i=n("jP3w");e.exports=i},tcWW:function(e,t,n){var i=n("G9WS"),a=n("iYz8"),r=n("6UaR"),o=n("Dcj1"),s=n("O0yt"),c=n("0lTi"),l=n("UtpJ");n("rB9j"),n("UxlC");var u=i(n("rPUy")),d=i(n("/FZm"));function p(e,t){var n;if("undefined"===typeof s||null==o(e)){if(r(e)||(n=f(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,c=function(){};return{s:c,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,u=!0,d=!1;return{s:function(){n=a(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){d=!0,l=e},f:function(){try{u||null==n.return||n.return()}finally{if(d)throw l}}}}function f(e,t){var n;if(e){if("string"===typeof e)return m(e,t);var i=l(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?c(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var _=n("eBtS"),h=n("JVDe"),g=n("eBYl"),v='<div class="im-static-word-container"><div class="im-static-word" data-index=${index}>${input}</div></div>',y=function(e){(function(t){var n={template:g};_.extend(n,e),h.call(t,n)})(this),function(e){var t,n;(0,d.default)(t=e.getElement()).call(t,".im-static-words").click((function(t){var n=_(t.target);if(n.hasClass("im-static-word")){var i=e._data.inputs,a=n.data("index");!isNaN(a)&&i&&i[a]&&i[a].length&&e.triggerEvent("staticOutput",i[a])}})),(0,d.default)(n=e.getElement()).call(n,".im-static-login-btn").click((function(){e.triggerEvent("staticLogin")}))}(this)};y.prototype=(0,u.default)(h.prototype),y.prototype.render=function(){var e=this.getElement(),t=this._data.inputs;if(t&&t.length){var n,i="",a=0,r=p(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;"string"===typeof o&&(i+=v.replace("${input}",a+1+"."+o).replace("${index}",a),a++)}}catch(err){r.e(err)}finally{r.f()}(0,d.default)(e).call(e,".im-static-words").html(i)}},y.prototype.show=function(){h.prototype.show.call(this)},y.prototype.hide=function(){h.prototype.hide.call(this)},e.exports=y},tfHg:function(e,t,n){var i=n("HCkw");n("DIJN"),n("cgHO"),n("dP0U"),n("Jm8n"),n("mAJt"),e.exports=i},tiKp:function(e,t,n){var i=n("2oRo"),a=n("VpIT"),r=n("UTVS"),o=n("kOOl"),s=n("STAE"),c=n("/b8u"),l=a("wks"),u=i.Symbol,d=c?u:u&&u.withoutSetter||o;e.exports=function(e){return r(l,e)||(s&&r(u,e)?l[e]=u[e]:l[e]=d("Symbol."+e)),l[e]}},toAj:function(e,t,n){"use strict";var i=n("I+eb"),a=n("ppGB"),r=n("QIpd"),o=n("EUja"),s=n("0Dky"),c=1..toFixed,l=Math.floor,u=function(e,t,n){return 0===t?n:t%2===1?u(e,t-1,n*e):u(e*e,t/2,n)},d=function(e){var t=0,n=e;while(n>=4096)t+=12,n/=4096;while(n>=2)t+=1,n/=2;return t},p=c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){c.call({})}));i({target:"Number",proto:!0,forced:p},{toFixed:function(e){var t,n,i,s,c=r(this),p=a(e),f=[0,0,0,0,0,0],m="",_="0",h=function(e,t){var n=-1,i=t;while(++n<6)i+=e*f[n],f[n]=i%1e7,i=l(i/1e7)},g=function(e){var t=6,n=0;while(--t>=0)n+=f[t],f[t]=l(n/e),n=n%e*1e7},v=function(){var e=6,t="";while(--e>=0)if(""!==t||0===e||0!==f[e]){var n=String(f[e]);t=""===t?n:t+o.call("0",7-n.length)+n}return t};if(p<0||p>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(m="-",c=-c),c>1e-21)if(t=d(c*u(2,69,1))-69,n=t<0?c*u(2,-t,1):c/u(2,t,1),n*=4503599627370496,t=52-t,t>0){h(0,n),i=p;while(i>=7)h(1e7,0),i-=7;h(u(10,i,1),0),i=t-1;while(i>=23)g(1<<23),i-=23;g(1<<i),h(1,1),g(2),_=v()}else h(0,n),h(1<<-t,0),_=v()+o.call("0",p);return p>0?(s=_.length,_=m+(s<=p?"0."+o.call("0",p-s)+_:_.slice(0,s-p)+"."+_.slice(s-p))):_=m+_,_}})},tycR:function(e,t,n){var i=n("A2ZE"),a=n("RK3t"),r=n("ewvW"),o=n("UMSQ"),s=n("ZfDv"),c=[].push,l=function(e){var t=1==e,n=2==e,l=3==e,u=4==e,d=6==e,p=7==e,f=5==e||d;return function(m,_,h,g){for(var v,y,w=r(m),b=a(w),x=i(_,h,3),S=o(b.length),k=0,E=g||s,C=t?E(m,S):n||p?E(m,0):void 0;S>k;k++)if((f||k in b)&&(v=b[k],y=x(v,k,w),e))if(t)C[k]=y;else if(y)switch(e){case 3:return!0;case 5:return v;case 6:return k;case 2:c.call(C,v)}else switch(e){case 4:return!1;case 7:c.call(C,v)}return d?-1:l||u?u:C}};e.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterOut:l(7)}},"u+ON":function(e,t,n){"use strict";var i=n("pevS"),a=n("Y4Ys").indexOf,r=n("n2Hk"),o=n("MCtm"),s=[].indexOf,c=!!s&&1/[1].indexOf(1,-0)<0,l=r("indexOf"),u=o("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:c||!l||!u},{indexOf:function(e){return c?s.apply(this,arguments)||0:a(this,e,arguments.length>1?arguments[1]:void 0)}})},u4PT:function(e,t,n){"use strict";var i,a,r,o=n("V3kF"),s=n("AnMC"),c=n("eOcF"),l=n("A2Ma"),u=n("cEKj"),d=l("iterator"),p=!1,f=function(){return this};[].keys&&(r=[].keys(),"next"in r?(a=o(o(r)),a!==Object.prototype&&(i=a)):p=!0),void 0==i&&(i={}),u||c(i,d)||s(i,d,f),e.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:p}},uC8H:function(e,t,n){n("VdC8");var i=n("dktu");e.exports=i.Object.assign},uDyp:function(e,t,n){var i=n("uIdd");e.exports=i},uIdd:function(e,t,n){n("m7iD");var i=n("dktu"),a=i.Object,r=e.exports=function(e,t){return a.getOwnPropertyDescriptor(e,t)};a.getOwnPropertyDescriptor.sham&&(r.sham=!0)},urm1:function(e,t){var n=function(e){this._visible=!1,function(t){var n,i;"undefined"!==typeof document.hidden?("hidden",i="visibilitychange",n="visibilityState"):"undefined"!==typeof document.mozHidden?("mozHidden",i="mozvisibilitychange",n="mozVisibilityState"):"undefined"!==typeof document.msHidden?("msHidden",i="msvisibilitychange",n="msVisibilityState"):"undefined"!==typeof document.webkitHidden&&("webkitHidden",i="webkitvisibilitychange",n="webkitVisibilityState"),void 0!=document[n]&&(t._visible="visible"==document[n]),document.addEventListener&&document.addEventListener(i,(function(){void 0!=document[n]&&(t._visible="visible"==document[n],e&&e(t._visible))}),!1)}(this)};n.prototype.visible=function(){return this._visible},e.exports=n},uuPJ:function(e,t,n){var i=n("G9WS"),a=n("LYCE"),r=n("HnXd"),o=n("qjzJ"),s=n("RXMP"),c=n("fHi0"),l=n("5PDf"),u=n("OWCx"),d=n("+oHS");a(t,"__esModule",{value:!0}),t.default=y;var p=i(n("04Ix")),f=n("OY+d");function m(e,t){var n=d(e);if(u){var i=u(e);t&&(i=l(i).call(i,(function(t){return c(e,t).enumerable}))),n.push.apply(n,i)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n,i=null!=arguments[t]?arguments[t]:{};if(t%2)s(n=m(Object(i),!0)).call(n,(function(t){(0,p.default)(e,t,i[t])}));else if(o)r(e,o(i));else{var l;s(l=m(Object(i))).call(l,(function(t){a(e,t,c(i,t))}))}}return e}var h={"im-if":!0,"im-show":!0,"im-html":!0,"im-src":!0,"im-key":!0,"im-item":!0,"im-error":!0};function g(e,t){var n=t||{};for(var i in n)h[i]||e.setAttribute(i,n[i])}function v(e,t){t.id&&e.setAttribute("id",t.id),t.className&&e.setAttribute("class",t.className),!1===t.is_show&&e.style&&(e.style.display="none"),t.inner_html&&"string"===typeof t.inner_html&&(e.innerHTML=t.inner_html)}function y(e,t){var n=t||this.components||{};switch(e.tagName){case"text":e.el=document.createTextNode(e.text||""),g(e.el,e.attribs),v(e.el,e);break;case"div":e.el=document.createElement("div"),g(e.el,e.attribs),v(e.el,e);break;case"span":e.el=document.createElement("span"),g(e.el,e.attribs),v(e.el,e);break;case"li":e.el=document.createElement("li"),g(e.el,e.attribs),v(e.el,e);break;case"ul":e.el=document.createElement("ul"),g(e.el,e.attribs),v(e.el,e);break;case"p":e.el=document.createElement("p"),g(e.el,e.attribs),v(e.el,e);break;case"a":e.el=document.createElement("a"),g(e.el,e.attribs),v(e.el,e);break;case"img":e.el=document.createElement("img"),g(e.el,e.attribs),v(e.el,e),e.src&&e.el.setAttribute("src",e.src),e.error&&"function"==typeof e.error&&(e.el.onerror=e.error);break;default:var i;if(n&&n[e.tagName])e.component=new n[e.tagName]({is_vm:!0}),this._children&&!(0,f.isEmpty)(e.key)&&(this._children[e.key]&&this._children[e.key]._vm_data&&(i=this._children[e.key]._vm_data),this._children[e.key]=e.component),(0,f.isObject)(e.v_item)&&(i?e.component.setData(_(_({},e.v_item),i)):e.component.setData(e.v_item)),e.el=e.component.vm_get_element();break}}},vA1p:function(e,t,n){var i=n("VsT0");e.exports=i},vA9J:function(e,t,n){var i=n("+6pO"),a=String.prototype;e.exports=function(e){var t=e.trim;return"string"===typeof e||e===a||e instanceof String&&t===a.trim?i:t}},vFlH:function(e,t,n){n("Pkew"),n("SE4I");var i=n("dktu");e.exports=i.Array.from},vfRR:function(e,t,n){"use strict";var i=n("pevS"),a=n("3uAa").find,r=n("xE4W"),o=n("MCtm"),s="find",c=!0,l=o(s);s in[]&&Array(1)[s]((function(){c=!1})),i({target:"Array",proto:!0,forced:c||!l},{find:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}}),r(s)},vlhY:function(e,t){var n='<li class="im-msg im-msg-text"> <div class=im-msg-time></div> <div class=im-msg-checkbox></div> <div class=im-msg-main> <img class="im-avatar im-msg-avatar"/> <span class=im-msg-send-status></span> <span class=im-msg-showed-status></span> <span class=im-msg-user-name></span> <div class=im-msg-content></div> <span class=im-msg-arrow></span> <div class="im-msg-ai im-msg-click"></div> </div> <div class=im-msg-collect-name></div> <div class=im-msg-collect-time></div> <div class=im-msg-feedback> <div class=im-msg-feedback-container> <span class=im-msg-feedback-icon></span> <span class=im-msg-feedback-content></span> </div> </div> </li> ';e.exports=n},vtKQ:function(e,t,n){var i=n("80UC"),a=new i,r=n("Bboc"),o=r.isEmpty,s={};e.exports={createKey:function(e){return o(e)?"temp-"+e:"perm-"+e},register:function(e,t){o(e)||(o(s[e])||(a.removeEventListener(e,t),delete s[e]),a.addEventListener(e,t),s[e]=!0)},unregister:function(e,t){a.removeEventListener(e,t),delete s[e]},dispatch:function(e,t){a.triggerEvent(e,t)}}},vuoM:function(e,t,n){var i=n("A2Ma");t.f=i},wE6v:function(e,t,n){var i=n("hh1v");e.exports=function(e,t){if(!i(e))return e;var n,a;if(t&&"function"==typeof(n=e.toString)&&!i(a=n.call(e)))return a;if("function"==typeof(n=e.valueOf)&&!i(a=n.call(e)))return a;if(!t&&"function"==typeof(n=e.toString)&&!i(a=n.call(e)))return a;throw TypeError("Can't convert object to primitive value")}},wMv5:function(e,t,n){var i=n("G9WS"),a=n("LYCE"),r=n("iYz8"),o=n("6UaR"),s=n("Dcj1"),c=n("O0yt"),l=n("0lTi"),u=n("UtpJ");a(t,"__esModule",{value:!0}),t.default=_;var d=i(n("C1n8"));function p(e,t){var n;if("undefined"===typeof c||null==s(e)){if(o(e)||(n=f(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,u=!0,d=!1;return{s:function(){n=r(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){d=!0,l=e},f:function(){try{u||null==n.return||n.return()}finally{if(d)throw l}}}}function f(e,t){var n;if(e){if("string"===typeof e)return m(e,t);var i=u(n=Object.prototype.toString.call(e)).call(n,8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?l(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _(e){var t=e.el;return(0,d.default)(e,(function(e){var t,n=e.el,i=e.children||[],a=p(i);try{for(a.s();!(t=a.n()).done;){var r=t.value;r.el&&n.appendChild(r.el)}}catch(err){a.e(err)}finally{a.f()}return!0})),t}},wYGR:function(e,t){var n='<div class=im-shortcut> <div class="im-shortcut-icon tooltip"> <span class=tooltiptext>快捷回复</span> </div> <div class=im-shortcut-content> <ul class=im-shortcut-texts> </ul> <div class=im-shortcut-arrow-down></div> </div> </div>';e.exports=n},"wZ/5":function(e,t,n){"use strict";var i=n("I+eb"),a=n("2oRo"),r=n("Yhre"),o=n("JiZb"),s="ArrayBuffer",c=r[s],l=a[s];i({global:!0,forced:l!==c},{ArrayBuffer:c}),o(s)},waxf:function(e,t,n){"use strict";var i=n("67WC"),a=n("tycR").filter,r=n("SEBh"),o=i.aTypedArray,s=i.aTypedArrayConstructor,c=i.exportTypedArrayMethod;c("filter",(function(e){var t=a(o(this),e,arguments.length>1?arguments[1]:void 0),n=r(this,this.constructor),i=0,c=t.length,l=new(s(n))(c);while(c>i)l[i]=t[i++];return l}))},wbIY:function(e,t,n){var i=n("Bvq2");e.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},wjB2:function(e,t,n){var i=n("wbIY"),a=n("QYBB"),r=n("b42z"),o=n("oBZR");e.exports=i?Object.defineProperties:function(e,t){r(e);var n,i=o(t),s=i.length,c=0;while(s>c)a.f(e,n=i[c++],t[n]);return e}},wqwd:function(e,t){var n="<div class=im-remark-contain> <div class=im-remark-info> <label>备注名：</label> <input type=text maxlength=30 id=remark_name /> <span class=remark_warn>超出最大输入限制</span> </div> <div class=im-remark-btn> <button class=cancel_remark>取消</button> <button class=submit_remark>确定</button> </div> </div> <div class=im-remark-bg></div> ";e.exports=n},wvDy:function(e,t,n){var i=n("OsYe");e.exports=function(e,t){var n=i.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},xDBR:function(e,t){e.exports=!1},xE4W:function(e,t){e.exports=function(){}},xahd:function(e,t,n){var i=n("pevS"),a=n("OsYe"),r=n("lxfd"),o=[].slice,s=/MSIE .\./.test(r),c=function(e){return function(t,n){var i=arguments.length>2,a=i?o.call(arguments,2):void 0;return e(i?function(){("function"==typeof t?t:Function(t)).apply(this,a)}:t,n)}};i({global:!0,bind:!0,forced:s},{setTimeout:c(a.setTimeout),setInterval:c(a.setInterval)})},xcSo:function(e,t,n){n("OG05");var i=n("oWnS");e.exports=i("Array").lastIndexOf},xdfU:function(e,t,n){var i=n("G9WS");n("rB9j"),n("UxlC");var a=i(n("BfIq")),r=i(n("rPUy")),o=i(n("ZbhI")),s=i(n("/FZm")),c=n("JVDe"),l=n("eBtS"),u=n("rTHS"),d=n("sfi9"),p=n("/Pub"),f=0,m={height:null,width:null,"margin-top":null,"margin-left":null},_={dragContent:null,clientX:null,clientY:null,left:null,top:null},h=function(e,t){if(m.height<50&&e<0||m.width<50&&e<0)return!1;var n=m.width/20,i=m.height/20;e>0?(m.height=m.height+i,m.width=m.width+n,m["margin-top"]=m["margin-top"]-i/2,m["margin-left"]=m["margin-left"]-n/2):(m.height=m.height-i,m.width=m.width-n,m["margin-top"]=m["margin-top"]+i/2,m["margin-left"]=m["margin-left"]+n/2),t.css({"margin-left":m["margin-left"],"margin-top":m["margin-top"],width:m.width,height:m.height})},g=function(e,t){"cw"===t?f+=90:f-=90,e.css("transform","rotate("+f+"deg)")},v=function(e){var t,n=["webkit","Moz","ms","o"],i=[],a=document.documentElement.style,r=function(e){return e.replace(/-(\w)/g,(function(e,t){return t.toUpperCase()}))};for(t in n)i.push(r(n[t]+"-"+e));for(t in i.push(r(e)),i)if(i[t]in a)return!0;return!1},y=function(e){this._maxWidth=800,this._maxHeight=500,this._imageList=[],function(t){var n,i={template:u};l.extend(i,e),c.call(t,i),v("transform")&&(0,s.default)(n=t._element).call(n,".im-image-rotate").removeClass("im-hide")}(this),function(e){var t=e._element;t.click((function(n){var i=l(n.target);if("IMG"==n.target.tagName||0!==i.closest(".im-image-toolbar").length)switch(n.target.className){case"im-image-rotate":g((0,s.default)(t).call(t,"img"),"cw");break;case"im-image-prev":e.nextPage("prev");break;case"im-image-next":e.nextPage("next");break;default:break}else e.close()})),t.on("mousewheel",(function(e){if("IMG"==e.target.tagName){e.preventDefault();var n=e.deltaY,i=(0,s.default)(t).call(t,".im-imageviewer-content");h(n,i)}})),t.on("mousedown mousemove mouseup",(function(e){var n,i=e.target,a=(0,s.default)(t).call(t,".im-imageviewer-content");switch(e.preventDefault(),e.type){case"mousedown":(0,o.default)(n=i.className).call(n,"im-image-draggable")>-1&&(_.dragContent=i,_.clientX=e.clientX,_.clientY=e.clientY);break;case"mousemove":null!==_.dragContent&&(_.left=m["margin-left"]+(e.clientX-_.clientX),_.top=m["margin-top"]+(e.clientY-_.clientY),a.css({"margin-top":_.top,"margin-left":_.left}));break;case"mouseup":null!==_.dragContent&&(_.dragContent=null,m["margin-left"]=_.left,m["margin-top"]=_.top);break;default:break}}))}(this)};y.prototype=(0,r.default)(c.prototype),y.prototype.init=function(){f=0,_.dragContent=null},y.prototype.close=function(){this.setData({show:!1}),p.dispatch({type:d.FULLSCREEN_CLOSE})},y.prototype.open=function(e){var t=e.images;this._imageList=t;var n=e.current;t[n]&&t[n].src&&(this.varifyNext(n),this.setData({show:!0,current:n,src:t[n].src,width:t[n].image_width,height:t[n].image_height}),p.dispatch({type:d.FULLSCREEN_OPEN}))},y.prototype.render=function(){var e=this,t=function(t,n,i){var a,r,s,c,l;if(t>e._maxWidth||n>e._maxHeight){var u=t/n;u>=i?(l=n*e._maxWidth/t,s=e._maxWidth,c=l,a=-e._maxWidth/2,r=-l/2):(l=t*e._maxHeight/n,c=e._maxHeight,s=l,r=-e._maxHeight/2,a=-l/2)}else a=-t/2,r=-n/2,s=t,c=n;o.css({"margin-left":a,"margin-top":r,width:s,height:c}),m={height:c,width:s,"margin-top":r,"margin-left":a}},n=function(t){var n,i=(0,s.default)(n=e.getElement()).call(n,".im-image-download"),r=(0,a.default)(t).call(t,"/"),o=t.substring(r+1),c=t+"?attname="+o;i.attr("href",c)},i=this._element;switch((0,s.default)(i).call(i,"img").remove(),this._data.show){case!1:i.hide();break;case!0:var r=new Image;r.src=e._data.src;var o=(0,s.default)(i).call(i,".im-imageviewer-content");r.onload=function(){r.className="im-image-draggable";var n=e._maxWidth/e._maxHeight,a=e._data.width||r.width,c=e._data.height||r.height;(0,s.default)(o).call(o,"img").remove(),o.append(r),t(a,c,n),e.init(),i.show()},n(e._data.src);break;default:break}},y.prototype.nextPage=function(e){var t,n=this._data.current;"prev"===e&&0!==n?t=n-1:"next"===e&&n!=this._imageList.length-1&&(t=n+1),this.varifyNext(t),this.setData({current:t,src:this._imageList[t].src,width:this._imageList[t].image_width,height:this._imageList[t].image_height})},y.prototype.varifyNext=function(e){var t,n,i=(0,s.default)(t=this.getElement()).call(t,".im-image-prev"),a=(0,s.default)(n=this.getElement()).call(n,".im-image-next");i.removeClass("im-image-disable"),a.removeClass("im-image-disable"),0===e&&i.addClass("im-image-disable"),e===this._imageList.length-1&&a.addClass("im-image-disable")},e.exports=y},xmrK:function(e,t){var n='<li class="im-msg im-msg-video"> <div class=im-msg-time></div> <div class=im-msg-checkbox></div> <div class=im-msg-main> <img class="im-avatar im-msg-avatar"/> <span class=im-msg-send-status></span> <span class=im-msg-showed-status></span> <span class=im-msg-user-name></span> <div class=im-msg-content> <a href=javascript:; class=im-msg-video-btn></a> </div> </div> <div class=im-msg-collect-name></div> <div class=im-msg-collect-time></div> <div class=im-msg-feedback> <div class=im-msg-feedback-container> <span class=im-msg-feedback-icon></span> <span class=im-msg-feedback-content></span> </div> </div> </li>';e.exports=n},xrYK:function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},xs3f:function(e,t,n){var i=n("2oRo"),a=n("zk60"),r="__core-js_shared__",o=i[r]||a(r,{});e.exports=o},xuMa:function(e,t,n){var i=n("G9WS");n("rB9j"),n("UxlC");var a=i(n("RXMP")),r=i(n("/FZm")),o=i(n("rPUy")),s=n("eBtS"),c=n("JVDe"),l=n("/XSb"),u='<div class="im-notice-button" data-value="${data-value}">${data-text}</div>',d=function(e){(function(t){var n={template:l};s.extend(n,e),c.call(t,n)})(this)};d.prototype=(0,o.default)(c.prototype),d.prototype.show=function(){c.prototype.show.call(this)},d.prototype.hide=function(){c.prototype.hide.call(this)},d.prototype.setData=function(e){s.extend(this._data,e);var t=this.render();return t||""},d.prototype.render=function(){var e,t=this,n=this.getElement(),i=(0,r.default)(n).call(n,".im-notice-buttons");(0,r.default)(n).call(n,".im-notice-content").html(this._data.content||""),(0,a.default)(e=this._data.buttons||[]).call(e,(function(e){i.append(u.replace("${data-text}",e.text).replace("${data-value}",t._options.index+"@"+e.action))})),(0,r.default)(n).call(n,".im-notice-close").data("value",t._options.index)},d.prototype.send=function(){var e=this;this._options.broadCast&&this._options.broadCast("aiSend",{text:e._data.content,qalog:e._data.qalog})},d.prototype.copy=function(e){var t=this;this._options.broadCast&&this._options.broadCast("aiCopy",{text:t._data.content,qalog:t._data.qalog})},e.exports=d},y9AQ:function(e,t,n){var i=n("FWHo"),a=n("GHVm"),r=function(e){return function(t,n){var r,o,s=String(a(t)),c=i(n),l=s.length;return c<0||c>=l?e?"":void 0:(r=s.charCodeAt(c),r<55296||r>56319||c+1===l||(o=s.charCodeAt(c+1))<56320||o>57343?e?s.charAt(c):r:e?s.slice(c,c+2):o-56320+(r-55296<<10)+65536)}};e.exports={codeAt:r(!1),charAt:r(!0)}},yLpj:function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(i){"object"===typeof window&&(n=window)}e.exports=n},yQr1:function(e,t,n){e.exports=n("8lc0")},yd4P:function(e,t,n){var i=n("G9WS"),a=n("LYCE");a(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("+oHS")),o=i(n("6UaR")),s=i(n("06Pm")),c=i(n("kA7L")),l=i(n("LYCE")),u=i(n("7Gle")),d=i(n("AZU8")),p=i(n("3g4U")),f=i(n("bhf8")),m=i(n("BEUE")),_=n("3AM4"),h="__proto__"in{},g=(0,u.default)(_.arrayMethods);function v(e,t,n,i){f.default?(0,l.default)(e,t,{value:n,emuerable:!!i,writable:!0,configurable:!0}):e&&e[t]&&(e[t]=n)}function y(e,t,n){e.__proto__=t}function w(e,t,n){for(var i=0,a=n.length;i<a;i++){var r=n[i];v(e,r,t[r])}}var b=function(){function e(t){if((0,s.default)(this,e),this.value=t,this.dep=new p.default,v(t,"__ob__",this),(0,o.default)(t)){var n=h?y:w;n(t,_.arrayMethods,g),this.observeArray(t)}else this.walk(t)}return(0,c.default)(e,[{key:"walk",value:function(e){for(var t=(0,r.default)(e),n=0;n<t.length;n++)(0,d.default)(e,t[n],e[t[n]])}},{key:"observeArray",value:function(e){for(var t=0,n=e.length;t<n;t++)(0,m.default)(e[t])}}]),e}();t.default=b},yoRg:function(e,t,n){var i=n("UTVS"),a=n("/GqU"),r=n("TWQb").indexOf,o=n("0BK2");e.exports=function(e,t){var n,s=a(e),c=0,l=[];for(n in s)!i(o,n)&&i(s,n)&&l.push(n);while(t.length>c)i(s,n=t[c++])&&(~r(l,n)||l.push(n));return l}},ypFw:function(e,t,n){"use strict";var i=n("67WC"),a=n("1Y/n").left,r=i.aTypedArray,o=i.exportTypedArrayMethod;o("reduce",(function(e){return a(r(this),e,arguments.length,arguments.length>1?arguments[1]:void 0)}))},zBJ4:function(e,t,n){var i=n("2oRo"),a=n("hh1v"),r=i.document,o=a(r)&&a(r.createElement);e.exports=function(e){return o?r.createElement(e):{}}},zHFu:function(e,t,n){"use strict";var i=n("I+eb"),a=n("hXpO"),r=n("rwPt");i({target:"String",proto:!0,forced:r("bold")},{bold:function(){return a(this,"b","","")}})},zJQS:function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},zRxj:function(e,t,n){var i=n("ooPF");e.exports=i({anjuke_agenthousetype:null,anjuke_agentkft:null,anjuke_agentloupan:null,anjuke_awardnotification:null,anjuke_callphone:null,anjuke_fangyuan:null,anjuke_fangyuan2:null,anjuke_focusReq:null,anjuke_houseConfirm:null,anjuke_housestatecard:null,anjuke_invitecallcard:null,anjuke_invitecommentcard:null,anjuke_kftcard:null,anjuke_propertycardv2:null,anjuke_publiccard2:null,anjuke_publicmsgcard:null,anjuke_reportprogresscard:null,anjuke_richcontent_articles:null,anjuke_richcontent1:null,anjuke_signup_success:null,anjuke_tip:null,anjuke_qamsgcard:null,anjuke_brokertip:null,anjuke_systemtip:null,anjuke_agentlike:null,anjuke_qa:null,anjuke_recommendprop3:null,cheshangtong_post:null,ershouche_cheshangtong_system:null,ershouche_cheshangtong_weixin:null,ershouche_cheshangtong_yxfk:null,esc_phone_remind:null,evaluate_card:null,ganji_job_resume_viewed:null,ganji_job_resume_pass:null,ganji_job_resume_unpass:null,ganji_job_resume_down:null,ganji_job_resume_interview:null,ganji_job_resume_integrity:null,gj_card_job_recommendation:null,ganji_gfxx_cardtwc:null,ganji_gfxx_cardwc:null,gj_define:null,gj_notice_post:null,gj_post:null,house_publisher_card:null,house_broker_card:null,kf_card1:null,kf_card2:null,kf_card3:null,kf_card4:null,kf_card5:null,kf_card6:null,kf_card7:null,kf_card8:null,kf_card9:null,kf_card10:null,kf_card11:null,nhr_card1:null,old_im_system_msg:null,ss_helplist:null,ss_postcard_list:null,standard_evaluate_card1_ret:null,weiliaoke_evaluationsucceed:null,wuba_card:null,wuba_card1:null,yingcai_emoji_message:null,yingcai_get_confirm_phone:null,yingcai_get_cv:null,yingcai_get_merge_msg:null,yingcai_get_smartReply:null,yingcai_get_want_phone:null,yingcai_get_want_resume:null,yingcai_get_zhiwei:null,zcm_syjl:null,zcm_sysmsg:null,zufanglivecard:null,ershouche_cheshangtong_report:null,house_call_card:null,tz_card_notify:null,gy_publisher_card:null,ajk_redpackage:null,tz_card_friend_sincerewords:null,esc_recept_merchant_call:null})},zSZm:function(e,t,n){"use strict";var i=n("67WC"),a=i.aTypedArray,r=i.exportTypedArrayMethod,o=Math.floor;r("reverse",(function(){var e,t=this,n=a(t).length,i=o(n/2),r=0;while(r<i)e=t[r],t[r++]=t[--n],t[n]=e;return t}))},zccT:function(e,t,n){var i=n("G9WS");n("rB9j"),n("EnZy");var a=i(n("ZbhI")),r=n("8e1d"),o=r.extend,s=r.ajax,c=function(e,t,n){(new Date).getTime();s({url:e.url,query:e.getparams,type:e.method,data:e.postparams,dataType:e.datatype,timeout:e.timeout,contentType:"text/plain;charset=UTF-8",encrypt:!1!==e.encrypt,success:function(e){t(e)},error:function(e,t,i){n(i)},complete:function(){(new Date).getTime()}})},l=function(e){this._api="",this._cdn=""};l.prototype={init:function(e){var t={api:"https://upload.58cdn.com.cn/json",cdn:"http://pic3.58cdn.com.cn"};o(t,e),this._api=t.api,this._cdn=t.cdn},upload:function(e,t,n){-1!==(0,a.default)(e).call(e,",")&&(e=e.split(",")[1]);var i=this,r="/nowater/webim/big/",o={"Pic-Size":"0*0","Pic-Encoding":"base64","Pic-Path":r,"Pic-Data":e};c({method:"POST",url:i._api,postparams:o,encrypt:!1,contentType:"text/plain;charset=UTF-8"},(function(e){e?t(i._cdn+r+e):n("")}),(function(e){n(e)}))}},e.exports=new l},zfnd:function(e,t,n){var i=n("glrk"),a=n("hh1v"),r=n("8GlL");e.exports=function(e,t){if(i(e),a(t)&&t.constructor===e)return t;var n=r.f(e),o=n.resolve;return o(t),n.promise}},zk60:function(e,t,n){var i=n("2oRo"),a=n("kRJp");e.exports=function(e,t){try{a(i,e,t)}catch(n){i[e]=t}return t}},zznM:function(e,t){var n='<div class=add-delete> <div class="member-btn js-add-member">+</div> </div> <div class=im-group-panel> <div class=im-panel-members> <div class=panel-members></div> </div> </div> <div class=im-panel-control> <div class=control-content> <div class=control-label>群名</div> <div class=control-container> <input class="control-input js-group-name" type=text maxlength=40 disabled=disabled /> <div class="control-button js-group-name edit-btn hower-show">编辑</div> <div class="control-button js-group-name ensure-btn">确认</div> </div> </div> <div class=control-content> <div class="control-label js-group-qrcode"><span class=control-icon></span>群二维码</div> <div class=control-input></div> </div> <div class=control-content> <div class=control-label>我在本群中的昵称</div> <div class=control-container> <input class="control-input js-group-nick" type=text disabled=disabled /> <div class="control-button js-group-nick edit-btn hower-show">编辑</div> <div class="control-button js-group-nick ensure-btn">确认</div> </div> </div> </div> <div class=im-panel-exit> <div class=panel-button> 删除并退出 </div> </div> ';e.exports=n}});
//# sourceMappingURL=app.js.map