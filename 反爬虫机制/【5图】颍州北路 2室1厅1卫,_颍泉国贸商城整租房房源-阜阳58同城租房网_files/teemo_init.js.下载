var version=10012,locationHref=window.location.href,domainConfig,isWuba=locationHref.indexOf("58"),isAnjuke=locationHref.indexOf("anjuke"),isGanji=locationHref.indexOf("ganji"),domainConfig=-1!==isWuba?"https://cdata.58.com":-1!==isAnjuke?"https://antispider-security.anjuke.com":-1!==isGanji?"https://cdata.ganji.com":"https://cdata.58.com",appkey="";function loadfpJs(){var script=document.createElement("script");script.src="//j1.58cdn.com.cn/git/xxzl/teemo/cry.js?v=20191127115018",document.getElementsByTagName("head")[0].appendChild(script);var myLoad=function(){function getQuery(e,t){t=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),t=e.split("?")[1].match(t);return null!=t?t[2]:null}try{var jsArray=document.scripts,index;for(index in jsArray){var src=jsArray[index].src;src&&0<src.indexOf("/teemo_init.js")&&(appkey=getQuery(src,"appkey"))}}catch(e){}function h(e,t,a){var n="";if(arguments.length<2?n="target error - target and name are both required":"object"!=typeof e?n="target error - target itself must be window object":"string"!=typeof t&&(n="target error - target name must be string type"),n)throw new Error(n);this.target=e,this.name=t,this.prefix=a}function i(e,t){this.targets={},this.name=e,this.listenFunc=[],this.prefix=t||"[PROJECT_NAME]",this.initListen()}var g;function parseParams(e){try{var t,a=[];for(t in e){var n=e[t];a.push(t+"="+n)}return a.join("&")}catch(i){return""}}window.DFPMessenger=(g="postMessage"in window,h.prototype.send=g?function(e){this.target.postMessage(this.prefix+"|"+this.name+"__Messenger__"+e,"*")}:function(e){var t=window.navigator[this.prefix+this.name];if("function"!=typeof t)throw new Error("target callback function is not defined");t(this.prefix+e,window)},i.prototype.addTarget=function(e,t){e=new h(e,t,this.prefix);this.targets[t]=e},i.prototype.initListen=function(){var s=this,t=function(t){try{for(var a=(t="object"==typeof t&&t.data?t.data:t).split("__Messenger__"),t=a[1],n=a[0].split("|"),i=n[0],r=n[1],o=0;o<s.listenFunc.length;o++)i+r===s.prefix+s.name&&s.listenFunc[o](t)}catch(e){}};g?"addEventListener"in document?window.addEventListener("message",t,!1):"attachEvent"in document&&window.attachEvent("onmessage",t):window.navigator[this.prefix+this.name]=t},i.prototype.listen=function(e){for(var t=0,a=this.listenFunc.length,n=!1;t<a;t++)if(this.listenFunc[t]==e){n=!0;break}n||this.listenFunc.push(e)},i.prototype.clear=function(){this.listenFunc=[]},i.prototype.send=function(e){var t,a=this.targets;for(t in a)a.hasOwnProperty(t)&&a[t].send(e)},i),function(){try{if(window.dfpmsg)return onDfpmessage(window.dfpmsg);if(window.dfpmessenger)return;window.dfpmessenger=new DFPMessenger("parent","xxzldp"),window.dfpmessenger.listen(function(e){onDfpmessage(e)});var dpCallback=function(t,a){var n=JSON.parse(t).data.split("");try{var i=document.createElement("iframe");i.style.display="none",i.style.zIndex="-9999",i.style.width="0",i.style.height="0";var r,o=document.scripts;for(r in 1,o){var s=o[r].src;if(s&&0<s.indexOf("/teemo_init.js")){i.src=domainConfig+"/api/v1/pcm/teemo.html"+s.substr(s.indexOf("?"),s.length)+"&token="+encodeURIComponent(n[2])+"&cid="+n[0]+"&deviceid="+n[1]+"&appkey="+a+"&v="+version,document.body.appendChild(i),dfpmessenger.addTarget(i.contentWindow,"dpframe");break}}}catch(e){}};function setCookie(t,a){try{var n=/[http:|https:]\/\/([^\/]+)\//i.exec(document.location.href)[1].split("."),i="."+n[n.length-2]+"."+n[n.length-1]}catch(e){i=".58.com"}(n=new Date).setTime(n.getTime()+31536e7),document.cookie=t+"="+a+";expires="+n+";domain="+i+";path=/"}function hand_save_all(e,t){window.localStorage[e]=t,window.sessionStorage[e]=t}function getCookie(e){var e=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(e=document.cookie.match(e))?decodeURI(e[2]):""}function signEnc(){var e={appkey:appkey,cid:xxzlCid(),deviceid:localStorage.getItem("xxzl_deviceid")?localStorage.getItem("xxzl_deviceid"):"",expire:"180",nonce:Math.ceil(1e6*Math.random()),timestamp:(new Date).getTime(),userid:""},t=CryptoJS.HmacSHA256("httpsgetcdata.58.com/api/v1/pcm/gettoken?"+parseParams(e),"65687FFBF0E5AA5B"),t=CryptoJS.enc.Base64.stringify(t);e.signature=t;t=CryptoJS.enc.Utf8.parse("110FD52DC87A2230"),e=JSON.stringify(e);return CryptoJS.AES.encrypt(e,t,{mode:CryptoJS.mode.ECB,padding:CryptoJS.pad.Pkcs7}).ciphertext.toString()}window.xxzlCid=function(){return localStorage.getItem("xxzl_cid")?localStorage.getItem("xxzl_cid"):getCookie("xxzl_cid")?getCookie("xxzl_cid"):""};var dpCallbackName=("dpjsonp_"+Math.random()).replace(".",""),dpOHead=document.getElementsByTagName("head")[0],dpos=document.createElement("script");dpOHead.appendChild(dpos);var dpCallbackName1=("dpjsonp_"+Math.random()).replace(".",""),dpOHead1="",dpos1="";window[dpCallbackName]=function(e){var t=CryptoJS.AES.decrypt(e,CryptoJS.enc.Utf8.parse("110FD52DC87A2230"),{mode:CryptoJS.mode.ECB,padding:CryptoJS.pad.Pkcs7}).toString(CryptoJS.enc.Utf8);dpOHead.removeChild(dpos),window[dpCallbackName]=null,200!=JSON.parse(t).code?(dpOHead1=document.getElementsByTagName("head")[0],dpos1=document.createElement("script"),setTimeout(function(){dpOHead1.appendChild(dpos1),dpos1.src=domainConfig+"/api/v1/pcm/gettoken?param="+signEnc()+"&callback="+dpCallbackName1},3e3)):(e=JSON.parse(t).data.split("")[0],JSON.parse(t).data.split("")[1],JSON.parse(t).data.split("")[2],""!=e&&hand_save_all("xxzl_cid",e),dpCallback(t,appkey)),window.dfpmessenger=null},window[dpCallbackName1]=function(e){var t=CryptoJS.AES.decrypt(e,CryptoJS.enc.Utf8.parse("110FD52DC87A2230"),{mode:CryptoJS.mode.ECB,padding:CryptoJS.pad.Pkcs7}).toString(CryptoJS.enc.Utf8);dpOHead1.removeChild(dpos1),window[dpCallbackName1]=null,200==JSON.parse(t).code&&(""!=(e=JSON.parse(t).data.split("")[0])&&hand_save_all("xxzl_cid",e),dpCallback(t,appkey)),window.dfpmessenger=null},dpos.src=domainConfig+"/api/v1/pcm/gettoken?param="+signEnc()+"&callback="+dpCallbackName}catch(e){}var saveData=function(t,a){try{var n=/[http:|https:]\/\/([^\/]+)\//i.exec(document.location.href)[1].split("."),i="."+n[n.length-2]+"."+n[n.length-1]}catch(e){i=".58.com"}(n=new Date).setTime(n.getTime()+31536e7),document.cookie=t+"="+a+";expires="+n+";domain="+i,window.localStorage&&(window.localStorage[t]=a)},onDfpmessage=function(msg){try{window.dfpmsg=msg;var jsArray=document.scripts,index;for(index in jsArray){var src=jsArray[index].src,callback,queryParam,data;src&&0<src.indexOf("xzdfp.js")&&(queryParam=(src+"&").match(/callback=(.+?)&/),queryParam&&(callback=queryParam[0].replace("callback=","").replace("&","")),callback&&msg&&(data=eval("("+msg+")"),data&&data.d?window[callback]({status:"success",token:data.d}):window[callback](data)))}}catch(e){}}}()};script.addEventListener?script.onload=function(){myLoad()}:script.attachEvent&&script.attachEvent("onreadystatechange",function(){var e=window.event.srcElement;"loaded"!=e.readyState&&"complete"!=e.readyState||myLoad()})}var IS_IN_APP_STRICT=/W(UB|BU)A/i.test(navigator.userAgent)||/wbutown/i.test(navigator.userAgent)||/AJK/.test(navigator.userAgent)||/HSApartmentBrokerPMS/i.test(navigator.userAgent);function loadScript(e,t){var a=document.createElement("script"),n=document.getElementsByTagName("script")[0],e=e;a.type="text/javascript",a["async"]=!1,a.src=("https:"==document.location.protocol?"https://":"http://")+e+ +new Date,n.parentNode.insertBefore(a,n),script.addEventListener&&a.addEventListener("load",function(){t()},!1)}IS_IN_APP_STRICT?loadScript("a.58cdn.com.cn/app58/rms/app/js/app_30805.js?",function(){setTimeout(function(){window.WBAPP&&window.WBAPP.invoke("get_device_fingerprint",function(e){window.xxzlCid=function(){return e},e||loadfpJs()})},500),loadfpJs()}):loadfpJs();