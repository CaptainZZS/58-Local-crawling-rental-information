/*!
 * jQuery JavaScript Library v1.11.1 -css,-css/addGetHookIf,-css/curCSS,-css/defaultDisplay,-css/hiddenVisibleSelectors,-css/support,-css/swap,-css/var/cssExpand,-css/var/isHidden,-css/var/rmargin,-css/var/rnumnonpx,-effects,-effects/Tween,-effects/animatedSelector,-effects/support,-dimensions,-offset,-deprecated,-event-alias,-wrap
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-09-28T01:23Z
 */
!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,(function(e,t){function a(e){var t=e.length,a=D.type(e);return"function"!==a&&!D.isWindow(e)&&(!(1!==e.nodeType||!t)||"array"===a||0===t||"number"==typeof t&&t>0&&t-1 in e)}function r(e){var t=M[e]={};return D.each(e.match(N)||[],(function(e,a){t[a]=!0})),t}function n(){I.addEventListener?(I.removeEventListener("DOMContentLoaded",o,!1),e.removeEventListener("load",o,!1)):(I.detachEvent("onreadystatechange",o),e.detachEvent("onload",o))}function o(){(I.addEventListener||"load"===event.type||"complete"===I.readyState)&&(n(),D.ready())}function s(e,t,a){if(void 0===a&&1===e.nodeType){var r="data-"+t.replace(X,"-$1").toLowerCase();if(a=e.getAttribute(r),"string"==typeof a){try{a="true"===a||"false"!==a&&("null"===a?null:+a+""===a?+a:q.test(a)?D.parseJSON(a):a)}catch(n){}D.data(e,t,a)}else a=void 0}return a}function i(e){var t;for(t in e)if(("data"!==t||!D.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function l(e,t,a,r){if(D.acceptData(e)){var n,o,s=D.expando,i=e.nodeType,l=i?D.cache:e,c=i?e[s]:e[s]&&s;if(c&&l[c]&&(r||l[c].data)||void 0!==a||"string"!=typeof t)return c||(c=i?e[s]=S.pop()||D.guid++:s),l[c]||(l[c]=i?{}:{toJSON:D.noop}),"object"!=typeof t&&"function"!=typeof t||(r?l[c]=D.extend(l[c],t):l[c].data=D.extend(l[c].data,t)),o=l[c],r||(o.data||(o.data={}),o=o.data),void 0!==a&&(o[D.camelCase(t)]=a),"string"==typeof t?(n=o[t],null==n&&(n=o[D.camelCase(t)])):n=o,n}}function c(e,t,a){if(D.acceptData(e)){var r,n,o=e.nodeType,s=o?D.cache:e,l=o?e[D.expando]:D.expando;if(s[l]){if(t&&(r=a?s[l]:s[l].data)){D.isArray(t)?t=t.concat(D.map(t,D.camelCase)):t in r?t=[t]:(t=D.camelCase(t),t=t in r?[t]:t.split(" ")),n=t.length;for(;n--;)delete r[t[n]];if(a?!i(r):!D.isEmptyObject(r))return}(a||(delete s[l].data,i(s[l])))&&(o?D.cleanData([e],!0):C.deleteExpando||s!=s.window?delete s[l]:s[l]=null)}}}function p(){return!0}function u(){return!1}function d(e){return function(t,a){"string"!=typeof t&&(a=t,t="*");var r,n=0,o=t.toLowerCase().match(N)||[];if(D.isFunction(a))for(;r=o[n++];)"+"===r.charAt(0)?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(a)):(e[r]=e[r]||[]).push(a)}}function f(e,t,a,r){function n(i){var l;return o[i]=!0,D.each(e[i]||[],(function(e,i){var c=i(t,a,r);return"string"!=typeof c||s||o[c]?s?!(l=c):void 0:(t.dataTypes.unshift(c),n(c),!1)})),l}var o={},s=e===pe;return n(t.dataTypes[0])||!o["*"]&&n("*")}function h(e,t){var a,r,n=D.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((n[r]?e:a||(a={}))[r]=t[r]);return a&&D.extend(!0,e,a),e}function g(e,t,a){for(var r,n,o,s,i=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=e.mimeType||t.getResponseHeader("Content-Type"));if(n)for(s in i)if(i[s]&&i[s].test(n)){l.unshift(s);break}if(l[0]in a)o=l[0];else{for(s in a){if(!l[0]||e.converters[s+" "+l[0]]){o=s;break}r||(r=s)}o=o||r}if(o)return o!==l[0]&&l.unshift(o),a[o]}function m(e,t,a,r){var n,o,s,i,l,c={},p=e.dataTypes.slice();if(p[1])for(s in e.converters)c[s.toLowerCase()]=e.converters[s];for(o=p.shift();o;)if(e.responseFields[o]&&(a[e.responseFields[o]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=p.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(s=c[l+" "+o]||c["* "+o],!s)for(n in c)if(i=n.split(" "),i[1]===o&&(s=c[l+" "+i[0]]||c["* "+i[0]])){!0===s?s=c[n]:!0!==c[n]&&(o=i[0],p.unshift(i[1]));break}if(!0!==s)if(s&&e["throws"])t=s(t);else try{t=s(t)}catch(u){return{state:"parsererror",error:s?u:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}function v(e,t,a,r){var n;if(D.isArray(t))D.each(t,(function(t,n){a||fe.test(e)?r(e,n):v(e+"["+("object"==typeof n?t:"")+"]",n,a,r)}));else if(a||"object"!==D.type(t))r(e,t);else for(n in t)v(e+"["+n+"]",t[n],a,r)}function y(){try{return new e.XMLHttpRequest}catch(t){}}function b(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}var S=[],T=S.slice,E=S.concat,x=S.push,k=S.indexOf,j={},w=j.toString,A=j.hasOwnProperty,C={},_="1.11.1 -css,-css/addGetHookIf,-css/curCSS,-css/defaultDisplay,-css/hiddenVisibleSelectors,-css/support,-css/swap,-css/var/cssExpand,-css/var/isHidden,-css/var/rmargin,-css/var/rnumnonpx,-effects,-effects/Tween,-effects/animatedSelector,-effects/support,-dimensions,-offset,-deprecated,-event-alias,-wrap",D=function(e,t){return new D.fn.init(e,t)},F=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,R=/^-ms-/,U=/-([\da-z])/gi,P=function(e,t){return t.toUpperCase()};D.fn=D.prototype={jquery:_,constructor:D,selector:"",length:0,toArray:function(){return T.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:T.call(this)},pushStack:function(e){var t=D.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return D.each(this,e,t)},map:function(e){return this.pushStack(D.map(this,(function(t,a){return e.call(t,a,t)})))},slice:function(){return this.pushStack(T.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,a=+e+(e<0?t:0);return this.pushStack(a>=0&&a<t?[this[a]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:x,sort:S.sort,splice:S.splice},D.extend=D.fn.extend=function(){var e,t,a,r,n,o,s=arguments[0]||{},i=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[i]||{},i++),"object"==typeof s||D.isFunction(s)||(s={}),i===l&&(s=this,i--);i<l;i++)if(null!=(n=arguments[i]))for(r in n)e=s[r],a=n[r],s!==a&&(c&&a&&(D.isPlainObject(a)||(t=D.isArray(a)))?(t?(t=!1,o=e&&D.isArray(e)?e:[]):o=e&&D.isPlainObject(e)?e:{},s[r]=D.extend(c,o,a)):void 0!==a&&(s[r]=a));return s},D.extend({expando:"jQuery"+(_+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===D.type(e)},isArray:Array.isArray||function(e){return"array"===D.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!D.isArray(e)&&e-parseFloat(e)>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==D.type(e)||e.nodeType||D.isWindow(e))return!1;try{if(e.constructor&&!A.call(e,"constructor")&&!A.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(a){return!1}if(C.ownLast)for(t in e)return A.call(e,t);for(t in e);return void 0===t||A.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?j[w.call(e)]||"object":typeof e},globalEval:function(t){t&&D.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(R,"ms-").replace(U,P)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,r){var n,o=0,s=e.length,i=a(e);if(r){if(i)for(;o<s&&(n=t.apply(e[o],r),!1!==n);o++);else for(o in e)if(n=t.apply(e[o],r),!1===n)break}else if(i)for(;o<s&&(n=t.call(e[o],o,e[o]),!1!==n);o++);else for(o in e)if(n=t.call(e[o],o,e[o]),!1===n)break;return e},trim:function(e){return null==e?"":(e+"").replace(F,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(a(Object(e))?D.merge(r,"string"==typeof e?[e]:e):x.call(r,e)),r},inArray:function(e,t,a){var r;if(t){if(k)return k.call(t,e,a);for(r=t.length,a=a?a<0?Math.max(0,r+a):a:0;a<r;a++)if(a in t&&t[a]===e)return a}return-1},merge:function(e,t){for(var a=+t.length,r=0,n=e.length;r<a;)e[n++]=t[r++];if(a!==a)for(;void 0!==t[r];)e[n++]=t[r++];return e.length=n,e},grep:function(e,t,a){for(var r,n=[],o=0,s=e.length,i=!a;o<s;o++)r=!t(e[o],o),r!==i&&n.push(e[o]);return n},map:function(e,t,r){var n,o=0,s=e.length,i=a(e),l=[];if(i)for(;o<s;o++)n=t(e[o],o,r),null!=n&&l.push(n);else for(o in e)n=t(e[o],o,r),null!=n&&l.push(n);return E.apply([],l)},guid:1,proxy:function(e,t){var a,r,n;if("string"==typeof t&&(n=e[t],t=e,e=n),D.isFunction(e))return a=T.call(arguments,2),r=function(){return e.apply(t||this,a.concat(T.call(arguments)))},r.guid=e.guid=e.guid||D.guid++,r},now:function(){return+new Date},support:C}),D.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(e,t){j["[object "+t+"]"]=t.toLowerCase()}));var L,I=e.document,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,H=D.fn.init=function(e,t){var a,r;if(!e)return this;if("string"==typeof e){if(a="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:z.exec(e),!a||!a[1]&&t)return!t||t.jquery?(t||L).find(e):this.constructor(t).find(e);if(a[1]){if(t=t instanceof D?t[0]:t,D.merge(this,D.parseHTML(a[1],t&&t.nodeType?t.ownerDocument||t:I,!0)),rsingleTag.test(a[1])&&D.isPlainObject(t))for(a in t)D.isFunction(this[a])?this[a](t[a]):this.attr(a,t[a]);return this}if(r=I.getElementById(a[2]),r&&r.parentNode){if(r.id!==a[2])return L.find(e);this.length=1,this[0]=r}return this.context=I,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):D.isFunction(e)?"undefined"!=typeof L.ready?L.ready(e):e(D):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),D.makeArray(e,this))};H.prototype=D.fn,L=D(I);var O,N=/\S+/g,M={};D.Callbacks=function(e){e="string"==typeof e?M[e]||r(e):D.extend({},e);var t,a,n,o,s,i,l=[],c=!e.once&&[],p=function(r){for(a=e.memory&&r,n=!0,s=i||0,i=0,o=l.length,t=!0;l&&s<o;s++)if(!1===l[s].apply(r[0],r[1])&&e.stopOnFalse){a=!1;break}t=!1,l&&(c?c.length&&p(c.shift()):a?l=[]:u.disable())},u={add:function(){if(l){var r=l.length;!function t(a){D.each(a,(function(a,r){var n=D.type(r);"function"===n?e.unique&&u.has(r)||l.push(r):r&&r.length&&"string"!==n&&t(r)}))}(arguments),t?o=l.length:a&&(i=r,p(a))}return this},remove:function(){return l&&D.each(arguments,(function(e,a){for(var r;(r=D.inArray(a,l,r))>-1;)l.splice(r,1),t&&(r<=o&&o--,r<=s&&s--)})),this},has:function(e){return e?D.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],o=0,this},disable:function(){return l=c=a=void 0,this},disabled:function(){return!l},lock:function(){return c=void 0,a||u.disable(),this},locked:function(){return!c},fireWith:function(e,a){return!l||n&&!c||(a=a||[],a=[e,a.slice?a.slice():a],t?c.push(a):p(a)),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!n}};return u},D.extend({Deferred:function(e){var t=[["resolve","done",D.Callbacks("once memory"),"resolved"],["reject","fail",D.Callbacks("once memory"),"rejected"],["notify","progress",D.Callbacks("memory")]],a="pending",r={state:function(){return a},always:function(){return n.done(arguments).fail(arguments),this},then:function(){var e=arguments;return D.Deferred((function(a){D.each(t,(function(t,o){var s=D.isFunction(e[t])&&e[t];n[o[1]]((function(){var e=s&&s.apply(this,arguments);e&&D.isFunction(e.promise)?e.promise().done(a.resolve).fail(a.reject).progress(a.notify):a[o[0]+"With"](this===r?a.promise():this,s?[e]:arguments)}))})),e=null})).promise()},promise:function(e){return null!=e?D.extend(e,r):r}},n={};return r.pipe=r.then,D.each(t,(function(e,o){var s=o[2],i=o[3];r[o[1]]=s.add,i&&s.add((function(){a=i}),t[1^e][2].disable,t[2][2].lock),n[o[0]]=function(){return n[o[0]+"With"](this===n?r:this,arguments),this},n[o[0]+"With"]=s.fireWith})),r.promise(n),e&&e.call(n,n),n},when:function(e){var t,a,r,n=0,o=T.call(arguments),s=o.length,i=1!==s||e&&D.isFunction(e.promise)?s:0,l=1===i?e:D.Deferred(),c=function(e,a,r){return function(n){a[e]=this,r[e]=arguments.length>1?T.call(arguments):n,r===t?l.notifyWith(a,r):--i||l.resolveWith(a,r)}};if(s>1)for(t=new Array(s),a=new Array(s),r=new Array(s);n<s;n++)o[n]&&D.isFunction(o[n].promise)?o[n].promise().done(c(n,r,o)).fail(l.reject).progress(c(n,a,t)):--i;return i||l.resolveWith(r,o),l.promise()}}),D.fn.ready=function(e){return D.ready.promise().done(e),this},D.extend({isReady:!1,readyWait:1,holdReady:function(e){e?D.readyWait++:D.ready(!0)},ready:function(e){if(!0===e?!--D.readyWait:!D.isReady){if(!I.body)return setTimeout(D.ready);D.isReady=!0,!0!==e&&--D.readyWait>0||(O.resolveWith(I,[D]),D.fn.triggerHandler&&(D(I).triggerHandler("ready"),D(I).off("ready")))}}}),D.ready.promise=function(t){if(!O)if(O=D.Deferred(),"complete"===I.readyState)setTimeout(D.ready);else if(I.addEventListener)I.addEventListener("DOMContentLoaded",o,!1),e.addEventListener("load",o,!1);else{I.attachEvent("onreadystatechange",o),e.attachEvent("onload",o);var a=!1;try{a=null==e.frameElement&&I.documentElement}catch(r){}a&&a.doScroll&&function t(){if(!D.isReady){try{a.doScroll("left")}catch(e){return setTimeout(t,50)}n(),D.ready()}}()}return O.promise(t)};var B,W="undefined";for(B in D(C))break;C.ownLast="0"!==B,C.inlineBlockNeedsLayout=!1,D((function(){var e,t,a,r;a=I.getElementsByTagName("body")[0],a&&a.style&&(t=I.createElement("div"),r=I.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",a.appendChild(r).appendChild(t),typeof t.style.zoom!==W&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",C.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(a.style.zoom=1)),a.removeChild(r))})),function(){var e=I.createElement("div");if(null==C.deleteExpando){C.deleteExpando=!0;try{delete e.test}catch(t){C.deleteExpando=!1}}e=null}(),D.acceptData=function(e){var t=D.noData[(e.nodeName+" ").toLowerCase()],a=+e.nodeType||1;return(1===a||9===a)&&(!t||!0!==t&&e.getAttribute("classid")===t)};var q=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,X=/([A-Z])/g;D.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?D.cache[e[D.expando]]:e[D.expando],!!e&&!i(e)},data:function(e,t,a){return l(e,t,a)},removeData:function(e,t){return c(e,t)},_data:function(e,t,a){return l(e,t,a,!0)},_removeData:function(e,t){return c(e,t,!0)}}),D.fn.extend({data:function(e,t){var a,r,n,o=this[0],i=o&&o.attributes;if(void 0===e){if(this.length&&(n=D.data(o),1===o.nodeType&&!D._data(o,"parsedAttrs"))){for(a=i.length;a--;)i[a]&&(r=i[a].name,0===r.indexOf("data-")&&(r=D.camelCase(r.slice(5)),s(o,r,n[r])));D._data(o,"parsedAttrs",!0)}return n}return"object"==typeof e?this.each((function(){D.data(this,e)})):arguments.length>1?this.each((function(){D.data(this,e,t)})):o?s(o,e,D.data(o,e)):void 0},removeData:function(e){return this.each((function(){D.removeData(this,e)}))}}),D.extend({queue:function(e,t,a){var r;if(e)return t=(t||"fx")+"queue",r=D._data(e,t),a&&(!r||D.isArray(a)?r=D._data(e,t,D.makeArray(a)):r.push(a)),r||[]},dequeue:function(e,t){t=t||"fx";var a=D.queue(e,t),r=a.length,n=a.shift(),o=D._queueHooks(e,t),s=function(){D.dequeue(e,t)};"inprogress"===n&&(n=a.shift(),r--),n&&("fx"===t&&a.unshift("inprogress"),delete o.stop,n.call(e,s,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var a=t+"queueHooks";return D._data(e,a)||D._data(e,a,{empty:D.Callbacks("once memory").add((function(){D._removeData(e,t+"queue"),D._removeData(e,a)}))})}}),D.fn.extend({queue:function(e,t){var a=2;return"string"!=typeof e&&(t=e,e="fx",a--),arguments.length<a?D.queue(this[0],e):void 0===t?this:this.each((function(){var a=D.queue(this,e,t);D._queueHooks(this,e),"fx"===e&&"inprogress"!==a[0]&&D.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){D.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var a,r=1,n=D.Deferred(),o=this,s=this.length,i=function(){--r||n.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)a=D._data(o[s],e+"queueHooks"),a&&a.empty&&(r++,a.empty.add(i));return i(),n.promise(t)}}),D.event={global:{},add:function(e,t,a,r,n){var o,s,i,l,c,p,u,d,f,h,g,m=D._data(e);if(m){for(a.handler&&(l=a,a=l.handler,n=l.selector),a.guid||(a.guid=D.guid++),(s=m.events)||(s=m.events={}),(p=m.handle)||(p=m.handle=function(e){return typeof D===W||e&&D.event.triggered===e.type?void 0:D.event.dispatch.apply(p.elem,arguments)},p.elem=e),t=(t||"").match(N)||[""],i=t.length;i--;)o=J.exec(t[i])||[],f=g=o[1],h=(o[2]||"").split(".").sort(),f&&(c=D.event.special[f]||{},f=(n?c.delegateType:c.bindType)||f,c=D.event.special[f]||{},u=D.extend({type:f,origType:g,data:r,handler:a,guid:a.guid,selector:n,needsContext:n&&D.expr.match.needsContext.test(n),namespace:h.join(".")},l),(d=s[f])||(d=s[f]=[],d.delegateCount=0,c.setup&&!1!==c.setup.call(e,r,h,p)||(e.addEventListener?e.addEventListener(f,p,!1):e.attachEvent&&e.attachEvent("on"+f,p))),c.add&&(c.add.call(e,u),u.handler.guid||(u.handler.guid=a.guid)),n?d.splice(d.delegateCount++,0,u):d.push(u),D.event.global[f]=!0);e=null}},remove:function(e,t,a,r,n){var o,s,i,l,c,p,u,d,f,h,g,m=D.hasData(e)&&D._data(e);if(m&&(p=m.events)){for(t=(t||"").match(N)||[""],c=t.length;c--;)if(i=J.exec(t[c])||[],f=g=i[1],h=(i[2]||"").split(".").sort(),f){for(u=D.event.special[f]||{},f=(r?u.delegateType:u.bindType)||f,d=p[f]||[],i=i[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=d.length;o--;)s=d[o],!n&&g!==s.origType||a&&a.guid!==s.guid||i&&!i.test(s.namespace)||r&&r!==s.selector&&("**"!==r||!s.selector)||(d.splice(o,1),s.selector&&d.delegateCount--,u.remove&&u.remove.call(e,s));l&&!d.length&&(u.teardown&&!1!==u.teardown.call(e,h,m.handle)||D.removeEvent(e,f,m.handle),delete p[f])}else for(f in p)D.event.remove(e,f+t[c],a,r,!0);D.isEmptyObject(p)&&(delete m.handle,D._removeData(e,"events"))}},trigger:function(t,a,r,n){var o,s,i,l,c,p,u,d=[r||I],f=A.call(t,"type")?t.type:t,h=A.call(t,"namespace")?t.namespace.split("."):[];if(i=p=r=r||I,3!==r.nodeType&&8!==r.nodeType&&!G.test(f+D.event.triggered)&&(f.indexOf(".")>=0&&(h=f.split("."),f=h.shift(),h.sort()),s=f.indexOf(":")<0&&"on"+f,t=t[D.expando]?t:new D.Event(f,"object"==typeof t&&t),t.isTrigger=n?2:3,t.namespace=h.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),a=null==a?[t]:D.makeArray(a,[t]),c=D.event.special[f]||{},n||!c.trigger||!1!==c.trigger.apply(r,a))){if(!n&&!c.noBubble&&!D.isWindow(r)){for(l=c.delegateType||f,G.test(l+f)||(i=i.parentNode);i;i=i.parentNode)d.push(i),p=i;p===(r.ownerDocument||I)&&d.push(p.defaultView||p.parentWindow||e)}for(u=0;(i=d[u++])&&!t.isPropagationStopped();)t.type=u>1?l:c.bindType||f,o=(D._data(i,"events")||{})[t.type]&&D._data(i,"handle"),o&&o.apply(i,a),o=s&&i[s],o&&o.apply&&D.acceptData(i)&&(t.result=o.apply(i,a),!1===t.result&&t.preventDefault());if(t.type=f,!n&&!t.isDefaultPrevented()&&(!c._default||!1===c._default.apply(d.pop(),a))&&D.acceptData(r)&&s&&r[f]&&!D.isWindow(r)){p=r[s],p&&(r[s]=null),D.event.triggered=f;try{r[f]()}catch(g){}D.event.triggered=void 0,p&&(r[s]=p)}return t.result}},dispatch:function(e){e=D.event.fix(e);var t,a,r,n,o,s=[],i=T.call(arguments),l=(D._data(this,"events")||{})[e.type]||[],c=D.event.special[e.type]||{};if(i[0]=e,e.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,e)){for(s=D.event.handlers.call(this,e,l),t=0;(n=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=n.elem,o=0;(r=n.handlers[o++])&&!e.isImmediatePropagationStopped();)e.namespace_re&&!e.namespace_re.test(r.namespace)||(e.handleObj=r,e.data=r.data,a=((D.event.special[r.origType]||{}).handle||r.handler).apply(n.elem,i),void 0!==a&&!1===(e.result=a)&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,t){var a,r,n,o,s=[],i=t.delegateCount,l=e.target;if(i&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==e.type)){for(n=[],o=0;o<i;o++)r=t[o],a=r.selector+" ",void 0===n[a]&&(n[a]=r.needsContext?D(a,this).index(l)>=0:D.find(a,this,null,[l]).length),n[a]&&n.push(r);n.length&&s.push({elem:l,handlers:n})}return i<t.length&&s.push({elem:this,handlers:t.slice(i)}),s},fix:function(e){if(e[D.expando])return e;var t,a,r,n=e.type,o=e,s=this.fixHooks[n];for(s||(this.fixHooks[n]=s=Y.test(n)?this.mouseHooks:Z.test(n)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new D.Event(o),t=r.length;t--;)a=r[t],e[a]=o[a];return e.target||(e.target=o.srcElement||I),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var a,r,n,o=t.button,s=t.fromElement;return null==e.pageX&&null!=t.clientX&&(r=e.target.ownerDocument||I,n=r.documentElement,a=r.body,e.pageX=t.clientX+(n&&n.scrollLeft||a&&a.scrollLeft||0)-(n&&n.clientLeft||a&&a.clientLeft||0),e.pageY=t.clientY+(n&&n.scrollTop||a&&a.scrollTop||0)-(n&&n.clientTop||a&&a.clientTop||0)),!e.relatedTarget&&s&&(e.relatedTarget=s===e.target?t.toElement:s),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==safeActiveElement()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===safeActiveElement()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(D.nodeName(this,"input")&&"checkbox"===this.type&&this.click)return this.click(),!1},_default:function(e){return D.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,a,r){var n=D.extend(new D.Event,a,{type:e,isSimulated:!0,originalEvent:{}});r?D.event.trigger(n,null,t):D.event.dispatch.call(t,n),n.isDefaultPrevented()&&a.preventDefault()}},D.removeEvent=I.removeEventListener?function(e,t,a){e.removeEventListener&&e.removeEventListener(t,a,!1)}:function(e,t,a){var r="on"+t;e.detachEvent&&(typeof e[r]===W&&(e[r]=null),e.detachEvent(r,a))},D.Event=function(e,t){return this instanceof D.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?p:u):this.type=e,t&&D.extend(this,t),this.timeStamp=e&&e.timeStamp||D.now(),void(this[D.expando]=!0)):new D.Event(e,t)};var $=/^(?:input|select|textarea)$/i,Z=/^key/,Y=/^(?:mouse|pointer|contextmenu)|click/,G=/^(?:focusinfocus|focusoutblur)$/,J=/^([^.]*)(?:\.(.+)|)$/;D.Event.prototype={isDefaultPrevented:u,isPropagationStopped:u,isImmediatePropagationStopped:u,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=p,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=p,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=p,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},C.submitBubbles||(D.event.special.submit={setup:function(){return!D.nodeName(this,"form")&&void D.event.add(this,"click._submit keypress._submit",(function(e){var t=e.target,a=D.nodeName(t,"input")||D.nodeName(t,"button")?t.form:void 0;a&&!D._data(a,"submitBubbles")&&(D.event.add(a,"submit._submit",(function(e){e._submit_bubble=!0})),D._data(a,"submitBubbles",!0))}))},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&D.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return!D.nodeName(this,"form")&&void D.event.remove(this,"._submit")}}),C.changeBubbles||(D.event.special.change={setup:function(){return $.test(this.nodeName)?("checkbox"!==this.type&&"radio"!==this.type||(D.event.add(this,"propertychange._change",(function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)})),D.event.add(this,"click._change",(function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),D.event.simulate("change",this,e,!0)}))),!1):void D.event.add(this,"beforeactivate._change",(function(e){var t=e.target;$.test(t.nodeName)&&!D._data(t,"changeBubbles")&&(D.event.add(t,"change._change",(function(e){!this.parentNode||e.isSimulated||e.isTrigger||D.event.simulate("change",this.parentNode,e,!0)})),D._data(t,"changeBubbles",!0))}))},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type)return e.handleObj.handler.apply(this,arguments)},teardown:function(){return D.event.remove(this,"._change"),!$.test(this.nodeName)}}),C.focusinBubbles||D.each({focus:"focusin",blur:"focusout"},(function(e,t){var a=function(e){D.event.simulate(t,e.target,D.event.fix(e),!0)};D.event.special[t]={setup:function(){var r=this.ownerDocument||this,n=D._data(r,t);n||r.addEventListener(e,a,!0),D._data(r,t,(n||0)+1)},teardown:function(){var r=this.ownerDocument||this,n=D._data(r,t)-1;n?D._data(r,t,n):(r.removeEventListener(e,a,!0),D._removeData(r,t))}}})),D.fn.extend({on:function(e,t,a,r,n){var o,s;if("object"==typeof e){for(o in"string"!=typeof t&&(a=a||t,t=void 0),e)this.on(o,t,a,e[o],n);return this}if(null==a&&null==r?(r=t,a=t=void 0):null==r&&("string"==typeof t?(r=a,a=void 0):(r=a,a=t,t=void 0)),!1===r)r=u;else if(!r)return this;return 1===n&&(s=r,r=function(e){return D().off(e),s.apply(this,arguments)},r.guid=s.guid||(s.guid=D.guid++)),this.each((function(){D.event.add(this,e,r,a,t)}))},one:function(e,t,a,r){return this.on(e,t,a,r,1)},off:function(e,t,a){var r,n;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,D(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(n in e)this.off(n,t,e[n]);return this}return!1!==t&&"function"!=typeof t||(a=t,t=void 0),!1===a&&(a=u),this.each((function(){D.event.remove(this,e,a,t)}))},trigger:function(e,t){return this.each((function(){D.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var a=this[0];if(a)return D.event.trigger(e,t,a,!0)}}),D.fn.delay=function(e,t){return e=D.fx&&D.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,a){var r=setTimeout(t,e);a.stop=function(){clearTimeout(r)}}))};var K=D.now(),Q=/\?/,V=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;D.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var a,r=null,n=D.trim(t+"");return n&&!D.trim(n.replace(V,(function(e,t,n,o){return a&&t&&(r=0),0===r?e:(a=n||t,r+=!o-!n,"")})))?Function("return "+n)():D.error("Invalid JSON: "+t)},D.parseXML=function(t){var a,r;if(!t||"string"!=typeof t)return null;try{e.DOMParser?(r=new DOMParser,a=r.parseFromString(t,"text/xml")):(a=new ActiveXObject("Microsoft.XMLDOM"),a.async="false",a.loadXML(t))}catch(n){a=void 0}return a&&a.documentElement&&!a.getElementsByTagName("parsererror").length||D.error("Invalid XML: "+t),a};var ee,te,ae=/#.*$/,re=/([?&])_=[^&]*/,ne=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,oe=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,se=/^(?:GET|HEAD)$/,ie=/^\/\//,le=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,ce={},pe={},ue="*/".concat("*");try{te=location.href}catch(ke){te=I.createElement("a"),te.href="",te=te.href}ee=le.exec(te.toLowerCase())||[],D.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:te,type:"GET",isLocal:oe.test(ee[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ue,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":D.parseJSON,"text xml":D.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?h(h(e,D.ajaxSettings),t):h(D.ajaxSettings,e)},ajaxPrefilter:d(ce),ajaxTransport:d(pe),ajax:function(e,t){function a(e,t,a,r){var n,p,f,S,T,x=t;2!==E&&(E=2,i&&clearTimeout(i),c=void 0,s=r||"",k.readyState=e>0?4:0,n=e>=200&&e<300||304===e,a&&(S=g(u,k,a)),S=m(u,S,k,n),n?(u.ifModified&&(T=k.getResponseHeader("Last-Modified"),T&&(D.lastModified[o]=T),T=k.getResponseHeader("etag"),T&&(D.etag[o]=T)),204===e||"HEAD"===u.type?x="nocontent":304===e?x="notmodified":(x=S.state,p=S.data,f=S.error,n=!f)):(f=x,!e&&x||(x="error",e<0&&(e=0))),k.status=e,k.statusText=(t||x)+"",n?v.resolveWith(d,[p,x,k]):v.rejectWith(d,[k,x,f]),k.statusCode(b),b=void 0,l&&h.trigger(n?"ajaxSuccess":"ajaxError",[k,u,n?p:f]),y.fireWith(d,[k,x]),l&&(h.trigger("ajaxComplete",[k,u]),--D.active||D.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,n,o,s,i,l,c,p,u=D.ajaxSetup({},t),d=u.context||u,h=u.context&&(d.nodeType||d.jquery)?D(d):D.event,v=D.Deferred(),y=D.Callbacks("once memory"),b=u.statusCode||{},S={},T={},E=0,x="canceled",k={readyState:0,getResponseHeader:function(e){var t;if(2===E){if(!p)for(p={};t=ne.exec(s);)p[t[1].toLowerCase()]=t[2];t=p[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===E?s:null},setRequestHeader:function(e,t){var a=e.toLowerCase();return E||(e=T[a]=T[a]||e,S[e]=t),this},overrideMimeType:function(e){return E||(u.mimeType=e),this},statusCode:function(e){var t;if(e)if(E<2)for(t in e)b[t]=[b[t],e[t]];else k.always(e[k.status]);return this},abort:function(e){var t=e||x;return c&&c.abort(t),a(0,t),this}};if(v.promise(k).complete=y.add,k.success=k.done,k.error=k.fail,u.url=((e||u.url||te)+"").replace(ae,"").replace(ie,ee[1]+"//"),u.type=t.method||t.type||u.method||u.type,u.dataTypes=D.trim(u.dataType||"*").toLowerCase().match(N)||[""],null==u.crossDomain&&(r=le.exec(u.url.toLowerCase()),u.crossDomain=!(!r||r[1]===ee[1]&&r[2]===ee[2]&&(r[3]||("http:"===r[1]?"80":"443"))===(ee[3]||("http:"===ee[1]?"80":"443")))),u.data&&u.processData&&"string"!=typeof u.data&&(u.data=D.param(u.data,u.traditional)),f(ce,u,t,k),2===E)return k;for(n in l=u.global,l&&0===D.active++&&D.event.trigger("ajaxStart"),u.type=u.type.toUpperCase(),u.hasContent=!se.test(u.type),o=u.url,u.hasContent||(u.data&&(o=u.url+=(Q.test(o)?"&":"?")+u.data,delete u.data),!1===u.cache&&(u.url=re.test(o)?o.replace(re,"$1_="+K++):o+(Q.test(o)?"&":"?")+"_="+K++)),u.ifModified&&(D.lastModified[o]&&k.setRequestHeader("If-Modified-Since",D.lastModified[o]),D.etag[o]&&k.setRequestHeader("If-None-Match",D.etag[o])),(u.data&&u.hasContent&&!1!==u.contentType||t.contentType)&&k.setRequestHeader("Content-Type",u.contentType),k.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+("*"!==u.dataTypes[0]?", "+ue+"; q=0.01":""):u.accepts["*"]),u.headers)k.setRequestHeader(n,u.headers[n]);if(u.beforeSend&&(!1===u.beforeSend.call(d,k,u)||2===E))return k.abort();for(n in x="abort",{success:1,error:1,complete:1})k[n](u[n]);if(c=f(pe,u,t,k)){k.readyState=1,l&&h.trigger("ajaxSend",[k,u]),u.async&&u.timeout>0&&(i=setTimeout((function(){k.abort("timeout")}),u.timeout));try{E=1,c.send(S,a)}catch(j){if(!(E<2))throw j;a(-1,j)}}else a(-1,"No Transport");return k},getJSON:function(e,t,a){return D.get(e,t,a,"json")},getScript:function(e,t){return D.get(e,void 0,t,"script")}}),D.each(["get","post"],(function(e,t){D[t]=function(e,a,r,n){return D.isFunction(a)&&(n=n||r,r=a,a=void 0),D.ajax({url:e,type:t,dataType:n,data:a,success:r})}})),D.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){D.fn[t]=function(e){return this.on(t,e)}})),D._evalUrl=function(e){return D.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})};var de=/%20/g,fe=/\[\]$/,he=/\r?\n/g,ge=/^(?:submit|button|image|reset|file)$/i,me=/^(?:input|select|textarea|keygen)/i;D.param=function(e,t){var a,r=[],n=function(e,t){t=D.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=D.ajaxSettings&&D.ajaxSettings.traditional),D.isArray(e)||e.jquery&&!D.isPlainObject(e))D.each(e,(function(){n(this.name,this.value)}));else for(a in e)v(a,e[a],t,n);return r.join("&").replace(de,"+")},D.fn.extend({serialize:function(){return D.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=D.prop(this,"elements");return e?D.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!D(this).is(":disabled")&&me.test(this.nodeName)&&!ge.test(e)&&(this.checked||!rcheckableType.test(e))})).map((function(e,t){var a=D(this).val();return null==a?null:D.isArray(a)?D.map(a,(function(e){return{name:t.name,value:e.replace(he,"\r\n")}})):{name:t.name,value:a.replace(he,"\r\n")}})).get()}}),D.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&y()||b()}:y;var ve=0,ye={},be=D.ajaxSettings.xhr();e.ActiveXObject&&D(e).on("unload",(function(){for(var e in ye)ye[e](void 0,!0)})),C.cors=!!be&&"withCredentials"in be,be=C.ajax=!!be,be&&D.ajaxTransport((function(e){var t;if(!e.crossDomain||C.cors)return{send:function(a,r){var n,o=e.xhr(),s=++ve;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(n in e.xhrFields)o[n]=e.xhrFields[n];for(n in e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||a["X-Requested-With"]||(a["X-Requested-With"]="XMLHttpRequest"),a)void 0!==a[n]&&o.setRequestHeader(n,a[n]+"");o.send(e.hasContent&&e.data||null),t=function(a,n){var i,l,c;if(t&&(n||4===o.readyState))if(delete ye[s],t=void 0,o.onreadystatechange=D.noop,n)4!==o.readyState&&o.abort();else{c={},i=o.status,"string"==typeof o.responseText&&(c.text=o.responseText);try{l=o.statusText}catch(p){l=""}i||!e.isLocal||e.crossDomain?1223===i&&(i=204):i=c.text?200:404}c&&r(i,l,c,o.getAllResponseHeaders())},e.async?4===o.readyState?setTimeout(t):o.onreadystatechange=ye[s]=t:t()},abort:function(){t&&t(void 0,!0)}}})),D.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return D.globalEval(e),e}}}),D.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)})),D.ajaxTransport("script",(function(e){if(e.crossDomain){var t,a=I.head||D("head")[0]||I.documentElement;return{send:function(r,n){t=I.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,a){(a||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,a||n(200,"success"))},a.insertBefore(t,a.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}}));var Se=[],Te=/(=)\?(?=&|$)|\?\?/;D.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Se.pop()||D.expando+"_"+K++;return this[e]=!0,e}}),D.ajaxPrefilter("json jsonp",(function(t,a,r){var n,o,s,i=!1!==t.jsonp&&(Te.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Te.test(t.data)&&"data");if(i||"jsonp"===t.dataTypes[0])return n=t.jsonpCallback=D.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,i?t[i]=t[i].replace(Te,"$1"+n):!1!==t.jsonp&&(t.url+=(Q.test(t.url)?"&":"?")+t.jsonp+"="+n),t.converters["script json"]=function(){return s||D.error(n+" was not called"),s[0]},t.dataTypes[0]="json",o=e[n],e[n]=function(){s=arguments},r.always((function(){e[n]=o,t[n]&&(t.jsonpCallback=a.jsonpCallback,Se.push(n)),s&&D.isFunction(o)&&o(s[0]),s=o=void 0})),"script"})),D.parseHTML=function(e,t,a){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(a=t,t=!1),t=t||I;var r=rsingleTag.exec(e),n=!a&&[];return r?[t.createElement(r[1])]:(r=D.buildFragment([e],t,n),n&&n.length&&D(n).remove(),D.merge([],r.childNodes))},"function"==typeof define&&define.amd&&define("jquery",[],(function(){return D}));var Ee=e.jQuery,xe=e.$;return D.noConflict=function(t){return e.$===D&&(e.$=xe),t&&e.jQuery===D&&(e.jQuery=Ee),D},typeof t===W&&(e.jQuery=e.$=D),D})),function(e){function t(e,t,l){var c,p,h,g,m,v,y,b,S,T=0,E=[],x=0,k=!1,j=[],w=[],A=!1;if(l=l||{},c=l.encoding||"UTF8",S=l.numRounds||1,S!==parseInt(S,10)||1>S)throw Error("numRounds must a integer >= 1");if("SHA-1"!==e)throw Error("Chosen SHA variant is not supported");m=512,v=d,y=f,g=160,b=function(e){return e.slice()},h=i(t,c),p=u(e),this.setHMACKey=function(t,a,r){var n;if(!0===k)throw Error("HMAC key already set");if(!0===A)throw Error("Cannot set HMAC key after calling update");if(c=(r||{}).encoding||"UTF8",a=i(a,c)(t),t=a.binLen,a=a.value,n=m>>>3,r=n/4-1,n<t/8){for(a=y(a,t,0,u(e),g);a.length<=r;)a.push(0);a[r]&=4294967040}else if(n>t/8){for(;a.length<=r;)a.push(0);a[r]&=4294967040}for(t=0;t<=r;t+=1)j[t]=909522486^a[t],w[t]=1549556828^a[t];p=v(j,p),T=m,k=!0},this.update=function(e){var t,a,r,n=0,o=m>>>5;for(t=h(e,E,x),e=t.binLen,a=t.value,t=e>>>5,r=0;r<t;r+=o)n+m<=e&&(p=v(a.slice(r,r+o),p),n+=m);T+=n,E=a.slice(n>>>5),x=e%m,A=!0;var s=function(e){for(var t="",a=0;a<5;a++)for(var r=0;r<4;r++){var n=e[a]>>>8*r;n&=255;var o=Number(n).toString(16);o=o.length<2?"0"+o:o,t+=o}return t};return s(p)},this.getHash=function(t,i){var l,c,d,f;if(!0===k)throw Error("Cannot call getHash after setting HMAC key");switch(d=s(i),t){case"HEX":l=function(e){return a(e,g,d)};break;case"B64":l=function(e){return r(e,g,d)};break;case"BYTES":l=function(e){return n(e,g)};break;case"ARRAYBUFFER":try{c=new ArrayBuffer(0)}catch(h){throw Error("ARRAYBUFFER not supported by this environment")}l=function(e){return o(e,g)};break;default:throw Error("format must be HEX, B64, BYTES, or ARRAYBUFFER")}for(f=y(E.slice(),x,T,b(p),g),c=1;c<S;c+=1)f=y(f,g,0,u(e),g);return l(f)},this.getHMAC=function(t,i){var l,c,d,f;if(!1===k)throw Error("Cannot call getHMAC without first setting HMAC key");switch(d=s(i),t){case"HEX":l=function(e){return a(e,g,d)};break;case"B64":l=function(e){return r(e,g,d)};break;case"BYTES":l=function(e){return n(e,g)};break;case"ARRAYBUFFER":try{l=new ArrayBuffer(0)}catch(h){throw Error("ARRAYBUFFER not supported by this environment")}l=function(e){return o(e,g)};break;default:throw Error("outputFormat must be HEX, B64, BYTES, or ARRAYBUFFER")}return c=y(E.slice(),x,T,b(p),g),f=v(w,u(e)),f=y(c,g,m,f,g),l(f)}}function a(e,t,a){var r,n,o="";for(t/=8,r=0;r<t;r+=1)n=e[r>>>2]>>>8*(3+r%4*-1),o+="0123456789abcdef".charAt(n>>>4&15)+"0123456789abcdef".charAt(15&n);return a.outputUpper?o.toUpperCase():o}function r(e,t,a){var r,n,o,s="",i=t/8;for(r=0;r<i;r+=3)for(n=r+1<i?e[r+1>>>2]:0,o=r+2<i?e[r+2>>>2]:0,o=(e[r>>>2]>>>8*(3+r%4*-1)&255)<<16|(n>>>8*(3+(r+1)%4*-1)&255)<<8|o>>>8*(3+(r+2)%4*-1)&255,n=0;4>n;n+=1)s+=8*r+6*n<=t?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(o>>>6*(3-n)&63):a.b64Pad;return s}function n(e,t){var a,r,n="",o=t/8;for(a=0;a<o;a+=1)r=e[a>>>2]>>>8*(3+a%4*-1)&255,n+=String.fromCharCode(r);return n}function o(e,t){var a,r=t/8,n=new ArrayBuffer(r);for(a=0;a<r;a+=1)n[a]=e[a>>>2]>>>8*(3+a%4*-1)&255;return n}function s(e){var t={outputUpper:!1,b64Pad:"=",shakeLen:-1};if(e=e||{},t.outputUpper=e.outputUpper||!1,!0===e.hasOwnProperty("b64Pad")&&(t.b64Pad=e.b64Pad),"boolean"!=typeof t.outputUpper)throw Error("Invalid outputUpper formatting option");if("string"!=typeof t.b64Pad)throw Error("Invalid b64Pad formatting option");return t}function i(e,t){var a;switch(t){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(e){case"HEX":a=function(e,t,a){var r,n,o,s,i,l=e.length;if(0!==l%2)throw Error("String of HEX type must be in byte increments");for(t=t||[0],a=a||0,i=a>>>3,r=0;r<l;r+=2){if(n=parseInt(e.substr(r,2),16),isNaN(n))throw Error("String of HEX type contains invalid characters");for(s=(r>>>1)+i,o=s>>>2;t.length<=o;)t.push(0);t[o]|=n<<8*(3+s%4*-1)}return{value:t,binLen:4*l+a}};break;case"TEXT":a=function(e,a,r){var n,o,s,i,l,c,p,u,d=0;if(a=a||[0],r=r||0,l=r>>>3,"UTF8"===t)for(u=3,s=0;s<e.length;s+=1)for(n=e.charCodeAt(s),o=[],128>n?o.push(n):2048>n?(o.push(192|n>>>6),o.push(128|63&n)):55296>n||57344<=n?o.push(224|n>>>12,128|n>>>6&63,128|63&n):(s+=1,n=65536+((1023&n)<<10|1023&e.charCodeAt(s)),o.push(240|n>>>18,128|n>>>12&63,128|n>>>6&63,128|63&n)),i=0;i<o.length;i+=1){for(p=d+l,c=p>>>2;a.length<=c;)a.push(0);a[c]|=o[i]<<8*(u+p%4*-1),d+=1}else if("UTF16BE"===t||"UTF16LE"===t)for(u=2,s=0;s<e.length;s+=1){for(n=e.charCodeAt(s),"UTF16LE"===t&&(i=255&n,n=i<<8|n>>>8),p=d+l,c=p>>>2;a.length<=c;)a.push(0);a[c]|=n<<8*(u+p%4*-1),d+=2}return{value:a,binLen:8*d+r}};break;case"B64":a=function(e,t,a){var r,n,o,s,i,l,c,p=0;if(-1===e.search(/^[a-zA-Z0-9=+\/]+$/))throw Error("Invalid character in base-64 string");if(n=e.indexOf("="),e=e.replace(/\=/g,""),-1!==n&&n<e.length)throw Error("Invalid '=' found in base-64 string");for(t=t||[0],a=a||0,l=a>>>3,n=0;n<e.length;n+=4){for(i=e.substr(n,4),o=s=0;o<i.length;o+=1)r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(i[o]),s|=r<<18-6*o;for(o=0;o<i.length-1;o+=1){for(c=p+l,r=c>>>2;t.length<=r;)t.push(0);t[r]|=(s>>>16-8*o&255)<<8*(3+c%4*-1),p+=1}}return{value:t,binLen:8*p+a}};break;case"BYTES":a=function(e,t,a){var r,n,o,s,i;for(t=t||[0],a=a||0,o=a>>>3,n=0;n<e.length;n+=1)r=e.charCodeAt(n),i=n+o,s=i>>>2,t.length<=s&&t.push(0),t[s]|=r<<8*(3+i%4*-1);return{value:t,binLen:8*e.length+a}};break;case"ARRAYBUFFER":try{a=new ArrayBuffer(0)}catch(r){throw Error("ARRAYBUFFER not supported by this environment")}a=function(e,t,a){var r,n,o,s;for(t=t||[0],a=a||0,n=a>>>3,r=0;r<e.byteLength;r+=1)s=r+n,o=s>>>2,t.length<=o&&t.push(0),t[o]|=e[r]<<8*(3+s%4*-1);return{value:t,binLen:8*e.byteLength+a}};break;default:throw Error("format must be HEX, TEXT, B64, BYTES, or ARRAYBUFFER")}return a}function l(e,t){return e<<t|e>>>32-t}function c(e,t){var a=(65535&e)+(65535&t);return((e>>>16)+(t>>>16)+(a>>>16)&65535)<<16|65535&a}function p(e,t,a,r,n){var o=(65535&e)+(65535&t)+(65535&a)+(65535&r)+(65535&n);return((e>>>16)+(t>>>16)+(a>>>16)+(r>>>16)+(n>>>16)+(o>>>16)&65535)<<16|65535&o}function u(e){if("SHA-1"!==e)throw Error("No SHA variants supported");return[1732584193,4023233417,2562383102,271733878,3285377520]}function d(e,t){var a,r,n,o,s,i,u,d=[];for(a=t[0],r=t[1],n=t[2],o=t[3],s=t[4],u=0;80>u;u+=1)d[u]=16>u?e[u]:l(d[u-3]^d[u-8]^d[u-14]^d[u-16],1),i=20>u?p(l(a,5),r&n^~r&o,s,1518500249,d[u]):40>u?p(l(a,5),r^n^o,s,1859775393,d[u]):60>u?p(l(a,5),r&n^r&o^n&o,s,2400959708,d[u]):p(l(a,5),r^n^o,s,3395469782,d[u]),s=o,o=n,n=l(r,30),r=a,a=i;return t[0]=c(a,t[0]),t[1]=c(r,t[1]),t[2]=c(n,t[2]),t[3]=c(o,t[3]),t[4]=c(s,t[4]),t}function f(e,t,a,r){var n;for(n=15+(t+65>>>9<<4);e.length<=n;)e.push(0);for(e[t>>>5]|=128<<24-t%32,t+=a,e[n]=4294967295&t,e[n-1]=t/4294967296|0,t=e.length,n=0;n<t;n+=16)r=d(e.slice(n,n+16),r);return r}"function"==typeof define&&define.amd?define((function(){return t})):"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(module.exports=t),exports=t):e.jsSHA=t}(this),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&(define.amd||define.cmd)?define(t):e.WosSys=t()}(this,(function(){"use strict";function WosSys(e){this.appid=e.appid,this.bucket=e.bucket,this.wosurl=e.wosurl,this.tasks=[],e.getAppSign&&(this.getAppSign=getEncodeFn(e.getAppSign))}function getEncodeFn(e){return function(t){e((function(e){decodeURIComponent(e)===e&&encodeURIComponent(e)!==e||t(e)}))}}function uploadFile(){var e=arguments,t=e[0],a=e[1],r=a.onUploadSuccess,n=a.onUploadError,o=a.onUploadProgress,s=(a.bucketName,a.remotePath),i=a.ttl,l=a.insertOnly,c=(a.taskReady,a.optSliceSize,a.alias),p=this;if(s=fixPath(s),c=c||"",t.size>MAX_UNSLICE_FILE_SIZE)sliceUploadFile.apply(p,arguments);else{var u=setGlobalTask.call(p,e,uploadFile);p.getAppSign((function(e){var a=p.getCgiUrl(s),d=(t.size,new FormData),f=decodeURIComponent(e),h={};h.file=t,h.globalTask=u,"cancel"!==h.globalTask.state&&"paused"!==h.globalTask.state&&(h.sliceSize=MAX_UNSLICE_FILE_SIZE,getSliceSHA1.call(p,h).done((function(e){var s=e.length,u=e[s-1].datasha;d.append("op","upload"),d.append("filecontent",t),d.append("sha",u),d.append("ttl",i),0!=c.length&&d.append("alias",c),l>=0&&d.append("insertOnly",l);var g={method:"POST",url:a,formData:d,processData:!1,contentType:!1,sign:f,offset:!1,onprogress:function(e){e.allhit=rest.data.allhit,o&&o(e),p.trigger(EventType.uploadProgress,e)},success:function(e){h.globalTask.state="success",r&&r(e),p.trigger(EventType.uploadSuccess,e)},error:function(e){"cancel"!==h.globalTask.state&&"paused"!==h.globalTask.state&&(n&&n(e||{error_msg:"未知错误!"}),p.trigger(EventType.uploadError,e||{error_msg:"未知错误!"}))}};h.globalTask.$uploadAjax=ajax(g).fail((function(){var e={code:-1,message:"get slice sha1 error"};n&&n(e),p.trigger(EventType.uploadError,e)}))})))}))}}function sliceUploadFile(){var args=arguments,file=args[0],params=args[1],success=params.onUploadSuccess,error=params.onUploadError,onprogress=params.onUploadProgress,bucketName=params.bucketName,remotePath=params.remotePath,ttl=params.ttl,insertOnly=params.insertOnly,taskReady=params.taskReady,optSliceSize=params.optSliceSize,alias=params.alias,bizAttr=params.bizAttr,that=this,globalTask=setGlobalTask.call(that,args,sliceUploadFile);remotePath=fixPath(remotePath),alias=alias||"",that.getAppSign((function(sign){var opt={};opt.globalTask=globalTask,"cancel"!==opt.globalTask.state&&"paused"!==opt.globalTask.state&&(optSliceSize=that.getSliceSize(optSliceSize),opt.onprogress=onprogress,opt.bucket=bucketName,opt.path=remotePath,opt.file=file,opt.insertOnly=insertOnly,opt.sliceSize=optSliceSize||1048576,opt.appid=that.appid,opt.sign=decodeURIComponent(sign),opt.biz_attr=bizAttr||"",opt.ttl=ttl,opt.index=opt.globalTask.index||0,opt.alias=alias,getSliceSHA1.call(that,opt).done((function(uploadparts){if("cancel"!==opt.globalTask.state&&"paused"!==opt.globalTask.state){opt.uploadparts=uploadparts;var len=uploadparts.length;opt.sha=uploadparts[len-1].datasha,sliceInit.call(that,opt).done((function(res){if("cancel"!==opt.globalTask.state&&"paused"!==opt.globalTask.state){res=res||{};var rest=eval("("+res+")"),data=rest.data||{};sliceFinish.call(that,opt).done((function(e){opt.globalTask.state="success",success&&success(e),that.trigger(EventType.uploadSuccess,res)})).fail((function(e){error&&error({code:-1,message:e.message||"slice finish error"}),that.trigger(EventType.uploadError,e)}))}})).fail((function(e){e=e||{},error&&error({code:e.code||-1,message:e.message||"upload slice file error"}),that.trigger(EventType.uploadError,e)}))}})).fail((function(){if("cancel"!==opt.globalTask.state&&"paused"!==opt.globalTask.state){var e={code:-1,message:"get slice sha1 error"};error&&error(e),that.trigger(EventType.uploadError,e)}})))}))}function preCheckUploadFile(){var args=arguments,file=args[0],params=args[1],success=params.onUploadSuccess,error=params.onUploadError,onprogress=params.onUploadProgress,bucketName=params.bucketName,remotePath=params.remotePath,ttl=params.ttl,insertOnly=params.insertOnly,taskReady=params.taskReady,optSliceSize=params.optSliceSize,alias=params.alias,that=this;if(remotePath=fixPath(remotePath),alias=alias||"",file.size>MAX_UNSLICE_FILE_SIZE)preCheckSliceUploadFile.apply(that,arguments);else{var globalTask=setGlobalTask.call(that,args,preCheckUploadFile);that.getAppSign((function(sign){var url=that.getCgiUrl(remotePath),contlen=file.size,formData=new FormData,deurlsign=decodeURIComponent(sign),opt={};opt.globalTask=globalTask,"cancel"!==opt.globalTask.state&&"paused"!==opt.globalTask.state&&(opt.file=file,opt.sliceSize=0,opt.path=remotePath,opt.sign=deurlsign,opt.onprogress=onprogress,opt.ttl=ttl,opt.alias=alias,getSliceSHA1.call(that,opt).done((function(uploadparts){var len=uploadparts.length;opt.sha=uploadparts[len-1].datasha,opt.uploadparts=uploadparts,preCheck.call(that,opt).done((function(res){var ress=res||{},rest=eval("("+ress+")");if(0==rest.data.allhit){if("cancel"===opt.globalTask.state||"paused"===opt.globalTask.state)return;var sha=uploadparts[len-1].datasha;formData.append("op","upload"),formData.append("filecontent",file),formData.append("sha",sha),formData.append("ttl",ttl),0!=alias.length&&formData.append("alias",alias),insertOnly>=0&&formData.append("insertOnly",insertOnly);var ajaxParams={method:"POST",url:url,formData:formData,processData:!1,contentType:!1,sign:deurlsign,offset:!1,onprogress:function(e){e.allhit=rest.data.allhit,onprogress&&onprogress(e),that.trigger(EventType.uploadProgress,e)},success:function(e){success&&success(e),that.trigger(EventType.uploadSuccess,e)},error:function(e){"cancel"!==opt.globalTask.state&&"paused"!==opt.globalTask.state&&(error&&error(e||{error_msg:"未知错误!"}),that.trigger(EventType.uploadError,e||{error_msg:"未知错误!"}))}};opt.globalTask.$uploadAjax=ajax(ajaxParams).fail((function(){if("cancel"!==opt.globalTask.state&&"paused"!==opt.globalTask.state){var e={code:-1,message:"get slice sha1 error"};error&&error(e),that.trigger(EventType.uploadError,e)}}))}else 1==rest.data.allhit?(success&&success(res),that.trigger(EventType.uploadSuccess,res)):(error&&error(res),that.trigger(EventType.uploadError,res))})).fail((function(e){e=e||{},error&&error({code:e.code||-1,message:e.message||"upload slice file error"}),that.trigger(EventType.uploadError,e)}))})).fail((function(){if("cancel"!==opt.globalTask.state&&"paused"!==opt.globalTask.state){var e={code:-1,message:"get slice sha1 error"};error&&error(e),that.trigger(EventType.uploadError,e)}})))}))}}function preCheckSliceUploadFile(){var args=arguments,file=args[0],params=args[1],success=params.onUploadSuccess,error=params.onUploadError,onprogress=params.onUploadProgress,bucketName=params.bucketName,remotePath=params.remotePath,ttl=params.ttl,insertOnly=params.insertOnly,taskReady=params.taskReady,optSliceSize=params.optSliceSize,alias=params.alias,bizAttr=params.bizAttr,that=this,globalTask=setGlobalTask.call(that,args,preCheckSliceUploadFile);remotePath=fixPath(remotePath),alias=alias||"",that.getAppSign((function(sign){var opt={};opt.globalTask=globalTask,"cancel"!==opt.globalTask.state&&"paused"!==opt.globalTask.state&&(optSliceSize=that.getSliceSize(optSliceSize),opt.onprogress=onprogress,opt.bucket=bucketName,opt.path=remotePath,opt.file=file,opt.insertOnly=insertOnly,opt.sliceSize=optSliceSize||1048576,opt.appid=that.appid,opt.sign=decodeURIComponent(sign),opt.biz_attr=bizAttr||"",opt.ttl=ttl,opt.index=opt.globalTask.index||0,opt.alias=alias,opt.sha=params.fileSHA,getSliceSHA1.call(that,opt).done((function(uploadparts){"cancel"!==opt.globalTask.state&&"paused"!==opt.globalTask.state&&(opt.uploadparts=uploadparts,preCheck.call(that,opt).done((function(res){var ress=res||{},rest=eval("("+ress+")");if(0==rest.data.allhit){if("cancel"===opt.globalTask.state||"paused"===opt.globalTask.state)return;var session=rest.data.session,sliceSize=parseInt(rest.data.slice_size);opt.session=session,opt.slice_size=sliceSize,opt.offset=0,opt.uploadparts=rest.data.uploadparts,sliceUpload.call(that,opt).done((function(e){"cancel"!==opt.globalTask.state&&"paused"!==opt.globalTask.state&&sliceFinish.call(that,opt).done((function(e){opt.globalTask.state="success",success&&success(e),that.trigger(EventType.uploadSuccess,e)})).fail((function(e){error&&error({code:-1,message:e.message||"slice finish error"}),that.trigger(EventType.uploadError,e)}))})).fail((function(e){e=e||{},error&&error({code:e.code||-1,message:e.message||"upload slice file error"}),that.trigger(EventType.uploadError,e)}))}else 1==rest.data.allhit?(opt.globalTask.state="success",success&&success(res),that.trigger(EventType.uploadSuccess,res)):(error&&error(res),that.trigger(EventType.uploadError,res))})).fail((function(e){e=e||{},error&&error({code:e.code||-1,message:e.message||"pre check error"}),that.trigger(EventType.uploadError,e)})))})).fail((function(){if("cancel"!==opt.globalTask.state&&"paused"!==opt.globalTask.state){var e={code:-1,message:"get slice sha1 error"};error&&error(e),that.trigger(EventType.uploadError,e)}})))}))}function guid(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function setGlobalTask(e,t){var a,r=this,n=e[1].taskReady,o=e[1].taskId;return o?a=r.tasks[o]:(o=guid(),a={id:o,index:0,uploadparts:[],state:"uploading",$uploadAjax:null,cancel:function(){a.$uploadAjax&&a.$uploadAjax.abort(),r.trigger(EventType.uploadCanceled,o)},pause:function(){a.$uploadAjax&&a.$uploadAjax.abort()},resume:function(a){e[1].taskId=a,t.call(r,e[0],e[1])}},r.tasks[o]=a,n&&"function"==typeof n&&n(o)),a}function fixPath(e,t){if(!e)return"";var a=this;return e=e.replace(/(^\/*)|(\/*$)/g,""),e="folder"==t?encodeURIComponent(e+"/").replace(/%2F/g,"/"):encodeURIComponent(e).replace(/%2F/g,"/"),a&&(a.path="/"+a.appid+"/"+a.bucket+"/"+e),e}function getrealSHA1(e){var t=new window.jsSHA("SHA-1","BYTES"),a=(t.update(e),t.getHash("HEX"));return a}function getSliceSHA1(e){var t=this,a=$.Deferred();if(e.globalTask.uploadparts&&0!==e.globalTask.uploadparts.length)return a.resolve(e.globalTask.uploadparts),a.promise();var r=0,n=e.sliceSize,o=new FileReader,s=[],i=e.file;if(!(null==i||i.length<1)){if(i.size>MAX_UNSLICE_FILE_SIZE){var l=function(p){if("cancel"!==e.globalTask.state&&"paused"!==e.globalTask.state){var u=getrealSHA1(this.reader.content||this.reader.result),d=n;if(d+r>=i.size&&(d=i.size-r),s.push({offset:r,datalen:d,datasha:u}),r+=n,r<i.size){var f=r+n;f>i.size&&(f=i.size);var h={file:i,offset:r,reader:o,data:i.slice(r,f),onload:l,onerror:c};readAsBinStr.call(t,h)}else e.globalTask.uploadparts=s,a.resolve(s)}},c=function(){a.reject()},p={file:i,reader:o,offset:r,data:i.slice(r,r+n),onload:l,onerror:c};readAsBinStr.call(t,p)}else{var u=new window.jsSHA("SHA-1","BYTES"),d=function(t){if("cancel"!==e.globalTask.state&&"paused"!==e.globalTask.state){var r=(u.update(this.reader.content||this.reader.result),u.getHash("HEX"));s.push({offset:0,datalen:i.size,datasha:r}),e.globalTask.uploadparts=s,a.resolve(s)}},f=function(){a.reject()};p={file:i,reader:o,offset:r,data:i.slice(0,i.size),onload:d,onerror:f};readAsBinStr.call(t,p)}return a.promise()}}function preCheck(opt){if("cancel"!==opt.globalTask.state&&"paused"!==opt.globalTask.state){var defer=$.Deferred(),file=opt.file,that=this,url=this.getCgiUrl(opt.path),formData=new FormData;formData.append("op","upload_precheck"),formData.append("filesize",file.size),formData.append("slice_size",opt.sliceSize),formData.append("uploadparts",JSON.stringify(opt.uploadparts)),formData.append("ttl",opt.ttl),formData.append("sha",opt.sha),0!=opt.alias.length&&formData.append("alias",opt.alias);var ajaxParams={method:"POST",url:url,formData:formData,processData:!1,contentType:!1,sign:opt.sign,offset:opt.offset,success:function(res){res=res||{};var rest=eval("("+res+")");0==rest.code?defer.resolve(res):defer.reject(res)},error:function(e){defer.reject()}};return ajax(ajaxParams),defer.promise()}}function sliceInit(opt){var defer=$.Deferred(),file=opt.file,that=this,url=this.getCgiUrl(opt.path),formData=new FormData;formData.append("op","upload_slice_init"),formData.append("filesize",file.size),formData.append("slice_size",opt.sliceSize),formData.append("ttl",opt.ttl),0!=opt.alias.length&&formData.append("alias",opt.alias);var ajaxParams={method:"POST",url:url,formData:formData,processData:!1,contentType:!1,sign:opt.sign,offset:opt.offset,file:opt.file,success:function(res){if("cancel"!==opt.globalTask.state&&"paused"!==opt.globalTask.state){res=res||{};var rest=eval("("+res+")");if(0==rest.code){var session=rest.data.session,sliceSize=parseInt(rest.data.slice_size);opt.session=session,opt.slice_size=sliceSize,opt.offset=0,sliceUpload.call(that,opt).done((function(e){defer.resolve(e)})).fail((function(e){defer.reject(e)}))}else defer.reject(res)}},error:function(e){defer.reject()}};return ajax(ajaxParams),defer.promise()}function sliceUpload(opt){var that=this,defer=$.Deferred(),formData=new FormData,file=opt.file,slice_size=opt.slice_size,session=opt.session,totalSize=file.size;formData.append("op","upload_slice_data"),formData.append("session",session);var offset,datalen,index=opt.index||0,len=opt.uploadparts.length;if(index<len){var sha=opt.uploadparts[index].datasha;formData.append("sha",sha),offset=opt.uploadparts[index].offset,formData.append("offset",offset),datalen=opt.uploadparts[index].datalen}var targetOffset=offset+datalen;return formData.append("filecontent",that.slice.call(file,offset,targetOffset)),that.getAppSign((function(sign){opt.sign=decodeURIComponent(sign);var url=that.getCgiUrl(opt.path),ajaxParams={method:"POST",url:url,op:"upload_slice_data",formData:formData,processData:!1,contentType:!1,sign:opt.sign,offset:offset,file:opt.file,onprogress:function(e){opt.onprogress&&opt.onprogress(e)},success:function(res){if("cancel"!==opt.globalTask.state&&"paused"!==opt.globalTask.state){res=res||{};var rest=eval("("+res+")");0==rest.code?(opt.index=opt.index+1,opt.index<opt.uploadparts.length?sliceUpload.call(that,opt).done((function(e){defer.resolve(e)})).fail((function(){defer.reject()})):("function"==typeof opt.onprogress&&opt.onprogress(1),defer.resolve(res))):defer.reject(res)}},error:function(e){"cancel"!==opt.globalTask.state&&"paused"!==opt.globalTask.state&&defer.reject()}};opt.globalTask.$uploadAjax=ajax(ajaxParams)})),defer.promise()}function sliceFinish(opt){var that=this,defer=$.Deferred(),file=opt.file;return that.getAppSign((function(sign){opt.sign=decodeURIComponent(sign);var session=opt.session,url=that.getCgiUrl(opt.path),formData=new FormData;formData.append("op","upload_slice_finish"),formData.append("filesize",file.size),formData.append("session",session);var ajaxParams={method:"POST",url:url,formData:formData,processData:!1,contentType:!1,sign:opt.sign,offset:opt.offset,file:opt.file,onprogress:function(e){opt.onprogress&&opt.onprogress(e)},success:function(res){res=res||{};var rest=eval("("+res+")");0==rest.code?defer.resolve(res):defer.reject(res)},error:function(e){defer.reject()}};ajax(ajaxParams)})),defer.promise()}function readAsBinStr(e){var t,a,r=this,n=e.data,o=e.reader;FileReader.prototype.readAsBinaryString?t=FileReader.prototype.readAsBinaryString:FileReader.prototype.readAsArrayBuffer&&(t=function(e){var t="",a=this,r=new FileReader;r.onload=function(e){for(var n=new Uint8Array(r.result),o=n.byteLength,s=0;s<o;s++)t+=String.fromCharCode(n[s]);a.content=t,a.onload()},r.onabort=a.onabort,r.onerror=a.onerror,r.onloadstart=a.onloadstart,r.onprogress=a.onprogress,r.readAsArrayBuffer(e)}),t.call(o,n),o.onabort=function(){r.trigger(EventType.fileReadCanceled,o),e.onabort&&e.onabort(o)},o.onerror=function(){r.trigger(EventType.fileReadError,o),e.onerror&&e.onerror(o)},o.onloadstart=function(){0===e.offset&&(r.trigger(EventType.fileReadStart,o),e.onloadstart&&e.onloadstart(o))},o.onprogress=function(t){a=t.loaded;var n=e.offset+a,s=e.file.size,i=n/s>1?100:n/s*100,l={};l.readedPercent=i.toFixed(2),r.trigger(EventType.fileReadProgress,[o,l]),e.onprogress&&e.onprogress([o,l])},o.onload=function(){e.isGetSHA||(e.file.size<=MAX_UNSLICE_FILE_SIZE?r.trigger(EventType.fileReadSuccess,o):!e.isGetTotalReader&&e.offset+a>=e.file.size&&triggerFileRead.call(r,e.file)),e.onload&&e.onload(o)}}function triggerFileRead(e){var t=this,a=new FileReader,r=function(e){t.trigger(EventType.fileReadSuccess,e)},n=function(){t.trigger(EventType.fileReadError,{})},o={file:e,reader:a,offset:0,data:e.slice(0,e.size),isGetTotalReader:!0,onload:r,onerror:n};readAsBinStr.call(t,o)}function uploadProgress(e,t){var a,r,n=t.op;-1!==["upload_slice_data"].indexOf(n)?(a=t.offset+e.loaded,r=t.file.size):(a=e.loaded,r=e.total);var o=(new Date).getTime(),s=(o-uploadFileInfo.uploadStartTime)/1e3;uploadFileInfo.uploadStartTime=(new Date).getTime();var i=a/r>1?100:a/r*100;uploadFileInfo.uploadedPercent=i.toFixed(2);var l=a-uploadFileInfo.uploadedData;uploadFileInfo.uploadedData=a;var c=l/s;uploadFileInfo.uploadSpeed=formateSpeedUnit(c);var p=r-uploadFileInfo.uploadedData;return p=p<0?0:p,0!==c&&(uploadFileInfo.uploadRestTime=(p/c).toFixed(2)),uploadFileInfo}function formateSpeedUnit(e){var t="b/s";return e/1024>1&&(e/=1024,t="k/s"),e/1024>1&&(e/=1024,t="M/s"),e.toFixed(2)+t}function ajax(e){var t=e.op,a={type:e.method,url:e.url,data:e.formData,processData:e.processData,contentType:e.contentType,headers:{Authorization:e.sign.toString()},success:function(t){e.success&&e.success(t)},error:function(t){e.error&&e.error(t)}},r={xhr:function(){var t=$.ajaxSettings.xhr();return t.upload.onprogress=function(t){var a=uploadProgress(t,e);"function"==typeof e.onprogress&&e.onprogress&&e.onprogress(a)},t.upload.onloadstart=function(){uploadFileInfo.uploadStartTime=(new Date).getTime(),uploadFileInfo.uploadedData=e.offset},t}};return-1!==["upload","upload_slice_data"].indexOf(t)?$.ajax($.extend(!0,{},a,r)):$.ajax(a)}var $=window.jQuery.noConflict(!0),SLICE_SIZE_512K=524288,SLICE_SIZE_1M=1048576,SLICE_SIZE_2M=2097152,SLICE_SIZE_3M=3145728,SLICE_SIZE_4M=4194304,MAX_UNSLICE_FILE_SIZE=4194304,uploadFileInfo={uploadStartTime:0,uploadedData:0,uploadSpeed:0,uploadedPercent:0,uploadRestTime:0},_events={},EventType={fileReadStart:"fileReadStart",fileReadCanceled:"fileReadCanceled",fileReadSuccess:"fileReadSuccess",fileReadProgress:"fileReadProgress",fileReadError:"fileReadError",uploadCanceled:"uploadCanceled",uploadProgress:"uploadProgress",uploadSuccess:"uploadSuccess",uploadError:"uploadError",setTTLSuccess:"setTTLSuccess",setTTLError:"setTTLError",cancelUpload:"cancelUpload",pauseUpload:"pauseUpload",resumeUpload:"resumeUpload"},Eventable=function(){};return Eventable.prototype={listen:function(e,t){var a=_events[e];if(null!=a){for(var r=!1,n=0;n<a.length;n++)if(a[n]==t){r=!0;break}0==r&&a.push(t)}else a=new Array,a.push(t);_events[e]=a},remove:function(e,t){var a=_events[e];if(null!=a)for(var r=0;r<a.length;r++)if(a[r]==t){a.splice(r,1);break}},trigger:function(e){var t=_events[e];if(null!=t)for(var a=0;a<t.length;a++){var r=t[a];null!=r&&r.apply(null,Array.prototype.slice.call(arguments,1))}}},WosSys.prototype=Object.create(Eventable.prototype),WosSys.prototype.slice=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,WosSys.prototype.sliceSize=4194304,WosSys.prototype.getSliceSize=function(e){return 0==e?0:e<=SLICE_SIZE_512K?SLICE_SIZE_512K:e<=SLICE_SIZE_1M?SLICE_SIZE_1M:e<=SLICE_SIZE_2M?SLICE_SIZE_2M:e<=SLICE_SIZE_3M?SLICE_SIZE_3M:e<=SLICE_SIZE_4M?SLICE_SIZE_4M:SLICE_SIZE_1M},WosSys.prototype.getCgiUrl=function(e){var t=this.bucket,a=this.wosurl;return a+"/"+this.appid+"/"+t+"/"+e},WosSys.prototype.setFileTtl=function(){var e=arguments;if(1===e.length)var t=e[0],a=t.onUploadSuccess,r=t.onUploadError,n=(t.onUploadProgress,t.bucketName,t.remotePath),o=t.ttl;else a=e[0],r=e[1],n=(e[2],e[3],e[4]),o=e[5];var s=this;n=fixPath(n),s.getAppSign((function(e){var t=s.getCgiUrl(n),i=new FormData,l=decodeURIComponent(e);i.append("op","set_ttl"),i.append("ttl",o);var c={method:"POST",url:t,formData:i,processData:!1,contentType:!1,sign:l,success:function(e){a&&a(e),s.trigger(EventType.setTTLSuccess,e)},error:function(e){r&&r(e||{error_msg:"未知错误!"}),s.trigger(EventType.setTTLError,e||{error_msg:"未知错误!"})}};ajax(c)}))},WosSys.prototype.cancelUpload=function(e){var t=this.tasks[e];t&&(t.state="cancel",t.cancel(),this.trigger("cancelUpload",e))},WosSys.prototype.pauseUpload=function(e){var t=this.tasks[e];t&&(t.state="paused",t.pause(e),this.trigger("pauseUpload",e))},WosSys.prototype.resumeUpload=function(e){var t=this.tasks[e];t&&(t.state="uploading",t.resume(e),this.trigger("resumeUpload",e))},WosSys.prototype.getSHA1=function(e,t){var a=function(e){var a=e.content||e.result;return t(a?getrealSHA1(a):"")},r=function(){t("")},n=new FileReader,o={file:e,reader:n,offset:0,data:e.slice(0,e.size),isGetSHA:!0,onload:a,onerror:r};readAsBinStr.call(this,o)},WosSys.prototype.isCanUse=function(){return"undefined"!=typeof FileReader},WosSys.prototype.upload=function(){preCheckUploadFile.call(this,arguments[0],arguments[1])},WosSys}));