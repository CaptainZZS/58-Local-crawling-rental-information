var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(t,n,e){if(e.get||e.set)throw new TypeError("ES3 does not support getters and setters.");t!=Array.prototype&&t!=Object.prototype&&(t[n]=e.value)},$jscomp.getGlobal=function(t){return"undefined"!=typeof window&&window===t?t:"undefined"!=typeof global&&null!=global?global:t},$jscomp.global=$jscomp.getGlobal(this),$jscomp.SYMBOL_PREFIX="jscomp_symbol_",$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){},$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)},$jscomp.symbolCounter_=0,$jscomp.Symbol=function(t){return $jscomp.SYMBOL_PREFIX+(t||"")+$jscomp.symbolCounter_++},$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var t=$jscomp.global.Symbol.iterator;t||(t=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator")),"function"!=typeof Array.prototype[t]&&$jscomp.defineProperty(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}}),$jscomp.initSymbolIterator=function(){}},$jscomp.arrayIterator=function(t){var n=0;return $jscomp.iteratorPrototype((function(){return n<t.length?{done:!1,value:t[n++]}:{done:!0}}))},$jscomp.iteratorPrototype=function(t){return $jscomp.initSymbolIterator(),t={next:t},t[$jscomp.global.Symbol.iterator]=function(){return this},t},$jscomp.iteratorFromArray=function(t,n){$jscomp.initSymbolIterator(),t instanceof String&&(t+="");var e=0,o={next:function(){if(e<t.length){var i=e++;return{value:n(i,t[i]),done:!1}}return o.next=function(){return{done:!0,value:void 0}},o.next()}};return o[Symbol.iterator]=function(){return o},o},$jscomp.polyfill=function(t,n,e,o){if(n){for(e=$jscomp.global,t=t.split("."),o=0;o<t.length-1;o++){var i=t[o];i in e||(e[i]={}),e=e[i]}t=t[t.length-1],o=e[t],n=n(o),n!=o&&null!=n&&$jscomp.defineProperty(e,t,{configurable:!0,writable:!0,value:n})}},document.domain="58.com";var GETSTATUS="//im.58.com/common/common/are_users_online";(function(){window.JSON||(window.JSON={parse:function(a){return eval("("+a+")")},stringify:function(){var t=Object.prototype.toString,n=Array.isArray||function(n){return"[object Array]"===t.call(n)},e={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},o=function(t){return e[t]||"\\u"+(t.charCodeAt(0)+65536).toString(16).substr(1)},i=/[\\"\u0000-\u001F\u2028\u2029]/g;return function e(r){if(null==r)return"null";if("number"===typeof r)return isFinite(r)?r.toString():"null";if("boolean"===typeof r)return r.toString();if("object"===typeof r){if("function"===typeof r.toJSON)return e(r.toJSON());if(n(r)){for(var c="[",a=0;a<r.length;a++)c+=(a?", ":"")+e(r[a]);return c+"]"}if("[object Object]"===t.call(r)){for(a in c=[],r)r.hasOwnProperty(a)&&c.push(e(a)+": "+e(r[a]));return"{"+c.join(", ")+"}"}}return'"'+r.toString().replace(i,o)+'"'}}()})})(),function(t){var n=t.$,e={},o=null,i=null,r=!1,c={NORMAL:{height:574,width:780},MIN:{height:66,width:312}};e.init=function(){this.initOnlineStatus((function(){t.webimconfig&&t.webimconfig.onBtnInited&&t.webimconfig.onBtnInited()}))},e.createIframe=function(t){o=document.createElement("IFRAME"),o.style.position="fixed",o.style.right=0,o.style.bottom="-100%",o.style.zIndex=9999;var n="//webim.58.com/index?p=rb&_="+(new Date).getTime();o.src=t?n+"&opts="+encodeURIComponent(t):n,o.id="webimIframe",o.frameBorder=0,o.scrolling="no",o.width=0,o.height=0,o.name="webim",o.allow="microphone; camera",document.body.appendChild(o)},e.initOnlineStatus=function(t){var e=this,o=[],i={};n(".im-chat, .im-online-status").each((function(t,n){t=e.getData(n),n=e.getDataEuid(n),(t||n)&&(9999==t.usersource?i[(t?t.userid:n||null).toString()]=!0:(t&&o.push(t.userid),n&&o.push(n)))}));var r=function(t){n(".im-chat, .im-online-status").each((function(o,i){o=e.getData(i);var r=e.getDataEuid(i);(o||r)&&(n(i).removeClass("im-online").removeClass("im-offline"),o&&n(i).addClass(t[o.userid.toString()]?"im-online":"im-offline"),r&&n(i).addClass(t[r.toString()]?"im-online":"im-offline"))}))};0===o.length?(t&&t(),0<Object.keys(i).length&&r(i)):n.ajax({url:GETSTATUS,type:"get",dataType:"jsonp",data:{userid:123,targetids:o.join(",")},success:function(e){0==e.error_code&&n(e.data.results).each((function(t,n){i[n.id.toString()]="1"==n.is_online})),r(i),t&&t()},fail:function(n){r({}),t&&t()}})},e.initClick=function(){var e=this,c=function(){var i=e.getData(n(this));i&&(r?o.contentWindow.chatTo(i):t.CL.invoke("popuplogin",{source:"webim",callback:function(){var t=setInterval((function(){r&&(clearInterval(t),o.contentWindow.chatTo(i))}),200)},isCheckSecretMobile:!0}))};n(document).on?n(document).on("click",".im-chat",c):n(document).delegate&&n(document).delegate(".im-chat","click",c),c=function(t){var e=!0,o=[];if(o.push(document.getElementById("bindContent")),o.push(document.getElementById("wl_jb_state")),o.push(document.getElementById("wl_jb_list")),o.push(document.getElementById("face-verify")),n.each(o,(function(o,i){if(i&&n.contains(i,t.target))return e=!1})),-1<["wl-close-btn","closedxx","wl-active-submit","wl-active-back"].indexOf(t.target.className)&&(e=!1),e){var r=!1;n(".im-chat").each((function(e,o){if(o===t.target||n.contains(o,t.target))return r=!0,!1})),n(".imBtn").each((function(e,o){if(o===t.target||n.contains(o,t.target))return r=!0,!1})),r||i&&i.minimize()}},n("body").on?n("body").on("click",c):n("body").delegate&&n("body").delegate(null,"click",c)},e.getData=function(t){if(t=n(t).attr("data-im")){var e;try{t=decodeURIComponent(t),e=JSON.parse(t)}catch(o){}return e}return null},e.getDataEuid=function(t){return(t=n(t).attr("data-id"))?t:null},e.onAppBegin=function(){r=!1},e.onAppCreated=function(n){o.style.bottom=0,i=n;var e=function(t){t=c[t],o.width=t.width,o.height=t.height};n.addEventListener("appstatusChanged",(function(t){"NORMAL"!=t&&"MIN"!=t&&(t="NORMAL"),e(t)})),n.addEventListener("iframePosChanged",(function(t,n){o.style.bottom=n.bottom?n.bottom:0,o.style.right=n.right?n.right:0})),n.addEventListener("fullscreenChanged",function(){var t,n;return function(e){e?(t=o.width,n=o.height,o.width="100%",o.height="100%"):(o.width=t||c.NORMAL.width,o.height=n||c.NORMAL.height)}}()),n.addEventListener("windowFocus",(function(){t.focus()})),n.minimize(),e("MIN"),r=!0,t.webimconfig&&t.webimconfig.onAppCreated&&t.webimconfig.onAppCreated()},n((function(){var n,o=function(t){var n=document.createElement("link");n.type="text/css",n.rel="stylesheet",n.href=t,document.getElementsByTagName("head")[0].appendChild(n)},i=(new Date).getTime(),r=function(t){var n=document.createElement("script");n.src=t,document.body.appendChild(n)};if(r("//j1.58cdn.com.cn/resource/xxzl/wl/wl_pc.js"),t.CL&&t.CL.version||(r("//j1.58cdn.com.cn/componentsLoader/dist/ComponentsLoader_v"+i+".js"),o("//c.58cdn.com.cn/componentsLoader/dist/CompontsLoader_v"+i+".css")),t.webimconfig&&t.webimconfig.initOpts)try{n=JSON.stringify(t.webimconfig.initOpts)}catch(c){}e.createIframe(n),e.initClick(),e.initOnlineStatus((function(){t.webimconfig&&t.webimconfig.onBtnInited&&t.webimconfig.onBtnInited()}))})),t.WebIM=e}(window);